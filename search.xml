<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hello World</title>
    <url>/2020/03/22/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>
]]></content>
      <categories>
        <category>æŠ€æœ¯å¹¿è§’</category>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>å›½åº†å‰å­¦æ´—æ‰‹</title>
    <url>/2018/09/30/%E5%9B%BD%E5%BA%86%E5%89%8D%E5%AD%A6%E6%B4%97%E6%89%8B/</url>
    <content><![CDATA[<p>ä»Šå¤©äººå°‘ï¼Œæˆ‘ä»¬åå°æœˆäº®ï¼Œç„¶åç»™ä»–ä»¬æ¯äººç”¨äº†å…æ´—æ´—æ‰‹æ¶²ï¼Œæ´—å°æ‰‹ï¼Œå›½åº†èŠ‚å‡ºå»ä¸è¦å¿˜è®°å¸¦å“¦</p>
<a id="more"></a>

<p align="center"><embed src='http://player.youku.com/player.php/sid/XMzg0Mzk0NDI5Ng==/v.swf' allowFullScreen='true' quality='high' width='480' height='400' align='middle' allowScriptAccess='always' type='application/x-shockwave-flash'></embed></p>

<p><img src="%E5%9B%BD%E5%BA%86%E5%89%8D%E5%AD%A6%E6%B4%97%E6%89%8B/01.jpg" alt=""></p>
<p>å›å›è€å¸ˆ:<br>ä»–ä»¬è®©æˆ‘å‘ç»™ä½ ä»¬ğŸ˜‚</p>
<p>å°æ…ˆçš„æ™šæ‰˜ç­åˆ¶ä½œäº”æ˜Ÿçº¢æ——</p>
<p align="center"><embed src='http://player.youku.com/player.php/sid/XMzg0Mzk0OTg4MA==/v.swf' allowFullScreen='true' quality='high' width='480' height='400' align='middle' allowScriptAccess='always' type='application/x-shockwave-flash'></embed></p>]]></content>
      <categories>
        <category>å¾€æ˜”è¿½å¿†</category>
        <category>å°äºŒç­</category>
      </categories>
      <tags>
        <tag>å®å®æˆé•¿</tag>
      </tags>
  </entry>
  <entry>
    <title>å®å®ä»¬ä¸Šç­å•¦</title>
    <url>/2018/09/29/%E5%AE%9D%E5%AE%9D%E4%BB%AC%E4%B8%8A%E7%8F%AD%E5%95%A6/</url>
    <content><![CDATA[<p>å›å›è€å¸ˆ:<br>æœ€è¿‘æˆ‘ä»¬å­©å­çš„è§’è‰²æ¸¸æˆæ…¢æ…¢è¿›å…¥çŠ¶æ€äº†ï¼Œä½†ä¹Ÿæœ‰å‡ ä¸ªå­©å­æ²‰è¿·äºç§¯æœ¨æ¸¸æˆæ— æ³•è‡ªæ‹”ï¼Œæˆ‘ä»¬å¸Œæœ›å®¶é•¿ä»¬åœ¨å®¶é‡Œä¹Ÿå¯ä»¥å’Œå­©å­ä»¬ä¸€èµ·ç©è§’è‰²æ‰®æ¼”æ¸¸æˆï¼Œå’Œå­©å­å¤šäº’åŠ¨ï¼Œä¹Ÿå¯ä»¥æ‹“å®½æ€è·¯ï¼Œå¯ä»¥åšç°å®ç”Ÿæ´»ä¸­ä¸èƒ½åšçš„ï¼Œæ¯”å¦‚ä»™å¥³å•Šï¼Œå…¬ä¸»å•Šï¼Œå°å£«å…µç­‰ç­‰</p>
<a id="more"></a>

<p><img src="%E5%AE%9D%E5%AE%9D%E4%BB%AC%E4%B8%8A%E7%8F%AD%E5%95%A6/01.jpg" alt=""></p>
<p><img src="%E5%AE%9D%E5%AE%9D%E4%BB%AC%E4%B8%8A%E7%8F%AD%E5%95%A6/02.jpg" alt="02"></p>
<p><img src="%E5%AE%9D%E5%AE%9D%E4%BB%AC%E4%B8%8A%E7%8F%AD%E5%95%A6/03.jpg" alt="03"></p>
<p><img src="%E5%AE%9D%E5%AE%9D%E4%BB%AC%E4%B8%8A%E7%8F%AD%E5%95%A6/04.jpg" alt="04"></p>
<p><img src="%E5%AE%9D%E5%AE%9D%E4%BB%AC%E4%B8%8A%E7%8F%AD%E5%95%A6/05.jpg" alt="05"></p>
<p><img src="%E5%AE%9D%E5%AE%9D%E4%BB%AC%E4%B8%8A%E7%8F%AD%E5%95%A6/06.jpg" alt="06"></p>
<p><img src="%E5%AE%9D%E5%AE%9D%E4%BB%AC%E4%B8%8A%E7%8F%AD%E5%95%A6/07.jpg" alt="07"></p>
<p><img src="%E5%AE%9D%E5%AE%9D%E4%BB%AC%E4%B8%8A%E7%8F%AD%E5%95%A6/08.jpg" alt="08"></p>
<p><img src="%E5%AE%9D%E5%AE%9D%E4%BB%AC%E4%B8%8A%E7%8F%AD%E5%95%A6/09.jpg" alt="09"></p>
<p><img src="%E5%AE%9D%E5%AE%9D%E4%BB%AC%E4%B8%8A%E7%8F%AD%E5%95%A6/10.jpg" alt="10"></p>
<p><img src="%E5%AE%9D%E5%AE%9D%E4%BB%AC%E4%B8%8A%E7%8F%AD%E5%95%A6/11.jpg" alt="11"></p>
<p><img src="%E5%AE%9D%E5%AE%9D%E4%BB%AC%E4%B8%8A%E7%8F%AD%E5%95%A6/12.jpg" alt="12"></p>
<p><img src="%E5%AE%9D%E5%AE%9D%E4%BB%AC%E4%B8%8A%E7%8F%AD%E5%95%A6/13.jpg" alt="13"></p>
<p>å›å›è€å¸ˆ:<br>ä»Šå¤©æˆ‘ä»¬è¿˜è®¤è¯†äº†äº”æ˜Ÿçº¢æ——ï¼ŒçŸ¥é“è‡ªå·±æ˜¯ä¸€ä¸ªä¸­å›½äººï¼Œæˆ‘å‘Šè¯‰ä»–ä»¬è¿‡å‡ å¤©è¦ç»™ç¥–å›½å¦ˆå¦ˆè¿‡ç”Ÿæ—¥äº†ï¼Œè¦ä¼‘æ¯ä¸ƒå¤©ï¼Œæœ‰å­©å­è¿˜åé©³è¯´ä¸è¡Œï¼Œä¼‘æ¯ä¸‰å¤©å°±å¤Ÿäº†ï¼Œå“ˆå“ˆæˆ‘è¿˜å‘Šè¯‰ä»–ä»¬ç¥–å›½å¦ˆå¦ˆä¼šè¯·ä»–ä»¬åƒç”Ÿæ—¥è›‹ç³•çš„</p>
<p>åˆé¤å‰è¿˜é¢å¤–å­¦äº†ä¸€é¦–æ­Œï¼Œé€ç»™æˆ‘ä»¬çš„ç¥–å›½å¦ˆå¦ˆ</p>
<p><a href="https://music.163.com/#/song?id=498555737&market=baiduqk" target="_blank" rel="noopener">å„¿æ­Œ-ç¥–å›½ç¥–å›½æˆ‘çˆ±ä½ </a></p>
]]></content>
      <categories>
        <category>å¾€æ˜”è¿½å¿†</category>
        <category>å°äºŒç­</category>
      </categories>
      <tags>
        <tag>å®å®æˆé•¿</tag>
      </tags>
  </entry>
  <entry>
    <title>æœˆé¥¼çƒ˜åŸ¹å’Œå°å°æ¬è¿å·¥</title>
    <url>/2018/09/21/%E6%9C%88%E9%A5%BC%E7%83%98%E5%9F%B9%E5%92%8C%E5%B0%8F%E5%B0%8F%E6%90%AC%E8%BF%90%E5%B7%A5/</url>
    <content><![CDATA[<p>ä¸­ç§‹èŠ‚å¿«åˆ°äº†ï¼Œè€å¸ˆå¸¦å®å®ä»¬ä¸€èµ·åšäº†æœˆé¥¼ï¼Œæ‹¿å»çƒ¤äº†ï¼Œå®å®ä»¬è¿˜å¸®è€å¸ˆä¸€èµ·æ¬æ¡Œå­ï¼Œè™½ç„¶ç»“å±€å·®å¼ºäººæ„ï¼Œä½†æ˜¯å­©å­ä»¬éƒ½å¾ˆå¼€å¿ƒå‘¢ï¼</p>
<a id="more"></a>

<p align="center"><embed src='http://player.youku.com/player.php/sid/XMzg0Mzk0NDg5Ng==/v.swf' allowFullScreen='true' quality='high' width='480' height='400' align='middle' allowScriptAccess='always' type='application/x-shockwave-flash'></embed></p>

<p><img src="%E6%9C%88%E9%A5%BC%E7%83%98%E5%9F%B9%E5%92%8C%E5%B0%8F%E5%B0%8F%E6%90%AC%E8%BF%90%E5%B7%A5/01.jpg" alt=""></p>
<p><img src="%E6%9C%88%E9%A5%BC%E7%83%98%E5%9F%B9%E5%92%8C%E5%B0%8F%E5%B0%8F%E6%90%AC%E8%BF%90%E5%B7%A5/02.jpg" alt="02"></p>
<p><img src="%E6%9C%88%E9%A5%BC%E7%83%98%E5%9F%B9%E5%92%8C%E5%B0%8F%E5%B0%8F%E6%90%AC%E8%BF%90%E5%B7%A5/03.jpg" alt="03"></p>
<p><img src="%E6%9C%88%E9%A5%BC%E7%83%98%E5%9F%B9%E5%92%8C%E5%B0%8F%E5%B0%8F%E6%90%AC%E8%BF%90%E5%B7%A5/04.jpg" alt="04"></p>
<p><img src="%E6%9C%88%E9%A5%BC%E7%83%98%E5%9F%B9%E5%92%8C%E5%B0%8F%E5%B0%8F%E6%90%AC%E8%BF%90%E5%B7%A5/05.jpg" alt="05"></p>
<p><img src="%E6%9C%88%E9%A5%BC%E7%83%98%E5%9F%B9%E5%92%8C%E5%B0%8F%E5%B0%8F%E6%90%AC%E8%BF%90%E5%B7%A5/06.jpg" alt="06"></p>
<p><img src="%E6%9C%88%E9%A5%BC%E7%83%98%E5%9F%B9%E5%92%8C%E5%B0%8F%E5%B0%8F%E6%90%AC%E8%BF%90%E5%B7%A5/07.jpg" alt="07"></p>
<p><img src="%E6%9C%88%E9%A5%BC%E7%83%98%E5%9F%B9%E5%92%8C%E5%B0%8F%E5%B0%8F%E6%90%AC%E8%BF%90%E5%B7%A5/08.jpg" alt="08"></p>
<p><img src="%E6%9C%88%E9%A5%BC%E7%83%98%E5%9F%B9%E5%92%8C%E5%B0%8F%E5%B0%8F%E6%90%AC%E8%BF%90%E5%B7%A5/09.jpg" alt="09"></p>
<p><img src="%E6%9C%88%E9%A5%BC%E7%83%98%E5%9F%B9%E5%92%8C%E5%B0%8F%E5%B0%8F%E6%90%AC%E8%BF%90%E5%B7%A5/20.jpg" alt="20"></p>
<p><img src="%E6%9C%88%E9%A5%BC%E7%83%98%E5%9F%B9%E5%92%8C%E5%B0%8F%E5%B0%8F%E6%90%AC%E8%BF%90%E5%B7%A5/00.png" alt=""></p>
]]></content>
      <categories>
        <category>å¾€æ˜”è¿½å¿†</category>
        <category>å°äºŒç­</category>
      </categories>
      <tags>
        <tag>å®å®æˆé•¿</tag>
      </tags>
  </entry>
  <entry>
    <title>å®å®ä»¬å¼€å§‹æ¼±å£äº†</title>
    <url>/2018/09/20/%E5%AE%9D%E5%AE%9D%E4%BB%AC%E5%BC%80%E5%A7%8B%E6%BC%B1%E5%8F%A3%E4%BA%86/</url>
    <content><![CDATA[<p>æ‘˜è¦ï¼šä»Šå¤©å¼€å§‹æˆ‘ä»¬è®©å®å®ä»¬å¼€å§‹æ¼±å£äº†ï¼Œæ‰€ä»¥å›å®¶ä¹Ÿè¦ç»§ç»­ä¿æŒè¿™ä¸ªå¥½ä¹ æƒ¯å“¦ï½</p>
<a id="more"></a>


<p>å›å›è€å¸ˆè¯­å½•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">å„ä½äº²ä»¬ï¼Œé€šè¿‡æ˜¨å¤©çš„å®¶é•¿ä¼šï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å®¶é•¿å›å»çš„åŠªåŠ›ï¼Œä»Šå¤©åˆé¥­æ˜æ˜¾è¿›æ­¥çš„å®å®æœ‰ï¼š@å¼ ç‘¾å®‰å¦ˆå¦ˆâ€…@æ“æ¢“æ¡å¦ˆå¦ˆâ€…@ä½†é¢å®¸å¦ˆå¦ˆâ€…@ä½•æ™Ÿç¿å¦ˆå¦ˆâ€…@å¼ æ¬è§…å¦ˆå¦ˆâ€…@ä¸¥é­æ…ˆå¦ˆå¦ˆâ€…@ç‹æ™Ÿå®å¦ˆå¦ˆâ€…ï¼Œå…¶ä»–å®å®ä»¬ç»§ç»­åŠ æ²¹å“¦ï½</span><br><span class="line"></span><br><span class="line">åƒé¥­æˆ‘ä»¬æ˜¯å’Œå­©å­ä»¬è¯´ï¼šå°æ±½è½¦è£…è£…æ»¡ï¼Œè½¬å¼¯é€åˆ°å±±æ´é‡Œï¼Œæ»‘æ»‘æ¢¯æ»‘åˆ°è‚šå­é‡Œï¼Œå› ä¸ºå¾ˆå¤šå®å®å‹ºå­ä¸å¯¹ç€å˜´å·´ï¼Œæ‰€ä»¥é¥­å®å®æ‰åœ¨æ¡Œå­ä¸Šéƒ½å“­äº†ã€‚</span><br><span class="line"></span><br><span class="line">å¦å¤–ï¼Œä»Šå¤©æˆ‘ä»¬ç»ƒä¹ äº†å®å®ä»¬æ’é˜Ÿèµ°æ¥¼æ¢¯ï¼Œå¤§å¤šæ•°å·²ç»åƒæ¨¡åƒæ ·çš„äº†ï¼Œä¸Šä¸‹æ¥¼æ¢¯é å³èµ°äº†ï¼Œä»Šå¤©çš„è¿åŠ¨é‡æœ‰ç‚¹å¤§ï¼Œæ‰€ä»¥ä¼°è®¡å®è´ä»¬ä»Šæ™šåˆè¦æ—©æ—©ç¡è§‰äº†.</span><br></pre></td></tr></table></figure>



<p>ä»Šå¤©å¼€å§‹æˆ‘ä»¬è®©å®å®ä»¬å¼€å§‹æ¼±å£äº†ï¼Œæ‰€ä»¥å›å®¶ä¹Ÿè¦ç»§ç»­ä¿æŒè¿™ä¸ªå¥½ä¹ æƒ¯å“¦ï½</p>
<p><img src="%E5%AE%9D%E5%AE%9D%E4%BB%AC%E5%BC%80%E5%A7%8B%E6%BC%B1%E5%8F%A3%E4%BA%86/01.jpg" alt=""></p>
]]></content>
      <categories>
        <category>å¾€æ˜”è¿½å¿†</category>
        <category>å°äºŒç­</category>
      </categories>
      <tags>
        <tag>å®å®æˆé•¿</tag>
      </tags>
  </entry>
  <entry>
    <title>å®¶é•¿ä¼š</title>
    <url>/2018/09/19/%E5%AE%B6%E9%95%BF%E4%BC%9A/</url>
    <content><![CDATA[<p>æ‘˜è¦ï¼šå¹¼å„¿å›­å¼€å­¦ç¬¬10å¤©ï¼Œå®å®ä»¬é€æ¸ç¨³å®šï¼Œèå…¥è¿™ä¸ªå¤§å®¶åº­ï¼Œä»Šå¤©è€å¸ˆå’Œæˆ‘ä»¬åˆ†äº«å®å®ä»¬çš„å¹¼å„¿å›­æ—¥å¸¸ç”Ÿæ´»ï¼Œä»¥åŠæˆ‘ä»¬å¯¹æˆ‘ä»¬å®¶é•¿çš„ä¸€äº›å»ºè®®ï¼Œéå¸¸åœ°ç”¨å¿ƒã€‚</p>
<a id="more"></a>

<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/001.jpg" alt=""></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/002.jpg" alt="002"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/003.jpg" alt="003"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/004.jpg" alt="004"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/005.jpg" alt="005"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/006.jpg" alt="006"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/007.jpg" alt="007"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/008.jpg" alt="008"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/010.jpg" alt="010"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/011.jpg" alt="011"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/012.jpg" alt="012"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/013.jpg" alt="013"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/014.jpg" alt="014"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/015.jpg" alt="015"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/016.jpg" alt="016"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/017.jpg" alt="017"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/018.jpg" alt="018"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/019.jpg" alt="019"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/020.jpg" alt="020"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/021.jpg" alt="021"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/022.jpg" alt="022"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/023.jpg" alt="023"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/024.jpg" alt="024"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/025.jpg" alt="025"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/026.jpg" alt="026"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/027.jpg" alt="027"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/028.jpg" alt="028"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/029.jpg" alt="029"></p>
<p><img src="%E5%AE%B6%E9%95%BF%E4%BC%9A/030.jpg" alt="030"></p>
]]></content>
      <categories>
        <category>å¾€æ˜”è¿½å¿†</category>
        <category>å°äºŒç­</category>
      </categories>
      <tags>
        <tag>å®å®æˆé•¿</tag>
      </tags>
  </entry>
  <entry>
    <title>å‘æœˆäº®è¯´æ™šå®‰</title>
    <url>/2018/09/10/%E5%90%91%E6%9C%88%E4%BA%AE%E8%AF%B4%E6%99%9A%E5%AE%89/</url>
    <content><![CDATA[<p>æ‘˜è¦ï¼šä»Šå¤©ä¸­åˆè®²äº†ä¸€ä¸ªå…³äºã€Œæ™šå®‰ï¼Œæœˆäº®ã€çš„ç¡å‰æ•…äº‹ï¼Œæœ€åçŒ«å¤´é¹°å¯¹æœˆäº®è¯´äº†æ™šå®‰ï¼Œå¤§å®¶ä»Šå¤©ç¡å‰è¿˜å¯ä»¥å’Œå®å®è¯´å“¦ï¼Œå†åŠ ä¸€äº›å…¶ä»–çš„åŠ¨ç‰©å®å®</p>
<a id="more"></a>

<p><img src="%E5%90%91%E6%9C%88%E4%BA%AE%E8%AF%B4%E6%99%9A%E5%AE%89/01.jpg" alt=""></p>
<p><img src="%E5%90%91%E6%9C%88%E4%BA%AE%E8%AF%B4%E6%99%9A%E5%AE%89/02.jpg" alt="02"></p>
<p><img src="%E5%90%91%E6%9C%88%E4%BA%AE%E8%AF%B4%E6%99%9A%E5%AE%89/03.jpg" alt="03"></p>
<p><img src="%E5%90%91%E6%9C%88%E4%BA%AE%E8%AF%B4%E6%99%9A%E5%AE%89/04.jpg" alt="04"></p>
<p><img src="%E5%90%91%E6%9C%88%E4%BA%AE%E8%AF%B4%E6%99%9A%E5%AE%89/05.jpg" alt="05"></p>
<p><img src="%E5%90%91%E6%9C%88%E4%BA%AE%E8%AF%B4%E6%99%9A%E5%AE%89/06.jpg" alt="06"></p>
<p><img src="%E5%90%91%E6%9C%88%E4%BA%AE%E8%AF%B4%E6%99%9A%E5%AE%89/07.jpg" alt="07"></p>
]]></content>
      <categories>
        <category>å¾€æ˜”è¿½å¿†</category>
        <category>å°äºŒç­</category>
      </categories>
      <tags>
        <tag>å®å®æˆé•¿</tag>
      </tags>
  </entry>
  <entry>
    <title>çªç ´é˜¿é‡Œé™åˆ¶å®ç°&quot;RDS For MySQL 5.7åˆ°è‡ªå»ºMySQLä¸»ä»&quot;</title>
    <url>/2018/08/22/rds-for-mysql-5-7%E5%88%B0%E8%87%AA%E5%BB%BAMySQL%E4%B8%BB%E4%BB%8E%E4%B9%8B%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3user%E8%A1%A8%E5%AE%9E%E7%8E%B0%E4%BB%8E%E5%BA%93%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E6%9B%B4%E6%94%B9%E5%8A%9F%E8%83%BD/</url>
    <content><![CDATA[<p>æ‘˜è¦: é˜¿é‡Œäº‘çš„RDS For MySQL 5.7 åˆ°çº¿ä¸‹IDCæœºæˆ¿çš„ä¸»ä»æ­å»ºç›¸ä¿¡çœ‹å®˜æ–¹æ–‡æ¡£å°±å¯ä»¥å®Œæˆï¼Œä½†æ˜¯æ­å»ºä¹‹åå´å‘ç°æ— æ³•åœ¨æœ¬åœ°è¿›è¡Œè®¤è¯æƒé™çš„ç®¡ç†ï¼Œè¿™æ˜¯ä¸ºä½•ï¼Ÿè€Œé˜¿é‡Œå®˜æ–¹æ¨èä½¿ç”¨DTSåŒæ­¥å·¥å…·å»å®ç°ï¼Œè¿™ä¸ªè´¹ç”¨ç€å®ä¸å°‘ï¼Œåˆæ˜¯å¦èƒ½å¤Ÿç ´è§£å‘¢ï¼Ÿæœ¬æ–‡è¯¦è§£å¦‚ä½•æš´åŠ›ç ´è§£userè¡¨å®ç°ä»åº“ç”¨æˆ·æƒé™æ›´æ”¹åŠŸèƒ½</p>
<a id="more"></a>

<h1 id="æ•…äº‹èƒŒæ™¯"><a href="#æ•…äº‹èƒŒæ™¯" class="headerlink" title="æ•…äº‹èƒŒæ™¯"></a>æ•…äº‹èƒŒæ™¯</h1><h2 id="æ•°æ®åº“æ˜ç»†"><a href="#æ•°æ®åº“æ˜ç»†" class="headerlink" title="æ•°æ®åº“æ˜ç»†"></a>æ•°æ®åº“æ˜ç»†</h2><p>è¯´åœ¨å‰é¢ï¼š</p>
<ul>
<li>äº‘ä¸Šæ•°æ®åº“ï¼š RDS For MySQL 5.7.20 æ™®é€šç”¨æˆ·æƒé™</li>
<li>IDCæ•°æ®åº“: MySQL 5.7.20 </li>
</ul>
<h2 id="æ•…äº‹æƒ…èŠ‚"><a href="#æ•…äº‹æƒ…èŠ‚" class="headerlink" title="æ•…äº‹æƒ…èŠ‚"></a>æ•…äº‹æƒ…èŠ‚</h2><p>ç°éœ€è¦æ­å»ºRDS For MySQL åˆ°çº¿ä¸‹IDCæœºæˆ¿çš„ä¸»ä»ï¼Œé—®é¢˜å¦‚ä¸‹ï¼š</p>
<h3 id="åŒæ­¥ç³»ç»Ÿè¡¨å¤±è´¥"><a href="#åŒæ­¥ç³»ç»Ÿè¡¨å¤±è´¥" class="headerlink" title="åŒæ­¥ç³»ç»Ÿè¡¨å¤±è´¥"></a>åŒæ­¥ç³»ç»Ÿè¡¨å¤±è´¥</h3><h4 id="æ•…éšœåŸå› "><a href="#æ•…éšœåŸå› " class="headerlink" title="æ•…éšœåŸå› "></a>æ•…éšœåŸå› </h4><ul>
<li>RDS For MySQL 5.7.20 åˆ°è‡ªå»ºMySQL 5.7.20ä¸»ä»åŒæ­¥å¼‚å¸¸çš„åŸå› ä¸ºRDSä¸MySQLå®˜æ–¹ç‰ˆæœ¬ä½¿ç”¨çš„ç³»ç»Ÿåº“ä¸åŒ</li>
<li>è‡ªå»ºMySQL 5.7.20 æ— æ³•åŒæ­¥ä¸»åº“RDSçš„ç³»ç»Ÿè¡¨</li>
<li>è‡ªå»ºMySQL 5.7.20 æ¢å¤RDSçš„å…¨å¤‡ä»½æ•°æ®åæ— æ³•æ‰§è¡Œæˆæƒè¯­å¥,æŠ¥é”™å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ERROR 1785 (HY000): Statement violates GTID consistency: Updates to non-transactional tables can only be done in either autocommitted statements or single-statement transactions, and never in the same statement as updates to transactional tables.</span><br></pre></td></tr></table></figure>

<ul>
<li>è‡ªå»ºMySQL 5.7.20 æ¢å¤RDSçš„å…¨å¤‡ä»½æ•°æ®åæ— æ³•å¯¹ç³»ç»Ÿè¡¨æ‰§è¡Œæ›´æ–°æ“ä½œï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ERROR 1064 (42000): Unknown trigger has an error in its body: 'Unknown system variable 'maintain_user_list''</span><br></pre></td></tr></table></figure>

<h4 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h4><ul>
<li>è·³è¿‡ç³»ç»Ÿè¡¨çš„åŒæ­¥</li>
</ul>
<hr>
<h3 id="ä»åº“æ·»åŠ è®¤è¯æˆæƒå¤±è´¥"><a href="#ä»åº“æ·»åŠ è®¤è¯æˆæƒå¤±è´¥" class="headerlink" title="ä»åº“æ·»åŠ è®¤è¯æˆæƒå¤±è´¥"></a>ä»åº“æ·»åŠ è®¤è¯æˆæƒå¤±è´¥</h3><p>RDS For MySQL 5.7.20 åˆ°è‡ªå»ºMySQL 5.7.20 æ­å»ºä¸»ä»åŒæ­¥æ¶æ„:</p>
<ul>
<li>é…ç½®ä»åº“ä¸åŒæ­¥RDSä¸»åº“çš„ç³»ç»Ÿè¡¨</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># skip rep</span><br><span class="line">replicate_wild_ignore_table&#x3D;mysql.%</span><br><span class="line">replicate_wild_ignore_table&#x3D;sys.%</span><br><span class="line">replicate_wild_ignore_table&#x3D;information_schema.%</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>éç³»ç»Ÿåº“æ•°æ®åŒæ­¥æ­£å¸¸</strong></li>
<li>ä»åº“æ— æ³•æ‰§è¡Œgrantå‘½ä»¤ï¼Œå³æ— æ³•æ·»åŠ æˆæƒä¿¡æ¯</li>
<li>ä»åº“æ— æ³•å¯¹ç³»ç»Ÿè¡¨mysql.userè¡¨æ‰§è¡Œinsertæ“ä½œ</li>
<li>ä»åº“æ— æ³•å¯¹ç³»ç»Ÿè¡¨mysql.userè¡¨æ‰§è¡Œupdatæ“ä½œ</li>
</ul>
<p>æŠ¥é”™å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ERROR 1064 (42000): Unknown trigger has an error in its body: 'Unknown system variable 'maintain_user_list''</span><br></pre></td></tr></table></figure>

<h4 id="å¤±è´¥åŸå› "><a href="#å¤±è´¥åŸå› " class="headerlink" title="å¤±è´¥åŸå› "></a>å¤±è´¥åŸå› </h4><p><strong>é˜¿é‡Œå·¥å•ç­”å¤</strong>ï¼šRDS ç›®å‰å·²ç»ä¸æ”¯æŒ MYISAM å¼•æ“åˆ›å»ºäº†ã€‚æ‰€ä»¥å¦‚æœæ˜¯é€šè¿‡è‡ªå»ºçš„replication åŒæ­¥ å°±ä¼šæœ‰è¿™ä¸ªé—®é¢˜çš„ï¼ŒRDS ç»Ÿä¸€INNOB å¼•æ“ã€‚<br>å¦‚æœéœ€æ±‚æ˜¯ä»RDS åˆ°è‡ªå»ºæ•°æ®åº“çš„åŒæ­¥å…³ç³»ï¼Œå»ºè®®æ‚¨ä½¿ç”¨DTS åšä¸šåŠ¡æ•°æ®çš„åŒæ­¥ã€‚</p>
<h4 id="æ¢ç´¢è§£å†³æ–¹æ³•"><a href="#æ¢ç´¢è§£å†³æ–¹æ³•" class="headerlink" title="æ¢ç´¢è§£å†³æ–¹æ³•"></a>æ¢ç´¢è§£å†³æ–¹æ³•</h4><h5 id="ä»åº“å°è¯•ä½¿ç”¨MySQL8-0-11"><a href="#ä»åº“å°è¯•ä½¿ç”¨MySQL8-0-11" class="headerlink" title="ä»åº“å°è¯•ä½¿ç”¨MySQL8.0.11"></a>ä»åº“å°è¯•ä½¿ç”¨<code>MySQL8.0.11</code></h5><p>RDS For MySQL 5.7çš„å¤‡ä»½æ–‡ä»¶ åˆ°çº¿ä¸‹è‡ªå»ºMYSQL 8.0.11 æ— æ³•æ¢å¤æ•°æ®ã€‚å› æ­¤è¯¥æ–¹æ³•ä¸å¯è¡Œã€‚</p>
<h5 id="å°è¯•ä¸´æ—¶å…³é—­GTIDæ¨¡å¼"><a href="#å°è¯•ä¸´æ—¶å…³é—­GTIDæ¨¡å¼" class="headerlink" title="å°è¯•ä¸´æ—¶å…³é—­GTIDæ¨¡å¼"></a>å°è¯•ä¸´æ—¶å…³é—­GTIDæ¨¡å¼</h5><ol>
<li>ä¸´æ—¶åœæ­¢slaveåŒæ­¥</li>
<li>ä¿®æ”¹é…ç½®å…³é—­gtidæ¨¡å¼</li>
<li>é‡å¯æœåŠ¡</li>
</ol>
<p>å¯¹ç³»ç»Ÿè¡¨mysql.useræµ‹è¯•æ˜ç»†ï¼š</p>
<table>
<thead>
<tr>
<th>No.</th>
<th>æµ‹è¯•é¡¹ç›®</th>
<th>ç»“æœ</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>æ˜¯å¦èƒ½å¤Ÿæ‰§è¡Œgrantå‘½ä»¤</td>
<td>Ã—</td>
</tr>
<tr>
<td>2</td>
<td>æ˜¯å¦èƒ½å¤Ÿæ‰§è¡Œupdateå‘½ä»¤</td>
<td>Ã—</td>
</tr>
<tr>
<td>3</td>
<td>æ˜¯å¦èƒ½å¤Ÿæ‰§è¡Œinsertå‘½ä»¤</td>
<td>Ã—</td>
</tr>
</tbody></table>
<p>è¯¥æ–¹æ³•åŒæ ·æ— æ³•è§£å†³ã€‚</p>
<h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æƒé™ç›¸å…³çš„ä¸€äº›è¡¨ï¼š</span></span><br><span class="line">SCHEMA_PRIVILEGESï¼šæä¾›äº†æ•°æ®åº“çš„ç›¸å…³æƒé™ï¼Œè¿™ä¸ªè¡¨æ˜¯å†…å­˜è¡¨æ˜¯ä»mysql.dbä¸­æ‹‰å»å‡ºæ¥çš„ã€‚</span><br><span class="line">TABLE_PRIVILEGES:æä¾›çš„æ˜¯è¡¨æƒé™ç›¸å…³ä¿¡æ¯ï¼Œä¿¡æ¯æ˜¯ä» mysql.tables_priv è¡¨ä¸­åŠ è½½çš„</span><br><span class="line">COLUMN_PRIVILEGES ï¼šè¿™ä¸ªè¡¨å¯ä»¥æ¸…æ¥šå°±èƒ½çœ‹åˆ°è¡¨æˆæƒçš„ç”¨æˆ·çš„å¯¹è±¡ï¼Œé‚£å¼ è¡¨é‚£ä¸ªåº“ä»¥åŠæˆäºˆçš„æ˜¯ä»€ä¹ˆæƒé™ï¼Œå¦‚æœæˆæƒçš„æ—¶å€™åŠ ä¸Šwith grant optionçš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å¾—åˆ°PRIVILEGE_TYPEè¿™ä¸ªå€¼å¿…é¡»æ˜¯YESã€‚</span><br><span class="line">USER_PRIVILEGES:æä¾›çš„æ˜¯è¡¨æƒé™ç›¸å…³ä¿¡æ¯ï¼Œä¿¡æ¯æ˜¯ä» mysql.user è¡¨ä¸­åŠ è½½çš„</span><br><span class="line">é€šè¿‡è¡¨æˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ™°çœ‹å¾—åˆ°MySQLæˆæƒçš„å±‚æ¬¡ï¼ŒSCHEMAï¼ŒTABLEï¼ŒCOLUMNçº§åˆ«ï¼Œå½“ç„¶è¿™äº›éƒ½æ˜¯åŸºäºç”¨æˆ·æ¥æˆäºˆçš„</span><br></pre></td></tr></table></figure>

<p>ä»æ•°æ®åº“ç”¨æˆ·æƒé™ç®¡ç†çš„åŸç†å¯ä»¥äº†è§£åˆ°ç®¡ç†ç”¨æˆ·çš„æ˜¯<code>user</code>è¡¨ï¼Œå¦‚æœè¦æ›´ç»†è‡´çš„æƒé™è¿˜éœ€è¦<code>db</code>è¡¨å’Œ<code>tables_priv</code>è¡¨ã€‚<em>ï¼ˆæœ¬æ–‡åªä»userè¡¨ç€æ‰‹ï¼‰</em></p>
<h3 id="æ­¥éª¤æ¦‚è§ˆ"><a href="#æ­¥éª¤æ¦‚è§ˆ" class="headerlink" title="æ­¥éª¤æ¦‚è§ˆ"></a>æ­¥éª¤æ¦‚è§ˆ</h3><ol>
<li>åˆ›å»ºæ–°çš„user_1è¡¨</li>
<li>å¯¹user_1è¡¨æ·»åŠ æ–°çš„ç”¨æˆ·</li>
<li>åœæœåŠ¡</li>
<li>å°†user_1æ›¿æ¢userè¡¨</li>
<li>å¯åŠ¨è¯¥æœåŠ¡</li>
<li>å¯ä»¥é€šè¿‡updateã€insertã€deleteæ“ä½œuserè¡¨æ¥æ·»åŠ æƒé™ï¼ˆgrantæ— æ³•æ“ä½œï¼‰</li>
</ol>
<h3 id="æµ‹è¯•ç¯å¢ƒ"><a href="#æµ‹è¯•ç¯å¢ƒ" class="headerlink" title="æµ‹è¯•ç¯å¢ƒ"></a>æµ‹è¯•ç¯å¢ƒ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@MySQL-01 10:35:  [mysql]&gt; create table user_1 like user;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 10:36:  [mysql]&gt; select * from user_1;</span><br><span class="line">Empty set (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 10:36:  [mysql]&gt; show table status like user;</span><br><span class="line">ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'user' at line 1</span><br><span class="line">root@MySQL-01 10:36:  [mysql]&gt; show table status like 'user_1';</span><br><span class="line">+--------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+-----------+----------+----------------+-----------------------------+</span><br><span class="line">| Name   | Engine | Version | Row_format | Rows | Avg_row_length | Data_length | Max_data_length | Index_length | Data_free | Auto_increment | Create_time         | Update_time         | Check_time | Collation | Checksum | Create_options | Comment                     |</span><br><span class="line">+--------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+-----------+----------+----------------+-----------------------------+</span><br><span class="line">| user_1 | MyISAM |      10 | Dynamic    |    0 |              0 |           0 | 281474976710655 |         1024 |         0 |           NULL | 2019-01-04 10:36:00 | 2019-01-04 10:36:00 | NULL       | utf8_bin  |     NULL |                | Users and global privileges |</span><br><span class="line">+--------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+-----------+----------+----------------+-----------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 10:36:  [mysql]&gt; show table status like 'user';</span><br><span class="line">+------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+---------------------+-----------+----------+----------------+-----------------------------+</span><br><span class="line">| Name | Engine | Version | Row_format | Rows | Avg_row_length | Data_length | Max_data_length | Index_length | Data_free | Auto_increment | Create_time         | Update_time         | Check_time          | Collation | Checksum | Create_options | Comment                     |</span><br><span class="line">+------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+---------------------+-----------+----------+----------------+-----------------------------+</span><br><span class="line">| user | MyISAM |      10 | Dynamic    |    3 |             53 |         160 | 281474976710655 |         2048 |         0 |           NULL | 2015-05-22 15:24:42 | 2019-01-04 09:27:49 | 2015-05-22 15:33:22 | utf8_bin  |     NULL |                | Users and global privileges |</span><br><span class="line">+------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+---------------------+-----------+----------+----------------+-----------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 10:36:  [mysql]&gt; insert into user_1 select * from user;</span><br><span class="line">Query OK, 3 rows affected (0.00 sec)</span><br><span class="line">Records: 3  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">root@MySQL-01 10:36:  [mysql]&gt; select * from user_1;</span><br><span class="line">+-----------+------+----------+-------------+-------------+-------------+-------------+-------------+-----------+-------------+---------------+--------------+-----------+------------+-----------------+------------+------------+--------------+------------+-----------------------+------------------+--------------+-----------------+------------------+------------------+----------------+---------------------+--------------------+------------------+------------+--------------+------------------------+----------+------------+-------------+--------------+---------------+-------------+-----------------+----------------------+--------+-----------------------+</span><br><span class="line">| Host      | User | Password | Select_priv | Insert_priv | Update_priv | Delete_priv | Create_priv | Drop_priv | Reload_priv | Shutdown_priv | Process_priv | File_priv | Grant_priv | References_priv | Index_priv | Alter_priv | Show_db_priv | Super_priv | Create_tmp_table_priv | Lock_tables_priv | Execute_priv | Repl_slave_priv | Repl_client_priv | Create_view_priv | Show_view_priv | Create_routine_priv | Alter_routine_priv | Create_user_priv | Event_priv | Trigger_priv | Create_tablespace_priv | ssl_type | ssl_cipher | x509_issuer | x509_subject | max_questions | max_updates | max_connections | max_user_connections | plugin | authentication_string |</span><br><span class="line">+-----------+------+----------+-------------+-------------+-------------+-------------+-------------+-----------+-------------+---------------+--------------+-----------+------------+-----------------+------------+------------+--------------+------------+-----------------------+------------------+--------------+-----------------+------------------+------------------+----------------+---------------------+--------------------+------------------+------------+--------------+------------------------+----------+------------+-------------+--------------+---------------+-------------+-----------------+----------------------+--------+-----------------------+</span><br><span class="line">| localhost | root |          | Y           | Y           | Y           | Y           | Y           | Y         | Y           | Y             | Y            | Y         | Y          | Y               | Y          | Y          | Y            | Y          | Y                     | Y                | Y            | Y               | Y                | Y                | Y              | Y                   | Y                  | Y                | Y          | Y            | Y                      |          |            |             |              |             0 |           0 |               0 |                    0 |        |                       |</span><br><span class="line">| 127.0.0.1 | root |          | Y           | Y           | Y           | Y           | Y           | Y         | Y           | Y             | Y            | Y         | Y          | Y               | Y          | Y          | Y            | Y          | Y                     | Y                | Y            | Y               | Y                | Y                | Y              | Y                   | Y                  | Y                | Y          | Y            | Y                      |          |            |             |              |             0 |           0 |               0 |                    0 |        |                       |</span><br><span class="line">| ::1       | root |          | Y           | Y           | Y           | Y           | Y           | Y         | Y           | Y             | Y            | Y         | Y          | Y               | Y          | Y          | Y            | Y          | Y                     | Y                | Y            | Y               | Y                | Y                | Y              | Y                   | Y                  | Y                | Y          | Y            | Y                      |          |            |             |              |             0 |           0 |               0 |                    0 |        |                       |</span><br><span class="line">+-----------+------+----------+-------------+-------------+-------------+-------------+-------------+-----------+-------------+---------------+--------------+-----------+------------+-----------------+------------+------------+--------------+------------+-----------------------+------------------+--------------+-----------------+------------------+------------------+----------------+---------------------+--------------------+------------------+------------+--------------+------------------------+----------+------------+-------------+--------------+---------------+-------------+-----------------+----------------------+--------+-----------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 10:36:  [mysql]&gt; select user,host,authentication_string from user_1;</span><br><span class="line">+------+-----------+-----------------------+</span><br><span class="line">| user | host      | authentication_string |</span><br><span class="line">+------+-----------+-----------------------+</span><br><span class="line">| root | localhost |                       |</span><br><span class="line">| root | 127.0.0.1 |                       |</span><br><span class="line">| root | ::1       |                       |</span><br><span class="line">+------+-----------+-----------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 10:36:  [mysql]&gt; update user_1 set authentication_string=password('(Uploo00king)') where user='root';</span><br><span class="line">Query OK, 3 rows affected, 1 warning (0.01 sec)</span><br><span class="line">Rows matched: 3  Changed: 3  Warnings: 1</span><br><span class="line"></span><br><span class="line">root@MySQL-01 10:37:  [mysql]&gt; select user,host,authentication_string from user_1;</span><br><span class="line">+------+-----------+-------------------------------------------+</span><br><span class="line">| user | host      | authentication_string                     |</span><br><span class="line">+------+-----------+-------------------------------------------+</span><br><span class="line">| root | localhost | *D4DF57DFB7019B3D8C4294CC413AF1D650A275E4 |</span><br><span class="line">| root | 127.0.0.1 | *D4DF57DFB7019B3D8C4294CC413AF1D650A275E4 |</span><br><span class="line">| root | ::1       | *D4DF57DFB7019B3D8C4294CC413AF1D650A275E4 |</span><br><span class="line">+------+-----------+-------------------------------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 10:37:  [mysql]&gt; exit</span><br><span class="line">Bye</span><br><span class="line">[root@sh_02 data]# /etc/init.d/mysqld stop</span><br><span class="line">Shutting down MySQL..                                      [  OK  ]</span><br><span class="line">[root@sh_02 mysql]# ll user_1*</span><br><span class="line">-rw-r-----. 1 mysql mysql 10630 Jan  4 10:36 user_1.frm</span><br><span class="line">-rw-r-----. 1 mysql mysql   328 Jan  4 10:37 user_1.MYD</span><br><span class="line">-rw-r-----. 1 mysql mysql  2048 Jan  4 10:37 user_1.MYI</span><br><span class="line">[root@sh_02 mysql]# mv user_1.frm user.frm</span><br><span class="line">[root@sh_02 mysql]# mv user_1.MYD user.MYD</span><br><span class="line">[root@sh_02 mysql]# mv user_1.MYI user.MYI</span><br><span class="line">[root@sh_02 mysql]# ll user*</span><br><span class="line">-rw-r-----. 1 mysql mysql 10630 Jan  4 10:36 user.frm</span><br><span class="line">-rw-r-----. 1 mysql mysql   328 Jan  4 10:37 user.MYD</span><br><span class="line">-rw-r-----. 1 mysql mysql  2048 Jan  4 10:37 user.MYI</span><br><span class="line">-rw-rw----. 1 mysql mysql  3989 Aug 14 09:14 user_view.frm</span><br><span class="line">[root@sh_02 mysql]# /etc/init.d/mysqld start</span><br><span class="line">Starting MySQL.                                            [  OK  ]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@sh_02 mysql]# mysql -uroot -p'(Uploo00king)'</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 6</span><br><span class="line">Server version: 5.7.20-log MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.</span><br><span class="line"></span><br><span class="line">root@MySQL-01 10:39:  [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| db1                |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 10:39:  [(none)]&gt; use mysql</span><br><span class="line">Database changed</span><br><span class="line">root@MySQL-01 10:39:  [mysql]&gt; select user,host from mysql.user;</span><br><span class="line">+------+-----------+</span><br><span class="line">| user | host      |</span><br><span class="line">+------+-----------+</span><br><span class="line">| root | 127.0.0.1 |</span><br><span class="line">| root | ::1       |</span><br><span class="line">| root | localhost |</span><br><span class="line">+------+-----------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 10:39:  [mysql]&gt; grant all on *.* to booboo@'%' identified by '(Uploo00king)';</span><br><span class="line">ERROR 1785 (HY000): Statement violates GTID consistency: Updates to non-transactional tables can only be done in either autocommitted statements or single-statement transactions, and never in the same statement as updates to transactional tables.</span><br><span class="line"></span><br><span class="line">root@MySQL-01 11:39:  [mysql]&gt; update mysql.user_1 set user='aliyun_root' where host='127.0.0.1';</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">root@MySQL-01 11:40:  [mysql]&gt; select user,host from mysql.user_1;</span><br><span class="line">+-------------+-----------+</span><br><span class="line">| user        | host      |</span><br><span class="line">+-------------+-----------+</span><br><span class="line">| aliyun_root | 127.0.0.1 |</span><br><span class="line">| root        | ::1       |</span><br><span class="line">| root        | localhost |</span><br><span class="line">+-------------+-----------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">aliyun_root@MySQL-01 11:51:  [mysql]&gt; insert into mysql.user values ('%','jowing', '', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', '', '', '', '', 0, 0, 0, 0, '', password('Joowing@2017'));</span><br><span class="line">Query OK, 1 row affected, 1 warning (0.01 sec)</span><br><span class="line"></span><br><span class="line">aliyun_root@MySQL-01 11:51:  [mysql]&gt; select user,host from  mysql.user;</span><br><span class="line">+-------------+-----------+</span><br><span class="line">| user        | host      |</span><br><span class="line">+-------------+-----------+</span><br><span class="line">| jowing      | %         |</span><br><span class="line">| aliyun_root | 127.0.0.1 |</span><br><span class="line">| root        | ::1       |</span><br><span class="line">| root        | localhost |</span><br><span class="line">+-------------+-----------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="ç”Ÿäº§ç¯å¢ƒ"><a href="#ç”Ÿäº§ç¯å¢ƒ" class="headerlink" title="ç”Ÿäº§ç¯å¢ƒ"></a>ç”Ÿäº§ç¯å¢ƒ</h3><h4 id="ç”¨æˆ·æƒé™"><a href="#ç”¨æˆ·æƒé™" class="headerlink" title="ç”¨æˆ·æƒé™"></a>ç”¨æˆ·æƒé™</h4><p>ç›®æ ‡ï¼šIDCæœºæˆ¿ä»åº“æ”¯æŒé€šè¿‡insertã€updateã€deleteå‘½ä»¤æ¥ä¿®æ”¹ç”¨æˆ·æƒé™ï¼Œæƒé™æ¯”è¾ƒç®€å•ï¼Œåˆ†ä¸ºåªè¯»å’Œå†™ã€‚</p>
<p>éœ€è¦è®¾ç½®ä»¥ä¸‹æƒé™ï¼šæƒé™ä½œç”¨äºæ‰€æœ‰çš„åº“å¤šæœ‰çš„è¡¨</p>
<table>
<thead>
<tr>
<th align="left">ç”¨æˆ·å</th>
<th align="left">å¯†ç </th>
<th align="left">æƒé™</th>
</tr>
</thead>
<tbody><tr>
<td align="left">root</td>
<td align="left">123</td>
<td align="left">è¯»å†™</td>
</tr>
<tr>
<td align="left">joowingbuz</td>
<td align="left">123</td>
<td align="left">åªè¯»</td>
</tr>
<tr>
<td align="left">ottersync</td>
<td align="left">123</td>
<td align="left">åªè¯»</td>
</tr>
<tr>
<td align="left">syncdw</td>
<td align="left">123</td>
<td align="left">åªè¯»</td>
</tr>
<tr>
<td align="left">datasis</td>
<td align="left">123</td>
<td align="left">åªè¯»</td>
</tr>
<tr>
<td align="left">joowingv</td>
<td align="left">123</td>
<td align="left">åªè¯»</td>
</tr>
<tr>
<td align="left">datadev</td>
<td align="left">123</td>
<td align="left">åªè¯»</td>
</tr>
<tr>
<td align="left">readonly</td>
<td align="left">123</td>
<td align="left">åªè¯»</td>
</tr>
</tbody></table>
<h4 id="æ­¥éª¤æ¦‚è§ˆ-1"><a href="#æ­¥éª¤æ¦‚è§ˆ-1" class="headerlink" title="æ­¥éª¤æ¦‚è§ˆ"></a>æ­¥éª¤æ¦‚è§ˆ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. ç™»é™†æ•°æ®åº“åæ“ä½œå¦‚ä¸‹ï¼š</span></span><br><span class="line">use mysql;</span><br><span class="line">create table user_1 like user;</span><br><span class="line">insert into user_1 select * from user;</span><br><span class="line">delete from mysql.user_1 where user='root';</span><br><span class="line">insert into mysql.user_1 values ('%','root', '', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', '', '', '', '', 0, 0, 0, 0, '', password('123'));</span><br><span class="line">insert into mysql.user_1 values ('%','joowingbuz', '', 'Y', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', '', '', '', '', 0, 0, 0, 0, '', password('123'));</span><br><span class="line">insert into mysql.user_1 values ('%','ottersync', '', 'Y', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', '', '', '', '', 0, 0, 0, 0, '', password('123'));</span><br><span class="line">insert into mysql.user_1 values ('%','syncdw', '', 'Y', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', '', '', '', '', 0, 0, 0, 0, '', password('123'));</span><br><span class="line">insert into mysql.user_1 values ('%','datasis', '', 'Y', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', '', '', '', '', 0, 0, 0, 0, '', password('123'));</span><br><span class="line">insert into mysql.user_1 values ('%','joowingv', '', 'Y', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', '', '', '', '', 0, 0, 0, 0, '', password('123'));</span><br><span class="line">insert into mysql.user_1 values ('%','datadev', '', 'Y', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', '', '', '', '', 0, 0, 0, 0, '', password('123'));</span><br><span class="line">insert into mysql.user_1 values ('%','readonly', '', 'Y', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', '', '', '', '', 0, 0, 0, 0, '', password('123'));</span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. é€€å‡ºæ•°æ®åº“å¹¶åœæ­¢æœåŠ¡</span></span><br><span class="line">/data/mysql/support-files/mysql.server stop</span><br><span class="line"><span class="meta">#</span><span class="bash"> 3. å°†user_1è¡¨çš„ç‰©ç†æ–‡ä»¶è¦†ç›–userè¡¨</span></span><br><span class="line">cd /data/xtrabackup_data/mysql/</span><br><span class="line">mv user.frm user.ibd user.MYD user.MYI user.TRG /tmp</span><br><span class="line">mv user_1.frm user.frm</span><br><span class="line">mv user_1.MYI user.MYI</span><br><span class="line">mv user_1.MYD user.MYD</span><br><span class="line"><span class="meta">#</span><span class="bash"> 4. å¯åŠ¨æ•°æ®åº“</span></span><br><span class="line">/data/mysql/support-files/mysql.server start</span><br></pre></td></tr></table></figure>

<h4 id="æ“ä½œæ˜ç»†"><a href="#æ“ä½œæ˜ç»†" class="headerlink" title="æ“ä½œæ˜ç»†"></a>æ“ä½œæ˜ç»†</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@MySQL-01 15:42:  [(none)]&gt; use mysql</span><br><span class="line">Database changed</span><br><span class="line">root@MySQL-01 15:42:  [mysql]&gt; create table user_1 like user;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 15:42:  [mysql]&gt; insert into user_1 select * from user;</span><br><span class="line">Query OK, 3 rows affected (0.00 sec)</span><br><span class="line">Records: 3  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">root@MySQL-01 15:42:  [mysql]&gt; select user,host,authentication_string from mysql.user;</span><br><span class="line">+------+-----------+-------------------------------------------+</span><br><span class="line">| user | host      | authentication_string                     |</span><br><span class="line">+------+-----------+-------------------------------------------+</span><br><span class="line">| root | localhost | *D4DF57DFB7019B3D8C4294CC413AF1D650A275E4 |</span><br><span class="line">| root | 127.0.0.1 | *D4DF57DFB7019B3D8C4294CC413AF1D650A275E4 |</span><br><span class="line">| root | ::1       | *D4DF57DFB7019B3D8C4294CC413AF1D650A275E4 |</span><br><span class="line">+------+-----------+-------------------------------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 15:42:  [mysql]&gt; select user,host,authentication_string from mysql.user_1;</span><br><span class="line">+------+-----------+-------------------------------------------+</span><br><span class="line">| user | host      | authentication_string                     |</span><br><span class="line">+------+-----------+-------------------------------------------+</span><br><span class="line">| root | localhost | *D4DF57DFB7019B3D8C4294CC413AF1D650A275E4 |</span><br><span class="line">| root | 127.0.0.1 | *D4DF57DFB7019B3D8C4294CC413AF1D650A275E4 |</span><br><span class="line">| root | ::1       | *D4DF57DFB7019B3D8C4294CC413AF1D650A275E4 |</span><br><span class="line">+------+-----------+-------------------------------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 15:42:  [mysql]&gt; desc mysql.user_1;</span><br><span class="line">+------------------------+-----------------------------------+------+-----+---------+-------+</span><br><span class="line">| Field                  | Type                              | Null | Key | Default | Extra |</span><br><span class="line">+------------------------+-----------------------------------+------+-----+---------+-------+</span><br><span class="line">| Host                   | char(60)                          | NO   | PRI |         |       |</span><br><span class="line">| User                   | char(16)                          | NO   | PRI |         |       |</span><br><span class="line">| Password               | char(41)                          | NO   |     |         |       |</span><br><span class="line">| Select_priv            | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Insert_priv            | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Update_priv            | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Delete_priv            | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Create_priv            | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Drop_priv              | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Reload_priv            | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Shutdown_priv          | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Process_priv           | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| File_priv              | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Grant_priv             | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| References_priv        | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Index_priv             | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Alter_priv             | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Show_db_priv           | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Super_priv             | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Create_tmp_table_priv  | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Lock_tables_priv       | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Execute_priv           | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Repl_slave_priv        | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Repl_client_priv       | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Create_view_priv       | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Show_view_priv         | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Create_routine_priv    | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Alter_routine_priv     | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Create_user_priv       | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Event_priv             | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Trigger_priv           | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| Create_tablespace_priv | enum('N','Y')                     | NO   |     | N       |       |</span><br><span class="line">| ssl_type               | enum('','ANY','X509','SPECIFIED') | NO   |     |         |       |</span><br><span class="line">| ssl_cipher             | blob                              | NO   |     | NULL    |       |</span><br><span class="line">| x509_issuer            | blob                              | NO   |     | NULL    |       |</span><br><span class="line">| x509_subject           | blob                              | NO   |     | NULL    |       |</span><br><span class="line">| max_questions          | int(11) unsigned                  | NO   |     | 0       |       |</span><br><span class="line">| max_updates            | int(11) unsigned                  | NO   |     | 0       |       |</span><br><span class="line">| max_connections        | int(11) unsigned                  | NO   |     | 0       |       |</span><br><span class="line">| max_user_connections   | int(11) unsigned                  | NO   |     | 0       |       |</span><br><span class="line">| plugin                 | char(64)                          | YES  |     |         |       |</span><br><span class="line">| authentication_string  | text                              | YES  |     | NULL    |       |</span><br><span class="line">+------------------------+-----------------------------------+------+-----+---------+-------+</span><br><span class="line">42 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 15:47:  [mysql]&gt; delete from mysql.user_1 where user='root';</span><br><span class="line">Query OK, 3 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 15:51:  [mysql]&gt; insert into mysql.user_1 values ('%','root', '', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', '', '', '', '', 0, 0, 0, 0, '', password('123'));</span><br><span class="line">Query OK, 1 row affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 15:52:  [mysql]&gt; insert into mysql.user_1 values ('%','joowingbuz', '', 'Y', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', '', '', '', '', 0, 0, 0, 0, '', password('123'));</span><br><span class="line">Query OK, 1 row affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 15:52:  [mysql]&gt; insert into mysql.user_1 values ('%','ottersync', '', 'Y', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', '', '', '', '', 0, 0, 0, 0, '', password('123'));</span><br><span class="line">Query OK, 1 row affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 15:52:  [mysql]&gt; insert into mysql.user_1 values ('%','syncdw', '', 'Y', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', '', '', '', '', 0, 0, 0, 0, '', password('123'));</span><br><span class="line"></span><br><span class="line">root@MySQL-01 15:52:  [mysql]&gt; insert into mysql.user_1 values ('%','datasis', '', 'Y', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', '', '', '', '', 0, 0, 0, 0, '', password('123'));</span><br><span class="line">Query OK, 1 row affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 15:52:  [mysql]&gt; insert into mysql.user_1 values ('%','joowingv', '', 'Y', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', '', '', '', '', 0, 0, 0, 0, '', password('123'));</span><br><span class="line">Query OK, 1 row affected, 1 warning (0.01 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 15:52:  [mysql]&gt; insert into mysql.user_1 values ('%','datadev', '', 'Y', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', '', '', '', '', 0, 0, 0, 0, '', password('123'));</span><br><span class="line">Query OK, 1 row affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 15:52:  [mysql]&gt; insert into mysql.user_1 values ('%','readonly', '', 'Y', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', '', '', '', '', 0, 0, 0, 0, '', password('123'));</span><br><span class="line">Query OK, 1 row affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 15:52:  [mysql]&gt; select user,host,authentication_string from mysql.user;</span><br><span class="line">+------+-----------+-------------------------------------------+</span><br><span class="line">| user | host      | authentication_string                     |</span><br><span class="line">+------+-----------+-------------------------------------------+</span><br><span class="line">| root | localhost | *D4DF57DFB7019B3D8C4294CC413AF1D650A275E4 |</span><br><span class="line">| root | 127.0.0.1 | *D4DF57DFB7019B3D8C4294CC413AF1D650A275E4 |</span><br><span class="line">| root | ::1       | *D4DF57DFB7019B3D8C4294CC413AF1D650A275E4 |</span><br><span class="line">+------+-----------+-------------------------------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@MySQL-01 15:52:  [mysql]&gt; select user,host,authentication_string from mysql.user_1;</span><br><span class="line">+------------+------+-------------------------------------------+</span><br><span class="line">| user       | host | authentication_string                     |</span><br><span class="line">+------------+------+-------------------------------------------+</span><br><span class="line">| ottersync  | %    | *9443FA914A2D69FE8832F8294E7422CC1B02A492 |</span><br><span class="line">| joowingbuz | %    | *DFFDA1CA6135E355EF468AB13A465BB5D4FE2B11 |</span><br><span class="line">| root       | %    | *89BE852E4EECFD217F0C5463FB30AD25BD0751E0 |</span><br><span class="line">| syncdw     | %    | *3DD7B4B4F6EE968FF3452B607BDEE6294B6A425A |</span><br><span class="line">| datasis    | %    | *011D511C71990F832C531A0F9CFB34CF7BB4E485 |</span><br><span class="line">| joowingv   | %    | *56B364074270DF7F6D670A6B4F5A4AD13322397A |</span><br><span class="line">| datadev    | %    | *D3D73E0F6BFC3159B024EF31484B6F9CC2963C5B |</span><br><span class="line">| readonly   | %    | *E2BA196C0C7F409990FDB3FAB5F9C7CE95F7C449 |</span><br><span class="line">+------------+------+-------------------------------------------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root@joowing-server-06:~# /data/mysql/support-files/mysql.server stop</span><br><span class="line">Shutting down MySQL</span><br><span class="line">...... * </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root@joowing-server-06:~# cd /data/xtrabackup_data/</span><br><span class="line">root@joowing-server-06:/data/xtrabackup_data# cd mysql</span><br><span class="line">root@joowing-server-06:/data/xtrabackup_data/mysql# ll user*</span><br><span class="line">-rw-r----- 1 mysql mysql 10630 8æœˆ  14 15:42 user_1.frm</span><br><span class="line">-rw-r----- 1 mysql mysql   744 8æœˆ  14 15:52 user_1.MYD</span><br><span class="line">-rw-r----- 1 mysql mysql  2048 8æœˆ  14 15:53 user_1.MYI</span><br><span class="line">-rw-r----- 1 mysql mysql 10630 8æœˆ   9 20:14 user.frm</span><br><span class="line">-rw-r----- 1 mysql mysql 98304 8æœˆ   9 20:14 user.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql   328 8æœˆ   9 20:14 user.MYD</span><br><span class="line">-rw-r--r-- 1 mysql mysql  2048 8æœˆ   9 20:14 user.MYI</span><br><span class="line">-rw-r----- 1 mysql mysql  3569 8æœˆ   9 20:14 user.TRG</span><br><span class="line">-rw-r----- 1 mysql mysql  3982 8æœˆ   9 20:14 user_view.frm</span><br><span class="line">root@joowing-server-06:/data/xtrabackup_data/mysql# mv user.frm user.ibd user.MYD user.MYI user.TRG /data</span><br><span class="line">root@joowing-server-06:/data/xtrabackup_data/mysql# ll user*</span><br><span class="line">-rw-r----- 1 mysql mysql 10630 8æœˆ  14 15:42 user_1.frm</span><br><span class="line">-rw-r----- 1 mysql mysql   744 8æœˆ  14 15:52 user_1.MYD</span><br><span class="line">-rw-r----- 1 mysql mysql  2048 8æœˆ  14 15:53 user_1.MYI</span><br><span class="line">-rw-r----- 1 mysql mysql  3982 8æœˆ   9 20:14 user_view.frm</span><br><span class="line">root@joowing-server-06:/data/xtrabackup_data/mysql# mv user_1.frm user.frm</span><br><span class="line">root@joowing-server-06:/data/xtrabackup_data/mysql# mv user_1.MYI user.MYI</span><br><span class="line">root@joowing-server-06:/data/xtrabackup_data/mysql# mv user_1.MYD user.MYD</span><br><span class="line">root@joowing-server-06:/data/xtrabackup_data/mysql# ll user*</span><br><span class="line">-rw-r----- 1 mysql mysql 10630 8æœˆ  14 15:42 user.frm</span><br><span class="line">-rw-r----- 1 mysql mysql   744 8æœˆ  14 15:52 user.MYD</span><br><span class="line">-rw-r----- 1 mysql mysql  2048 8æœˆ  14 15:53 user.MYI</span><br><span class="line">-rw-r----- 1 mysql mysql  3982 8æœˆ   9 20:14 user_view.frm</span><br><span class="line">root@joowing-server-06:/data/xtrabackup_data/mysql# /data/mysql/support-files/mysql.server start</span><br><span class="line">Starting MySQL</span><br><span class="line">...... * </span><br><span class="line"></span><br><span class="line">root@joowing-server-06:/data/xtrabackup_data/mysql# mysql -uroot -p'123'</span><br><span class="line">mysql: [Warning] Using a password on the command line interface can be insecure.</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 5</span><br><span class="line">Server version: 5.7.20-log MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.</span><br><span class="line"></span><br><span class="line">root@MySQL-01 15:55:  [(none)]&gt; show slave status\G;</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">               Slave_IO_State: Waiting for master to send event</span><br><span class="line">                  Master_Host: rm-uf6f05k2rg95s23bp.mysql.rds.aliyuncs.com</span><br><span class="line">                  Master_User: idc_slave</span><br><span class="line">                  Master_Port: 3306</span><br><span class="line">                Connect_Retry: 60</span><br><span class="line">              Master_Log_File: mysql-bin.001641</span><br><span class="line">          Read_Master_Log_Pos: 447207506</span><br><span class="line">               Relay_Log_File: joowing-server-06-relay-bin.000225</span><br><span class="line">                Relay_Log_Pos: 35529076</span><br><span class="line">        Relay_Master_Log_File: mysql-bin.001641</span><br><span class="line">             Slave_IO_Running: Yes</span><br><span class="line">            Slave_SQL_Running: Yes</span><br><span class="line">              Replicate_Do_DB: </span><br><span class="line">          Replicate_Ignore_DB: </span><br><span class="line">           Replicate_Do_Table: </span><br><span class="line">       Replicate_Ignore_Table: </span><br><span class="line">      Replicate_Wild_Do_Table: </span><br><span class="line">  Replicate_Wild_Ignore_Table: mysql.%,sys.%,information_schema.%</span><br><span class="line">                   Last_Errno: 0</span><br><span class="line">                   Last_Error: </span><br><span class="line">                 Skip_Counter: 0</span><br><span class="line">          Exec_Master_Log_Pos: 447207506</span><br><span class="line">              Relay_Log_Space: 35529295</span><br><span class="line">              Until_Condition: None</span><br><span class="line">               Until_Log_File: </span><br><span class="line">                Until_Log_Pos: 0</span><br><span class="line">           Master_SSL_Allowed: No</span><br><span class="line">           Master_SSL_CA_File: </span><br><span class="line">           Master_SSL_CA_Path: </span><br><span class="line">              Master_SSL_Cert: </span><br><span class="line">            Master_SSL_Cipher: </span><br><span class="line">               Master_SSL_Key: </span><br><span class="line">        Seconds_Behind_Master: 0</span><br><span class="line">Master_SSL_Verify_Server_Cert: No</span><br><span class="line">                Last_IO_Errno: 0</span><br><span class="line">                Last_IO_Error: </span><br><span class="line">               Last_SQL_Errno: 0</span><br><span class="line">               Last_SQL_Error: </span><br><span class="line">  Replicate_Ignore_Server_Ids: </span><br><span class="line">             Master_Server_Id: 1095052097</span><br><span class="line">                  Master_UUID: b3e1de69-5daa-11e8-bed2-7cd30ab8a9fc</span><br><span class="line">             Master_Info_File: mysql.slave_master_info</span><br><span class="line">                    SQL_Delay: 0</span><br><span class="line">          SQL_Remaining_Delay: NULL</span><br><span class="line">      Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates</span><br><span class="line">           Master_Retry_Count: 86400</span><br><span class="line">                  Master_Bind: </span><br><span class="line">      Last_IO_Error_Timestamp: </span><br><span class="line">     Last_SQL_Error_Timestamp: </span><br><span class="line">               Master_SSL_Crl: </span><br><span class="line">           Master_SSL_Crlpath: </span><br><span class="line">           Retrieved_Gtid_Set: b3e1de69-5daa-11e8-bed2-7cd30ab8a9fc:97478646-97483368</span><br><span class="line">            Executed_Gtid_Set: b3e1de69-5daa-11e8-bed2-7cd30ab8a9fc:1-97483368,</span><br><span class="line">c39ecf19-5daa-11e8-aa9c-7cd30ac4764a:1-178658794,</span><br><span class="line">c69289d7-9bc9-11e8-b922-44a842431b62:1-12</span><br><span class="line">                Auto_Position: 1</span><br><span class="line">         Replicate_Rewrite_DB: </span><br><span class="line">                 Channel_Name: </span><br><span class="line">           Master_TLS_Version: </span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">ERROR: </span><br><span class="line">No query specified</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> éªŒè¯åªè¯»è´¦å·</span></span><br><span class="line">mysql -uroot	-p'123'  -e "create database dbzyadmin;"</span><br><span class="line">mysql -ujoowingbuz -p'123'  -e "create database dbzyadmin;"</span><br><span class="line">mysql -uottersync -p'123'  -e "create database dbzyadmin;"</span><br><span class="line">mysql -usyncdw -p'123'  -e "create database dbzyadmin;"</span><br><span class="line">mysql -udatasis -p'123'  -e "create database dbzyadmin;"</span><br><span class="line">mysql -ujoowingv -p'123'  -e "create database dbzyadmin;"</span><br><span class="line">mysql -udatadev -p'123' -e "create database dbzyadmin;"</span><br><span class="line">mysql -ureadonly -p'123'  -e "create database dbzyadmin;"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> åªè¯»è´¦å·æ— æ³•æ‰§è¡Œå†™æ“ä½œï¼ŒéªŒè¯æˆåŠŸ</span></span><br><span class="line">mysql: [Warning] Using a password on the command line interface can be insecure.</span><br><span class="line">ERROR 1044 (42000) at line 1: Access denied for user 'readonly'@'%' to database 'dbzyadmin'</span><br></pre></td></tr></table></figure>

<h4 id="åç»­ç”¨æˆ·æƒé™å˜æ›´æ“ä½œæŒ‡å—"><a href="#åç»­ç”¨æˆ·æƒé™å˜æ›´æ“ä½œæŒ‡å—" class="headerlink" title="åç»­ç”¨æˆ·æƒé™å˜æ›´æ“ä½œæŒ‡å—"></a>åç»­ç”¨æˆ·æƒé™å˜æ›´æ“ä½œæŒ‡å—</h4><blockquote>
<p>åç»­æ–°å¢ç”¨æˆ·ã€åˆ é™¤ç”¨æˆ·ã€æ›´æ”¹å¯†ç å‘½ä»¤å¦‚ä¸‹ï¼š</p>
</blockquote>
<h5 id="æ–°å¢è¯»å†™ç”¨æˆ·"><a href="#æ–°å¢è¯»å†™ç”¨æˆ·" class="headerlink" title="æ–°å¢è¯»å†™ç”¨æˆ·"></a>æ–°å¢è¯»å†™ç”¨æˆ·</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">insert into mysql.user_1 values ('%','ã€ç”¨æˆ·åã€‘', '', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', '', '', '', '', 0, 0, 0, 0, '', password('ã€å¯†ç ã€‘'));</span><br></pre></td></tr></table></figure>

<h5 id="æ–°å¢åªè¯»ç”¨æˆ·"><a href="#æ–°å¢åªè¯»ç”¨æˆ·" class="headerlink" title="æ–°å¢åªè¯»ç”¨æˆ·"></a>æ–°å¢åªè¯»ç”¨æˆ·</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">insert into mysql.user_1 values ('%','ã€ç”¨æˆ·åã€‘', '', 'Y', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', '', '', '', '', 0, 0, 0, 0, '', password('ã€å¯†ç ã€‘'));</span><br></pre></td></tr></table></figure>

<h5 id="åˆ é™¤ç”¨æˆ·å‘½ä»¤"><a href="#åˆ é™¤ç”¨æˆ·å‘½ä»¤" class="headerlink" title="åˆ é™¤ç”¨æˆ·å‘½ä»¤"></a>åˆ é™¤ç”¨æˆ·å‘½ä»¤</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">delete from mysql.user where user='ã€ç”¨æˆ·åã€‘';</span><br></pre></td></tr></table></figure>

<h5 id="ä¿®æ”¹å¯†ç "><a href="#ä¿®æ”¹å¯†ç " class="headerlink" title="ä¿®æ”¹å¯†ç "></a>ä¿®æ”¹å¯†ç </h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">update mysql.user set authentication_string=password('ã€å¯†ç ã€‘') where user='ã€ç”¨æˆ·åã€‘';</span><br></pre></td></tr></table></figure>

<h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>RDSç›®å‰ä½¿ç”¨MySQLç‰ˆæœ¬å’Œå®˜æ–¹åœ¨ç³»ç»Ÿåº“ä¸Šå·®å¼‚è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œè‹¥éœ€è¦æ­å»ºRDSåˆ°çº¿ä¸‹è‡ªå»ºMySQL5.7çš„ä¸»ä»æ—¶ï¼Œå¯ä»¥é€šè¿‡æ­¤æ³•å»å®ç°ã€‚</p>
<p>æœ¬æ–‡ä¸­å¯¹userè¡¨çš„ç ´è§£ï¼ŒåŒæ ·é€‚é€‚ç”¨äº<code>mysql.db</code> ã€<code>mysql.tables_priv</code>è¡¨ï¼Œéƒ½ç ´è§£åˆ™å¯ä»¥å°†æƒé™ä»ç”¨æˆ·æ‹“å±•åˆ°åº“è¡¨åˆ—ã€‚è¯»è€…å¯è‡ªè¡Œå®éªŒæµ‹è¯•ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯å¹¿è§’</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>RDS</tag>
        <tag>ä¸»ä»åŒæ­¥</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ©ç”¨splitå·¥å…·è§£å†³ä¸€æ¬¡MongoDBæ—¥å¿—å¼‚å¸¸é—®é¢˜</title>
    <url>/2018/08/03/%E5%88%A9%E7%94%A8split%E5%B7%A5%E5%85%B7%E8%A7%A3%E5%86%B3%E4%B8%80%E6%AC%A1MongoDB%E6%97%A5%E5%BF%97%E5%BC%82%E5%B8%B8%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p>æ‘˜è¦ï¼š </p>
<ul>
<li>æŸå¤©æ™šä¸Šåˆšåˆ°å®¶ä¸ä¹…ï¼Œå°±æ¥åˆ°æ­å·åŒäº‹çš„ç”µè¯ï¼Œå®¢æˆ·MongoDBé›†ç¾¤ä¸­çš„æŸä¸ªåˆ†ç‰‡èŠ‚ç‚¹CPUé£™é«˜ï¼Œåˆæ­¥åˆ¤æ–­æ˜¯æ…¢æŸ¥è¯¢ï¼Œç°åœ¨éœ€è¦æ‹‰å–CPUé£™é«˜æ—¶é—´æ®µçš„æ…¢æŸ¥è¯¢ã€‚å¿ƒæƒ³æ‹‰å–æ…¢æŸ¥è¯¢åº”è¯¥å¾ˆå¿«ï¼Œä¸å°±æ˜¯ä¸ªç³»ç»Ÿæ—¥å¿—å—ï¼Ÿè€Œä¸”è¿˜åšäº†æ—¥å¿—åˆ‡å‰²ä¸€å¤©ä¸€ä¸ªï¼ŒæŒ‰é“ç†å¾ˆå¿«æå®šçš„ï¼Œè°çŸ¥å½“å¤©æ™šä¸Šæäº†æ¥è¿‘ä¸‰ä¸ªå°æ—¶ä¹Ÿæ²¡æå®šã€‚ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</li>
<li>è¿›å…¥åˆ°æ—¥å¿—ç›®å½•ä¸€çœ‹ï¼Œç›®å‰ä¿ç•™è¿‘7å¤©çš„æ—¥å¿—ï¼Œæ¯å¤©çš„æ—¥å¿—é‡åœ¨23G~24Gï¼Œæˆ‘å½“æ—¶å°±æƒ³è¿™ä¸ªå®¢æˆ·æ•°æ®é‡è¿™ä¹ˆå¤§ï¼åç»­å‘ç°æ—¥å¿—æ ¼å¼æœ¬è¯¥ä¸ºæ™®é€šæ–‡æœ¬æ–‡ä»¶ç¡®å˜æˆäº†å›¾ç‰‡æ ¼å¼ï¼Œç©¶ç«Ÿä¸ºä½•ä¼šæ–‡ä»¶æ ¼å¼ä¼šè½¬å˜ï¼Ÿèƒ½å¦ä»å›¾ç‰‡æ ¼å¼ä¸­æ‹‰å–æŒ‡å®šæ—¶é—´æ®µçš„æ—¥å¿—å‘¢ï¼Ÿ</li>
<li>ç¬¬äºŒå¤©åˆ°å…¬å¸ï¼Œç”±äºå®¢æˆ·ç¯å¢ƒæˆ‘ä»¬ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ¥æ‰‹ï¼Œå› æ­¤å’±ä»¬æŠ€æœ¯ä¸“å®¶å›¢é˜Ÿæäº†ä¸€ä¸ª3äººçš„â€ä¸“å®¶ä¼šè¯Šâ€ï¼Œç»è¿‡äº†ä¸€ç•ªæŠ˜è…¾æ€»ç®—æŠŠåŸå› æ‰¾åˆ°äº†ï¼Œå…·ä½“è¿‡ç¨‹è¯·çœ‹ä¸‹æ–‡ï¼</li>
</ul>
<a id="more"></a>

<h2 id="æ•…äº‹èƒŒæ™¯"><a href="#æ•…äº‹èƒŒæ™¯" class="headerlink" title="æ•…äº‹èƒŒæ™¯"></a>æ•…äº‹èƒŒæ™¯</h2><h3 id="æ•°æ®åº“æ˜ç»†"><a href="#æ•°æ®åº“æ˜ç»†" class="headerlink" title="æ•°æ®åº“æ˜ç»†"></a>æ•°æ®åº“æ˜ç»†</h3><p>è¯´åœ¨å‰é¢ï¼š</p>
<ul>
<li>æ•°æ®åº“ï¼šMongoDBé›†ç¾¤ 4ä¸ªåˆ†ç‰‡èŠ‚ç‚¹</li>
<li>åˆ†ç‰‡èŠ‚ç‚¹è§„æ ¼ï¼š16æ ¸ / 32G CentOS 7.4 64ä½</li>
<li>æ•°æ®ç›®å½•æ‰€åœ¨ç£ç›˜: 300G   49G  252G  17% /data</li>
</ul>
<h3 id="æ•…äº‹æƒ…èŠ‚"><a href="#æ•…äº‹æƒ…èŠ‚" class="headerlink" title="æ•…äº‹æƒ…èŠ‚"></a>æ•…äº‹æƒ…èŠ‚</h3><ul>
<li>æŸå¤©æ™šä¸Šåˆšåˆ°å®¶ä¸ä¹…ï¼Œå°±æ¥åˆ°æ­å·åŒäº‹çš„ç”µè¯ï¼Œå®¢æˆ·MongoDBé›†ç¾¤ä¸­çš„æŸä¸ªåˆ†ç‰‡èŠ‚ç‚¹CPUé£™é«˜ï¼Œåˆæ­¥åˆ¤æ–­æ˜¯æ…¢æŸ¥è¯¢ï¼Œç°åœ¨éœ€è¦æ‹‰å–CPUé£™é«˜æ—¶é—´æ®µçš„æ…¢æŸ¥è¯¢ã€‚å¿ƒæƒ³æ‹‰å–æ…¢æŸ¥è¯¢åº”è¯¥å¾ˆå¿«ï¼Œä¸å°±æ˜¯ä¸ªç³»ç»Ÿæ—¥å¿—å—ï¼Ÿè€Œä¸”è¿˜åšäº†æ—¥å¿—åˆ‡å‰²ä¸€å¤©ä¸€ä¸ªï¼ŒæŒ‰é“ç†å¾ˆå¿«æå®šçš„ï¼Œè°çŸ¥å½“å¤©æ™šä¸Šæäº†æ¥è¿‘ä¸‰ä¸ªå°æ—¶ä¹Ÿæ²¡æå®šã€‚ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</li>
<li>è¿›å…¥åˆ°æ—¥å¿—ç›®å½•ä¸€çœ‹ï¼Œç›®å‰ä¿ç•™è¿‘7å¤©çš„æ—¥å¿—ï¼Œæ¯å¤©çš„æ—¥å¿—é‡åœ¨23G~24Gï¼Œæˆ‘å½“æ—¶å°±æƒ³è¿™ä¸ªå®¢æˆ·æ•°æ®é‡è¿™ä¹ˆå¤§ï¼åç»­å‘ç°æ—¥å¿—æ ¼å¼æœ¬è¯¥ä¸ºæ™®é€šæ–‡æœ¬æ–‡ä»¶ç¡®å˜æˆäº†å›¾ç‰‡æ ¼å¼ï¼Œç©¶ç«Ÿä¸ºä½•ä¼šæ–‡ä»¶æ ¼å¼ä¼šè½¬å˜ï¼Ÿèƒ½å¦ä»å›¾ç‰‡æ ¼å¼ä¸­æ‹‰å–æŒ‡å®šæ—¶é—´æ®µçš„æ—¥å¿—å‘¢ï¼Ÿ</li>
<li>ç¬¬äºŒå¤©åˆ°å…¬å¸ï¼Œç”±äºå®¢æˆ·ç¯å¢ƒæˆ‘ä»¬ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ¥å—ï¼Œå› æ­¤å’±ä»¬æŠ€æœ¯ä¸“å®¶å›¢é˜Ÿæäº†ä¸€ä¸ª3äººçš„â€ä¸“å®¶ä¼šè¯Šâ€ï¼Œç»è¿‡äº†ä¸€ç•ªæŠ˜è…¾æ€»ç®—æŠŠåŸå› æ‰¾åˆ°äº†ï¼Œå…·ä½“è¿‡ç¨‹è¯·çœ‹ä¸‹æ–‡ï¼</li>
</ul>
<h2 id="å¤ç°ä¸å‰–æ"><a href="#å¤ç°ä¸å‰–æ" class="headerlink" title="å¤ç°ä¸å‰–æ"></a>å¤ç°ä¸å‰–æ</h2><h3 id="æ‹‰å–æ—¥å¿—å¼‚å¸¸"><a href="#æ‹‰å–æ—¥å¿—å¼‚å¸¸" class="headerlink" title="æ‹‰å–æ—¥å¿—å¼‚å¸¸"></a>æ‹‰å–æ—¥å¿—å¼‚å¸¸</h3><p><strong>ä½¿ç”¨mlogfilterè¿‡æ»¤æ–‡ä»¶æ—¶æŠ¥é”™è¯´æ–‡ä»¶émongodbçš„æ—¥å¿—æ–‡ä»¶</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@sh_01 booboo]# mlogfilter shard.log.2018-08-01 --from 2018-08-01T15:00:00.000+0800 --to "+1h" --slow 1000 &gt; /alidata/booboo/tf.1</span><br><span class="line">æŠ¥é”™:émongodbæ—¥å¿—æ ¼å¼</span><br></pre></td></tr></table></figure>

<p>å›åˆ°å®¢æˆ·æœåŠ¡å™¨æ£€æŸ¥æ—¥å¿—æ–‡ä»¶æ ¼å¼ï¼Œæ˜ç»†å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@MONGO-SHARD-18 logs]# file *</span><br><span class="line">shard.log:            PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-25: PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-26: PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-27: PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-28: PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-29: PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-30: PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-31: PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-08-01: PCX ver. 2.5 image data</span><br></pre></td></tr></table></figure>

<p>mongodbçš„æ—¥å¿—æ­£å¸¸åº”è¯¥ä¸ºï¼š<code>ASCII text, with very long lines</code>ï¼Œä½†æ˜¯ç°åœ¨å´å˜æˆäº†<code>PCX ver. 2.5 image data</code>ã€‚éœ€è¦å¼„æ¸…æ¥šåŸå› ã€‚</p>
<h3 id="æ—¥å¿—å¼‚å¸¸åˆ†æ"><a href="#æ—¥å¿—å¼‚å¸¸åˆ†æ" class="headerlink" title="æ—¥å¿—å¼‚å¸¸åˆ†æ"></a>æ—¥å¿—å¼‚å¸¸åˆ†æ</h3><ul>
<li>ä¸ºä»€ä¹ˆå®¢æˆ·æ¯å¤©çš„æ—¥å¿—é‡è¾¾åˆ°22ä¸ªGï¼Œå¹¶ä¸”æ¯å¤©çš„æ—¥å¿—é‡éƒ½æ˜¯å¤§äºç­‰äºå‰ä¸€å¤©ï¼Ÿå¾ˆæ˜¾ç„¶ï¼Œæ—¥å¿—æˆªæ–­æœ‰é—®é¢˜ã€‚</li>
<li>è¿™ä¸ªæ˜¯è¿‘7å¤©çš„æ—¥å¿—ï¼Œè€Œæ—¥å¿—æ ¼å¼å˜æˆäº†PCXå›¾ç‰‡æ ¼å¼æ˜¯ä¸ºä½•ï¼Ÿ</li>
<li>æ€€ç–‘æ¯æ¬¡æ—¥å¿—è½®è¯¢æ—¶éƒ½æ²¡æœ‰çœŸæ­£æˆªæ–­æ—¥å¿—ï¼</li>
</ul>
<p><img src="%E5%88%A9%E7%94%A8split%E5%B7%A5%E5%85%B7%E8%A7%A3%E5%86%B3%E4%B8%80%E6%AC%A1MongoDB%E6%97%A5%E5%BF%97%E5%BC%82%E5%B8%B8%E9%97%AE%E9%A2%98/01.png" alt=""></p>
<h3 id="åˆ†æåŸæ—¥å¿—åˆ‡å‰²æ˜ç»†"><a href="#åˆ†æåŸæ—¥å¿—åˆ‡å‰²æ˜ç»†" class="headerlink" title="åˆ†æåŸæ—¥å¿—åˆ‡å‰²æ˜ç»†"></a>åˆ†æåŸæ—¥å¿—åˆ‡å‰²æ˜ç»†</h3><p><img src="%E5%88%A9%E7%94%A8split%E5%B7%A5%E5%85%B7%E8%A7%A3%E5%86%B3%E4%B8%80%E6%AC%A1MongoDB%E6%97%A5%E5%BF%97%E5%BC%82%E5%B8%B8%E9%97%AE%E9%A2%98/03.png" alt=""></p>
<p>æ€€ç–‘ä¸<code>echo &gt;</code>æœ‰å…³ï¼Œè¿›è¡ŒéªŒè¯ã€‚</p>
<h3 id="éªŒè¯echo-gt-ä¸PCXå›¾ç‰‡å¤´éƒ¨0aä¸€è‡´"><a href="#éªŒè¯echo-gt-ä¸PCXå›¾ç‰‡å¤´éƒ¨0aä¸€è‡´" class="headerlink" title="éªŒè¯echo &gt;ä¸PCXå›¾ç‰‡å¤´éƒ¨0aä¸€è‡´"></a>éªŒè¯<code>echo &gt;</code>ä¸<code>PCXå›¾ç‰‡å¤´éƒ¨0aä¸€è‡´</code></h3><ol>
<li>å»ºä¸€ä¸ªç©ºæ–‡æ¡£<code>log</code>ï¼›æ‰§è¡Œ<code>echo &gt; log</code>ï¼›é€šè¿‡<code>cat -A log</code>æŸ¥çœ‹æ–‡ä»¶ä¸­æ’å…¥äº†ä¸€ä¸ªç¬¦å·å³æ¢è¡Œç¬¦<code>\n</code></li>
<li>é€šè¿‡<code>hexdump -c log</code> æŸ¥çœ‹æµ‹è¯•æ–‡ä»¶å¤´éƒ¨æ˜¾ç¤ºä¸ºASCIIå­—ç¬¦ <code>\n</code></li>
<li>é€šè¿‡<code>hexdump -d log</code> æŸ¥çœ‹æµ‹è¯•æ–‡ä»¶å¤´éƒ¨æ˜¾ç¤ºä¸º16è¿›åˆ¶<code>00010</code> å³<code>0a</code></li>
<li>é€šè¿‡<code>vim</code> ç”¨16è¿›åˆ¶æŸ¥çœ‹æ–‡æ¡£<code>log</code>å¯ä»¥çœ‹åˆ°logçš„æ–‡ä»¶å¤´éƒ¨ä¸º<code>0a</code>ï¼Œæ­£æ˜¯PCXå›¾ç‰‡çš„å¤´éƒ¨</li>
<li>ç”Ÿäº§ç¯å¢ƒæŸ¥çœ‹å®¢æˆ·æœ‰é—®é¢˜çš„mongodbç³»ç»Ÿæ—¥å¿—æ–‡ä»¶æ ¼å¼ä¸º<code>PCX</code>å›¾ç‰‡æ ¼å¼</li>
<li>é€šè¿‡<code>hexdump -c log</code> æ˜¾ç¤ºä¸ºASCIIå­—ç¬¦ï¼Œç”Ÿäº§æ—¥å¿—æ–‡ä»¶å¤´éƒ¨ä¸æµ‹è¯•çš„logä¸€è‡´ï¼Œéƒ½æ˜¯<code>\n</code></li>
<li>é€šè¿‡<code>hexdump -d log</code>æ˜¾ç¤ºä¸º16è¿›åˆ¶ï¼Œç”Ÿäº§æ—¥å¿—æ–‡ä»¶å¤´éƒ¨ä¸æµ‹è¯•çš„logä¸€è‡´<code>00010</code> å³ <code>0a</code></li>
</ol>
<p><img src="%E5%88%A9%E7%94%A8split%E5%B7%A5%E5%85%B7%E8%A7%A3%E5%86%B3%E4%B8%80%E6%AC%A1MongoDB%E6%97%A5%E5%BF%97%E5%BC%82%E5%B8%B8%E9%97%AE%E9%A2%98/02.png" alt=""></p>
<p><strong>åˆ°æ­¤éªŒè¯æˆåŠŸ:é€šè¿‡<code>echo &gt; log</code>çš„æ–¹å¼ä¼šå¾€æ–‡ä»¶å¤´éƒ¨æ–°å¢â€™0aâ€™</strong></p>
<hr>
<h3 id="å¤ç°MongoDBæ—¥å¿—ä»ASCII-textè½¬å˜ä¸ºPCX-æ ¼å¼"><a href="#å¤ç°MongoDBæ—¥å¿—ä»ASCII-textè½¬å˜ä¸ºPCX-æ ¼å¼" class="headerlink" title="å¤ç°MongoDBæ—¥å¿—ä»ASCII textè½¬å˜ä¸ºPCX æ ¼å¼"></a>å¤ç°MongoDBæ—¥å¿—ä»ASCII textè½¬å˜ä¸ºPCX æ ¼å¼</h3><p>åœ¨æµ‹è¯•ç¯å¢ƒä¸­å¤ç°æ—¥å¿—ä»<code>ASCII text</code>å˜æˆ<code>PCX ver. 2.5 image data</code></p>
<ol>
<li>é€šè¿‡mongoç™»é™†æ•°æ®åº“æ‰§è¡Œå¤§é‡çš„æ’å…¥æ“ä½œ</li>
<li>é€šè¿‡echo &gt; mongod27017.log  å‘½ä»¤å°è¯•æ¸…ç©ºmongod27017.log</li>
<li>æŸ¥çœ‹æˆªæ–­åçš„æ—¥å¿—æ–‡ä»¶æ ¼å¼ï¼Œå˜æˆäº†very short file (no magic)</li>
<li>ç­‰æ–‡æ¡£æ’å…¥å®Œæ¯•</li>
<li>é€šè¿‡<code>tail -f</code> æŸ¥çœ‹æ—¥å¿—æ˜ç»†ï¼Œçœ‹åˆ°ç¡®å®æœ‰æ—¥å¿—å†™å…¥</li>
<li>æŸ¥çœ‹æ—¥å¿—æ ¼å¼ï¼Œå‘ç°å˜æˆäº†<code>PCX ver. 2.5 image data</code></li>
</ol>
<p><img src="%E5%88%A9%E7%94%A8split%E5%B7%A5%E5%85%B7%E8%A7%A3%E5%86%B3%E4%B8%80%E6%AC%A1MongoDB%E6%97%A5%E5%BF%97%E5%BC%82%E5%B8%B8%E9%97%AE%E9%A2%98/05.png" alt=""></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@sh_01 ~]# mongo</span><br><span class="line">MongoDB shell version: 3.2.16</span><br><span class="line">connecting to: test</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> db.auth(<span class="string">'test_dev'</span>,<span class="string">'uplooking'</span>)</span></span><br><span class="line">1</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> db.t1.find()</span></span><br><span class="line">&#123; "_id" : ObjectId("5b5ebb6796b8b74a73ee30f6"), "a" : 1, "b" : 2 &#125;</span><br><span class="line">&#123; "_id" : ObjectId("5b5ebb6996b8b74a73ee30f7"), "a" : 1, "b" : 1 &#125;</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> <span class="keyword">for</span> (i=1;i&lt;200000;i++)&#123;</span></span><br><span class="line">... db.t1.insert(&#123;id:i&#125;)&#125;</span><br><span class="line">WriteResult(&#123; "nInserted" : 1 &#125;)</span><br><span class="line"></span><br><span class="line">[root@sh_01 ~]# cd /alidata/mongodb/logs</span><br><span class="line">[root@sh_01 log]# ll</span><br><span class="line">-rw-r--r-- 1 root root 2182 Aug  3 10:28 mongod27017.log</span><br><span class="line">-rw-r--r-- 1 root root 3100 Aug  2 14:19 mongod27017.log.2018-08-02T07-18-27</span><br><span class="line">-rw-r--r-- 1 root root 1526 Aug  2 15:18 mongod27017.log.2018-08-02T07-18-54</span><br><span class="line">[root@sh_01 log]# file *</span><br><span class="line">mongod27017.log:                     ASCII text, with very long lines</span><br><span class="line">mongod27017.log.2018-08-02T07-18-27: ASCII text, with very long lines</span><br><span class="line">mongod27017.log.2018-08-02T07-18-54: ASCII text, with very long lines</span><br><span class="line"></span><br><span class="line">[root@sh_01 log]# echo &gt; mongod27017.log</span><br><span class="line">[root@sh_01 log]# echo &gt; mongod27017.log</span><br><span class="line">[root@sh_01 log]# ll</span><br><span class="line">total 12</span><br><span class="line">-rw-r--r-- 1 root root    1 Aug  3 10:29 mongod27017.log</span><br><span class="line">-rw-r--r-- 1 root root 3100 Aug  2 14:19 mongod27017.log.2018-08-02T07-18-27</span><br><span class="line">-rw-r--r-- 1 root root 1526 Aug  2 15:18 mongod27017.log.2018-08-02T07-18-54</span><br><span class="line">[root@sh_01 log]# file *</span><br><span class="line">mongod27017.log:                     very short file (no magic)</span><br><span class="line">mongod27017.log.2018-08-02T07-18-27: ASCII text, with very long lines</span><br><span class="line">mongod27017.log.2018-08-02T07-18-54: ASCII text, with very long lines</span><br><span class="line"></span><br><span class="line">[root@sh_01 log]# tail -f mongod27017.log</span><br><span class="line"></span><br><span class="line">2018-08-03T10:30:21.936+0800 I NETWORK  [initandlisten] connection accepted from 127.0.0.1:43720 #2 (2 connections now open)</span><br><span class="line"></span><br><span class="line">[root@sh_01 log]# ll -h</span><br><span class="line">total 12K</span><br><span class="line">-rw-r--r-- 1 root root 2.8K Aug  3 10:30 mongod27017.log</span><br><span class="line">-rw-r--r-- 1 root root 3.1K Aug  2 14:19 mongod27017.log.2018-08-02T07-18-27</span><br><span class="line">-rw-r--r-- 1 root root 1.5K Aug  2 15:18 mongod27017.log.2018-08-02T07-18-54</span><br><span class="line">[root@sh_01 log]# file *</span><br><span class="line">mongod27017.log:                     PCX ver. 2.5 image data</span><br><span class="line">mongod27017.log.2018-08-02T07-18-27: ASCII text, with very long lines</span><br><span class="line">mongod27017.log.2018-08-02T07-18-54: ASCII text, with very long lines</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸€è¾¹ä¸æ–­äº§ç”Ÿæ—¥å¿—ï¼Œä¸€è¾¹å¤šæ¬¡æ‰§è¡Œ<span class="built_in">echo</span>&gt; </span></span><br><span class="line">[root@sh_01 log]# echo &gt; mongod27017.log</span><br><span class="line">[root@sh_01 log]# echo &gt; mongod27017.log</span><br><span class="line">[root@sh_01 log]# file *</span><br><span class="line">mongod27017.log:                     PCX ver. 2.5 image data</span><br><span class="line">mongod27017.log.2018-08-02T07-18-27: ASCII text, with very long lines</span><br><span class="line">mongod27017.log.2018-08-02T07-18-54: ASCII text, with very long lines</span><br><span class="line">mongod27017.log.2018-08-03T03-09-08: PCX ver. 2.5 image data</span><br><span class="line">[root@sh_01 log]# echo &gt; mongod27017.log</span><br><span class="line">[root@sh_01 log]# file *</span><br><span class="line">mongod27017.log:                     very short file (no magic)</span><br><span class="line">mongod27017.log.2018-08-02T07-18-27: ASCII text, with very long lines</span><br><span class="line">mongod27017.log.2018-08-02T07-18-54: ASCII text, with very long lines</span><br><span class="line">mongod27017.log.2018-08-03T03-09-08: PCX ver. 2.5 image data</span><br><span class="line">[root@sh_01 log]# ll -h</span><br><span class="line">total 16K</span><br><span class="line">-rw-r--r-- 1 root root    1 Aug  3 11:28 mongod27017.log</span><br><span class="line">-rw-r--r-- 1 root root 3.1K Aug  2 14:19 mongod27017.log.2018-08-02T07-18-27</span><br><span class="line">-rw-r--r-- 1 root root 1.5K Aug  2 15:18 mongod27017.log.2018-08-02T07-18-54</span><br><span class="line">-rw-r--r-- 1 root root 2.9K Aug  3 11:05 mongod27017.log.2018-08-03T03-09-08</span><br><span class="line">[root@sh_01 log]# file *</span><br><span class="line">mongod27017.log:                     very short file (no magic)</span><br><span class="line">mongod27017.log.2018-08-02T07-18-27: ASCII text, with very long lines</span><br><span class="line">mongod27017.log.2018-08-02T07-18-54: ASCII text, with very long lines</span><br><span class="line">mongod27017.log.2018-08-03T03-09-08: PCX ver. 2.5 image data</span><br><span class="line">[root@sh_01 log]# file *</span><br><span class="line">mongod27017.log:                     PCX ver. 2.5 image data</span><br><span class="line">mongod27017.log.2018-08-02T07-18-27: ASCII text, with very long lines</span><br><span class="line">mongod27017.log.2018-08-02T07-18-54: ASCII text, with very long lines</span><br><span class="line">mongod27017.log.2018-08-03T03-09-08: PCX ver. 2.5 image data</span><br><span class="line">[root@sh_01 log]# hexdump -c mongod27017.log</span><br><span class="line">0000000  \n  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0</span><br><span class="line">0000010  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0</span><br><span class="line">*</span><br><span class="line">0000850  \0  \0  \0  \0  \0  \0  \0   2   0   1   8   -   0   8   -   0</span><br><span class="line">0000860   3   T   1   1   :   2   9   :   0   6   .   7   2   9   +   0</span><br><span class="line">0000870   8   0   0       I       A   C   C   E   S   S               [</span><br><span class="line">0000880   c   o   n   n   3   ]       U   n   a   u   t   h   o   r   i</span><br><span class="line">0000890   z   e   d   :       n   o   t       a   u   t   h   o   r   i</span><br><span class="line">00008a0   z   e   d       o   n       t   e   s   t       t   o       e</span><br><span class="line">00008b0   x   e   c   u   t   e       c   o   m   m   a   n   d       &#123;</span><br><span class="line">00008c0       f   i   n   d   :       "   t   1   "   ,       f   i   l</span><br><span class="line">00008d0   t   e   r   :       &#123;   &#125;       &#125;  \n</span><br></pre></td></tr></table></figure>

<p>æˆåŠŸå¤ç°äº†å®¢æˆ·çš„æƒ…å†µï¼š</p>
<ol>
<li><p>ç¬¬ä¸€æ¬¡<code>echo &gt; log</code>ï¼Œæ–‡ä»¶å¤´éƒ¨æ–°å¢<code>\n</code></p>
</li>
<li><p>å¤šæ¬¡<code>echo &gt; log</code>,æ–‡ä»¶å¤´éƒ¨å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">0000000  \n  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0</span><br><span class="line">0000010  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0</span><br><span class="line">*</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>ç¡®å®æ˜¯mongodbæ—¥å¿—è½®è¯¢å‡ºäº†é—®é¢˜ï¼š</p>
<ol>
<li><code>echo &gt; log</code>ä¼šå¾€æ–‡ä»¶å¤´éƒ¨æ’å…¥<code>\n</code>å³16è¿›åˆ¶çš„<code>0a</code></li>
<li>åœ¨æ•°æ®åº“æ­£å¸¸è¿è¡Œä¸­ï¼Œå¯¹logæ–‡ä»¶æ˜¯åŠ äº†é”çš„ï¼Œå¼ºåˆ¶æ‰§è¡Œ<code>echo &gt; log</code>æ˜¯æ— æ³•è¿›è¡Œè¦†ç›–çš„ï¼Œä¼šå°†æ‰€æœ‰çš„æ•°æ®å…¨éƒ¨ç½®ä¸º<code>0</code></li>
<li>å¼ºåˆ¶è¦†ç›–åï¼Œæ–‡ä»¶å¤´éƒ¨å˜æˆäº†æ— æ•°çš„ç©ºç™½</li>
</ol>
<h3 id="å¾…è§£å†³é—®é¢˜"><a href="#å¾…è§£å†³é—®é¢˜" class="headerlink" title="å¾…è§£å†³é—®é¢˜"></a>å¾…è§£å†³é—®é¢˜</h3><ul>
<li>MongoDBæ—¥å¿—è½®è¯¢æ–¹æ³•è°ƒæ•´ä¸º<strong>kill -SIGUSER1 [mongodpid]</strong></li>
<li>ä¿®å¤ç›®å‰å·²ç»å˜ä¸ºå›¾ç‰‡æ ¼å¼çš„æ—¥å¿—ï¼Œå¹¶æ‹‰å–15ç‚¹åˆ°16ç‚¹çš„æ—¥å¿—</li>
</ul>
<h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><h3 id="MongoDBæ—¥å¿—è½®è¯¢"><a href="#MongoDBæ—¥å¿—è½®è¯¢" class="headerlink" title="MongoDBæ—¥å¿—è½®è¯¢"></a>MongoDBæ—¥å¿—è½®è¯¢</h3><h4 id="æµ‹è¯•ç¯å¢ƒ"><a href="#æµ‹è¯•ç¯å¢ƒ" class="headerlink" title="æµ‹è¯•ç¯å¢ƒ"></a>æµ‹è¯•ç¯å¢ƒ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@sh_01 log]# pidof mongod</span><br><span class="line">1828</span><br><span class="line">[root@sh_01 log]# kill -SIGUSER1 1828</span><br><span class="line">-bash: kill: SIGUSER1: invalid signal specification</span><br><span class="line">[root@sh_01 log]# kill -SIGUSR1 1828</span><br><span class="line">[root@sh_01 log]# ll</span><br><span class="line">total 16</span><br><span class="line">-rw-r--r-- 1 root root 1526 Aug  3 11:09 mongod27017.log</span><br><span class="line">-rw-r--r-- 1 root root 3100 Aug  2 14:19 mongod27017.log.2018-08-02T07-18-27</span><br><span class="line">-rw-r--r-- 1 root root 1526 Aug  2 15:18 mongod27017.log.2018-08-02T07-18-54</span><br><span class="line">-rw-r--r-- 1 root root 2942 Aug  3 11:05 mongod27017.log.2018-08-03T03-09-08</span><br><span class="line">[root@sh_01 log]# file *</span><br><span class="line">mongod27017.log:                     ASCII text, with very long lines</span><br><span class="line">mongod27017.log.2018-08-02T07-18-27: ASCII text, with very long lines</span><br><span class="line">mongod27017.log.2018-08-02T07-18-54: ASCII text, with very long lines</span><br><span class="line">mongod27017.log.2018-08-03T03-09-08: PCX ver. 2.5 image data</span><br></pre></td></tr></table></figure>

<h4 id="ç”Ÿäº§ç¯å¢ƒ"><a href="#ç”Ÿäº§ç¯å¢ƒ" class="headerlink" title="ç”Ÿäº§ç¯å¢ƒ"></a>ç”Ÿäº§ç¯å¢ƒ</h4><p><img src="%E5%88%A9%E7%94%A8split%E5%B7%A5%E5%85%B7%E8%A7%A3%E5%86%B3%E4%B8%80%E6%AC%A1MongoDB%E6%97%A5%E5%BF%97%E5%BC%82%E5%B8%B8%E9%97%AE%E9%A2%98/04.png" alt=""></p>
<p>ä¿®æ”¹æ—¥å¿—è½®è¯¢è„šæœ¬ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@MONGO-SHARD-18 logs]# cat /etc/init.d/mongo_logspit.sh </span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2018/08/02 Apple</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Rotate the MongoDB logs to prevent a single logfile from consuming too much disk space.</span></span><br><span class="line"></span><br><span class="line">cmd=mongod</span><br><span class="line">mongodpath=/opt/mongodb/bin</span><br><span class="line">pidarray=`pidof $&#123;mongodpath&#125;/$cmd`</span><br><span class="line">LOGPATH_SHARD=/data/mongodb/shard1/logs</span><br><span class="line"></span><br><span class="line">for pid in $pidarray;do</span><br><span class="line">if [ $pid ]</span><br><span class="line">then</span><br><span class="line">    kill -SIGUSR1 $pid</span><br><span class="line">fi</span><br><span class="line">done</span><br><span class="line"><span class="meta">#</span><span class="bash">clear logfile more than 7 days</span></span><br><span class="line">cd $LOGPATH_SHARD</span><br><span class="line">find ./ -xdev -mtime +7 -name "shard.log.*" -exec rm -f &#123;&#125;  \;</span><br></pre></td></tr></table></figure>

<p>æ‰€æœ‰çš„åˆ†ç‰‡éƒ½å»æ‰§è¡Œï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kill -SIGUSR1 pidof mongod</span><br></pre></td></tr></table></figure>

<p>åˆ†ç‰‡15æ“ä½œå¦‚ä¸‹ï¼šå…¶ä»–åˆ†ç‰‡åŒæ ·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[zyadmin@MONGO-SHARD-15 ~]$ sudo -i</span><br><span class="line">[root@MONGO-SHARD-15 ~]# cd /data/mongodb/shard1/logs/</span><br><span class="line">[root@MONGO-SHARD-15 logs]# ll -h</span><br><span class="line">total 1.7G</span><br><span class="line">-rw-r--r-- 1 root root 20G Aug  2 15:27 shard.log</span><br><span class="line">-rw-r--r-- 1 root root 19G Jul 25 23:50 shard.log.2018-07-25</span><br><span class="line">-rw-r--r-- 1 root root 19G Jul 26 23:50 shard.log.2018-07-26</span><br><span class="line">-rw-r--r-- 1 root root 19G Jul 27 23:50 shard.log.2018-07-27</span><br><span class="line">-rw-r--r-- 1 root root 20G Jul 28 23:50 shard.log.2018-07-28</span><br><span class="line">-rw-r--r-- 1 root root 20G Jul 29 23:50 shard.log.2018-07-29</span><br><span class="line">-rw-r--r-- 1 root root 20G Jul 30 23:50 shard.log.2018-07-30</span><br><span class="line">-rw-r--r-- 1 root root 20G Jul 31 23:50 shard.log.2018-07-31</span><br><span class="line">-rw-r--r-- 1 root root 20G Aug  1 23:50 shard.log.2018-08-01</span><br><span class="line">[root@MONGO-SHARD-15 logs]# file *</span><br><span class="line">shard.log:            PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-25: PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-26: PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-27: PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-28: PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-29: PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-30: PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-31: PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-08-01: PCX ver. 2.5 image data</span><br><span class="line">[root@MONGO-SHARD-15 logs]# kill -SIGUSR1 `pidof mongod`</span><br><span class="line">[root@MONGO-SHARD-15 logs]# file *</span><br><span class="line">shard.log:                     ASCII text, with very long lines</span><br><span class="line">shard.log.2018-07-25:          PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-26:          PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-27:          PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-28:          PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-29:          PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-30:          PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-07-31:          PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-08-01:          PCX ver. 2.5 image data</span><br><span class="line">shard.log.2018-08-02T07-27-29: PCX ver. 2.5 image data</span><br><span class="line">[root@MONGO-SHARD-15 logs]# ll -h</span><br><span class="line">total 1.7G</span><br><span class="line">-rw-r--r-- 1 root root 2.0K Aug  2 15:27 shard.log</span><br><span class="line">-rw-r--r-- 1 root root  19G Jul 25 23:50 shard.log.2018-07-25</span><br><span class="line">-rw-r--r-- 1 root root  19G Jul 26 23:50 shard.log.2018-07-26</span><br><span class="line">-rw-r--r-- 1 root root  19G Jul 27 23:50 shard.log.2018-07-27</span><br><span class="line">-rw-r--r-- 1 root root  20G Jul 28 23:50 shard.log.2018-07-28</span><br><span class="line">-rw-r--r-- 1 root root  20G Jul 29 23:50 shard.log.2018-07-29</span><br><span class="line">-rw-r--r-- 1 root root  20G Jul 30 23:50 shard.log.2018-07-30</span><br><span class="line">-rw-r--r-- 1 root root  20G Jul 31 23:50 shard.log.2018-07-31</span><br><span class="line">-rw-r--r-- 1 root root  20G Aug  1 23:50 shard.log.2018-08-01</span><br><span class="line">-rw-r--r-- 1 root root  20G Aug  2 15:27 shard.log.2018-08-02T07-27-29</span><br></pre></td></tr></table></figure>

<h3 id="ä¿®å¤å¼‚å¸¸æ—¥å¿—"><a href="#ä¿®å¤å¼‚å¸¸æ—¥å¿—" class="headerlink" title="ä¿®å¤å¼‚å¸¸æ—¥å¿—"></a>ä¿®å¤å¼‚å¸¸æ—¥å¿—</h3><h4 id="ä¿®å¤æ€è·¯"><a href="#ä¿®å¤æ€è·¯" class="headerlink" title="ä¿®å¤æ€è·¯"></a>ä¿®å¤æ€è·¯</h4><p>å¼„æ¸…æ¥šæ—¥å¿—å˜æ›´çš„åŸå› ä»¥åŠå¤ç°è¿‡ç¨‹åï¼Œä¸éš¾å‘ç°ï¼Œæ—¥å¿—å› ä¸ºå¤´éƒ¨å˜åŒ–ä»è€Œå¯¼è‡´æ–‡ä»¶æ ¼å¼å˜æ›´ã€‚å› æ­¤æ¨æµ‹å¼‚å¸¸æ—¥å¿—çš„ç»„æˆå¦‚ä¸‹ï¼š</p>
<ol>
<li>å¤´éƒ¨ä¸º<code>0a</code></li>
<li>ä¸­é—´å…¨éƒ¨éƒ½æ˜¯<code>0</code></li>
<li>æœ€åæ˜¯æ­£å¸¸çš„å­—ç¬¦ä¸²è®°å½•ç€mongodbçš„æ—¥å¿—ä¿¡æ¯ï¼Œç±»ä¼¼äº<code>2018-08-03T10:30:21.936+0800 I NETWORK  [initandlisten] connection accepted from 127.0.0.1:43720 #2 (2 connections now open)</code>ç”±æ—¥å¿—å’Œæ—¥å¿—æ˜ç»†ç»„æˆ</li>
</ol>
<p>å› æ­¤ä¿®å¤çš„æ€è·¯å¦‚ä¸‹ï¼š</p>
<ul>
<li>23Gçš„æ—¥å¿—ï¼Œé¦–å…ˆæŒ‰ç…§å¤§å°6Gåšåˆ‡åˆ†<code>split -b 6G log</code>ï¼Œåˆ‡åˆ†æˆ4ä¸ªæ–‡ä»¶</li>
<li>æŸ¥çœ‹åˆ‡åˆ†åçš„æ—¥å¿—æ ¼å¼ï¼Œå¦‚æœæœ€åä¸€ä¸ªæ—¥å¿—ä¸º<code>ASCII text</code>åˆ™ä¸å†åˆ‡åˆ†å¦åˆ™ï¼Œå°†æœ€åä¸€ä¸ªæ—¥å¿—ç»§ç»­åˆ‡åˆ†</li>
<li>å¾ªç¯ä¸Šä¸€æ­¥ï¼Œç›´åˆ°æœ€åä¸€ä¸ªæ–‡ä»¶åˆ‡åˆ†å‡ºæ¥æ²¡æœ‰<code>ASCII text</code>ä¸ºæ­¢</li>
</ul>
<h4 id="æ“ä½œæ˜ç»†"><a href="#æ“ä½œæ˜ç»†" class="headerlink" title="æ“ä½œæ˜ç»†"></a>æ“ä½œæ˜ç»†</h4><blockquote>
<p>æ—¥å¿—è½®è¯¢çš„éƒ¨ç½²è·ç¦»ç°åœ¨å¤§æ¦‚4ä¸ªæœˆ</p>
</blockquote>
<ol>
<li><p>ç¬¬ä¸€æ¬¡å°†23Gçš„æ–‡ä»¶ä»¥6Gåˆ‡åˆ†æˆ4ä¸ªæ–‡ä»¶ï¼šxaa\xab\xac\xadï¼ŒæŸ¥çœ‹4ä¸ªæ–‡ä»¶çš„å±æ€§ä¸º</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">xaa:               PCX ver. 2.5 image data</span><br><span class="line">xab:               PCX ver. 2.5 image data</span><br><span class="line">xac:               PCX ver. 2.5 image data</span><br><span class="line">xad:                PCX ver. 2.5 image data</span><br></pre></td></tr></table></figure></li>
<li><p>é‡å‘½åxadä¸ºx1ç¬¬äºŒæ¬¡åˆ‡åˆ†x1 5Gï¼ŒæŒ‰ç…§1Gåˆ‡åˆ†æˆ5ä»½ï¼ŒæŸ¥çœ‹æ–‡ä»¶å±æ€§</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">xaa:               PCX ver. 2.5 image data</span><br><span class="line">xab:               PCX ver. 2.5 image data</span><br><span class="line">xac:               PCX ver. 2.5 image data</span><br><span class="line">xad:                PCX ver. 2.5 image data</span><br><span class="line">xae:                ASCII text, with very long lines</span><br></pre></td></tr></table></figure>
</li>
<li><p>é‡åxad ä¸º x2 æŒ‰ç…§15Mçš„å¤§å°åˆ‡åˆ†ï¼ŒæŸ¥çœ‹æ–‡ä»¶çš„å±æ€§å¦‚ä¸‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">xaa:	      PCX ver. 2.5 image data</span><br><span class="line">æ­¤å¤„çœç•¥ã€‚ã€‚ã€‚</span><br><span class="line">xdo:               PCX ver. 2.5 image data</span><br><span class="line">xdp:               ASCII text, with very long lines</span><br><span class="line">xdq:               ASCII text, with very long lines</span><br><span class="line">xdr:               ASCII text, with very long lines</span><br><span class="line">xds:               ASCII text, with very long lines</span><br><span class="line">xdt:               ASCII text, with very long lines</span><br><span class="line">xdu:               ASCII text, with very long lines</span><br><span class="line">xdv:               UTF-8 Unicode text, with very long lines</span><br><span class="line">xdw:               ASCII text, with very long lines</span><br><span class="line">xdx:               ASCII text, with very long lines</span><br><span class="line">xdy:               ASCII text, with very long lines</span><br></pre></td></tr></table></figure></li>
<li><p>åˆ‡åˆ†åæ–‡ä»¶ç±»å‹ä¸º<code>ASCII text</code>çš„æ–‡ä»¶ä¸­æ‰¾åˆ°15ç‚¹~16ç‚¹çš„æ–‡æ¡£</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@sh_01 mongolog_20180801]# head -n 2 xdv</span><br><span class="line">re: "x86_64", version: "Kernel 3.10.0-693.2.2.el7.x86_64" &#125; &#125;</span><br><span class="line">2018-08-01T16:13:44.958+0800 I ACCESS   [conn4972925] Successfully authenticated as principal __system on local</span><br><span class="line">[root@sh_01 mongolog_20180801]# head -n 2 xdu</span><br><span class="line">38422 #4967772 (445 connections now open)</span><br><span class="line">2018-08-01T14:00:10.575+0800 I NETWORK  [thread1] connection accepted from 172.16.0.44:38430 #4967773 (446 connections now open)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li><code>xdv</code> çš„å¤´éƒ¨æ˜¯<code>2018-08-01T16:13:44.958+0800</code>,å› æ­¤å¯ä»¥ç¡®å®š15~16çš„æ—¥å¿—åœ¨xduä¸­</li>
<li><code>xdu</code>è®°å½•çš„æ—¥å¿—æ—¶é—´æ®µä¸º<code>2018-08-01T14:00:10.575+0800</code>~<code>2018-08-01T16:13:44.958+0800</code></li>
<li>é‡å‘½å<code>xdu</code>ä¸º<code>mongolog.18.14_16</code></li>
</ul>
<h3 id="åˆ†ææ—¥å¿—"><a href="#åˆ†ææ—¥å¿—" class="headerlink" title="åˆ†ææ—¥å¿—"></a>åˆ†ææ—¥å¿—</h3><h4 id="åˆ†æå‘½ä»¤"><a href="#åˆ†æå‘½ä»¤" class="headerlink" title="åˆ†æå‘½ä»¤"></a>åˆ†æå‘½ä»¤</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è·å–08æœˆ01å·ä¸‹åˆ3ç‚¹å¼€å§‹åˆ°4ç‚¹æ‰§è¡Œæ—¶é—´è¶…è¿‡5ç§’çš„æŸ¥è¯¢</span></span><br><span class="line">mlogfilter mongolog.18.14_16 --from 2018-08-01T15 --to "+1h" --slow 5000 &gt; slowlog.txt</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> è·å–08æœˆ01å·ä¸‹åˆ3ç‚¹å¼€å§‹åˆ°4ç‚¹è¯­å¥çš„æ‰§è¡Œæ¬¡æ•°ã€ç”¨æ—¶ç­‰ç»Ÿè®¡ä¿¡æ¯</span></span><br><span class="line">mloginfo slowlog.txt  --queries &gt; an_slowlog.txt</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> é€šè¿‡mplotqueriesè¿›è¡Œæ…¢æŸ¥è¯¢æ•£ç‚¹åˆ†å¸ƒå›¾ç»˜åˆ¶ï¼Œä¸”åªè¿”å›å‰10ä¸ª</span></span><br><span class="line">mplotqueries slowlog.txt --output-file 01.png --logscale --group-limit 10</span><br></pre></td></tr></table></figure>

<h4 id="æ…¢æŸ¥è¯¢æ•£ç‚¹åˆ†å¸ƒå›¾"><a href="#æ…¢æŸ¥è¯¢æ•£ç‚¹åˆ†å¸ƒå›¾" class="headerlink" title="æ…¢æŸ¥è¯¢æ•£ç‚¹åˆ†å¸ƒå›¾"></a>æ…¢æŸ¥è¯¢æ•£ç‚¹åˆ†å¸ƒå›¾</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@sh_01 booboo]# mplotqueries slowlog.txt --output-file 01.png --logscale --group-limit 10</span><br><span class="line">                                                                                          </span><br><span class="line">SCATTER plot</span><br><span class="line">   id   #points  group</span><br><span class="line">    1       692  order.order</span><br><span class="line">    2       615  omdmain.item_region_erp</span><br><span class="line">    3         1  omdmain.customer</span><br><span class="line">()</span><br></pre></td></tr></table></figure>
<p><img src="%E5%88%A9%E7%94%A8split%E5%B7%A5%E5%85%B7%E8%A7%A3%E5%86%B3%E4%B8%80%E6%AC%A1MongoDB%E6%97%A5%E5%BF%97%E5%BC%82%E5%B8%B8%E9%97%AE%E9%A2%98/10.png" alt=""></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><h3 id="mongodbæ—¥å¿—è½®è¯¢çš„é—®é¢˜"><a href="#mongodbæ—¥å¿—è½®è¯¢çš„é—®é¢˜" class="headerlink" title="mongodbæ—¥å¿—è½®è¯¢çš„é—®é¢˜"></a>mongodbæ—¥å¿—è½®è¯¢çš„é—®é¢˜</h3><ol>
<li><code>echo &gt; log</code>ä¼šå¾€æ–‡ä»¶å¤´éƒ¨æ’å…¥<code>\n</code>å³16è¿›åˆ¶çš„<code>0a</code></li>
<li>åœ¨æ•°æ®åº“æ­£å¸¸è¿è¡Œä¸­ï¼Œå¯¹logæ–‡ä»¶æ˜¯åŠ äº†é”çš„ï¼Œå¼ºåˆ¶æ‰§è¡Œ<code>echo &gt; log</code>æ˜¯æ— æ³•è¿›è¡Œè¦†ç›–çš„ï¼Œä¼šå°†æ‰€æœ‰çš„æ•°æ®å…¨éƒ¨ç½®ä¸º<code>0</code></li>
<li>å¼ºåˆ¶è¦†ç›–åï¼Œæ–‡ä»¶å¤´éƒ¨å˜æˆäº†æ— æ•°çš„ç©ºç™½</li>
</ol>
<h3 id="é—®é¢˜è§£å†³"><a href="#é—®é¢˜è§£å†³" class="headerlink" title="é—®é¢˜è§£å†³"></a>é—®é¢˜è§£å†³</h3><ul>
<li>MongoDBæ—¥å¿—è½®è¯¢æ–¹æ³•è°ƒæ•´ä¸º<strong>kill -SIGUSER1 [mongodpid]</strong></li>
<li>ä¿®å¤ç›®å‰å·²ç»å˜ä¸ºå›¾ç‰‡æ ¼å¼çš„æ—¥å¿—ï¼Œå¹¶æ‹‰å–15ç‚¹åˆ°16ç‚¹çš„æ—¥å¿—</li>
</ul>
<p>è¯¥caseèŠ±äº†ä¸€æ•´å¤©ï¼Œä»æ€€ç–‘è¢«æ”»å‡»åˆ°ç¡®è®¤æ˜¯æ—¥å¿—è½®è¯¢å¼•èµ·æ–‡ä»¶æ ¼å¼å˜æ›´æ˜¯ä¸€ä¸ªå…³é”®è½¬æŠ˜ç‚¹ï¼›</p>
<p>å¦å¤–PCXæ ¼å¼æ˜¯ç¬¬ä¸€æ¬¡ç¢°åˆ°ï¼Œç–‘æƒ‘äº†åŠå¤©~æœ€åæ˜¯@åŸ¹å°§å‘ç°äº†<code>echo</code>çš„ç«¯å€ªï¼Œ@è¡¾è¢­@å¤§å®å»éªŒè¯æœ€ç»ˆç¡®è®¤äº†é—®é¢˜çš„æ ¹æºã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯å¹¿è§’</category>
        <category>MongoDB</category>
      </categories>
      <tags>
        <tag>æ•°æ®æ•‘æ´</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracleæ•°æ®åº“SQLä¼˜åŒ–_ç´¢å¼•ç¼ºå¤±</title>
    <url>/2018/05/29/oracle%E6%95%B0%E6%8D%AE%E5%BA%93SQL%E4%BC%98%E5%8C%96-%E7%B4%A2%E5%BC%95%E7%BC%BA%E5%A4%B1/</url>
    <content><![CDATA[<p>æ‘˜è¦ï¼šOracleæ•°æ®åº“åšäº†è¿ç§»ï¼Œä»åŸæ¥çš„DGè¿ç§»åˆ°æ–°åº“RACï¼Œå°ç‰ˆæœ¬ä¸åŒï¼›è€åº“ä¸­ç›¸åŒçš„SQLæ‰§è¡Œåªéœ€è¦11ç§’ï¼Œè€Œæ–°åº“éœ€è¦360ç§’ç”šè‡³800å¤šç§’ï¼Œå¦‚ä½•è¿›è¡Œå¤æ‚æŸ¥è¯¢çš„SQLä¼˜åŒ–ï¼Œæœ¬æ–‡æä¾›é€šç”¨çš„ä¸€ä¸ªæ€è·¯ã€‚</p>
<a id="more"></a>

<h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>oracleæ•°æ®åº“åšäº†è¿ç§»ï¼Œä»åŸæ¥çš„DGè¿ç§»åˆ°æ–°åº“RACï¼Œå°ç‰ˆæœ¬ä¸åŒï¼›</p>
<p>è€åº“ä¸­ç›¸åŒçš„SQLæ‰§è¡Œåªéœ€è¦11ç§’ï¼Œè€Œæ–°åº“éœ€è¦360ç§’ç”šè‡³800å¤šç§’ã€‚</p>
<table>
<thead>
<tr>
<th>åº“</th>
<th>åŸæŸ¥è¯¢æ—¶é—´</th>
<th>ä¼˜åŒ–åçš„æŸ¥è¯¢æ—¶é—´</th>
</tr>
</thead>
<tbody><tr>
<td>è€åº“</td>
<td>11ç§’</td>
<td>1.4ç§’ ç¼“å­˜å 0.4ç§’</td>
</tr>
<tr>
<td>æ–°åº“RAC</td>
<td>360ç§’</td>
<td>1.4ç§’ ç¼“å­˜å0.4ç§’æ’æŸ¥æ€è·¯</td>
</tr>
</tbody></table>
<h2 id="å¾…ä¼˜åŒ–SQL"><a href="#å¾…ä¼˜åŒ–SQL" class="headerlink" title="å¾…ä¼˜åŒ–SQL"></a>å¾…ä¼˜åŒ–SQL</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	prj.PROVINCE_AD_NAME,</span><br><span class="line">	prj.CITY_AD_NAME,</span><br><span class="line">	prj.AD_NAME,</span><br><span class="line">	prj.CHANNEL_SYS_CAT,</span><br><span class="line">	prj.EXCUTE_EL,</span><br><span class="line">	prj.PRJ_CODE AS PRJ_CODE,</span><br><span class="line">	prj.PRJ_NAME AS PRJ_NAME,</span><br><span class="line">	prj.POS_CODE AS POS_CODE,</span><br><span class="line">	prj.POS_NAME AS POS_NAME,</span><br><span class="line">	prj.CUST_CHANNEL_CODE,</span><br><span class="line">	prj.CUST_CHANNEL_NAME,</span><br><span class="line">	prj.EMP_CODE AS EMP_CODE,</span><br><span class="line">	prj.NAME AS EMP_NAME,</span><br><span class="line">	prj.ATT_DATE AS APPLY_DATE,</span><br><span class="line">	prj.EMP_PK AS EMP_PK,</span><br><span class="line">	prj.ATT_START_TIME AS START_TIME,</span><br><span class="line">	prj.ATT_END_TIME AS END_TIME,</span><br><span class="line">	prj.ATT_ISWORK AS ISWORK,</span><br><span class="line">	prj.ATT_UNWORK AS ATTTYPE,</span><br><span class="line">	prj.START_XPOS AS ON_WORK_POSITION_LON,</span><br><span class="line">	prj.START_YPOS AS ON_WORK_POSITION_LAT,</span><br><span class="line">	prj.START_ISEXCEP AS ON_WORK_POSITION_STAUS,</span><br><span class="line">	prj.END_XPOS AS OFF_WORK_POSITION_LAT,</span><br><span class="line">	prj.END_YPOS AS OFF_WORK_POSITION_LON,</span><br><span class="line">	prj.END_ISEXCEP AS OFF_WORK_POSITION_STAUS,</span><br><span class="line">	ifcl1Staus.COMPARE_TYPE AS FACE_ATT_TYPE,</span><br><span class="line">	ifcl1.STATUS AS FACE_ATT_STATUS,</span><br><span class="line">	NVL( ifaceCount.faceCount, 0 ) AS FACE_ATT_COUNT,</span><br><span class="line">	NVL( levLeave.LEAVECount, 0 ) AS LEAVE_WORK_COUNT,</span><br><span class="line">	NVL( levRtn.RETURNCount, 0 ) AS RETURN_WORK_COUNT,</span><br><span class="line">	wq.STATUS AS PRJ_QUESTION_TYPE,</span><br><span class="line">	iface2.FACE_ATT_IMG AS FACE_ATT_IMG,</span><br><span class="line">	prj.SA_TYPE</span><br><span class="line">FROM</span><br><span class="line">	(</span><br><span class="line">		SELECT</span><br><span class="line">			dpsi.ID AS ID,</span><br><span class="line">			P.ID AS PRJ_ID,</span><br><span class="line">			mad.AD_CODE,</span><br><span class="line">			mad.PROVINCE_AD_NAME,</span><br><span class="line">			mad.CITY_AD_NAME,</span><br><span class="line">			mad.AD_NAME,</span><br><span class="line">			mpk.POS_KIND_CODE,</span><br><span class="line">			mpk.POS_KIND_NAME,</span><br><span class="line">			P.CODE AS PRJ_CODE,</span><br><span class="line">			P.NAME AS PRJ_NAME,</span><br><span class="line">			P.START_DATE,</span><br><span class="line">			p.END_DATE,</span><br><span class="line">			dpsi.CUST_CHANNEL,</span><br><span class="line">			dpsi.CUST_SYS,</span><br><span class="line">			dpsi.CUST_CHANNEL_CODE,</span><br><span class="line">			dpsi.CUST_CHANNEL_NAME,</span><br><span class="line">			dcs.CHANNEL_SYS_CAT,</span><br><span class="line">			dcs.CHANNEL_CAT_CODE,</span><br><span class="line">			dcs.CHANNEL_AD_CODE,</span><br><span class="line">			dcs.CHANNEL_PROVINCE_AD_CODE,</span><br><span class="line">			dcs.CHANNEL_CITY_AD_CODE,</span><br><span class="line">			dcs.ID AS POS_ID,</span><br><span class="line">			dcs.CHANNEL_CODE AS POS_CODE,</span><br><span class="line">			dcs.CHANNEL_NAME AS POS_NAME,</span><br><span class="line">			dcs.LONGITUDE AS LONGITUDE,</span><br><span class="line">			dcs.LATITUDE AS LATITUDE,</span><br><span class="line">			dss.id AS SALES_ID,</span><br><span class="line">			TO_CHAR( cal.sc_schedule_date, 'yyyy-mm-dd' ) AS sc_schedule_date,</span><br><span class="line">			wor.SW_BEGIN_TIME AS SALES_WORK_START,</span><br><span class="line">			wor.SW_END_TIME AS SALES_WORK_END,</span><br><span class="line">			dss.SALES_EAT_START,</span><br><span class="line">			dss.SALES_EAT_END,</span><br><span class="line">			memp.EMP_PK,</span><br><span class="line">			memp.EMP_CODE,</span><br><span class="line">			dss.SALES_NAME AS NAME,</span><br><span class="line">			dss.SALES_PHONE AS TEL,</span><br><span class="line">			dss.SALES_CARD_ID AS ID_CARD,</span><br><span class="line">			spp.PRJ_ATT_CHECK_TYPE,</span><br><span class="line">			spp.ALLOW_LEAVE_TIME,</span><br><span class="line">			e1.EMP_CODE AS EXCUTE_CODE,</span><br><span class="line">			e1.emp_name AS EXCUTE_EL,</span><br><span class="line">			e2.EMP_CODE AS CITY_CODE,</span><br><span class="line">			e2.emp_name AS CITY_EL,</span><br><span class="line">			e3.EMP_CODE AS AREA_CODE,</span><br><span class="line">			e3.EMP_NAME AS AREA_NAME,</span><br><span class="line">			dpsi.SCHEDULE_TYPE,</span><br><span class="line">			sac.ATT_START_TIME,</span><br><span class="line">			sac.ATT_END_TIME,</span><br><span class="line">			sac.ATT_ISWORK,</span><br><span class="line">			sac.ATT_UNWORK,</span><br><span class="line">			sac.START_XPOS,</span><br><span class="line">			sac.START_YPOS,</span><br><span class="line">			DECODE( sac.START_ISEXCEP, 0, 2201, 1, 2202, 2, 2203, 3, 2204, 4, 2205, 2206 ) AS START_ISEXCEP,</span><br><span class="line">			sac.END_XPOS,</span><br><span class="line">			sac.END_YPOS,</span><br><span class="line">			sac.END_ISEXCEP,</span><br><span class="line">			sac.ATT_SCH_PK,</span><br><span class="line">			sac.ATT_DATE,</span><br><span class="line">			CASE</span><br><span class="line">				WHEN sac.ATT_START_TIME IS NOT NULL</span><br><span class="line">				AND sac.ATT_END_TIME IS NOT NULL THEN '1'</span><br><span class="line">				WHEN sac.ATT_START_TIME IS NOT NULL</span><br><span class="line">				OR sac.ATT_END_TIME IS NOT NULL THEN '2'</span><br><span class="line">				ELSE '2'</span><br><span class="line">			END AS SA_TYPE</span><br><span class="line">		FROM</span><br><span class="line">			DM_PROJECT_SELLIN_INFO dpsi</span><br><span class="line">		LEFT JOIN MD_EMP e1 ON</span><br><span class="line">			dpsi.EMP_CODE = e1.EMP_CODE</span><br><span class="line">		LEFT JOIN MD_EMP e2 ON</span><br><span class="line">			dpsi.CITY_EMP_CODE = e2.EMP_CODE</span><br><span class="line">		LEFT JOIN MD_EMP e3 ON</span><br><span class="line">			dpsi.AREA_MANAGER_CODE = e3.EMP_CODE,</span><br><span class="line">			DM_PROJECT P,</span><br><span class="line">			DM_PROJECT_SELLIN_SALES dss,</span><br><span class="line">			DM_CHANNEL_SYNC dcs,</span><br><span class="line">			MD_EMP memp,</span><br><span class="line">			SP_PRJ_PARM spp,</span><br><span class="line">			Md_Admin_Div mad,</span><br><span class="line">			MD_POS_KIND mpk,</span><br><span class="line">			dm_sales_schedule_calendar cal,</span><br><span class="line">			dm_sales_schedule_work wor,</span><br><span class="line">			SP_ATT_SCH sac</span><br><span class="line">		WHERE</span><br><span class="line">			dpsi.PROJECT_ID = P.ID</span><br><span class="line">			AND dss.id = cal.sales_id</span><br><span class="line">			AND cal.schedule_work_id = wor.id</span><br><span class="line">			AND dcs.CHANNEL_CAT_CODE = mpk.POS_KIND_CODE</span><br><span class="line">			AND dss.PROJECT_SELLIN_INFO_ID = dpsi.ID</span><br><span class="line">			AND dss.DELETE_FLAG = '0'</span><br><span class="line">			AND dpsi.CHANNEL_SYNC_ID = dcs.ID</span><br><span class="line">			AND LOWER( memp.EMP_S_CODE )= LOWER( dss.SALES_CARD_ID )</span><br><span class="line">			AND P.IS_DELETE IS NULL</span><br><span class="line">			AND memp.IS_DEL = '0'</span><br><span class="line">			AND spp.PRJ_CODE = P.CODE</span><br><span class="line">			AND mad.AD_ID = dcs.CHANNEL_ADMIN_DIV_ID</span><br><span class="line">			AND mad.IS_DEL = '0'</span><br><span class="line">			AND memp.EMP_TYPE = '1001'</span><br><span class="line">			AND TO_CHAR( cal.sc_schedule_date, 'yyyy-mm-dd' )&gt;='2018-04-01'</span><br><span class="line">			AND TO_CHAR( cal.sc_schedule_date, 'yyyy-mm-dd' )&lt;='2018-04-30'</span><br><span class="line">			AND sac.PRJ_CODE = p.CODE</span><br><span class="line">			AND sac.POS_CODE = dcs.CHANNEL_CODE</span><br><span class="line">			AND sac.EMP_PK = memp.EMP_PK</span><br><span class="line">			AND sac.ATT_DATE = TO_CHAR( cal.sc_schedule_date, 'yyyy-mm-dd' )</span><br><span class="line">			AND TO_CHAR( sac.CRT_DATE, 'yyyy-mm-dd' )&gt;='2018-04-01'</span><br><span class="line">			AND TO_CHAR( sac.CRT_DATE, 'yyyy-mm-dd' )&lt;='2018-04-30'</span><br><span class="line">	) prj,</span><br><span class="line">	(</span><br><span class="line">		SELECT</span><br><span class="line">			ifcl.EMP_PK,</span><br><span class="line">			ifcl.COMPARE_DATE,</span><br><span class="line">			ifcl.STATUS</span><br><span class="line">		FROM</span><br><span class="line">			IPG_FACE_COMPARE_LOG ifcl</span><br><span class="line">		WHERE</span><br><span class="line">			ifcl.HANDLE_TYPE = 0</span><br><span class="line">			AND ifcl.DELETE_FLAG = '0'</span><br><span class="line">			AND ifcl.COMPARE_TYPE IN(</span><br><span class="line">				'1',</span><br><span class="line">				'3',</span><br><span class="line">				'5'</span><br><span class="line">			)</span><br><span class="line">			AND ifcl.COMPARE_DATE &gt;= TO_CHAR( TO_DATE('2018-04-01', 'yyyy-mm-dd' ), 'yyyymmdd' )</span><br><span class="line">			AND ifcl.COMPARE_DATE &lt;= TO_CHAR( TO_DATE('2018-04-30', 'yyyy-mm-dd' ), 'yyyymmdd' )</span><br><span class="line">		GROUP BY</span><br><span class="line">			ifcl.EMP_PK,</span><br><span class="line">			ifcl.COMPARE_DATE,</span><br><span class="line">			ifcl.STATUS</span><br><span class="line">		HAVING</span><br><span class="line">			AVG( STATUS )&lt; 1</span><br><span class="line">	) ifcl1,</span><br><span class="line">	(</span><br><span class="line">		SELECT</span><br><span class="line">			*</span><br><span class="line">		FROM</span><br><span class="line">			(</span><br><span class="line">				SELECT</span><br><span class="line">					EMP_PK,</span><br><span class="line">					COMPARE_DATE,</span><br><span class="line">					COMPARE_TYPE,</span><br><span class="line">					ROW_NUMBER() OVER(</span><br><span class="line">						PARTITION BY EMP_PK,</span><br><span class="line">						COMPARE_DATE</span><br><span class="line">					ORDER BY</span><br><span class="line">						CREATED DESC</span><br><span class="line">					) rn</span><br><span class="line">				FROM</span><br><span class="line">					IPG_FACE_COMPARE_LOG</span><br><span class="line">				WHERE</span><br><span class="line">					COMPARE_DATE &gt;= TO_CHAR( TO_DATE('2018-04-01', 'yyyy-mm-dd' ), 'yyyymmdd' )</span><br><span class="line">					AND COMPARE_DATE &lt;= TO_CHAR( TO_DATE('2018-04-30', 'yyyy-mm-dd' ), 'yyyymmdd' )</span><br><span class="line">					AND COMPARE_TYPE IN(</span><br><span class="line">						'1',</span><br><span class="line">						'3',</span><br><span class="line">						'5'</span><br><span class="line">					)</span><br><span class="line">			) t</span><br><span class="line">		WHERE</span><br><span class="line">			t.rn &lt;= 1</span><br><span class="line">	) ifcl1Staus,</span><br><span class="line">	(</span><br><span class="line">		SELECT</span><br><span class="line">			SP_LEV_RPT.ATT_SCH_PK,</span><br><span class="line">			COUNT(*) AS LEAVECount</span><br><span class="line">		FROM</span><br><span class="line">			SP_LEV_RPT</span><br><span class="line">		WHERE</span><br><span class="line">			SP_LEV_RPT.START_TIME IS NOT NULL</span><br><span class="line">		GROUP BY</span><br><span class="line">			SP_LEV_RPT.ATT_SCH_PK</span><br><span class="line">	) levLeave,</span><br><span class="line">	(</span><br><span class="line">		SELECT</span><br><span class="line">			SP_LEV_RPT.ATT_SCH_PK,</span><br><span class="line">			COUNT(*) AS RETURNCount</span><br><span class="line">		FROM</span><br><span class="line">			SP_LEV_RPT</span><br><span class="line">		WHERE</span><br><span class="line">			SP_LEV_RPT.END_TIME IS NOT NULL</span><br><span class="line">		GROUP BY</span><br><span class="line">			SP_LEV_RPT.ATT_SCH_PK</span><br><span class="line">	) levRtn,</span><br><span class="line">	(</span><br><span class="line">		SELECT</span><br><span class="line">			WX_QUESTION.PRJ_ID,</span><br><span class="line">			DM_PROJECT.CODE,</span><br><span class="line">			'Y' AS STATUS</span><br><span class="line">		FROM</span><br><span class="line">			WX_QUESTION,</span><br><span class="line">			DM_PROJECT</span><br><span class="line">		WHERE</span><br><span class="line">			DM_PROJECT.ID = WX_QUESTION.PRJ_ID</span><br><span class="line">			AND WX_QUESTION.IS_DEL = '0'</span><br><span class="line">			AND WX_QUESTION.STATUS = '0'</span><br><span class="line">		GROUP BY</span><br><span class="line">			WX_QUESTION.PRJ_ID,</span><br><span class="line">			DM_PROJECT.CODE</span><br><span class="line">	) wq,</span><br><span class="line">	(</span><br><span class="line">		SELECT</span><br><span class="line">			ifcl.EMP_PK,</span><br><span class="line">			ifcl.COMPARE_DATE,</span><br><span class="line">			COUNT(*) AS faceCount</span><br><span class="line">		FROM</span><br><span class="line">			IPG_FACE_COMPARE_LOG ifcl</span><br><span class="line">		WHERE</span><br><span class="line">			ifcl.HANDLE_TYPE = 0</span><br><span class="line">			AND ifcl.COMPARE_TYPE IN(</span><br><span class="line">				'1',</span><br><span class="line">				'3',</span><br><span class="line">				'5'</span><br><span class="line">			)</span><br><span class="line">			AND ifcl.COMPARE_DATE &gt;= TO_CHAR( TO_DATE('2018-04-01', 'yyyy-mm-dd' ), 'yyyymmdd' )</span><br><span class="line">			AND ifcl.COMPARE_DATE &lt;= TO_CHAR( TO_DATE('2018-04-30', 'yyyy-mm-dd' ), 'yyyymmdd' )</span><br><span class="line">		GROUP BY</span><br><span class="line">			ifcl.EMP_PK,</span><br><span class="line">			ifcl.COMPARE_DATE</span><br><span class="line">	) ifaceCount,</span><br><span class="line">	(</span><br><span class="line">		SELECT</span><br><span class="line">			iface.EMP_PK,</span><br><span class="line">			iface.COMPARE_DATE,</span><br><span class="line">			wm_concat(</span><br><span class="line">				(</span><br><span class="line">					SELECT</span><br><span class="line">						NVL( TRIM( T.PAR_VALUE ), TRIM( T.OLD_PAR_VALUE ))</span><br><span class="line">					FROM</span><br><span class="line">						(</span><br><span class="line">							SELECT</span><br><span class="line">								(</span><br><span class="line">									SELECT</span><br><span class="line">										PAR_VALUE</span><br><span class="line">									FROM</span><br><span class="line">										MD_SYS_PARM</span><br><span class="line">									WHERE</span><br><span class="line">										PAR_CODE = 'OLD_PIC_PATH'</span><br><span class="line">								) AS OLD_PAR_VALUE,</span><br><span class="line">								PAR_VALUE</span><br><span class="line">							FROM</span><br><span class="line">								MD_SYS_PARM</span><br><span class="line">							WHERE</span><br><span class="line">								PAR_CODE = 'ATT_COS_PATH'</span><br><span class="line">						) T</span><br><span class="line">				)|| REPLACE( SUBSTR( iface.COMPARE_MSG, INSTR( iface.COMPARE_MSG, 'compare', 1, 1 )), ']', '' )</span><br><span class="line">			) AS FACE_ATT_IMG</span><br><span class="line">		FROM</span><br><span class="line">			(</span><br><span class="line">				SELECT</span><br><span class="line">					ifa.EMP_PK,</span><br><span class="line">					ifa.COMPARE_DATE,</span><br><span class="line">					ifa.COMPARE_MSG,</span><br><span class="line">					RANK() OVER(</span><br><span class="line">						PARTITION BY ifa.EMP_PK,</span><br><span class="line">						ifa.COMPARE_DATE</span><br><span class="line">					ORDER BY</span><br><span class="line">						ifa.created DESC</span><br><span class="line">					) rankno</span><br><span class="line">				FROM</span><br><span class="line">					IPG_FACE_COMPARE_LOG ifa</span><br><span class="line">				WHERE</span><br><span class="line">					ifa.HANDLE_TYPE = 0</span><br><span class="line">					AND ifa.COMPARE_TYPE IN(</span><br><span class="line">						'1',</span><br><span class="line">						'3',</span><br><span class="line">						'5'</span><br><span class="line">					)</span><br><span class="line">					AND INSTR( ifa.COMPARE_MSG, 'compare' )&gt; 0</span><br><span class="line">					AND ifa.COMPARE_DATE &gt;= TO_CHAR( TO_DATE('2018-04-01', 'yyyy-mm-dd' ), 'yyyymmdd' )</span><br><span class="line">					AND ifa.COMPARE_DATE &lt;= TO_CHAR( TO_DATE('2018-04-30', 'yyyy-mm-dd' ), 'yyyymmdd' )</span><br><span class="line">			) iface</span><br><span class="line">		WHERE</span><br><span class="line">			iface.rankno &lt;= 3</span><br><span class="line">		GROUP BY</span><br><span class="line">			iface.EMP_PK,</span><br><span class="line">			iface.COMPARE_DATE</span><br><span class="line">	) iface2</span><br><span class="line">WHERE</span><br><span class="line">	prj.PRJ_NAME ='(2013)è¡Œæ”¿é¡¹ç›®'</span><br><span class="line">	AND prj.ATT_DATE &gt;='2018-04-01'</span><br><span class="line">	AND prj.ATT_DATE &lt;='2018-04-30'</span><br><span class="line">	AND prj.EMP_PK = ifcl1.EMP_PK(+)</span><br><span class="line">	AND TO_CHAR( TO_DATE( prj.ATT_DATE, 'yyyy-mm-dd' ), 'yyyymmdd' )= ifcl1.COMPARE_DATE(+)</span><br><span class="line">	AND prj.EMP_PK = ifcl1Staus.EMP_PK(+)</span><br><span class="line">	AND TO_CHAR( TO_DATE( prj.ATT_DATE, 'yyyy-mm-dd' ), 'yyyymmdd' )= ifcl1Staus.COMPARE_DATE(+)</span><br><span class="line">	AND prj.ATT_SCH_PK = levLeave.ATT_SCH_PK(+)</span><br><span class="line">	AND prj.ATT_SCH_PK = levRtn.ATT_SCH_PK(+)</span><br><span class="line">	AND prj.PRJ_CODE = wq.CODE(+)</span><br><span class="line">	AND prj.EMP_PK = ifaceCount.EMP_PK(+)</span><br><span class="line">	AND TO_CHAR( TO_DATE( prj.ATT_DATE, 'yyyy-mm-dd' ), 'yyyymmdd' )= ifaceCount.COMPARE_DATE(+)</span><br><span class="line">	AND prj.EMP_PK = iface2.EMP_PK(+)</span><br><span class="line">	AND TO_CHAR( TO_DATE( prj.sc_schedule_date, 'yyyy-mm-dd' ), 'yyyymmdd' )= iface2.COMPARE_DATE(+)</span><br><span class="line">ORDER BY</span><br><span class="line">	APPLY_DATE DESC,</span><br><span class="line">	ATTTYPE DESC</span><br></pre></td></tr></table></figure>

<h2 id="SQLä¼˜åŒ–æ€è·¯"><a href="#SQLä¼˜åŒ–æ€è·¯" class="headerlink" title="SQLä¼˜åŒ–æ€è·¯"></a>SQLä¼˜åŒ–æ€è·¯</h2><p>SQLè¯­å¥è¾ƒå¤æ‚ï¼Œ8ä¸ªå­æŸ¥è¯¢çš„left outer joinï¼Œæ¯ä¸ªå­æŸ¥è¯¢ä¸­åˆæœ‰è¿æ¥ã€‚æ€è·¯å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä»å¤–å¾€å†…æ‹†åˆ†å­æŸ¥è¯¢</li>
<li>è€æ—§å¯¹æ¯”å­æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’å’Œæ‰§è¡Œæ•ˆç‡</li>
<li>å­æŸ¥è¯¢è¿æ¥ä»1åˆ°2åˆ°3ä¸€ç›´åˆ°8ä¸ªè”æŸ¥å¯¹æ¯”ï¼Œå¯»æ‰¾ç“¶é¢ˆ</li>
</ol>
<h3 id="æ‹†åˆ†å­æŸ¥è¯¢"><a href="#æ‹†åˆ†å­æŸ¥è¯¢" class="headerlink" title="æ‹†åˆ†å­æŸ¥è¯¢"></a>æ‹†åˆ†å­æŸ¥è¯¢</h3><table>
<thead>
<tr>
<th>å­æŸ¥è¯¢</th>
<th>è€åº“ ï¼ˆç§’ï¼‰</th>
<th>æ–°åº“ï¼ˆç§’ï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td>prj</td>
<td>1.182</td>
<td>0.318</td>
</tr>
<tr>
<td>ifcl1</td>
<td>14.229</td>
<td>13.168</td>
</tr>
<tr>
<td>ifclStatus</td>
<td>15.739</td>
<td>16.769</td>
</tr>
<tr>
<td>levLeave</td>
<td>10.147</td>
<td>9.813</td>
</tr>
<tr>
<td>levRtn</td>
<td>9.148</td>
<td>8.3</td>
</tr>
<tr>
<td>wq</td>
<td>0.141</td>
<td>0.165</td>
</tr>
<tr>
<td>ifcl1Count</td>
<td>3.498</td>
<td>1.966</td>
</tr>
<tr>
<td>iface2</td>
<td>49.255</td>
<td>50.897</td>
</tr>
</tbody></table>
<h3 id="å¯»æ‰¾ç“¶é¢ˆ"><a href="#å¯»æ‰¾ç“¶é¢ˆ" class="headerlink" title="å¯»æ‰¾ç“¶é¢ˆ"></a>å¯»æ‰¾ç“¶é¢ˆ</h3><table>
<thead>
<tr>
<th>è¿æ¥</th>
<th>è€åº“ï¼ˆç§’ï¼‰</th>
<th>æ–°åº“ï¼ˆç§’ï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td>prj+ifcl1</td>
<td>1.522</td>
<td>1.129</td>
</tr>
<tr>
<td>+ifclStatus</td>
<td>2.343</td>
<td>1.957</td>
</tr>
<tr>
<td>+levLeave</td>
<td>2.525</td>
<td>1.955</td>
</tr>
<tr>
<td>+levRtn</td>
<td>2.658</td>
<td>1.653</td>
</tr>
<tr>
<td>+wq</td>
<td>2.561</td>
<td>1.999</td>
</tr>
<tr>
<td>+ifcl1Count</td>
<td>3.498</td>
<td>1.966</td>
</tr>
<tr>
<td>+iface2</td>
<td>11.124</td>
<td>383</td>
</tr>
</tbody></table>
<p>å‘ç°ç“¶é¢ˆå‡ºç°åœ¨<code>iface2</code></p>
<h2 id="ä¼˜åŒ–iface2"><a href="#ä¼˜åŒ–iface2" class="headerlink" title="ä¼˜åŒ–iface2"></a>ä¼˜åŒ–iface2</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">			iface.EMP_PK,</span><br><span class="line">			iface.COMPARE_DATE,</span><br><span class="line">			wm_concat(</span><br><span class="line">				(</span><br><span class="line">					SELECT</span><br><span class="line">						NVL( TRIM( T.PAR_VALUE ), TRIM( T.OLD_PAR_VALUE ))</span><br><span class="line">					FROM</span><br><span class="line">						(</span><br><span class="line">							SELECT</span><br><span class="line">								(</span><br><span class="line">									SELECT</span><br><span class="line">										PAR_VALUE</span><br><span class="line">									FROM</span><br><span class="line">										MD_SYS_PARM</span><br><span class="line">									WHERE</span><br><span class="line">										PAR_CODE = 'OLD_PIC_PATH'</span><br><span class="line">								) AS OLD_PAR_VALUE,</span><br><span class="line">								PAR_VALUE</span><br><span class="line">							FROM</span><br><span class="line">								MD_SYS_PARM</span><br><span class="line">							WHERE</span><br><span class="line">								PAR_CODE = 'ATT_COS_PATH'</span><br><span class="line">						) T</span><br><span class="line">				)|| REPLACE( SUBSTR( iface.COMPARE_MSG, INSTR( iface.COMPARE_MSG, 'compare', 1, 1 )), ']', '' )</span><br><span class="line">			) AS FACE_ATT_IMG</span><br><span class="line">		FROM</span><br><span class="line">			(</span><br><span class="line">				SELECT</span><br><span class="line">					ifa.EMP_PK,</span><br><span class="line">					ifa.COMPARE_DATE,</span><br><span class="line">					ifa.COMPARE_MSG,</span><br><span class="line">					RANK() OVER(</span><br><span class="line">						PARTITION BY ifa.EMP_PK,</span><br><span class="line">						ifa.COMPARE_DATE</span><br><span class="line">					ORDER BY</span><br><span class="line">						ifa.created DESC</span><br><span class="line">					) rankno</span><br><span class="line">				FROM</span><br><span class="line">					IPG_FACE_COMPARE_LOG ifa</span><br><span class="line">				WHERE</span><br><span class="line">					ifa.HANDLE_TYPE = 0</span><br><span class="line">					AND ifa.COMPARE_TYPE IN(</span><br><span class="line">						'1',</span><br><span class="line">						'3',</span><br><span class="line">						'5'</span><br><span class="line">					)</span><br><span class="line">					AND INSTR( ifa.COMPARE_MSG, 'compare' )&gt; 0</span><br><span class="line">					AND ifa.COMPARE_DATE &gt;= TO_CHAR( TO_DATE('2018-04-01', 'yyyy-mm-dd' ), 'yyyymmdd' )</span><br><span class="line">					AND ifa.COMPARE_DATE &lt;= TO_CHAR( TO_DATE('2018-04-30', 'yyyy-mm-dd' ), 'yyyymmdd' )</span><br><span class="line">			) iface</span><br><span class="line">		WHERE</span><br><span class="line">			iface.rankno &lt;= 3</span><br><span class="line">		GROUP BY</span><br><span class="line">			iface.EMP_PK,</span><br><span class="line">			iface.COMPARE_DATE</span><br></pre></td></tr></table></figure>

<p><code>IPG_FACE_COMPARE_LOG</code>è¡¨ä¸­<code>COMPARE_DATEåˆ—</code>éœ€è¦æ–°å¢ç´¢å¼•ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ol>
<li>oracleå°ç‰ˆæœ¬ä¸åŒå¼•èµ·ä¼˜åŒ–å™¨æ— æ³•è·å–ç›¸åŒçš„æ‰§è¡Œè®¡åˆ’</li>
<li>ç´¢å¼•ç¼ºå¤±æ˜¯æœ¬æ¬¡çš„æ…¢æŸ¥è¯¢çš„ä¸»è¦åŸå› </li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯å¹¿è§’</category>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>SQLä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQLä¸€æ¬¡æƒŠå¿ƒåŠ¨é­„åœ°æ•°æ®å¼ºåˆ¶æ¢å¤</title>
    <url>/2018/05/17/MySQL%E4%B8%80%E6%AC%A1%E6%83%8A%E5%BF%83%E5%8A%A8%E9%AD%84%E5%9C%B0%E6%95%B0%E6%8D%AE%E5%BC%BA%E5%88%B6%E6%81%A2%E5%A4%8D/</url>
    <content><![CDATA[<p>æ‘˜è¦ï¼šCashæ¢å¤çš„æ­£ç¡®æ–¹å¼æ˜¯ï¼š<strong>å¤‡ä»½æ–‡ä»¶ï¼ˆé€»è¾‘æˆ–ç‰©ç†ï¼‰+ binlog</strong>è¿›è¡Œæ¢å¤ï¼›ç„¶è€Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„è¿ç»´äººå‘˜éƒ½çŸ¥é“æ€ä¹ˆè¿›è¡Œæ­£ç¡®çš„å¤‡ä»½ï¼Œç”šè‡³è¿é€»è¾‘å¤‡ä»½å’Œç‰©ç†å¤‡ä»½çš„åŒºåˆ«æ˜¯ä»€ä¹ˆéƒ½ä¸çŸ¥é“ï¼Ÿæ›´ä¸çŸ¥é“å¤‡ä»½è¿‡ç¨‹ä¸­éœ€è¦è€ƒè™‘æ•°æ®çš„ä¸€è‡´æ€§ä¸æœåŠ¡å¯ç”¨æ€§çš„é—®é¢˜ï¼Ÿæˆ–è€…è¿å¤‡ä»½å·¥å…·éƒ½ä¸ä¼šä½¿ç”¨ï¼Œæ‰€ä»¥å½“ä½ é—®ï¼šæœ‰å¤‡ä»½å—ï¼Ÿå›ç­”ï¼šæ²¡æœ‰æˆ–è€…æ— æ•ˆ</p>
<p>åœ¨æœ¬æ¬¡æ¡ˆä¾‹ä¸­ï¼ŒæŸå®¢æˆ·æ•°æ®åº“å› å­˜å‚¨ç©ºé—´ä¸å¤Ÿå¯¼è‡´æ•°æ®åº“æœåŠ¡å®•æ‰ï¼Œè€Œå®¢æˆ·åœ¨æ•°æ®åº“å®•æœºåï¼Œåªæ‹·è´äº†å•ä¸ª<code>cy</code>åº“æ‰€å±çš„ç›®å½•è¿›è¡Œäº†æ–‡ä»¶å±‚é¢çš„å¤‡ä»½ï¼Œå°±å°†å…¶ä»–æ–‡ä»¶å…¨éƒ¨æ¸…ç©ºï¼Œå½“ä»–æƒ³é‡æ–°å¯åŠ¨æ•°æ®åº“æ—¶å‘ç°æ•°æ®åº“æœåŠ¡å¯åŠ¨ã€‚MySQLä½¿ç”¨5.7.17ç‰ˆæœ¬ï¼Œä½¿ç”¨innodbå­˜å‚¨å¼•æ“ï¼Œå¼€å¯äº†ç‹¬ç«‹è¡¨ç©ºé—´ã€‚ä¹Ÿå°±æ˜¯è¯´å½“å‰çš„æ•‘å‘½ç¨»è‰æ˜¯ï¼šæ¯ä¸ªè¡¨çš„<code>.frm</code>å’Œ<code>.ibd</code>æ–‡ä»¶ã€‚</p>
<a id="more"></a>

<h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>Cashæ¢å¤çš„æ­£ç¡®æ–¹å¼æ˜¯ï¼š<strong>å¤‡ä»½æ–‡ä»¶ï¼ˆé€»è¾‘æˆ–ç‰©ç†ï¼‰+ binlog</strong>è¿›è¡Œæ¢å¤ï¼›ç„¶è€Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„è¿ç»´äººå‘˜éƒ½çŸ¥é“æ€ä¹ˆè¿›è¡Œæ­£ç¡®çš„å¤‡ä»½ï¼Œç”šè‡³è¿é€»è¾‘å¤‡ä»½å’Œç‰©ç†å¤‡ä»½çš„åŒºåˆ«æ˜¯ä»€ä¹ˆéƒ½ä¸çŸ¥é“ï¼Ÿæ›´ä¸çŸ¥é“å¤‡ä»½è¿‡ç¨‹ä¸­éœ€è¦è€ƒè™‘æ•°æ®çš„ä¸€è‡´æ€§ä¸æœåŠ¡å¯ç”¨æ€§çš„é—®é¢˜ï¼Ÿæˆ–è€…è¿å¤‡ä»½å·¥å…·éƒ½ä¸ä¼šä½¿ç”¨ï¼Œæ‰€ä»¥å½“ä½ é—®ï¼šæœ‰å¤‡ä»½å—ï¼Ÿå›ç­”ï¼šæ²¡æœ‰æˆ–è€…æ— æ•ˆ</p>
<p>åœ¨æœ¬æ¬¡æ¡ˆä¾‹ä¸­ï¼ŒæŸå®¢æˆ·åªå¯¹å•ä¸ª<code>cy</code>åº“æ‰€å±çš„ç›®å½•è¿›è¡Œäº†æ–‡ä»¶å±‚é¢çš„å¤‡ä»½ï¼ŒMySQLä½¿ç”¨5.7.17ç‰ˆæœ¬ï¼Œä½¿ç”¨innodbå­˜å‚¨å¼•æ“ï¼Œå¼€å¯äº†ç‹¬ç«‹è¡¨ç©ºé—´ã€‚ä¹Ÿå°±æ˜¯è¯´å½“å‰çš„æ•‘å‘½ç¨»è‰æ˜¯ï¼šæ¯ä¸ªè¡¨çš„<code>.frm</code>å’Œ<code>.ibd</code>æ–‡ä»¶ã€‚</p>
<h2 id="å¼ºåˆ¶è¿˜åŸæ­¥éª¤"><a href="#å¼ºåˆ¶è¿˜åŸæ­¥éª¤" class="headerlink" title="å¼ºåˆ¶è¿˜åŸæ­¥éª¤"></a>å¼ºåˆ¶è¿˜åŸæ­¥éª¤</h2><table>
<thead>
<tr>
<th>æ­¥éª¤</th>
<th>æè¿°</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><strong>åˆ›å»ºåŒç‰ˆæœ¬çš„MySQLæœåŠ¡å®ä¾‹ä¸€æš</strong></td>
<td></td>
</tr>
<tr>
<td>2</td>
<td><strong>è·å–è¡¨çš„åˆ—æ•°</strong></td>
<td>å¦‚æœæœ‰ddlå¤‡ä»½ç›´æ¥å¯¼å…¥ï¼Œå¯æƒœéƒ½æ˜¯æ²¡æœ‰çš„ï¼Œå“­ã€‚ã€‚ã€‚</td>
</tr>
<tr>
<td>2.1</td>
<td>åˆ›å»ºåŒåè¡¨ï¼Œç»“æ„æ— æ‰€è°“</td>
<td>æ•°æ®åº“çš„ä¸–ç•Œä¹Ÿéœ€è¦èº«ä»½è¯ï¼Œå…ˆé€ ä¸ªäººæ‹¿ä¸Šèº«ä»½è¯ï¼Œè‡³äºäººé•¿å¾—å•¥æ ·å‡ æ¡èƒ³è†Šéƒ½æ— æ‰€è°“ï¼Œåå­—æœ€é‡è¦</td>
</tr>
<tr>
<td>2.2</td>
<td>åœæœåŠ¡ï¼›ä½¿ç”¨å¤‡ä»½çš„frmæ–‡ä»¶è¦†ç›–å½“å‰çš„frm</td>
<td>å·æ¢æ¢æŸ±</td>
</tr>
<tr>
<td>2.3</td>
<td>é…ç½®æ–‡ä»¶æ·»åŠ å¼ºåˆ¶æ¢å¤innodbçš„å‚æ•°ï¼›å¯åŠ¨æœåŠ¡</td>
<td>è’™è”½å¥¹çš„åŒçœ¼</td>
</tr>
<tr>
<td>2.4</td>
<td>æŸ¥çœ‹è¡¨ç»“æ„</td>
<td>æ•°æ®åº“ä¼šæ‹¿ç€èº«ä»½è¯å’Œé¢å‰çš„äººï¼ˆfrmæ–‡ä»¶ï¼‰åšå¯¹æ¯”</td>
</tr>
<tr>
<td>2.5</td>
<td>æŸ¥çœ‹é”™è¯¯æ—¥å¿—ä¸­å…³äºè¯¥è¡¨çš„æŠ¥é”™</td>
<td>æ•°æ®åº“å‘ç°èº«ä»½è¯ä¸Šçš„äººåªæœ‰1æ¡èƒ³è†Šï¼Œè€Œè¢«æ£€æŸ¥çš„äººæœ‰10æ¡èƒ³è†Šï¼Œæ˜æ˜¾å¯¹ä¸ä¸Šå•Š</td>
</tr>
<tr>
<td>2.6</td>
<td>æˆåŠŸè·å–è¡¨çš„çœŸå®åˆ—æ•°ï¼›åˆ é™¤è¿™äº›è¡¨</td>
<td>é€šè¿‡è­¦å‘Šå¯ä»¥çŸ¥é“åº”è¯¥é€ ä¸€ä¸ªæœ‰10æ¡èƒ³è†Šçš„äºº</td>
</tr>
<tr>
<td>3</td>
<td><strong>è·å–è¡¨çš„ç»“æ„</strong></td>
<td></td>
</tr>
<tr>
<td>3.1</td>
<td>åˆ›å»ºåŒåè¡¨ï¼Œåˆ—æ•°ä¸€è‡´ï¼Œåˆ—åæ— æ‰€è°“</td>
<td>è¿™ä¸€æ¬¡é€ äººçš„æ—¶å€™ï¼Œé€ ä¸€ä¸ªæœ‰10æ¡èƒ³è†Šçš„ï¼Œæ¯æ¡èƒ³è†Šçš„åå­—æ— æ‰€è°“ï¼Œå…³é”®æ˜¯èº«ä»½è¯ä¸Šé¢çš„äººåå’Œ10æ¡èƒ³è†Š</td>
</tr>
<tr>
<td>3.2</td>
<td>åœæœåŠ¡ï¼›ä½¿ç”¨å¤‡ä»½çš„frmæ–‡ä»¶è¦†ç›–å½“å‰çš„frm</td>
<td>å·æ¢æ¢æŸ±</td>
</tr>
<tr>
<td>3.3</td>
<td>é…ç½®æ–‡ä»¶æ·»åŠ å¼ºåˆ¶æ¢å¤innodbçš„å‚æ•°ï¼›å¯åŠ¨æœåŠ¡</td>
<td>è’™è”½å¥¹çš„åŒçœ¼</td>
</tr>
<tr>
<td>3.4</td>
<td>æŸ¥çœ‹è¡¨ç»“æ„</td>
<td>æ•°æ®åº“ä¼šæ‹¿ç€æ–°çš„èº«ä»½è¯å’Œé¢å‰çš„äººï¼ˆfrmæ–‡ä»¶ï¼‰åšå¯¹æ¯”</td>
</tr>
<tr>
<td>3.5</td>
<td>æˆåŠŸè·å–è¡¨ç»“æ„</td>
<td>æ•°æ®åº“å‘ç°èº«ä»½è¯ä¸Šä¿¡æ¯å’Œè¢«æ£€æŸ¥çš„äººä¿¡æ¯ä¸€è‡´ï¼Œåå­—ï¼Œèƒ³è†Šçš„æ•°é‡ï¼Œå¯¹ä¸Šäº†å°±è®¤å¯å•¦ï¼ï¼ˆæ•°æ®åº“åªæ£€æŸ¥è¡¨åå’Œåˆ—çš„ä¸ªæ•°ï¼‰</td>
</tr>
<tr>
<td>4</td>
<td><strong>å¼ºåˆ¶æ¢å¤è¡¨æ•°æ®</strong></td>
<td></td>
</tr>
<tr>
<td>4.1</td>
<td>ä¸¢å¼ƒå½“å‰è¡¨çš„æ•°æ®</td>
<td>æŠŠè¿™ä¸ªäººçš„äº”è„å…­è…‘éƒ½æŒ–å‡ºæ¥</td>
</tr>
<tr>
<td>4.2</td>
<td>å°†å¤‡ä»½çš„ibdæ”¾åˆ°å¯¹åº”è·¯å¾„</td>
<td>å°†ä¹‹å‰å¤‡ä»½çš„åƒäº†è‚‰çš„äº”è„å…­è…‘æ”¾è¿›å»</td>
</tr>
<tr>
<td>4.3</td>
<td>å¯¼å…¥æ–°çš„æ•°æ®ï¼Œå¦‚æœæ•°æ®åº“åŠ è½½æˆåŠŸåˆ™å¯ä»¥çœ‹åˆ°æ•°æ®ï¼›å¦åˆ™åŠ è½½å¤±è´¥ã€‚</td>
<td>è·Ÿå¤§è„‘æ±‡æŠ¥ä¸€ä¸‹æ–°çš„äº”è„å…­è…‘å·²ç»å°±ä½å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ï¼›å¦‚æœä½¿ç”¨å¾—æ²¡é—®é¢˜å°±æˆåŠŸï¼›å¦‚æœå™¨å®˜å·²ç»æŸåé‚£ä¹ˆæ‰‹æœ¯å¤±è´¥ã€‚</td>
</tr>
</tbody></table>
<h2 id="è¯¦ç»†è¿‡ç¨‹"><a href="#è¯¦ç»†è¿‡ç¨‹" class="headerlink" title="è¯¦ç»†è¿‡ç¨‹"></a>è¯¦ç»†è¿‡ç¨‹</h2><h3 id="æ•°æ®é‡"><a href="#æ•°æ®é‡" class="headerlink" title="æ•°æ®é‡"></a>æ•°æ®é‡</h3><table>
<thead>
<tr>
<th>æ˜ç»†</th>
<th>å¤§å°</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody><tr>
<td>ç‰©ç†æ–‡ä»¶</td>
<td>174M</td>
<td></td>
</tr>
<tr>
<td>æ•°æ®åº“</td>
<td>1ä¸ª</td>
<td>cy</td>
</tr>
<tr>
<td>è¡¨</td>
<td>57å¼ </td>
<td></td>
</tr>
</tbody></table>
<h3 id="æ¢å¤ç»“æœ"><a href="#æ¢å¤ç»“æœ" class="headerlink" title="æ¢å¤ç»“æœ"></a>æ¢å¤ç»“æœ</h3><blockquote>
<p>åœ¨å®¢æˆ·æœåŠ¡å™¨ä¸Šé¢ç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<table>
<thead>
<tr>
<th>æ˜ç»†</th>
<th>æˆåŠŸ</th>
<th>å¤±è´¥</th>
<th>æ¢å¤ç‡</th>
</tr>
</thead>
<tbody><tr>
<td>è¡¨ç»“æ„</td>
<td>58</td>
<td>0</td>
<td>100%</td>
</tr>
<tr>
<td>è¡¨æ•°æ®</td>
<td>56</td>
<td>2</td>
<td>96%</td>
</tr>
</tbody></table>
<blockquote>
<p>åœ¨æˆ‘çš„æœåŠ¡å™¨ä¸Šé¢ç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<table>
<thead>
<tr>
<th>æ˜ç»†</th>
<th>æˆåŠŸ</th>
<th>å¤±è´¥</th>
<th>æ¢å¤ç‡</th>
</tr>
</thead>
<tbody><tr>
<td>è¡¨ç»“æ„</td>
<td>58</td>
<td>0</td>
<td>100%</td>
</tr>
<tr>
<td>è¡¨æ•°æ®</td>
<td>58</td>
<td>0</td>
<td>100%</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@toberoot mysql]# /alidata/mysql/bin/mysqld --initialize-insecure --datadir=/alidata/mysql/data/  --user=mysql</span><br><span class="line">[root@toberoot mysql]# service mysqld start</span><br><span class="line">Starting MySQL.                                            [  OK  ]</span><br><span class="line">[root@toberoot mysql]# mysql -V</span><br><span class="line">mysql  Ver 14.14 Distrib 5.7.17, for linux-glibc2.5 (x86_64) using  EditLine wrapper</span><br><span class="line"></span><br><span class="line">[root@toberoot mysql]# cd ~/home/cy02/</span><br><span class="line">[root@toberoot cy02]# ll</span><br><span class="line">total 178140</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9022 Aug 14  2017 base_dict.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Mar 14 15:00 base_dict.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8822 Mar  2 11:14 biz_advise.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 May 14 14:39 biz_advise.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8850 Mar  2 11:14 biz_bank.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Mar  2 11:14 biz_bank.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9580 Mar  2 11:14 biz.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9286 Mar  2 11:14 biz_gift.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Apr 24 14:08 biz_gift.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8890 Mar  2 11:14 biz_gprs_bind.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8745 Mar  2 11:14 biz_gprs_bind_his.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql   180224 May 15 09:40 biz_gprs_bind_his.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql   180224 May 15 09:42 biz_gprs_bind.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 May 15 14:33 biz.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8845 Aug 14  2017 biz_msg_template.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 biz_msg_template.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8881 Aug 14  2017 biz_take_bank.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 May 13 19:26 biz_take_bank.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9411 Nov 24 13:22 biz_take.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql   196608 May 15 15:22 biz_take.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8862 Aug 14  2017 biz_take_wwlt.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 May 15 15:22 biz_take_wwlt.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8854 Aug 14  2017 biz_take_wx.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 May 15 11:52 biz_take_wx.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8925 Aug 14  2017 biz_vip.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Mar 16 09:31 biz_vip.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8852 Aug 14  2017 biz_wlt.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 May 15 18:30 biz_wlt.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8926 Aug 14  2017 biz_wx_focus.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 May 10 16:24 biz_wx_focus.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9339 Nov 24 13:25 biz_wx.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 May 10 16:24 biz_wx.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8874 Aug 14  2017 biz_wx_walt.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 biz_wx_walt.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8776 Aug 14  2017 cfg_area.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql   311296 Aug 14  2017 cfg_area.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8721 Aug 14  2017 cfg_id_gen.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 May 15 18:41 cfg_id_gen.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql       61 Aug 14  2017 db.opt</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9053 Aug 14  2017 gprs_model.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql   212992 May 15 18:47 gprs_model.ibd</span><br><span class="line">-r--r--r-- 1 mysql mysql 79691776 May 16 14:04 ibdata1</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8801 Dec 19 15:00 mbr_coin_chged.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql  2097152 May 15 17:27 mbr_coin_chged.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8766 Dec 19 14:53 mbr_coin.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 May 15 19:12 mbr_coin.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9155 May 14 11:55 mbr.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql   212992 May 15 20:58 mbr.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8876 Aug 14  2017 mbr_oauth.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql   475136 May 15 19:37 mbr_oauth.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9011 Aug 14  2017 mbr_pay.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 mbr_pay.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8740 Aug 14  2017 mbr_prizen.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 mbr_prizen.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9147 Dec 19 14:56 mbr_recharge.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql   294912 May 15 19:11 mbr_recharge.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8801 Aug 14  2017 mbr_wallet_chged.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql  9437184 May 15 17:27 mbr_wallet_chged.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8845 Aug 14  2017 mbr_wallet.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql   262144 May 15 19:12 mbr_wallet.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql    10100 Dec 19 15:47 ord.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql 31457280 May 15 18:41 ord.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8940 Aug 14  2017 ord_item.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 ord_item.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8917 Aug 14  2017 ord_pay_ali.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 ord_pay_ali.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8924 Dec 19 15:55 ord_pay_coin.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql   475136 May 15 17:27 ord_pay_coin.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8926 Aug 14  2017 ord_pay_return.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 ord_pay_return.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8966 Dec 20 16:50 ord_pay_wlt.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql  9437184 May 15 17:27 ord_pay_wlt.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9036 Aug 14  2017 ord_pay_wx.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql 32505856 May 15 18:41 ord_pay_wx.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9098 Aug 14  2017 prod_base_args.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 prod_base_args.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8790 Aug 14  2017 prod_bug_rpt.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 prod_bug_rpt.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8887 Aug 14  2017 prod_cmd.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 prod_cmd.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8984 Aug 14  2017 prod_cmd_invoke.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 prod_cmd_invoke.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9058 Aug 14  2017 prod_coin_rpt.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql  9437184 May 15 14:24 prod_coin_rpt.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8798 Aug 14  2017 prod_coin_rpt_log.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 May 15 14:24 prod_coin_rpt_log.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9834 Dec 13 14:12 prod.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8835 Aug 14  2017 prod_gprs_bind.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8793 Aug 14  2017 prod_gprs_bind_his.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql   196608 May 15 09:42 prod_gprs_bind_his.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 prod_gprs_bind.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql   425984 May 15 09:42 prod.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8851 Aug 14  2017 prod_instl_imgs.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 prod_instl_imgs.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9388 Dec 13 14:13 prod_instl_pos.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql   147456 May 15 16:25 prod_instl_pos.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9384 Dec 13 14:14 prod_instl_pos_model.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql   131072 May 15 16:24 prod_instl_pos_model.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8892 Aug 14  2017 prod_mod_attr.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 prod_mod_attr.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8873 Aug 14  2017 prod_mod_attr_val.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 prod_mod_attr_val.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9642 Dec 13 14:11 prod_model.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 May 11 11:58 prod_model.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8815 Aug 14  2017 prod_mod_sku.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 prod_mod_sku.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9050 Aug 14  2017 prod_onl_log.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql   163840 May 15 18:42 prod_onl_log.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9143 Aug 14  2017 prod_sp_args.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 prod_sp_args.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8876 Aug 14  2017 prod_sp_arg_vals.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 prod_sp_arg_vals.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9190 Dec 13 14:14 sys_acct.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 May 14 11:16 sys_acct.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     8776 Aug 14  2017 sys_acct_res.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql   229376 May 11 11:52 sys_acct_res.ibd</span><br><span class="line">-rw-r--r-- 1 mysql mysql     9106 Aug 14  2017 sys_res.frm</span><br><span class="line">-rw-r--r-- 1 mysql mysql    98304 Aug 14  2017 sys_res.ibd</span><br><span class="line"><span class="meta">#</span><span class="bash">è·å–å¾…æ¢å¤è¡¨å</span></span><br><span class="line">[root@toberoot cy02]# ll *.frm |awk '&#123;print $9&#125;'|awk -F '.' '&#123;print $1&#125;' &gt; /alidata/cy_table.txt</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> pythonè„šæœ¬è‡ªåŠ¨ç”Ÿæˆå»ºè¡¨è¯­å¥</span></span><br><span class="line">[root@toberoot alidata]# cat py_createtable01.py </span><br><span class="line"><span class="meta">#</span><span class="bash">-*- coding : utf8 -*-</span></span><br><span class="line"></span><br><span class="line">def create_table_test(table_file,sql_file):</span><br><span class="line">    a_file = open(sql_file,'w')</span><br><span class="line">    b_file = open(table_file)</span><br><span class="line">    b_list = b_file.readlines()</span><br><span class="line">    for table in b_list:</span><br><span class="line">        string = "create table &#123;&#125; (id int);".format(table)</span><br><span class="line">        a_file.write(string)</span><br><span class="line">    a_file.close() </span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">if __name__ == '__main__':</span><br><span class="line">    create_table_test('/alidata/cy_table.txt','/alidata/cy_sql1.sql')</span><br><span class="line"></span><br><span class="line">[root@toberoot alidata]# python /alidata/py_createtable01.py </span><br><span class="line">[root@toberoot alidata]# head /alidata/cy_sql1.sql </span><br><span class="line">create table base_dict</span><br><span class="line"> (id int);create table biz_advise</span><br><span class="line"> (id int);create table biz_bank</span><br><span class="line"> (id int);create table biz</span><br><span class="line"> (id int);create table biz_gift</span><br><span class="line"> (id int);create table biz_gprs_bind</span><br><span class="line"> (id int);create table biz_gprs_bind_his</span><br><span class="line"> (id int);create table biz_msg_template</span><br><span class="line"> (id int);create table biz_take_bank</span><br><span class="line"> (id int);create table biz_take</span><br><span class="line">çœç•¥ã€‚ã€‚ã€‚</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯¼å…¥æµ‹è¯•è¡¨ç»“æ„</span></span><br><span class="line">[root@toberoot alidata]# mysql -e "show databases"</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line">[root@toberoot alidata]# mysql -e "create database cy;"</span><br><span class="line">[root@toberoot alidata]# mysql cy &lt; /alidata/cy_sql1.sql </span><br><span class="line">[root@toberoot alidata]# mysql -e "desc cy.sys_res"</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| Field | Type    | Null | Key | Default | Extra |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| id    | int(11) | YES  |     | NULL    |       |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¼€å§‹è·å–è¡¨ç»“æ„ä¸­åˆ—çš„ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">[root@toberoot alidata]# service mysqld stop</span><br><span class="line">Shutting down MySQL..                                      [  OK  ]</span><br><span class="line">[root@toberoot alidata]# yes|cp ~/home/cy02/*.frm /alidata/mysql/data/cy/</span><br><span class="line">cp: overwrite â€˜/alidata/mysql/data/cy/base_dict.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/biz_advise.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/biz_bank.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/biz.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/biz_gift.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/biz_gprs_bind.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/biz_gprs_bind_his.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/biz_msg_template.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/biz_take_bank.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/biz_take.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/biz_take_wwlt.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/biz_take_wx.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/biz_vip.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/biz_wlt.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/biz_wx_focus.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/biz_wx.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/biz_wx_walt.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/cfg_area.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/cfg_id_gen.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/gprs_model.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/mbr_coin_chged.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/mbr_coin.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/mbr.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/mbr_oauth.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/mbr_pay.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/mbr_prizen.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/mbr_recharge.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/mbr_wallet_chged.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/mbr_wallet.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/ord.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/ord_item.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/ord_pay_ali.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/ord_pay_coin.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/ord_pay_return.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/ord_pay_wlt.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/ord_pay_wx.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod_base_args.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod_bug_rpt.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod_cmd.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod_cmd_invoke.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod_coin_rpt.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod_coin_rpt_log.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod_gprs_bind.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod_gprs_bind_his.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod_instl_imgs.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod_instl_pos.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod_instl_pos_model.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod_mod_attr.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod_mod_attr_val.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod_model.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod_mod_sku.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod_onl_log.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod_sp_args.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/prod_sp_arg_vals.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/sys_acct.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/sys_acct_res.frmâ€™? cp: overwrite â€˜/alidata/mysql/data/cy/sys_res.frmâ€™? [root@toberoot alidata]# </span><br><span class="line"></span><br><span class="line">[root@toberoot alidata]# cat py_createtable01.py </span><br><span class="line"><span class="meta">#</span><span class="bash">-*- coding : utf8 -*-</span></span><br><span class="line"></span><br><span class="line">def create_table_test(table_file,sql_file):</span><br><span class="line">    a_file = open(sql_file,'w')</span><br><span class="line">    b_file = open(table_file)</span><br><span class="line">    b_list = b_file.readlines()</span><br><span class="line">    for table in b_list:</span><br><span class="line">        string = "create table &#123;&#125; (id int);".format(table)</span><br><span class="line">        a_file.write(string)</span><br><span class="line">    a_file.close() </span><br><span class="line">   </span><br><span class="line">def desc_table_test(table_file,sql_file):</span><br><span class="line">    a_file = open(sql_file,'w')</span><br><span class="line">    b_file = open(table_file)</span><br><span class="line">    b_list = b_file.readlines()</span><br><span class="line">    for table in b_list:</span><br><span class="line">        string = "desc &#123;&#125;;".format(table)</span><br><span class="line">        a_file.write(string)</span><br><span class="line">    a_file.close()</span><br><span class="line"></span><br><span class="line">if __name__ == '__main__':</span><br><span class="line">    #create_table_test('/alidata/cy_table.txt','/alidata/cy_sql1.sql')</span><br><span class="line">    desc_table_test('/alidata/cy_table.txt','/alidata/cy_sql2.sql')</span><br><span class="line"></span><br><span class="line">[root@toberoot alidata]# python py_createtable01.py</span><br><span class="line">[root@toberoot alidata]# head cy_sql2.sql </span><br><span class="line">desc base_dict</span><br><span class="line">;desc biz_advise</span><br><span class="line">;desc biz_bank</span><br><span class="line">;desc biz</span><br><span class="line">;desc biz_gift</span><br><span class="line">;desc biz_gprs_bind</span><br><span class="line">;desc biz_gprs_bind_his</span><br><span class="line">;desc biz_msg_template</span><br><span class="line">;desc biz_take_bank</span><br><span class="line">;desc biz_take</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æˆªå–åŒ…å«åˆ—åçš„æŠ¥é”™</span></span><br><span class="line">[root@toberoot alidata]# grep contains  mysql/dataerror.log &gt; cy_error1.log</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŠ¥é”™æ ¼å¼å¦‚ä¸‹ï¼š</span></span><br><span class="line">2018-05-17T07:58:32.926555Z 3 [Warning] InnoDB: Table cy/base_dict contains 1 user defined columns in InnoDB, but 11 columns in MySQL. Please check INFORMATION_SCHEMA.INNODB_SYS_COLUMNS and http://dev.mysql.com/doc/refman/5.7/en/innodb-troubleshooting.html for how to resolve the issue.</span><br><span class="line">2018-05-17T07:59:03.555492Z 4 [Warning] InnoDB: Table cy/biz_advise contains 1 user defined columns in InnoDB, but 7 columns in MySQL. Please check INFORMATION_SCHEMA.INNODB_SYS_COLUMNS and http://dev.mysql.com/doc/refman/5.7/en/innodb-troubleshooting.html for how to resolve the issue.</span><br><span class="line">2018-05-17T07:59:03.556045Z 4 [Warning] InnoDB: Table cy/biz_bank contains 1 user defined columns in InnoDB, but 7 columns in MySQL. Please check INFORMATION_SCHEMA.INNODB_SYS_COLUMNS and http://dev.mysql.com/doc/refman/5.7/en/innodb-troubleshooting.html for how to resolve the issue.</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å°†è¡¨åå’Œåˆ—æ•°å­˜æ”¾è‡³æ–‡ä»¶ä¸­</span></span><br><span class="line">[root@toberoot alidata]# awk '&#123;print $6,$15&#125;' cy_error1.log | awk -F '/' '&#123;print $2&#125;' &gt; cy_table_col.txt</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ ¹æ®ä»¥ä¸Šè¡¨åå’Œåˆ—æ•°ç”Ÿæˆæ–°çš„æµ‹è¯•è¡¨</span></span><br><span class="line">def create_table_col(table_col_file,sql_file):</span><br><span class="line">    a_file = open(sql_file,'w')</span><br><span class="line">    b_file = open(table_col_file)</span><br><span class="line">    b_list = b_file.readlines()</span><br><span class="line">    # b_list = ['t1 10','t2 20']</span><br><span class="line">    str_list = []</span><br><span class="line">    for table_col_str in b_list:</span><br><span class="line">        table_col_list = table_col_str.split()</span><br><span class="line">	table = table_col_list[0]</span><br><span class="line">	col = int(table_col_list[1])</span><br><span class="line">        string = "create table &#123;&#125; (".format(table)</span><br><span class="line">        str_list.append(string)</span><br><span class="line">	for i in range(1,col+1):</span><br><span class="line">            if i!=col:</span><br><span class="line">                string = 'id&#123;&#125; int,'.format(i)</span><br><span class="line">	    else:</span><br><span class="line">                string = 'id&#123;&#125; int);'.format(i)</span><br><span class="line">            str_list.append(string)</span><br><span class="line">    for line in str_list:</span><br><span class="line">        a_file.write(line)</span><br><span class="line">    a_file.close()</span><br><span class="line"></span><br><span class="line">create_table_col('/alidata/cy_table_col.txt','/alidata/cy_sql3.sql')</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ é™¤è¿™äº›æµ‹è¯•è¡¨</span></span><br><span class="line">[root@toberoot alidata]# vim py_createtable01.py </span><br><span class="line">[root@toberoot alidata]# python py_createtable01.py </span><br><span class="line">[root@toberoot alidata]# ll</span><br><span class="line">total 60</span><br><span class="line">-rw-r--r--  1 root  root  16729 May 17 16:00 cy_error1.log</span><br><span class="line">-rw-r--r--  1 root  root   2033 May 17 15:12 cy_sql1.sql</span><br><span class="line">-rw-r--r--  1 root  root   1047 May 17 15:56 cy_sql2.sql</span><br><span class="line">-rw-r--r--  1 root  root   6353 May 17 16:15 cy_sql3.sql</span><br><span class="line">-rw-r--r--  1 root  root   1395 May 17 16:17 cy_sql4.sql</span><br><span class="line">-rw-r--r--  1 root  root    837 May 17 16:03 cy_table_col.txt</span><br><span class="line">-rw-r--r--  1 root  root    699 May 17 15:56 cy_table.txt</span><br><span class="line">drwxr-xr-x  3 root  root   4096 May 17 12:12 install</span><br><span class="line">drwxr-xr-x 11 mysql mysql  4096 May 17 15:44 mysql</span><br><span class="line">-rw-r--r--  1 root  root   1798 May 17 16:17 py_createtable01.py</span><br><span class="line"><span class="meta">#</span><span class="bash">pythonä»£ç å¦‚ä¸‹ï¼š</span></span><br><span class="line">def drop_table_test(table_file,sql_file):</span><br><span class="line">    a_file = open(sql_file,'w')</span><br><span class="line">    b_file = open(table_file)</span><br><span class="line">    b_list = b_file.readlines()</span><br><span class="line">    for table in b_list:</span><br><span class="line">        string = "drop table &#123;&#125;;".format(table)</span><br><span class="line">        a_file.write(string)</span><br><span class="line">    a_file.close()</span><br><span class="line"></span><br><span class="line">drop_table_test('/alidata/cy_table.txt','/alidata/cy_sql4.sql')</span><br><span class="line">    </span><br><span class="line">[root@toberoot alidata]# head /alidata/cy_sql4.sql </span><br><span class="line">drop table base_dict</span><br><span class="line">;drop table biz_advise</span><br><span class="line">;drop table biz_bank</span><br><span class="line">;drop table biz</span><br><span class="line">;drop table biz_gift</span><br><span class="line">;drop table biz_gprs_bind</span><br><span class="line">;drop table biz_gprs_bind_his</span><br><span class="line">;drop table biz_msg_template</span><br><span class="line">;drop table biz_take_bank</span><br><span class="line">;drop table biz_take</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">åˆ é™¤æ•°æ®åº“çš„æ—¶å€™ç›´æ¥å¡æ­»äº†ï¼ŒåŸå› æœªçŸ¥ã€‚ä¹Ÿæ²¡æœ‰æŠ¥é”™ã€‚</span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ¸…æ•°æ®å¯åŠ¨æœåŠ¡</span></span><br><span class="line"></span><br><span class="line">ln: failed to create symbolic link â€˜/usr/local/mysql/bin/mysqldâ€™: File exists</span><br><span class="line">Starting MySQL.                                            [  OK  ]</span><br><span class="line">[root@toberoot ~]# mysql -e 'create database cy'</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¼€å§‹å°è¯•è·å–è¡¨çš„ç»“æ„</span></span><br><span class="line">[root@toberoot alidata]# mysql cy &lt; cy_sql3.sql</span><br><span class="line">[root@toberoot alidata]# service mysqld stop</span><br><span class="line">Shutting down MySQL..                                      [  OK  ]</span><br><span class="line">[root@toberoot alidata]# cp ~/home/cy02/*.frm /alidata/mysql/data/cy/ -p</span><br><span class="line">cp: overwrite â€˜/alidata/mysql/data/cy/base_dict.frmâ€™? ^C</span><br><span class="line">[root@toberoot alidata]# yes | cp ~/home/cy02/*.frm /alidata/mysql/data/cy/ -p</span><br><span class="line">[root@toberoot alidata]# ll /alidata/mysql/data/cy/sys_res*</span><br><span class="line">-rw-r--r-- 1 mysql mysql  9106 Aug 14  2017 /alidata/mysql/data/cy/sys_res.frm</span><br><span class="line">-rw-r----- 1 mysql mysql 98304 May 17 16:44 /alidata/mysql/data/cy/sys_res.ibd</span><br><span class="line"><span class="meta">#</span><span class="bash"> é…ç½®æ–‡ä»¶</span></span><br><span class="line">[mysqld]</span><br><span class="line">innodb_force_recovery=6</span><br><span class="line">[root@toberoot alidata]# vim /etc/my.cnf</span><br><span class="line">[root@toberoot alidata]# service mysqld start</span><br><span class="line">Starting MySQL.                                            [  OK  ]</span><br><span class="line"><span class="meta">#</span><span class="bash"> è¡¨ç»“æ„æˆåŠŸè·å–</span></span><br><span class="line">[root@toberoot alidata]# mysql cy -e 'desc sys_res'</span><br><span class="line">+--------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field  | Type         | Null | Key | Default | Extra |</span><br><span class="line">+--------+--------------+------+-----+---------+-------+</span><br><span class="line">| ID     | varchar(64)  | NO   | PRI | NULL    |       |</span><br><span class="line">| NAME   | varchar(32)  | NO   |     | NULL    |       |</span><br><span class="line">| CODE   | varchar(128) | NO   |     | NULL    |       |</span><br><span class="line">| URI    | varchar(128) | NO   |     | NULL    |       |</span><br><span class="line">| LOGO   | varchar(64)  | YES  |     | NULL    |       |</span><br><span class="line">| TYPE   | int(11)      | NO   |     | NULL    |       |</span><br><span class="line">| PCODE  | varchar(64)  | YES  |     | NULL    |       |</span><br><span class="line">| SORT   | int(11)      | YES  |     | 0       |       |</span><br><span class="line">| STATE  | int(11)      | NO   |     | NULL    |       |</span><br><span class="line">| ADMIN  | int(11)      | YES  |     | 0       |       |</span><br><span class="line">| REMARK | varchar(64)  | YES  |     | NULL    |       |</span><br><span class="line">| CRTIME | datetime     | NO   |     | NULL    |       |</span><br><span class="line">| UPTIME | datetime     | NO   |     | NULL    |       |</span><br><span class="line">+--------+--------------+------+-----+---------+-------+</span><br><span class="line">root@MySQL-01 16:49:  [(none)]&gt; select table_name,table_schema from information_schema.tables where table_schema='cy';</span><br><span class="line">+----------------------+--------------+</span><br><span class="line">| table_name           | table_schema |</span><br><span class="line">+----------------------+--------------+</span><br><span class="line">| base_dict            | cy           |</span><br><span class="line">| biz                  | cy           |</span><br><span class="line">| biz_advise           | cy           |</span><br><span class="line">| biz_bank             | cy           |</span><br><span class="line">| biz_gift             | cy           |</span><br><span class="line">| biz_gprs_bind        | cy           |</span><br><span class="line">| biz_gprs_bind_his    | cy           |</span><br><span class="line">| biz_msg_template     | cy           |</span><br><span class="line">| biz_take             | cy           |</span><br><span class="line">| biz_take_bank        | cy           |</span><br><span class="line">| biz_take_wwlt        | cy           |</span><br><span class="line">| biz_take_wx          | cy           |</span><br><span class="line">| biz_vip              | cy           |</span><br><span class="line">| biz_wlt              | cy           |</span><br><span class="line">| biz_wx               | cy           |</span><br><span class="line">| biz_wx_focus         | cy           |</span><br><span class="line">| biz_wx_walt          | cy           |</span><br><span class="line">| cfg_area             | cy           |</span><br><span class="line">| cfg_id_gen           | cy           |</span><br><span class="line">| gprs_model           | cy           |</span><br><span class="line">| mbr                  | cy           |</span><br><span class="line">| mbr_coin             | cy           |</span><br><span class="line">| mbr_coin_chged       | cy           |</span><br><span class="line">| mbr_oauth            | cy           |</span><br><span class="line">| mbr_pay              | cy           |</span><br><span class="line">| mbr_prizen           | cy           |</span><br><span class="line">| mbr_recharge         | cy           |</span><br><span class="line">| mbr_wallet           | cy           |</span><br><span class="line">| mbr_wallet_chged     | cy           |</span><br><span class="line">| ord                  | cy           |</span><br><span class="line">| ord_item             | cy           |</span><br><span class="line">| ord_pay_ali          | cy           |</span><br><span class="line">| ord_pay_coin         | cy           |</span><br><span class="line">| ord_pay_return       | cy           |</span><br><span class="line">| ord_pay_wlt          | cy           |</span><br><span class="line">| ord_pay_wx           | cy           |</span><br><span class="line">| prod                 | cy           |</span><br><span class="line">| prod_base_args       | cy           |</span><br><span class="line">| prod_bug_rpt         | cy           |</span><br><span class="line">| prod_cmd             | cy           |</span><br><span class="line">| prod_cmd_invoke      | cy           |</span><br><span class="line">| prod_coin_rpt        | cy           |</span><br><span class="line">| prod_coin_rpt_log    | cy           |</span><br><span class="line">| prod_gprs_bind       | cy           |</span><br><span class="line">| prod_gprs_bind_his   | cy           |</span><br><span class="line">| prod_instl_imgs      | cy           |</span><br><span class="line">| prod_instl_pos       | cy           |</span><br><span class="line">| prod_instl_pos_model | cy           |</span><br><span class="line">| prod_mod_attr        | cy           |</span><br><span class="line">| prod_mod_attr_val    | cy           |</span><br><span class="line">| prod_mod_sku         | cy           |</span><br><span class="line">| prod_model           | cy           |</span><br><span class="line">| prod_onl_log         | cy           |</span><br><span class="line">| prod_sp_arg_vals     | cy           |</span><br><span class="line">| prod_sp_args         | cy           |</span><br><span class="line">| sys_acct             | cy           |</span><br><span class="line">| sys_acct_res         | cy           |</span><br><span class="line">| sys_res              | cy           |</span><br><span class="line">+----------------------+--------------+</span><br><span class="line">58 rows in set (0.00 sec)</span><br><span class="line"><span class="meta">#</span><span class="bash"> 58å¼ è¡¨dumpå¤‡ä»½å‡ºæ¥</span></span><br><span class="line">[root@toberoot alidata]# mysqldump -B cy -d &gt; /alidata/new_yc_ddl.sql</span><br><span class="line">[root@toberoot alidata]# tail -n 30 /alidata/new_yc_ddl.sql </span><br><span class="line">/*!40101 SET @saved_cs_client     = @@character_set_client */;</span><br><span class="line">/*!40101 SET character_set_client = utf8 */;</span><br><span class="line">CREATE TABLE `sys_res` (</span><br><span class="line">  `ID` varchar(64) NOT NULL COMMENT 'ID',</span><br><span class="line">  `NAME` varchar(32) NOT NULL COMMENT 'èœå•åç§°',</span><br><span class="line">  `CODE` varchar(128) NOT NULL COMMENT 'èœå•ç¼–ç ',</span><br><span class="line">  `URI` varchar(128) NOT NULL COMMENT 'URI',</span><br><span class="line">  `LOGO` varchar(64) DEFAULT NULL COMMENT 'å›¾æ ‡',</span><br><span class="line">  `TYPE` int(11) NOT NULL COMMENT '@èœå•ç±»å‹ï¼ˆ1èœå•ï¼›2æŒ‰é’®ï¼‰',</span><br><span class="line">  `PCODE` varchar(64) DEFAULT NULL COMMENT 'çˆ¶èœå•',</span><br><span class="line">  `SORT` int(11) DEFAULT '0' COMMENT 'æ’åº',</span><br><span class="line">  `STATE` int(11) NOT NULL COMMENT '@@çŠ¶æ€ï¼ˆ0 æ— æ•ˆï¼›1 æ­£å¸¸ï¼‰',</span><br><span class="line">  `ADMIN` int(11) DEFAULT '0' COMMENT 'æ˜¯å¦ç®¡ç†å‘˜èœå•ï¼ˆé»˜è®¤0å¦ï¼‰',</span><br><span class="line">  `REMARK` varchar(64) DEFAULT NULL COMMENT 'å¤‡æ³¨',</span><br><span class="line">  `CRTIME` datetime NOT NULL COMMENT 'CRTIME',</span><br><span class="line">  `UPTIME` datetime NOT NULL COMMENT 'UPTIME',</span><br><span class="line">  PRIMARY KEY (`ID`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='æƒé™_ç³»ç»Ÿèµ„æº';</span><br><span class="line">/*!40101 SET character_set_client = @saved_cs_client */;</span><br><span class="line">/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;</span><br><span class="line"></span><br><span class="line">/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;</span><br><span class="line">/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;</span><br><span class="line">/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;</span><br><span class="line">/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;</span><br><span class="line">/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;</span><br><span class="line">/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;</span><br><span class="line">/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;</span><br><span class="line"></span><br><span class="line">-- Dump completed on 2018-05-17 16:52:28</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> discardå’Œimportå‘½ä»¤</span></span><br><span class="line">def discard_table_test(table_file,sql_file):</span><br><span class="line">    a_file = open(sql_file,'w')</span><br><span class="line">    b_file = open(table_file)</span><br><span class="line">    b_list = b_file.readlines()</span><br><span class="line">    for table in b_list:</span><br><span class="line">        string = "alter table &#123;&#125; discard tablespace;".format(table)</span><br><span class="line">        a_file.write(string)</span><br><span class="line">    a_file.close() </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def import_table_test(table_file,sql_file):</span><br><span class="line">    a_file = open(sql_file,'w')</span><br><span class="line">    b_file = open(table_file)</span><br><span class="line">    b_list = b_file.readlines()</span><br><span class="line">    for table in b_list:</span><br><span class="line">        string = "alter table &#123;&#125; import tablespace;".format(table)</span><br><span class="line">        a_file.write(string)</span><br><span class="line">    a_file.close() </span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">discard_table_test('/alidata/cy_table.txt','/alidata/cy_sql5.sql')</span><br><span class="line">import_table_test('/alidata/cy_table.txt','/alidata/cy_sql6.sql')</span><br><span class="line">   </span><br><span class="line"><span class="meta">#</span><span class="bash"> ç”Ÿæˆsql</span></span><br><span class="line">[root@toberoot alidata]# python py_createtable01.py </span><br><span class="line">[root@toberoot alidata]# ll</span><br><span class="line">total 124</span><br><span class="line">-rw-r--r--  1 root  root  16729 May 17 16:00 cy_error1.log</span><br><span class="line">-rw-r--r--  1 root  root   2033 May 17 15:12 cy_sql1.sql</span><br><span class="line">-rw-r--r--  1 root  root   1047 May 17 15:56 cy_sql2.sql</span><br><span class="line">-rw-r--r--  1 root  root   6353 May 17 16:15 cy_sql3.sql</span><br><span class="line">-rw-r--r--  1 root  root   1395 May 17 16:17 cy_sql4.sql</span><br><span class="line">-rw-r--r--  1 root  root   2033 May 17 16:55 cy_sql5.sql</span><br><span class="line">-rw-r--r--  1 root  root   2033 May 17 16:55 cy_sql6.sql</span><br><span class="line">-rw-r--r--  1 root  root    837 May 17 16:03 cy_table_col.txt</span><br><span class="line">-rw-r--r--  1 root  root    699 May 17 15:56 cy_table.txt</span><br><span class="line">drwxr-xr-x  3 root  root   4096 May 17 16:41 install</span><br><span class="line">drwxr-xr-x 11 mysql mysql  4096 May 17 16:47 mysql</span><br><span class="line">-rw-r--r--  1 root  root  57068 May 17 16:52 new_yc_ddl.sql</span><br><span class="line">-rw-r--r--  1 root  root   2489 May 17 16:55 py_createtable01.py</span><br><span class="line"></span><br><span class="line">[root@toberoot alidata]# head /alidata/cy_sql5.sql </span><br><span class="line">alter table base_dict</span><br><span class="line"> discard tablespace;alter table biz_advise</span><br><span class="line"> discard tablespace;alter table biz_bank</span><br><span class="line"> discard tablespace;alter table biz</span><br><span class="line"> discard tablespace;alter table biz_gift</span><br><span class="line"> discard tablespace;alter table biz_gprs_bind</span><br><span class="line"> discard tablespace;alter table biz_gprs_bind_his</span><br><span class="line"> discard tablespace;alter table biz_msg_template</span><br><span class="line"> discard tablespace;alter table biz_take_bank</span><br><span class="line"> discard tablespace;alter table biz_take</span><br><span class="line">[root@toberoot alidata]# head /alidata/cy_sql6.sql </span><br><span class="line">alter table base_dict</span><br><span class="line"> import tablespace;alter table biz_advise</span><br><span class="line"> import tablespace;alter table biz_bank</span><br><span class="line"> import tablespace;alter table biz</span><br><span class="line"> import tablespace;alter table biz_gift</span><br><span class="line"> import tablespace;alter table biz_gprs_bind</span><br><span class="line"> import tablespace;alter table biz_gprs_bind_his</span><br><span class="line"> import tablespace;alter table biz_msg_template</span><br><span class="line"> import tablespace;alter table biz_take_bank</span><br><span class="line"> import tablespace;alter table biz_take</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@toberoot alidata]# mysql cy &lt; cy_sql5.sql</span><br><span class="line">ERROR 1036 (HY000) at line 1: Table 'base_dict' is read only</span><br><span class="line">[root@toberoot alidata]# vim /etc/my.cnf</span><br><span class="line">[root@toberoot alidata]# service mysqld restart</span><br><span class="line">Shutting down MySQL..                                      [  OK  ]</span><br><span class="line">Starting MySQL.                                            [  OK  ]</span><br><span class="line">[root@toberoot alidata]# vim /etc/my.cnf</span><br><span class="line">[root@toberoot alidata]# mysql cy &lt; cy_sql5.sql</span><br><span class="line"></span><br><span class="line">[root@toberoot alidata]# cp /root/home/cy02/*.ibd /alidata/mysql/data/cy/ -rp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@toberoot alidata]# mysql cy &lt; cy_sql6.sql</span><br><span class="line">ERROR 2013 (HY000) at line 1: Lost connection to MySQL server during query</span><br><span class="line">[root@toberoot alidata]# vim /etc/my.cnf</span><br><span class="line">[root@toberoot alidata]# service mysqld restart</span><br><span class="line">Shutting down MySQL..                                      [  OK  ]</span><br><span class="line">Starting MySQL.                                            [  OK  ]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@toberoot alidata]# mysql cy &lt; cy_sql6.sql</span><br><span class="line">ERROR 1036 (HY000) at line 1: Table 'base_dict' is read only</span><br><span class="line">[root@toberoot alidata]# service mysqld stop</span><br><span class="line">Shutting down MySQL..                                      [  OK  ]</span><br><span class="line">[root@toberoot alidata]# rm -rf /alidata/mysql/data/*</span><br><span class="line"></span><br><span class="line">[root@toberoot alidata]# service mysqld start</span><br><span class="line">Starting MySQL.                                            [  OK  ]</span><br><span class="line">[root@toberoot alidata]# mysql &lt; new_yc_ddl.sql </span><br><span class="line">[root@toberoot alidata]# mysql -e 'use cy;select * from sys_res'</span><br><span class="line"></span><br><span class="line">å¼€å¯å¼ºåˆ¶æ¢å¤å‚æ•°</span><br><span class="line">[root@toberoot alidata]# vim /etc/my.cnf</span><br><span class="line">[root@toberoot alidata]# mysql cy &lt; cy_sql</span><br><span class="line">cy_sql1.sql  cy_sql2.sql  cy_sql3.sql  cy_sql4.sql  cy_sql5.sql  cy_sql6.sql  </span><br><span class="line">[root@toberoot alidata]# mysql cy &lt; cy_sql5.sql </span><br><span class="line">[root@toberoot alidata]# cp /root/home/cy02/*.ibd /alidata/mysql/data/cy/ -rp</span><br><span class="line">[root@toberoot alidata]# mysql cy &lt; cy_sql6.sql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å…¨å¤‡ä»½æ•°æ®</span></span><br><span class="line">[root@toberoot alidata]# mysqldump -B cy &gt; new_cy_all.sql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹å¤‡ä»½çš„æ•°æ®é‡</span></span><br><span class="line">-rw-r--r--  1 root  root   26M May 17 17:13 new_cy_all.sql</span><br></pre></td></tr></table></figure>

<h2 id="æŠ¥é”™æ±‡æ€»"><a href="#æŠ¥é”™æ±‡æ€»" class="headerlink" title="æŠ¥é”™æ±‡æ€»"></a>æŠ¥é”™æ±‡æ€»</h2><h3 id="ERROR-1036-ï¼ˆHY00ï¼‰"><a href="#ERROR-1036-ï¼ˆHY00ï¼‰" class="headerlink" title="ERROR 1036 ï¼ˆHY00ï¼‰"></a>ERROR 1036 ï¼ˆHY00ï¼‰</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@toberoot alidata]# mysql cy &lt; cy_sql5.sql</span><br><span class="line">ERROR 1036 (HY000) at line 1: Table 'base_dict' is read only</span><br></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ³•ï¼š</p>
<ol>
<li>æ£€æŸ¥æ˜¯å¦é…ç½®æ–‡ä»¶ä¸­å­˜åœ¨innodb_force_recoveryå‚æ•°</li>
<li>å¦‚æœå­˜åœ¨å»é™¤æˆ–æ³¨é‡Šæ‰ï¼Œé‡å¯æœåŠ¡å³å¯</li>
<li>è¿˜ä¸è¡Œå°±æ¸…ç©ºæ•°æ®åº“å¯¼å…¥ç»“æ„åå†ç»§ç»­</li>
</ol>
<h3 id="ERROR-2013-HY000"><a href="#ERROR-2013-HY000" class="headerlink" title="ERROR 2013 (HY000)"></a>ERROR 2013 (HY000)</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@toberoot alidata]# mysql cy &lt; cy_sql6.sql</span><br><span class="line">ERROR 2013 (HY000) at line 1: Lost connection to MySQL server during query</span><br></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ³•ï¼š</p>
<ol>
<li><p>sqlè„šæœ¬ä¸­æ‰§è¡Œimport tablespaceçš„æ“ä½œéœ€è¦å¼€å¯recoveryçš„å‚æ•°</p>
</li>
<li><p>é‡å¯æœåŠ¡ </p>
<p>åœ¨å®¢æˆ·æœåŠ¡ä¸Šï¼Œæ‰§è¡Œä»¥ä¸Šæ“ä½œè¿˜æ˜¯æŠ¥é”™æ— æ³•è¿æ¥ï¼Œå°è¯•å¤šæ¬¡éƒ½ä¸è¡Œã€‚</p>
</li>
</ol>
<p><img src="MySQL%E4%B8%80%E6%AC%A1%E6%83%8A%E5%BF%83%E5%8A%A8%E9%AD%84%E5%9C%B0%E6%95%B0%E6%8D%AE%E5%BC%BA%E5%88%B6%E6%81%A2%E5%A4%8D/04.jpg" alt=""></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™æ¬¡caseçš„æ•™è®­å°±æ˜¯ï¼Œå¤‡ä»½ï¼ä¸€å®šè¦æœ‰å‘¨æœŸæ€§çš„æœ‰æ•ˆå¤‡ä»½ï¼</p>
<p>æ¬ºéª—MySQLè¿›ç¨‹è’™æ··è¿‡å…³åªèƒ½æ˜¯æ²¡åŠæ³•çš„åŠæ³•ï¼Œè€Œä¸”ä¸èƒ½ä¿è¯æˆåŠŸç‡ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> -*- coding : utf8 -*-</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> py_createtable01.py</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> authï¼š booboowei</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class mysql_tools():</span><br><span class="line">    def __init__(self, in_file):</span><br><span class="line">        self.b_list = open(in_file).readlines()</span><br><span class="line"></span><br><span class="line">       </span><br><span class="line">    def create_table_test(self, sql_file):</span><br><span class="line">        a_file = open(sql_file, 'w')</span><br><span class="line">        for table in self.b_list:</span><br><span class="line">            string = "create table &#123;&#125; (id int);".format(table)</span><br><span class="line">            a_file.write(string)</span><br><span class="line">        a_file.close()</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    def desc_table_test(self, sql_file):</span><br><span class="line">        a_file = open(sql_file, 'w')</span><br><span class="line">        for table in self.b_list:</span><br><span class="line">            string = "desc &#123;&#125;;".format(table)</span><br><span class="line">            a_file.write(string)</span><br><span class="line">        a_file.close()</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    def create_table_col(self, sql_file):</span><br><span class="line">        a_file = open(sql_file, 'w')</span><br><span class="line">        str_list = []</span><br><span class="line">        for table_col_str in self.b_list:</span><br><span class="line">            table_col_list = table_col_str.split()</span><br><span class="line">            table = table_col_list[0]</span><br><span class="line">            col = int(table_col_list[1])</span><br><span class="line">            string = "create table &#123;&#125; (".format(table)</span><br><span class="line">            str_list.append(string)</span><br><span class="line">            for i in range(1, col + 1):</span><br><span class="line">                if i != col:</span><br><span class="line">                    string = 'id&#123;&#125; int,'.format(i)</span><br><span class="line">                else:</span><br><span class="line">                    string = 'id&#123;&#125; int);'.format(i)</span><br><span class="line">                str_list.append(string)</span><br><span class="line">        for line in str_list:</span><br><span class="line">            a_file.write(line)</span><br><span class="line">        a_file.close()</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    def drop_table_test(self,  sql_file):</span><br><span class="line">        a_file = open(sql_file, 'w')</span><br><span class="line">        for table in self.b_list:</span><br><span class="line">            string = "drop table &#123;&#125;;".format(table)</span><br><span class="line">            a_file.write(string)</span><br><span class="line">        a_file.close()</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    def discard_table_test(self, sql_file):</span><br><span class="line">        a_file = open(sql_file, 'w')</span><br><span class="line">        for table in self.b_list:</span><br><span class="line">            string = "alter table &#123;&#125; discard tablespace;".format(table)</span><br><span class="line">            a_file.write(string)</span><br><span class="line">        a_file.close()</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    def import_table_test(self, sql_file):</span><br><span class="line">        a_file = open(sql_file, 'w')</span><br><span class="line">        for table in self.b_list:</span><br><span class="line">            string = "alter table &#123;&#125; import tablespace;".format(table)</span><br><span class="line">            a_file.write(string)</span><br><span class="line">        a_file.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == '__main__':</span><br><span class="line">    mysql_tools('/alidata/cy_table.txt').create_table_test('/alidata/cy_sql1.sql')</span><br><span class="line">    mysql_tools('/alidata/cy_table.txt').desc_table_test('/alidata/cy_sql2.sql')</span><br><span class="line">    # æ ¹æ®ä»¥ä¸Šè¡¨åå’Œåˆ—æ•°ç”Ÿæˆæ–°çš„æµ‹è¯•è¡¨</span><br><span class="line">    mysql_tools('/alidata/cy_table_col.txt').create_table_col('/alidata/cy_sql3.sql')</span><br><span class="line">    mysql_tools('/alidata/cy_table.txt').drop_table_test('/alidata/cy_sql4.sql')</span><br><span class="line">    mysql_tools('/alidata/cy_table.txt').discard_table_test('/alidata/cy_sql5.sql')</span><br><span class="line">    mysql_tools('/alidata/cy_table.txt').import_table_test('/alidata/cy_sql6.sql')</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>æŠ€æœ¯å¹¿è§’</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>æ•°æ®æ•‘æ´</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQLçš„å…ƒé”MDLå‘ç”Ÿåœºæ™¯å’Œè§£å†³æ–¹æ³•æ€»ç»“</title>
    <url>/2017/08/19/MySQL%E7%9A%84%E5%85%83%E9%94%81MDL%E5%8F%91%E7%94%9F%E5%9C%BA%E6%99%AF%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<p>æ‘˜è¦ï¼šMetaData Lockå³å…ƒæ•°æ®é”ï¼Œåœ¨æ•°æ®åº“ä¸­å…ƒæ•°æ®å³æ•°æ®å­—å…¸ä¿¡æ¯åŒ…æ‹¬db,table,function,procedure,trigger,eventç­‰ã€‚metadata lockä¸»è¦ä¸ºäº†ä¿è¯å…ƒæ•°æ®çš„ä¸€è‡´æ€§,ç”¨äºå¤„ç†ä¸åŒçº¿ç¨‹æ“ä½œåŒä¸€æ•°æ®å¯¹è±¡çš„åŒæ­¥ä¸äº’æ–¥é—®é¢˜ã€‚</p>
<p>ä»Šå¤©æœ‰å®¢æˆ·(MySQL 5.6)é‡åˆ°è¯¥é—®é¢˜ï¼Œæœ€å…³é”®çš„æ˜¯å±äºç¬¬ä¸‰ç§æƒ…å†µï¼Œgoogleä¸Šæ ¹æœ¬æ‰¾ä¸åˆ°ç±»ä¼¼çš„æ•…éšœæ¡ˆä¾‹ï¼Œå”¯ä¸€ä¸€ä¸ªéå¸¸æ¥è¿‘çš„æ•…éšœæ¡ˆä¾‹ä¸­æ•°æ®åº“ç‰ˆæœ¬å´ä¸åŒï¼ˆå…·ä½“çœ‹ä¸‹æ–‡æ…¢æ…¢èŠï¼‰ï¼Œå“ï¼Œå›°éš¾é‡é‡å•Šï¼Œæœ€ç»ˆè¿˜æ˜¯è§£å†³äº†å“ˆã€‚</p>
<p>alter tableçš„è¯­å¥æ˜¯å¾ˆå±é™©çš„ï¼Œåœ¨æ“ä½œä¹‹å‰æœ€å¥½ç¡®è®¤å¯¹è¦æ“ä½œçš„è¡¨æ²¡æœ‰ä»»ä½•è¿›è¡Œä¸­çš„æ“ä½œã€æ²¡æœ‰æœªæäº¤äº‹åŠ¡ã€ä¹Ÿæ²¡æœ‰æ˜¾å¼äº‹åŠ¡ä¸­çš„æŠ¥é”™è¯­å¥ã€‚å¦‚æœæœ‰alter tableçš„ç»´æŠ¤ä»»åŠ¡ï¼Œåœ¨æ— äººç›‘ç®¡çš„æ—¶å€™è¿è¡Œï¼Œæœ€å¥½é€šè¿‡lock_wait_timeoutè®¾ç½®å¥½è¶…æ—¶æ—¶é—´ï¼Œé¿å…é•¿æ—¶é—´çš„metedataé”ç­‰å¾…ã€‚</p>
<a id="more"></a>


<h2 id="ä»€ä¹ˆæ˜¯metadata-lockï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯metadata-lockï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯metadata lockï¼Ÿ"></a>ä»€ä¹ˆæ˜¯metadata lockï¼Ÿ</h2><p>MetaData Lockå³å…ƒæ•°æ®é”ï¼Œåœ¨æ•°æ®åº“ä¸­å…ƒæ•°æ®å³æ•°æ®å­—å…¸ä¿¡æ¯åŒ…æ‹¬db,table,function,procedure,trigger,eventç­‰ã€‚metadata lockä¸»è¦ä¸ºäº†ä¿è¯å…ƒæ•°æ®çš„ä¸€è‡´æ€§,ç”¨äºå¤„ç†ä¸åŒçº¿ç¨‹æ“ä½œåŒä¸€æ•°æ®å¯¹è±¡çš„åŒæ­¥ä¸äº’æ–¥é—®é¢˜ã€‚</p>
<h3 id="MetaData-Lockçš„å‰ä¸–ä»Šç”Ÿ"><a href="#MetaData-Lockçš„å‰ä¸–ä»Šç”Ÿ" class="headerlink" title="MetaData Lockçš„å‰ä¸–ä»Šç”Ÿ"></a><strong>MetaData Lockçš„å‰ä¸–ä»Šç”Ÿ</strong></h3><p>MDLé”æ˜¯ä¸ºäº†è§£å†³ä¸€ä¸ªæœ‰åçš„<a href="https://bugs.mysql.com/bug.php?id=989" target="_blank" rel="noopener">bug#989</a>ï¼Œæ‰€ä»¥åœ¨5.5.3ç‰ˆæœ¬å¼•å…¥äº†MDLé”ã€‚å…¶å®5.5ä¹Ÿæœ‰ç±»ä¼¼ä¿æŠ¤å…ƒæ•°æ®çš„æœºåˆ¶ï¼Œåªæ˜¯æ²¡æœ‰æ˜ç¡®æå‡ºMDLæ¦‚å¿µè€Œå·²ã€‚ä½†æ˜¯5.5ä¹‹å‰ç‰ˆæœ¬(æ¯”å¦‚5.1)ä¸5.5ä¹‹åç‰ˆæœ¬åœ¨ä¿æŠ¤å…ƒæ•°æ®è¿™å—æœ‰ä¸€ä¸ªæ˜¾è‘—çš„ä¸åŒç‚¹æ˜¯ï¼Œ5.1å¯¹äºå…ƒæ•°æ®çš„ä¿æŠ¤æ˜¯è¯­å¥çº§åˆ«çš„ï¼Œ5.5å¯¹äºmetadataçš„ä¿æŠ¤æ˜¯äº‹åŠ¡çº§åˆ«çš„ã€‚æ‰€è°“è¯­å¥çº§åˆ«ï¼Œå³è¯­å¥æ‰§è¡Œå®Œæˆåï¼Œæ— è®ºäº‹åŠ¡æ˜¯å¦æäº¤æˆ–å›æ»šï¼Œå…¶è¡¨ç»“æ„å¯ä»¥è¢«å…¶ä»–ä¼šè¯æ›´æ–°ï¼›è€Œäº‹åŠ¡çº§åˆ«åˆ™æ˜¯åœ¨äº‹åŠ¡ç»“æŸåæ‰é‡Šæ”¾MDLã€‚å¼•å…¥MDLé”ä¸»è¦æ˜¯ä¸ºäº†<strong>è§£å†³ä¸¤ä¸ªé—®é¢˜</strong>ï¼š</p>
<ul>
<li>äº‹åŠ¡éš”ç¦»é—®é¢˜ï¼šæ¯”å¦‚åœ¨å¯é‡å¤éš”ç¦»çº§åˆ«ä¸‹ï¼Œä¼šè¯Aåœ¨2æ¬¡æŸ¥è¯¢æœŸé—´ï¼Œä¼šè¯Bå¯¹è¡¨ç»“æ„åšäº†ä¿®æ”¹ï¼Œä¸¤æ¬¡æŸ¥è¯¢ç»“æœå°±ä¼šä¸ä¸€è‡´ï¼Œæ— æ³•æ»¡è¶³å¯é‡å¤è¯»çš„è¦æ±‚ã€‚</li>
<li>æ•°æ®å¤åˆ¶é—®é¢˜ï¼šæ¯”å¦‚ä¼šè¯Aæ‰§è¡Œäº†å¤šæ¡æ›´æ–°è¯­å¥æœŸé—´ï¼Œå¦å¤–ä¸€ä¸ªä¼šè¯Båšäº†è¡¨ç»“æ„å˜æ›´å¹¶ä¸”å…ˆæäº¤ï¼Œå°±ä¼šå¯¼è‡´slaveåœ¨é‡åšæ—¶ï¼Œå…ˆé‡åšalterï¼Œå†é‡åšupdateæ—¶å°±ä¼šå‡ºç°å¤åˆ¶é”™è¯¯çš„ç°è±¡ã€‚ä¹Ÿå°±æ˜¯ä¸Šé¢æåˆ°çš„<a href="https://bugs.mysql.com/bug.php?id=989" target="_blank" rel="noopener">bug#989</a>ã€‚</li>
</ul>
<hr>
<h3 id="DDLæ“ä½œä¸MetaData-Lock"><a href="#DDLæ“ä½œä¸MetaData-Lock" class="headerlink" title="DDLæ“ä½œä¸MetaData Lock"></a>DDLæ“ä½œä¸MetaData Lock</h3><ul>
<li>metadata lock æœºåˆ¶æ˜¯ä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§å­˜åœ¨çš„ï¼Œåœ¨æœ‰äº‹åŠ¡çš„æ“ä½œæ—¶å€™ï¼Œéœ€è¦é¦–å…ˆè·å¾—metadata lock ,ç„¶åæ“ä½œï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™ï¼Œåˆæ¥äº†ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè¦ddlæ“ä½œåŒä¸€ä¸ªè¡¨ï¼Œå°±ä¼šå‡ºç° metadata lockã€‚</li>
<li>è‡ªåŠ¨æäº¤æ¨¡å¼ä¸‹ï¼Œå•è¯­å¥å°±æ˜¯ä¸€ä¸ªäº‹åŠ¡ï¼Œæ‰§è¡Œå®Œäº†ï¼Œäº‹åŠ¡ä¹Ÿå°±ç»“æŸäº†ã€‚</li>
<li>preparestatement  ä¼šè·å¾— metalockï¼Œä¸€æ—¦prepare å®Œæ¯•ï¼Œ metalock å°±é‡Šæ”¾äº†ã€‚</li>
<li>online DDLåº”è¯¥æ˜¯æŒ‡åœ¨alter tableè¿›è¡Œçš„æ—¶å€™ï¼Œ æ’å…¥/ä¿®æ”¹/åˆ é™¤æ•°æ®çš„sqlè¯­å¥ä¸ä¼šWaiting for table metadata lockã€‚ä¸€æ—¦alter table TableAçš„æ“ä½œåœæ»åœ¨Waiting for table metadata lockçš„çŠ¶æ€ï¼Œåç»­å¯¹TableAçš„ä»»ä½•æ“ä½œï¼ˆåŒ…æ‹¬è¯»ï¼‰éƒ½æ— æ³•è¿›è¡Œï¼Œä¹Ÿä¼šåœ¨Opening tablesçš„é˜¶æ®µè¿›å…¥Waiting for table metadata lockçš„é˜Ÿåˆ—ã€‚</li>
</ul>
<h2 id="Alter-table-ä¼šå‘ç”Ÿé”çš„ä¸‰ç§åœºæ™¯"><a href="#Alter-table-ä¼šå‘ç”Ÿé”çš„ä¸‰ç§åœºæ™¯" class="headerlink" title="Alter table ä¼šå‘ç”Ÿé”çš„ä¸‰ç§åœºæ™¯"></a>Alter table ä¼šå‘ç”Ÿé”çš„ä¸‰ç§åœºæ™¯</h2><h3 id="åœºæ™¯1"><a href="#åœºæ™¯1" class="headerlink" title="åœºæ™¯1"></a>åœºæ™¯1</h3><ul>
<li>ä¼šè¯Aå¯¹boobooè¡¨æ‰§è¡Œè¯»æ“ä½œ<code>select *,sleep(60) from booboo;</code>ï¼Œæ­£åœ¨è¿›è¡Œæœªæäº¤äº‹åŠ¡</li>
<li>ä¼šè¯Bå¯¹boobooè¡¨æ‰§è¡Œåœ¨çº¿DDLæ“ä½œ<code>alter table booboo add q4 int default 0;</code></li>
<li>ä¼šè¯Cå¯¹boobooè¡¨æ‰§è¡Œéšå¼è¯»æ“ä½œ<code>select *,sleep(60) from booboo;</code>,è¿›è¡Œç­‰å¾…</li>
<li>ä¼šè¯Då¯¹boobooè¡¨æ‰§è¡Œæ˜¾ç¤ºè¯»æ“ä½œ<code>begin;select * from booboo;</code>ä¹Ÿä¼šè¿›è¡Œç­‰å¾…</li>
<li>é€šè¿‡<code>show processlist</code>å¯ä»¥çœ‹åˆ°ä¼šè¯Aï¼ˆå¯¹boobooè¡¨ä¸Šæ­£åœ¨è¿›è¡Œçš„æ“ä½œï¼‰ï¼Œæ­¤æ—¶ä¼šè¯Bï¼ˆalter tableè¯­å¥ï¼‰æ— æ³•è·å–åˆ°metadata ç‹¬å é”ï¼Œä¼šè¿›è¡Œç­‰å¾…ï¼Œä¼šè¯Cå’Œä¼šè¯Déƒ½ä¼šè¿›è¡Œç­‰å¾…ï¼Œä¸”èƒ½ä»processlistè¡¨ä¸­çœ‹åˆ°å¯¹boobooè¡¨çš„æ“ä½œ</li>
<li>ä¼šè¯Aæäº¤äº‹åŠ¡åæˆ–killä¹‹åï¼Œä¼šè¯Cäº‹åŠ¡ç»“æŸï¼Œä¼šè¯D<code>select</code>è¯­å¥æ‰§è¡ŒæˆåŠŸï¼Œäº‹åŠ¡æäº¤åˆ™ä¼šè¯Bå¯æ‰§è¡Œï¼Œå¦åˆ™è¿›å…¥åœºæ™¯2</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> show processlist;</span></span><br><span class="line">+----+------+-----------+-----------+---------+------+---------------------------------+-----------------------------------------+</span><br><span class="line">| Id | User | Host      | db        | Command | Time | State                           | Info                                    |</span><br><span class="line">+----+------+-----------+-----------+---------+------+---------------------------------+-----------------------------------------+</span><br><span class="line">|  6 | root | localhost | uplooking | Query   |  167 | Waiting for table metadata lock | alter table booboo add q4 int default 0 |</span><br><span class="line">|  7 | root | localhost | uplooking | Query   |  155 | Waiting for table metadata lock | select * from booboo                    |</span><br><span class="line">|  8 | root | localhost | uplooking | Query   |    0 | starting                        | show processlist                        |</span><br><span class="line">|  9 | root | localhost | uplooking | Query   |  181 | User sleep                      | select *,sleep(60) from booboo          |</span><br><span class="line">| 10 | root | localhost | uplooking | Query   |    7 | Waiting for table metadata lock | select * from booboo                    |</span><br><span class="line">+----+------+-----------+-----------+---------+------+---------------------------------+-----------------------------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"><span class="meta">#</span><span class="bash"> id=9çš„çº¿ç¨‹ä¸ºä¼šè¯A è™½ç„¶æ˜¯éšå¼äº‹åŠ¡ï¼Œä½†æ˜¯æ²¡æœ‰æ‰§è¡ŒæˆåŠŸï¼Œæ‰€ä»¥ä¸ºæœªæäº¤çš„äº‹åŠ¡</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> id=6çš„çº¿ç¨‹ä¸ºä¼šè¯B åœ¨ä¼šè¯Aæœ‰äº‹åŠ¡æœªæäº¤çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡ŒAlteræ“ä½œ,äº‰æŠ¢metadata lock</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> id=7çš„çº¿ç¨‹ä¸ºä¼šè¯C éšå¼æŸ¥è¯¢äº‹åŠ¡ä¹Ÿä¼šè¿›å…¥ç­‰å¾…</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> id=10çš„çº¿ç¨‹ä¸ºä¼šè¯D æ˜¾ç¤ºæŸ¥è¯¢äº‹åŠ¡åŒæ ·è¿›å…¥ç­‰å¾…</span></span><br></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ³•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹metadatalock</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># ç¬¬ä¸€ç§æƒ…å†µï¼Œåˆ™å®šä½åˆ°é•¿æ—¶é—´æœªæäº¤çš„äº‹åŠ¡killå³å¯</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥è¯¢ information_schema.innodb_trx çœ‹åˆ°æœ‰é•¿æ—¶é—´æœªå®Œæˆçš„äº‹åŠ¡ï¼Œ ä½¿ç”¨ <span class="built_in">kill</span> å‘½ä»¤ç»ˆæ­¢è¯¥æŸ¥è¯¢ã€‚</span></span><br><span class="line"></span><br><span class="line">select concat('kill ',i.trx_mysql_thread_id,';') from information_schema.innodb_trx i,</span><br><span class="line">  (select </span><br><span class="line">         id, time</span><br><span class="line">     from</span><br><span class="line">         information_schema.processlist</span><br><span class="line">     where</span><br><span class="line">         time = (select </span><br><span class="line">                 max(time)</span><br><span class="line">             from</span><br><span class="line">                 information_schema.processlist</span><br><span class="line">             where</span><br><span class="line">                 state = 'Waiting for table metadata lock'</span><br><span class="line">                     and substring(info, 1, 5) in ('alter' , 'optim', 'repai', 'lock ', 'drop ', 'creat'))) p</span><br><span class="line">  where timestampdiff(second, i.trx_started, now()) &gt; p.time</span><br><span class="line">  and i.trx_mysql_thread_id  not in (connection_id(),p.id);</span><br></pre></td></tr></table></figure>



<h3 id="åœºæ™¯2"><a href="#åœºæ™¯2" class="headerlink" title="åœºæ™¯2"></a>åœºæ™¯2</h3><ul>
<li>é€šè¿‡<code>show processlist</code>çœ‹ä¸åˆ°boobooä¸Šæœ‰ä»»ä½•æ“ä½œï¼Œä½†å®é™…ä¸Šå­˜åœ¨æœ‰æœªæäº¤çš„äº‹åŠ¡ï¼Œå¯ä»¥åœ¨<code>information_schema.innodb_trx</code>ä¸­æŸ¥çœ‹åˆ°ã€‚åœ¨äº‹åŠ¡æ²¡æœ‰å®Œæˆä¹‹å‰ï¼Œboobooçš„é”ä¸ä¼šé‡Šæ”¾ï¼Œalter tableåŒæ ·è·å–ä¸åˆ°metadataçš„ç‹¬å é”</li>
<li>ä¼šè¯Dæäº¤äº‹åŠ¡æˆ–å›æ»šæˆ–killï¼Œåˆ™ä¼šè¯Bä¸­çš„Alterå¯ç»§ç»­æ‰§è¡Œ</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åœ¨åœºæ™¯1çš„åŸºç¡€ä¸Šï¼Œå°†ä¼šè¯Açš„äº‹åŠ¡å®Œæˆæˆ–è€…<span class="built_in">kill</span>æ‰ï¼Œä¼šè¯Cæ‰§è¡ŒæˆåŠŸï¼Œä½†æ˜¯ä¼šè¯Bå’Œä¼šè¯Dç»§ç»­è¿›å…¥metadataé”çš„ç­‰å¾…ã€‚åŸå› æ˜¯ä¼šè¯Dè™½ç„¶selectå¯ä»¥æ‰§è¡Œï¼Œä½†æ˜¯äº‹åŠ¡æ²¡æœ‰æäº¤ï¼Œåˆ™è¡¨ä¸Šçš„metadataé”è¿˜å­˜åœ¨ï¼Œå¯¼è‡´ä¼šè¯Bçš„ddlæ“ä½œæ— æ³•æ‰§è¡Œã€‚</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¼šè¯Bå’Œä¼šè¯Dï¼Œæƒ…å†µ1ï¼šçŸ¥é“æœ‰æœªå®Œæˆçš„äº‹åŠ¡Dï¼Œåˆ™ç»“æŸä¼šè¯Dçš„äº‹åŠ¡ï¼Œä¼šè¯Bæ­£å¸¸æ‰§è¡Œã€‚</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¼šè¯Bå’Œä¼šè¯Dï¼Œæƒ…å†µ2ï¼šä¸çŸ¥é“æœ‰æœªç»“æŸçš„äº‹åŠ¡Dï¼Œå¦‚ä½•æ’é”™å‘¢ï¼Ÿ</span></span><br><span class="line">=================================</span><br><span class="line"></span><br><span class="line">-- è¯·æ ¹æ®å…·ä½“çš„æƒ…æ™¯ä¿®æ”¹æŸ¥è¯¢è¯­å¥</span><br><span class="line">-- å¦‚æœå¯¼è‡´é˜»å¡çš„è¯­å¥çš„ç”¨æˆ·ä¸å½“å‰ç”¨æˆ·ä¸åŒï¼Œè¯·ä½¿ç”¨å¯¼è‡´é˜»å¡çš„è¯­å¥çš„ç”¨æˆ·ç™»å½•æ¥ç»ˆæ­¢ä¼šè¯</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># åœºæ™¯2çš„æƒ…å†µï¼Œæ˜¯åœ¨åœºæ™¯1çš„åŸºç¡€ä¸Šï¼Œè¿˜æ˜¯æœ‰metadatalocké”ï¼ˆ*ä¸€èˆ¬ç”Ÿäº§ç¯å¢ƒä¸ä¼šåœæœåŠ¡ï¼Œå› æ­¤ä¸åœçš„æœ‰æ–°çš„queryå‘é€è¿‡æ¥ï¼Œå°±ä¼šå‡ºç°åœºæ™¯2*ï¼‰ï¼Œåˆ™æ‰‹åŠ¨ç»§ç»­killæ‰é•¿äº‹åŠ¡å³å¯ï¼Œæ³¨æ„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæœ‰å¯èƒ½ddlæ“ä½œéœ€è¦ä¿ç•™ï¼ˆ*ä¾‹å¦‚MDLé”å‡ºç°åœ¨ä¸»ä»åŒæ­¥çš„ä»ä¸­ï¼Œä»åº“éœ€è¦å»æ‰§è¡Œä¸»å‘é€çš„è¡¨å˜æ›´ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥å…ˆå°†ä¸»ä»åœæ‰ï¼Œæ‰‹åŠ¨æ‰§è¡Œalteræ“ä½œï¼Œéƒ½å¯ä»¥*ï¼‰ä»¥ä¸‹æ–¹æ³•æ˜¯åœ¨åœæ­¢å¯¹ä»åº“çš„è¯»æ“ä½œåï¼Œå°†éddlçš„è¿æ¥killæ‰</span></span></span><br><span class="line"></span><br><span class="line">select id,State,command from information_schema.processlist where State="Waiting for table metadata lock";</span><br><span class="line">select  timediff(sysdate(),trx_started) timediff,sysdate(),trx_started,id,USER,DB,COMMAND,STATE,trx_state,trx_query from information_schema.processlist,information_schema.innodb_trx  where trx_mysql_thread_id=id;</span><br><span class="line">show processlist;</span><br><span class="line">select  concat('kill ',trx_mysql_thread_id,';') from information_schema.processlist,information_schema.innodb_trx  where trx_mysql_thread_id=id and State!="Waiting for table metadata lock";</span><br><span class="line"></span><br><span class="line">===============================</span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> show processlist;                                                                                                             </span></span><br><span class="line">+----+------+-----------+-----------+---------+------+---------------------------------+-----------------------------------------+</span><br><span class="line">| Id | User | Host      | db        | Command | Time | State                           | Info                                    |</span><br><span class="line">+----+------+-----------+-----------+---------+------+---------------------------------+-----------------------------------------+</span><br><span class="line">|  6 | root | localhost | uplooking | Query   |  275 | Waiting for table metadata lock | alter table booboo add q6 int default 0 |</span><br><span class="line">|  7 | root | localhost | uplooking | Sleep   |  269 |                                 | NULL                                    |</span><br><span class="line">|  8 | root | localhost | uplooking | Query   |    0 | starting                        | show processlist                        |</span><br><span class="line">| 10 | root | localhost | uplooking | Sleep   |  249 |                                 | NULL                                    |</span><br><span class="line">| 12 | root | localhost | uplooking | Sleep   |  191 |                                 | NULL                                    |</span><br><span class="line">+----+------+-----------+-----------+---------+------+---------------------------------+-----------------------------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹å½“å‰è¿›ç¨‹å‘ç°é™¤äº†Alterä¹‹å¤–æ²¡æœ‰å¯¹boobooè¡¨çš„æ“ä½œ</span></span><br><span class="line"></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> select  timediff(sysdate(),trx_started) timediff,sysdate(),trx_started,id,USER,DB,COMMAND,STATE,trx_state,trx_query from information_schema.processlist,information_schema.innodb_trx <span class="built_in">where</span> trx_mysql_thread_id=id;</span></span><br><span class="line">+----------+---------------------+---------------------+----+------+-----------+---------+---------------------------------+-----------+-----------------------------------------+</span><br><span class="line">| timediff | sysdate()           | trx_started         | id | USER | DB        | COMMAND | STATE                           | trx_state | trx_query                               |</span><br><span class="line">+----------+---------------------+---------------------+----+------+-----------+---------+---------------------------------+-----------+-----------------------------------------+</span><br><span class="line">| 00:05:38 | 2017-08-18 20:21:07 | 2017-08-18 20:15:29 |  6 | root | uplooking | Query   | Waiting for table metadata lock | RUNNING   | alter table booboo add q6 int default 0 |</span><br><span class="line">| 00:05:38 | 2017-08-18 20:21:07 | 2017-08-18 20:15:29 | 10 | root | uplooking | Sleep   |                                 | RUNNING   | NULL                                    |</span><br><span class="line">+----------+---------------------+---------------------+----+------+-----------+---------+---------------------------------+-----------+-----------------------------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹innodb_trxè¡¨å¯ä»¥çœ‹åˆ°é™¤äº†alterä¹‹å¤–æœ‰æœªå®Œæˆçš„äº‹åŠ¡ï¼Œä½†æ˜¯çœ‹ä¸åˆ°å…·ä½“queryï¼Œå¾—åˆ°çº¿ç¨‹idä¸º10</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å°±å¯ä»¥<span class="built_in">kill</span> 10æ¥ç»“æŸäº‹åŠ¡</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¹‹åAlteræ­£å¸¸æ“ä½œ</span></span><br></pre></td></tr></table></figure>

<h3 id="åœºæ™¯3"><a href="#åœºæ™¯3" class="headerlink" title="åœºæ™¯3"></a>åœºæ™¯3</h3><blockquote>
<p>ä¸åœºæ™¯2å¯¹æ¯”çš„ç°è±¡ä¸åŒäºï¼š</p>
<ul>
<li>åœºæ™¯2ï¼šæœªå®Œæˆäº‹åŠ¡ä¸­å­˜åœ¨æœªå®Œæˆäº‹åŠ¡</li>
<li>åœºæ™¯3ï¼šæœªå®Œæˆäº‹åŠ¡ä¸­ä¸å­˜åœ¨æœªå®Œæˆäº‹åŠ¡ï¼šç¡®è®¤æœ‰é”™è¯¯äº‹åŠ¡æœªæäº¤æˆ–å›æ»šï¼Œæ‰¾åˆ°è¯¥äº‹åŠ¡çš„session_idç„¶åæ€æ­»</li>
</ul>
</blockquote>
<ul>
<li>é€šè¿‡<code>show processlist</code>çœ‹ä¸åˆ°<code>booboo</code>è¡¨æœ‰ä»»ä½•æ“ä½œï¼Œåœ¨<code>information_schema.innodb_trx</code>ä¸­ä¹Ÿæ²¡æœ‰ä»»ä½•è¿›è¡Œä¸­çš„äº‹åŠ¡ã€‚</li>
<li>è¿™å¾ˆå¯èƒ½æ˜¯å› ä¸ºåœ¨ä¸€ä¸ªæ˜¾å¼çš„äº‹åŠ¡ä¸­ï¼Œå¯¹<code>booboo</code>è¡¨è¿›è¡Œäº†ä¸€ä¸ªå¤±è´¥çš„æ“ä½œï¼ˆæ¯”å¦‚æŸ¥è¯¢äº†ä¸€ä¸ªä¸å­˜åœ¨çš„å­—æ®µï¼‰ï¼Œè¿™æ—¶äº‹åŠ¡æ²¡æœ‰å¼€å§‹ï¼Œä½†æ˜¯å¤±è´¥è¯­å¥è·å–åˆ°çš„é”ä¾ç„¶æœ‰æ•ˆã€‚ä»<code>performance_schema.events_statements_current</code>è¡¨ä¸­å¯ä»¥æŸ¥åˆ°å¤±è´¥çš„è¯­å¥</li>
<li>ä¹Ÿå°±æ˜¯è¯´é™¤äº†è¯­æ³•é”™è¯¯ï¼Œå…¶ä»–é”™è¯¯è¯­å¥è·å–åˆ°çš„é”åœ¨è¿™ä¸ªäº‹åŠ¡æäº¤æˆ–å›æ»šä¹‹å‰ï¼Œä»ç„¶ä¸ä¼šé‡Šæ”¾æ‰ã€‚<code>because the failed statement is written to the binary log and the locks protect log consistency</code>ä½†æ˜¯è§£é‡Šè¿™ä¸€è¡Œä¸ºçš„åŸå› å¾ˆéš¾ç†è§£ï¼Œå› ä¸ºé”™è¯¯çš„è¯­å¥æ ¹æœ¬ä¸ä¼šè¢«è®°å½•åˆ°äºŒè¿›åˆ¶æ—¥å¿—</li>
<li>è§£å†³æ–¹æ³•ï¼šç¡®è®¤æœ‰é”™è¯¯äº‹åŠ¡æœªæäº¤æˆ–å›æ»šï¼Œæ‰¾åˆ°è¯¥äº‹åŠ¡çš„sessionidç„¶åæ€æ­»ï¼ˆéš¾ç‚¹ï¼‰</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åœºæ™¯3çš„å‡ºç°å’Œå‰ä¸¤ç§ä¸åŒ</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹çº¿ç¨‹æƒ…å†µï¼Œçœ‹åˆ°alteræ“ä½œmetadataé”ï¼Œè¿˜æœ‰å…¶ä»–çš„selectæ“ä½œæœ‰metadataé”</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># ç¬¬ä¸€ååº”å°±æ˜¯æœ‰å¯èƒ½æ˜¯åœºæ™¯1ï¼Œäºæ˜¯killæ‰æ‰§è¡Œselectçš„çº¿ç¨‹ï¼Œå†æ¬¡æŸ¥çœ‹çº¿ç¨‹æƒ…å†µï¼Œå°±åªå‰©ä¸‹æ‰§è¡Œalterçº¿ç¨‹äº†</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># æ¥ä¸‹æ¥æŸ¥çœ‹æœªå®Œæˆçš„äº‹åŠ¡ï¼Œå¦‚æœæ˜¯åœºæ™¯1ï¼Œåœ¨killæ‰å†²çªçš„çº¿ç¨‹ååº”è¯¥å‡ºç°ä¸¤ç§æƒ…å†µï¼ˆA.alteræ“ä½œæ­£å¸¸æ‰§è¡ŒB.çº¿ç¨‹ä¸­åªæœ‰alteræ“ä½œä¸ºwaiting metadata lockçŠ¶æ€ï¼›æœªå®Œæˆäº‹åŠ¡ä¸­å­˜åœ¨æœªå®Œæˆäº‹åŠ¡ï¼‰</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># ä½†æ˜¯å´å‘ç°å’ŒBæƒ…å†µæœ‰æ‰€ä¸åŒçš„æ˜¯ï¼šæœªå®Œæˆäº‹åŠ¡ä¸­ä¸å­˜åœ¨æœªå®Œæˆäº‹åŠ¡ï¼Œæ€»ç»“ç¬¬ä¸‰ç§æƒ…å†µ(C.çº¿ç¨‹ä¸­åªæœ‰alteræ“ä½œä¸ºwaiting metadata lockçŠ¶æ€ï¼›æœªå®Œæˆäº‹åŠ¡ä¸­ä¸å­˜åœ¨æœªå®Œæˆäº‹åŠ¡ï¼‰</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é€šè¿‡æœç´¢èµ„æ–™å®šä½åˆ°æ˜¯åœºæ™¯3ï¼Œä½†èµ„æ–™ä¸­æ²¡æœ‰è¯´æ€ä¹ˆè§£å†³é—®é¢˜ï¼Œåˆä¸èƒ½é‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Œåªæœ‰ä¸€ä¸ªèµ„æ–™é‡Œæåˆ°äº†æ–¹æ³•ï¼ˆç¡®è®¤æœ‰é”™è¯¯äº‹åŠ¡æœªæäº¤æˆ–å›æ»šï¼Œæ‰¾åˆ°è¯¥äº‹åŠ¡çš„sessionidç„¶åæ€æ­»ï¼Œå…³é”®å°±æ˜¯å¦‚ä½•æ‰¾åˆ°sessionidå‘¢ï¼Ÿperformance_schema.events_statements_currentä¸­çš„thread_idä¸ºçº¿ç¨‹idå¹¶ä¸æ˜¯sessionidæˆ–è€…è¯´ä¼šè¯idã€è¿æ¥idï¼Œå¦‚ä½•é€šè¿‡thread_idæ‰¾åˆ°session_idæˆä¸ºäº†éš¾ç‚¹ï¼Ÿ5.7ä¸­æœ‰ä¸ªsessionè¡¨å¯ä»¥ç›´æ¥æŸ¥åˆ°ï¼Œè€Œ5.6ä¸­å¿…é¡»é€šè¿‡ä¸‰è¡¨æ‰èƒ½æŸ¥åˆ°ï¼Œåˆ†åˆ«ä¸ºperformance_schema.events_statements_current,performance_schema.threads,information_schema.processlistè¡¨ã€‚ï¼‰</span></span><br><span class="line">=====================================================================================</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">kill</span>æ‰é™¤äº†å†™æ“ä½œä»¥å¤–çš„query</span></span><br><span class="line">select concat('kill ',id) from information_schema.processlist where State="Waiting for table metadata lock" and substring(info, 1, 5) not in ('alter' , 'optim', 'repai', 'lock ', 'drop ', 'creat');</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯»æ‰¾æœªæäº¤æˆ–æœªå›æ»šçš„é”™è¯¯äº‹åŠ¡ï¼Œå¹¶<span class="built_in">kill</span>å³å¯</span></span><br><span class="line">select t.processlist_id,t.processlist_time,e.sql_text from performance_schema.threads t,performance_schema.events_statements_current e where t.thread_id=e.thread_id and e.SQL_TEXT like '%t1%';</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ¡ˆä¾‹ä¸­å‡è®¾æ˜¯åœ¨t1è¡¨ä¸Šæœ‰MDLé”ï¼Œåˆ™ï¼Œe.sql_text è¿‘ä¼¼åŒ¹é…t1</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æœ¬æ–¹æ³•5.5 5.6 5.7 éƒ½é€šç”¨ã€‚</span></span><br><span class="line">=============================================================================</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸€æ­¥ï¼šæ¨¡æ‹Ÿç¬¬ä¸‰ç§æƒ…å†µï¼Œä¼šè¯11æ‰§è¡Œä¸€ä¸ªæ˜¾ç¤ºäº‹åŠ¡ï¼Œä¸”queryå‡ºç°åˆ—é”™è¯¯ï¼Œt1è¡¨ä¸­ä¸å­˜åœ¨xxåˆ—ï¼Œä¸æäº¤ã€‚</p>
<p><img src="MySQL%E7%9A%84%E5%85%83%E9%94%81MDL%E5%8F%91%E7%94%9F%E5%9C%BA%E6%99%AF%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93%5Cmdl01.png" alt=""></p>
<p>ç¬¬äºŒæ­¥ï¼šä¼šè¯14ä¸­æ‰§è¡Œalteræ“ä½œ</p>
<p><img src="MySQL%E7%9A%84%E5%85%83%E9%94%81MDL%E5%8F%91%E7%94%9F%E5%9C%BA%E6%99%AF%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/mdl02.png" alt="mdl02"></p>
<p>ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œä¸€æ¡query</p>
<p><img src="MySQL%E7%9A%84%E5%85%83%E9%94%81MDL%E5%8F%91%E7%94%9F%E5%9C%BA%E6%99%AF%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/mdl03.png" alt="mdl03"></p>
<p>ç¬¬å››æ­¥ï¼šä¼šè¯15æ‰§è¡Œä¸€ä¸ªæ˜¾ç¤ºäº‹åŠ¡ï¼ŒæŸ¥è¯¢t1è¡¨</p>
<p><img src="MySQL%E7%9A%84%E5%85%83%E9%94%81MDL%E5%8F%91%E7%94%9F%E5%9C%BA%E6%99%AF%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/mdl04.png" alt="mdl04"></p>
<p>ç¬¬äº”æ­¥ï¼šæŸ¥çœ‹å½“å‰çš„processlistæƒ…å†µï¼Œå¯ä»¥çœ‹åˆ°åªè¦æ˜¯å¯¹t1è¡¨çš„æ“ä½œéƒ½å‡ºç°äº†MDLé”ç­‰å¾…ï¼›å°è¯•é€šè¿‡ç¬¬ä¸€ç§æƒ…å†µçš„è§£å†³æ–¹æ³•æ‰¾å‡ºé˜»å¡çš„äº‹åŠ¡ä¼šè¯è¿›è¡Œkillï¼Œå‘ç°ä¸å­˜åœ¨é˜»å¡ä¼šè¯ï¼›æŸ¥çœ‹å½“å‰æœªæäº¤çš„äº‹åŠ¡å‘ç°è¿”å›ç©ºï¼›é€šè¿‡è¿‡æ»¤processlistä¸­è¿›è¡ŒMDLé”ç­‰å¾…ä¸”ä¸æ˜¯alterçš„ä¼šè¯idï¼Œè¿›è¡Œkillã€‚</p>
<p><img src="MySQL%E7%9A%84%E5%85%83%E9%94%81MDL%E5%8F%91%E7%94%9F%E5%9C%BA%E6%99%AF%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/mdl06.png" alt="mdl06"></p>
<p>ç¬¬å…­æ­¥ï¼šåªkill 12ï¼Œ15ï¼Œç•™ä¸‹æ‰§è¡Œalterçš„ä¼šè¯14ï¼›æœ‰äººä¼šæƒ³ä¸ºä»€ä¹ˆéƒ½killæ‰å‘¢ï¼Ÿå› ä¸ºå³ä½¿ç°åœ¨killæ‰äº†ï¼Œt1è¡¨çš„MDLé”ä¹Ÿä¸ä¼šé‡Šæ”¾æ‰ï¼Œè¿˜ä¸å¦‚ç•™ä¸‹ä¼šè¯14çš„ddlæ“ä½œï¼Œç­‰å½»åº•è§£å†³äº†ï¼Œè‡ªç„¶å°±èƒ½æ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚å…·ä½“å¯ä»¥çœ‹ä¸‹é¢çš„åˆ†æã€‚</p>
<p><img src="MySQL%E7%9A%84%E5%85%83%E9%94%81MDL%E5%8F%91%E7%94%9F%E5%9C%BA%E6%99%AF%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/mdl07.png" alt="mdl07"></p>
<p><img src="MySQL%E7%9A%84%E5%85%83%E9%94%81MDL%E5%8F%91%E7%94%9F%E5%9C%BA%E6%99%AF%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/mdl08.png" alt="mdl08"></p>
<p><img src="MySQL%E7%9A%84%E5%85%83%E9%94%81MDL%E5%8F%91%E7%94%9F%E5%9C%BA%E6%99%AF%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/mdl09.png" alt="mdl09"></p>
<p>ç¬¬ä¸ƒæ­¥ï¼šç»™å¤§å®¶åšä¸ªæµ‹è¯•ï¼Œå³ä½¿å°†ä¼šè¯14çš„alteråŠ¨ä½œkillæ‰ï¼š</p>
<ul>
<li>processlistä¸­çœ‹ä¸åˆ°ä»»ä½•ç­‰å¾…MDLé”çš„ä¼šè¯ï¼›</li>
<li>sys.schema_table_lock_waitsä¸­ä¹Ÿä¸å­˜åœ¨è¡¨é”ï¼ˆ5.7æ‰æœ‰sysåº“ï¼‰ï¼›</li>
<li>performance_schema.metadata_locksä¸­ä¹Ÿä¸å­˜åœ¨ä»»ä½•é”è®°å½•ï¼›</li>
<li>ä¼šè¯16æƒ³å†å»æ‰§è¡Œalteræ“ä½œï¼Œåˆå¼€å§‹äº†MDLé”ç­‰å¾…ã€‚</li>
</ul>
<p><img src="MySQL%E7%9A%84%E5%85%83%E9%94%81MDL%E5%8F%91%E7%94%9F%E5%9C%BA%E6%99%AF%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/mdl10.png" alt="mdl10"></p>
<p><img src="MySQL%E7%9A%84%E5%85%83%E9%94%81MDL%E5%8F%91%E7%94%9F%E5%9C%BA%E6%99%AF%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/mdl11.png" alt="mdl11"></p>
<p>ç¬¬å…«æ­¥ï¼šæ­¤æ—¶å°±ä¸€å®šå¯ä»¥ç¡®å®šå½“å‰å±äºã€<strong>æœ‰é”™è¯¯äº‹åŠ¡æœªæäº¤æˆ–å›æ»šå¯¼è‡´çš„MDLé”</strong>ã€‘çš„æƒ…å†µäº†ã€‚æˆ‘ä»¬æ‰¾å‡ºè¿™ä¸ªé”™è¯¯äº‹åŠ¡ï¼Œè¿›è¡Œkill</p>
<p><img src="MySQL%E7%9A%84%E5%85%83%E9%94%81MDL%E5%8F%91%E7%94%9F%E5%9C%BA%E6%99%AF%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/mdl12.png" alt="mdl12"></p>
<p>ç¬¬ä¹æ­¥ï¼škillæ‰ä¼šè¯11åï¼ŒæˆåŠŸå°†MDLé”é‡Šæ”¾ã€‚</p>
<blockquote>
<p>æœ‰äººåˆä¼šé—®å’¯ï¼šä¸ºä»€ä¹ˆä¸å°†æ•°æ®åº“é‡å¯ï¼Ÿ</p>
<p>å›ç­”ï¼š</p>
<p>å¦‚æœè¯´â€”â€”</p>
<ol>
<li><p>ä¸šåŠ¡å…è®¸é‡å¯</p>
</li>
<li><p>ä¸æƒ³æ‰¾åˆ°é—®é¢˜çš„æ ¹æº</p>
<p>é‚£ä¹ˆé‡å¯å§</p>
</li>
</ol>
<p>å¦‚æœè¯´â€”â€” </p>
<ol>
<li><p>æ•°æ®åº“ä¸Šé¢å¤šä¸ªåº“ï¼Œå…³è”å¤šä¸ªä¸šåŠ¡ï¼Œä¸èƒ½é‡å¯</p>
</li>
<li><p>æƒ³æ‰¾åˆ°é—®é¢˜çš„æ ¹æºï¼Œé˜²æ­¢ä¸‹æ¬¡å†æ¬¡å‡ºç°ç±»ä¼¼çš„é—®é¢˜</p>
<p>é‚£ä¹ˆä½ æ‡‚çš„</p>
</li>
</ol>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆä¸ç›´æ¥killæ‰€æœ‰ä¼šè¯å‘¢ï¼ŸåŒæ ·å¦‚æœä½ è¦æ‰¾å‡ºé—®é¢˜çš„æ ¹æºé‚£ä¹ˆå°±æ’æŸ¥ï¼Œä¸æƒ³é—®ä¸ºä»€ä¹ˆå°±ç›´æ¥killå§ï¼Œæœ«å°¾æœ‰killçš„è„šæœ¬</p>
</blockquote>
<p><img src="MySQL%E7%9A%84%E5%85%83%E9%94%81MDL%E5%8F%91%E7%94%9F%E5%9C%BA%E6%99%AF%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/mdl13.png" alt="mdl13"></p>
<p>ä¸€æ­¥æ­¥åˆ†æå¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> show processlist;                                                                                                                                                                   </span></span><br><span class="line">+----+------+-----------+-----------+---------+------+---------------------------------+-----------------------------------------+</span><br><span class="line">| Id | User | Host      | db        | Command | Time | State                           | Info                                    |</span><br><span class="line">+----+------+-----------+-----------+---------+------+---------------------------------+-----------------------------------------+</span><br><span class="line">|  6 | root | localhost | uplooking | Query   |   17 | Waiting for table metadata lock | alter table booboo add q9 int default 0 |</span><br><span class="line">|  7 | root | localhost | uplooking | Query   |   11 | Waiting for table metadata lock | select * from booboo                    |</span><br><span class="line">|  8 | root | localhost | uplooking | Query   |    0 | starting                        | show processlist                        |</span><br><span class="line">| 14 | root | localhost | uplooking | Query   |    5 | Waiting for table metadata lock | select * from booboo where id=3         |</span><br><span class="line">| 15 | root | localhost | uplooking | Sleep   |   28 |                                 | NULL                                    |</span><br><span class="line">+----+------+-----------+-----------+---------+------+---------------------------------+-----------------------------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> select  timediff(sysdate(),trx_started) timediff,sysdate(),trx_started,id,USER,DB,COMMAND,STATE,trx_state,trx_query from information_schema.processlist,information_schema.innodb_trx <span class="built_in">where</span> trx_mysql_thread_id=id;</span></span><br><span class="line">Empty set (0.00 sec)</span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> <span class="built_in">kill</span> 7 ;</span></span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> <span class="built_in">kill</span> 14;</span></span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> show processlist;                                                                                                                                                                   </span></span><br><span class="line">+----+------+-----------+-----------+---------+------+---------------------------------+-----------------------------------------+</span><br><span class="line">| Id | User | Host      | db        | Command | Time | State                           | Info                                    |</span><br><span class="line">+----+------+-----------+-----------+---------+------+---------------------------------+-----------------------------------------+</span><br><span class="line">|  6 | root | localhost | uplooking | Query   |   86 | Waiting for table metadata lock | alter table booboo add q9 int default 0 |</span><br><span class="line">|  8 | root | localhost | uplooking | Query   |    0 | starting                        | show processlist                        |</span><br><span class="line">| 15 | root | localhost | uplooking | Sleep   |   97 |                                 | NULL                                    |</span><br><span class="line">+----+------+-----------+-----------+---------+------+---------------------------------+-----------------------------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> select  timediff(sysdate(),trx_started) timediff,sysdate(),trx_started,id,USER,DB,COMMAND,STATE,trx_state,trx_query from information_schema.processlist,information_schema.innodb_trx <span class="built_in">where</span> trx_mysql_thread_id=id;</span></span><br><span class="line">Empty set (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚æœç¬¦åˆæƒ…å†µCï¼Œéœ€è¦å»æŸ¥çœ‹performance_schema.events_statements_currentè¡¨ä¸­æ˜¯å¦æœ‰å¯¹boobooçš„é”™è¯¯è¯­å¥ï¼ˆè¿™é‡Œçš„é”™è¯¯è¯­å¥æ˜¯éè¯­æ³•é”™è¯¯çš„ï¼Œä¾‹å¦‚selectä¸­å†™äº†ä¸å­˜åœ¨çš„åˆ—ç­‰æƒ…å†µï¼‰</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä»ä¸‹é¢çš„æŸ¥è¯¢ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œç¡®å®å­˜åœ¨ä¸€ä¸ªé”™è¯¯è¯­å¥äº‹ä»¶</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é€šè¿‡è¯¥é”™è¯¯è¯­å¥äº‹ä»¶çš„THREAD_IDï¼Œåˆ°performance_schema.threadsè¡¨æŸ¥åˆ°è¯¥çº¿ç¨‹å¯¹åº”çš„PROCESSLIST_IDï¼Œè€ŒPROCESSLIST_IDè¿›ç¨‹idç­‰äºprocesslistä¸­çš„id</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> select * from performance_schema.events_statements_current <span class="built_in">where</span> SQL_TEXT like <span class="string">'%booboo%'</span>\G;</span></span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">              THREAD_ID: 31</span><br><span class="line">               EVENT_ID: 16</span><br><span class="line">           END_EVENT_ID: NULL</span><br><span class="line">             EVENT_NAME: statement/sql/alter_table</span><br><span class="line">                 SOURCE: socket_connection.cc:101</span><br><span class="line">            TIMER_START: 3292336129737000</span><br><span class="line">              TIMER_END: 3521408438190000</span><br><span class="line">             TIMER_WAIT: 229072308453000</span><br><span class="line">              LOCK_TIME: 0</span><br><span class="line">               SQL_TEXT: alter table booboo add q9 int default 0</span><br><span class="line">                 DIGEST: NULL</span><br><span class="line">            DIGEST_TEXT: NULL</span><br><span class="line">         CURRENT_SCHEMA: uplooking</span><br><span class="line">            OBJECT_TYPE: NULL</span><br><span class="line">          OBJECT_SCHEMA: NULL</span><br><span class="line">            OBJECT_NAME: NULL</span><br><span class="line">  OBJECT_INSTANCE_BEGIN: NULL</span><br><span class="line">            MYSQL_ERRNO: 0</span><br><span class="line">      RETURNED_SQLSTATE: NULL</span><br><span class="line">           MESSAGE_TEXT: NULL</span><br><span class="line">                 ERRORS: 0</span><br><span class="line">               WARNINGS: 0</span><br><span class="line">          ROWS_AFFECTED: 0</span><br><span class="line">              ROWS_SENT: 0</span><br><span class="line">          ROWS_EXAMINED: 0</span><br><span class="line">CREATED_TMP_DISK_TABLES: 0</span><br><span class="line">     CREATED_TMP_TABLES: 0</span><br><span class="line">       SELECT_FULL_JOIN: 0</span><br><span class="line"> SELECT_FULL_RANGE_JOIN: 0</span><br><span class="line">           SELECT_RANGE: 0</span><br><span class="line">     SELECT_RANGE_CHECK: 0</span><br><span class="line">            SELECT_SCAN: 0</span><br><span class="line">      SORT_MERGE_PASSES: 0</span><br><span class="line">             SORT_RANGE: 0</span><br><span class="line">              SORT_ROWS: 0</span><br><span class="line">              SORT_SCAN: 0</span><br><span class="line">          NO_INDEX_USED: 0</span><br><span class="line">     NO_GOOD_INDEX_USED: 0</span><br><span class="line">       NESTING_EVENT_ID: NULL</span><br><span class="line">     NESTING_EVENT_TYPE: NULL</span><br><span class="line">    NESTING_EVENT_LEVEL: 0</span><br><span class="line">*************************** 2. row ***************************</span><br><span class="line">              THREAD_ID: 33</span><br><span class="line">               EVENT_ID: 74</span><br><span class="line">           END_EVENT_ID: NULL</span><br><span class="line">             EVENT_NAME: statement/sql/select</span><br><span class="line">                 SOURCE: socket_connection.cc:101</span><br><span class="line">            TIMER_START: 3521408132304000</span><br><span class="line">              TIMER_END: 3521408462141000</span><br><span class="line">             TIMER_WAIT: 329837000</span><br><span class="line">              LOCK_TIME: 184000000</span><br><span class="line">               SQL_TEXT: select * from performance_schema.events_statements_current where SQL_TEXT like '%booboo%'</span><br><span class="line">                 DIGEST: NULL</span><br><span class="line">            DIGEST_TEXT: NULL</span><br><span class="line">         CURRENT_SCHEMA: uplooking</span><br><span class="line">            OBJECT_TYPE: NULL</span><br><span class="line">          OBJECT_SCHEMA: NULL</span><br><span class="line">            OBJECT_NAME: NULL</span><br><span class="line">  OBJECT_INSTANCE_BEGIN: NULL</span><br><span class="line">            MYSQL_ERRNO: 0</span><br><span class="line">      RETURNED_SQLSTATE: NULL</span><br><span class="line">           MESSAGE_TEXT: NULL</span><br><span class="line">                 ERRORS: 0</span><br><span class="line">               WARNINGS: 0</span><br><span class="line">          ROWS_AFFECTED: 0</span><br><span class="line">              ROWS_SENT: 1</span><br><span class="line">          ROWS_EXAMINED: 0</span><br><span class="line">CREATED_TMP_DISK_TABLES: 0</span><br><span class="line">     CREATED_TMP_TABLES: 0</span><br><span class="line">       SELECT_FULL_JOIN: 0</span><br><span class="line"> SELECT_FULL_RANGE_JOIN: 0</span><br><span class="line">           SELECT_RANGE: 0</span><br><span class="line">     SELECT_RANGE_CHECK: 0</span><br><span class="line">            SELECT_SCAN: 1</span><br><span class="line">      SORT_MERGE_PASSES: 0</span><br><span class="line">             SORT_RANGE: 0</span><br><span class="line">              SORT_ROWS: 0</span><br><span class="line">              SORT_SCAN: 0</span><br><span class="line">          NO_INDEX_USED: 1</span><br><span class="line">     NO_GOOD_INDEX_USED: 0</span><br><span class="line">       NESTING_EVENT_ID: NULL</span><br><span class="line">     NESTING_EVENT_TYPE: NULL</span><br><span class="line">    NESTING_EVENT_LEVEL: 0</span><br><span class="line">*************************** 3. row ***************************</span><br><span class="line">              THREAD_ID: 40</span><br><span class="line">               EVENT_ID: 8</span><br><span class="line">           END_EVENT_ID: 8</span><br><span class="line">             EVENT_NAME: statement/sql/select</span><br><span class="line">                 SOURCE: socket_connection.cc:101</span><br><span class="line">            TIMER_START: 3280938133699000</span><br><span class="line">              TIMER_END: 3280938258470000</span><br><span class="line">             TIMER_WAIT: 124771000</span><br><span class="line">              LOCK_TIME: 0</span><br><span class="line">               SQL_TEXT: select abc from booboo</span><br><span class="line">                 DIGEST: 871dd43dfdfb143e81439bbe7bf7b57e</span><br><span class="line">            DIGEST_TEXT: SELECT `abc` FROM `booboo` </span><br><span class="line">         CURRENT_SCHEMA: uplooking</span><br><span class="line">            OBJECT_TYPE: NULL</span><br><span class="line">          OBJECT_SCHEMA: NULL</span><br><span class="line">            OBJECT_NAME: NULL</span><br><span class="line">  OBJECT_INSTANCE_BEGIN: NULL</span><br><span class="line">            MYSQL_ERRNO: 1054</span><br><span class="line">      RETURNED_SQLSTATE: 42S22</span><br><span class="line">           MESSAGE_TEXT: Unknown column 'abc' in 'field list'</span><br><span class="line">                 ERRORS: 1</span><br><span class="line">               WARNINGS: 0</span><br><span class="line">          ROWS_AFFECTED: 0</span><br><span class="line">              ROWS_SENT: 0</span><br><span class="line">          ROWS_EXAMINED: 0</span><br><span class="line">CREATED_TMP_DISK_TABLES: 0</span><br><span class="line">     CREATED_TMP_TABLES: 0</span><br><span class="line">       SELECT_FULL_JOIN: 0</span><br><span class="line"> SELECT_FULL_RANGE_JOIN: 0</span><br><span class="line">           SELECT_RANGE: 0</span><br><span class="line">     SELECT_RANGE_CHECK: 0</span><br><span class="line">            SELECT_SCAN: 0</span><br><span class="line">      SORT_MERGE_PASSES: 0</span><br><span class="line">             SORT_RANGE: 0</span><br><span class="line">              SORT_ROWS: 0</span><br><span class="line">              SORT_SCAN: 0</span><br><span class="line">          NO_INDEX_USED: 0</span><br><span class="line">     NO_GOOD_INDEX_USED: 0</span><br><span class="line">       NESTING_EVENT_ID: NULL</span><br><span class="line">     NESTING_EVENT_TYPE: NULL</span><br><span class="line">    NESTING_EVENT_LEVEL: 0</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">ERROR: </span><br><span class="line">No query specified</span><br><span class="line"></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> select THREAD_ID,DIGEST_TEXT from performance_schema.events_statements_current <span class="built_in">where</span> DIGEST_TEXT=<span class="string">"SELECT `abc` FROM `booboo`"</span>;</span></span><br><span class="line">+-----------+-----------------------------+</span><br><span class="line">| THREAD_ID | DIGEST_TEXT                 |</span><br><span class="line">+-----------+-----------------------------+</span><br><span class="line">|        40 | SELECT `abc` FROM `booboo`  |</span><br><span class="line">+-----------+-----------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> select * from performance_schema.threads <span class="built_in">where</span> thread_id=40\G;</span></span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">          THREAD_ID: 40</span><br><span class="line">               NAME: thread/sql/one_connection</span><br><span class="line">               TYPE: FOREGROUND</span><br><span class="line">     PROCESSLIST_ID: 15</span><br><span class="line">   PROCESSLIST_USER: root</span><br><span class="line">   PROCESSLIST_HOST: localhost</span><br><span class="line">     PROCESSLIST_DB: uplooking</span><br><span class="line">PROCESSLIST_COMMAND: Sleep</span><br><span class="line">   PROCESSLIST_TIME: 402</span><br><span class="line">  PROCESSLIST_STATE: NULL</span><br><span class="line">   PROCESSLIST_INFO: NULL</span><br><span class="line">   PARENT_THREAD_ID: NULL</span><br><span class="line">               ROLE: NULL</span><br><span class="line">       INSTRUMENTED: YES</span><br><span class="line">            HISTORY: YES</span><br><span class="line">    CONNECTION_TYPE: Socket</span><br><span class="line">       THREAD_OS_ID: 22758</span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> select PROCESSLIST_ID from performance_schema.threads <span class="built_in">where</span> thread_id=40;</span></span><br><span class="line">+----------------+</span><br><span class="line">| PROCESSLIST_ID |</span><br><span class="line">+----------------+</span><br><span class="line">|             15 |</span><br><span class="line">+----------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> select * from information_schema.processlist <span class="built_in">where</span> id=(select PROCESSLIST_ID from performance_schema.threads <span class="built_in">where</span> thread_id=40);</span></span><br><span class="line">+----+------+-----------+-----------+---------+------+-------+------+</span><br><span class="line">| ID | USER | HOST      | DB        | COMMAND | TIME | STATE | INFO |</span><br><span class="line">+----+------+-----------+-----------+---------+------+-------+------+</span><br><span class="line">| 15 | root | localhost | uplooking | Sleep   |  466 |       | NULL |</span><br><span class="line">+----+------+-----------+-----------+---------+------+-------+------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> <span class="built_in">kill</span> 15;</span></span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¼šè¯B</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> alter table booboo add q9 int default 0;</span></span><br><span class="line">Query OK, 0 rows affected (9 min 54.35 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>



<h2 id="å°çŸ¥è¯†ç‚¹æ€»ç»“"><a href="#å°çŸ¥è¯†ç‚¹æ€»ç»“" class="headerlink" title="å°çŸ¥è¯†ç‚¹æ€»ç»“"></a>å°çŸ¥è¯†ç‚¹æ€»ç»“</h2><h3 id="ä¸‰å¼ è¡¨çš„å…³ç³»"><a href="#ä¸‰å¼ è¡¨çš„å…³ç³»" class="headerlink" title="ä¸‰å¼ è¡¨çš„å…³ç³»"></a>ä¸‰å¼ è¡¨çš„å…³ç³»</h3><blockquote>
<p>MySQL 5.6</p>
</blockquote>
<ol>
<li><code>performance_schema</code>åº“ä¸­ï¼Œ<code>events_statements_current</code>è¡¨ä¸­<code>theard_id</code>ä¸<code>threads</code>è¡¨ä¸­çš„<code>thread_id</code>ç›¸åŒ</li>
<li><code>performance_schema</code>åº“ä¸­ï¼Œthreadsè¡¨ä¸­ï¼Œthread_idå’Œprocesslist_idä¸ºå¯¹åº”å…³ç³»ï¼Œ<code>thread_id</code>è¡¨ç¤ºä¸€ä¸ªç‹¬ç‰¹çš„çº¿ç¨‹æ ‡è¯†ç¬¦;<code>processlist_id</code>æ˜¯<code>show processlist</code>æ˜¾ç¤ºçš„<code>id</code>å€¼ï¼Œè¿æ¥æ ‡è¯†ç¬¦ï¼›è€Œå¯¹äºåå°çº¿ç¨‹(ä¸ç”¨æˆ·è¿æ¥ä¸ç›¸å…³çš„çº¿ç¨‹)ï¼Œ<code>PROCESSLIST_ID</code>ä¸ºç©ºï¼Œæ­¤å€¼ä¸æ˜¯å”¯ä¸€çš„ã€‚</li>
<li><code>information_schema</code>åº“ä¸­,<code>PROCESSLIST</code>è¡¨æ˜¯ä¸€ä¸ªéæ ‡å‡†è¡¨ã€‚<code>id</code>è¿æ¥æ ‡è¯†ç¬¦ï¼Œå¹¶ç”±CONNECTION_ID()å‡½æ•°è¿”å›ã€‚</li>
</ol>
<table>
<thead>
<tr>
<th>performance_schema</th>
<th>performance_schema</th>
<th>performance_schema</th>
<th>information_schema</th>
</tr>
</thead>
<tbody><tr>
<td>events_statements_current</td>
<td>threads</td>
<td>threads</td>
<td>processlist</td>
</tr>
<tr>
<td>THREAD_ID</td>
<td>THREAD_ID</td>
<td>PROCESSLIST_ID</td>
<td>ID</td>
</tr>
</tbody></table>
<h3 id="æˆ‘çš„ç†è§£"><a href="#æˆ‘çš„ç†è§£" class="headerlink" title="æˆ‘çš„ç†è§£"></a>æˆ‘çš„ç†è§£</h3><ol>
<li>çº¿ç¨‹è¡¨ä¸­ä¿å­˜äº†æ‰€æœ‰çº¿ç¨‹çš„ä¿¡æ¯ï¼Œæœ‰å‰å°çš„æœ‰åå°è¿è¡Œçš„ï¼›</li>
<li>å¦‚æœæ˜¯ç”±è¿æ¥äº§ç”Ÿçš„çº¿ç¨‹ï¼Œä¸€èˆ¬éƒ½æ˜¯å‰å°çº¿ç¨‹ï¼Œä¼šåˆ†é…ä¸€ä¸ªprocesslist_idï¼Œå¯ä»¥åœ¨information_schema.processlistä¸­çœ‹åˆ°</li>
</ol>
<h3 id="èµ„æ–™å‚è€ƒ"><a href="#èµ„æ–™å‚è€ƒ" class="headerlink" title="èµ„æ–™å‚è€ƒ"></a>èµ„æ–™å‚è€ƒ</h3><p><a href="https://dev.mysql.com/doc/refman/5.7/en/threads-table.html" target="_blank" rel="noopener">å®˜ç½‘å…³äºthreadsè¡¨çš„è¯´æ˜</a></p>
<p><a href="https://dev.mysql.com/doc/refman/5.7/en/show-processlist.html" target="_blank" rel="noopener">å®˜æ–¹å…³äºprocesslistè¡¨çš„è¯´æ˜</a></p>
<p><a href="http://www.voidcn.com/article/p-hjsjvnlz-bog.html" target="_blank" rel="noopener">MySQL5.7 MetaData Lock æ¡ˆä¾‹åˆ†äº«</a></p>
<h3 id="ä¸åŒç‰ˆæœ¬"><a href="#ä¸åŒç‰ˆæœ¬" class="headerlink" title="ä¸åŒç‰ˆæœ¬"></a>ä¸åŒç‰ˆæœ¬</h3><blockquote>
<p>MySQL 5.7</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from performance_schema.events_statements_current\G</span><br><span class="line">select * from sys.x$session\G</span><br><span class="line">select * from sys.x$processlist\G</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from x$session\G;</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">                thd_id: 3904</span><br><span class="line">               conn_id: 3879</span><br><span class="line">                  user: root@localhost</span><br><span class="line">                    db: sys</span><br><span class="line">               command: Query</span><br><span class="line">                 state: Sending data</span><br><span class="line">                  time: 0</span><br><span class="line">     current_statement: select * from x$session</span><br><span class="line">     statement_latency: 1564453000</span><br><span class="line">              progress: NULL</span><br><span class="line">          lock_latency: 847000000</span><br><span class="line">         rows_examined: 0</span><br><span class="line">             rows_sent: 0</span><br><span class="line">         rows_affected: 0</span><br><span class="line">            tmp_tables: 4</span><br><span class="line">       tmp_disk_tables: 1</span><br><span class="line">             full_scan: YES</span><br><span class="line">        last_statement: NULL</span><br><span class="line">last_statement_latency: NULL</span><br><span class="line">        current_memory: 0</span><br><span class="line">             last_wait: NULL</span><br><span class="line">     last_wait_latency: NULL</span><br><span class="line">                source: NULL</span><br><span class="line">           trx_latency: NULL</span><br><span class="line">             trx_state: NULL</span><br><span class="line">        trx_autocommit: NULL</span><br><span class="line">                   pid: 12880</span><br><span class="line">          program_name: mysql</span><br><span class="line">1 row in set (0.05 sec)</span><br><span class="line">mysql&gt; select * from  x$processlist limit 1\G;</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">                thd_id: 1</span><br><span class="line">               conn_id: NULL</span><br><span class="line">                  user: sql&#x2F;main</span><br><span class="line">                    db: NULL</span><br><span class="line">               command: NULL</span><br><span class="line">                 state: NULL</span><br><span class="line">                  time: 230927</span><br><span class="line">     current_statement: NULL</span><br><span class="line">     statement_latency: NULL</span><br><span class="line">              progress: NULL</span><br><span class="line">          lock_latency: NULL</span><br><span class="line">         rows_examined: NULL</span><br><span class="line">             rows_sent: NULL</span><br><span class="line">         rows_affected: NULL</span><br><span class="line">            tmp_tables: NULL</span><br><span class="line">       tmp_disk_tables: NULL</span><br><span class="line">             full_scan: NO</span><br><span class="line">        last_statement: NULL</span><br><span class="line">last_statement_latency: NULL</span><br><span class="line">        current_memory: 0</span><br><span class="line">             last_wait: NULL</span><br><span class="line">     last_wait_latency: NULL</span><br><span class="line">                source: NULL</span><br><span class="line">           trx_latency: NULL</span><br><span class="line">             trx_state: NULL</span><br><span class="line">        trx_autocommit: NULL</span><br><span class="line">                   pid: NULL</span><br><span class="line">          program_name: NULL</span><br><span class="line">1 row in set (0.06 sec)</span><br><span class="line">mysql&gt; select * from information_schema.processlist;</span><br><span class="line">+------+------+-----------+------+---------+------+-----------+----------------------------------------------+</span><br><span class="line">| ID   | USER | HOST      | DB   | COMMAND | TIME | STATE     | INFO                                         |</span><br><span class="line">+------+------+-----------+------+---------+------+-----------+----------------------------------------------+</span><br><span class="line">| 3879 | root | localhost | sys  | Query   |    0 | executing | select * from information_schema.processlist |</span><br><span class="line">+------+------+-----------+------+---------+------+-----------+----------------------------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h2 id="MDLæ•…éšœè‡ªæ„ˆ"><a href="#MDLæ•…éšœè‡ªæ„ˆ" class="headerlink" title="MDLæ•…éšœè‡ªæ„ˆ"></a>MDLæ•…éšœè‡ªæ„ˆ</h2><h3 id="killæ‰€æœ‰ä¼šè¯"><a href="#killæ‰€æœ‰ä¼šè¯" class="headerlink" title="killæ‰€æœ‰ä¼šè¯"></a>killæ‰€æœ‰ä¼šè¯</h3><blockquote>
<p>ä¸æƒ³çŸ¥é“æ•…éšœåŸå› ï¼Œåªæƒ³å¿«é€Ÿè§£å†³æ•…éšœ</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">kill</span>æ‰ æ‰€æœ‰ä¼šè¯</span></span><br><span class="line">user=xxx</span><br><span class="line">password=xxx</span><br><span class="line">host=xxxx.mysql.rds.aliyuncs.com</span><br><span class="line">port=3306</span><br><span class="line"></span><br><span class="line">mysql -u$user -p$password -h$host  -P$port -e "select  concat('KILL ',id,';') from information_schema.processlist;" &gt; tmpfile</span><br><span class="line"></span><br><span class="line">awk '&#123;if (NR != 1) print $0 &#125;' tmpfile | mysql -u$user -p$password -h$host  -P$port</span><br></pre></td></tr></table></figure>

<h3 id="MDLæ•…éšœæ’æŸ¥å’Œè§£å†³"><a href="#MDLæ•…éšœæ’æŸ¥å’Œè§£å†³" class="headerlink" title="MDLæ•…éšœæ’æŸ¥å’Œè§£å†³"></a>MDLæ•…éšœæ’æŸ¥å’Œè§£å†³</h3><p><a href="https://github.com/BoobooWei/DevOps-Database-Troubleshooting/blob/master/fault_self_healing_metadatalock.py" target="_blank" rel="noopener">MDLæ•…éšœè‡ªæ„ˆè„šæœ¬GitHubåœ°å€</a></p>
]]></content>
      <categories>
        <category>æŠ€æœ¯å¹¿è§’</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>é”æ•…éšœ</tag>
      </tags>
  </entry>
  <entry>
    <title>LINUX HISTORY</title>
    <url>/2016/12/22/booboo_linux_base/00-linux_history/</url>
    <content><![CDATA[<p>å¦‚æœä½ å–œæ¬¢æŠ€æœ¯ï¼Œé‚£ä¹ˆLinuxçš„å­¦ä¹ ä¼šä¸ºä½ æ‰“å¼€ä¸€ä¸ªæ–°çš„ä¸–ç•Œã€‚</p>
<p>å…¥é—¨éš¾ï¼Œä½†æ˜¯ä¸€æ—¦å…¥é—¨ï¼Œå°±ç®€å•äº†ï¼ŒåŠ æ²¹ï¼</p>
<p>å¼€æºä¸‡å²ï½</p>
<h2 id="ç¡¬ä»¶å‘å±•ç®€ä»‹"><a href="#ç¡¬ä»¶å‘å±•ç®€ä»‹" class="headerlink" title="ç¡¬ä»¶å‘å±•ç®€ä»‹"></a>ç¡¬ä»¶å‘å±•ç®€ä»‹</h2><h3 id="x86-æ¶æ„"><a href="#x86-æ¶æ„" class="headerlink" title="x86 æ¶æ„"></a>x86 æ¶æ„</h3><p>1978å¹´6æœˆ8æ—¥ï¼ŒIntelå‘å¸ƒäº†æ–°æ¬¾16ä½å¾®å¤„ç†å™¨â€œ8086â€ï¼Œä¹ŸåŒæ—¶å¼€åˆ›äº†ä¸€ä¸ªæ–°æ—¶ä»£ï¼šx86æ¶æ„è¯ç”Ÿäº†ã€‚X86æŒ‡ä»¤é›†æ˜¯ç¾å›½Intelå…¬å¸ä¸ºå…¶ç¬¬ä¸€å—16ä½CPU(i8086)ä¸“é—¨å¼€å‘çš„ï¼Œç¾å›½IBMå…¬å¸1981å¹´æ¨å‡ºçš„ä¸–<br>ç•Œç¬¬ä¸€å° PCæœºä¸­çš„CPUâ€”i8088(i8086ç®€åŒ–ç‰ˆ)ä½¿ç”¨çš„ä¹Ÿæ˜¯X86æŒ‡ä»¤ï¼ŒåŒæ—¶ç”µè„‘ä¸­ä¸ºæé«˜æµ®ç‚¹æ•°æ®å¤„ç†èƒ½åŠ›è€Œå¢åŠ çš„X87èŠ¯ç‰‡ç³»åˆ—æ•°å­¦åå¤„ç†å™¨åˆ™å¦å¤–ä½¿ç”¨X87æŒ‡ä»¤ï¼Œä»¥åå°±å°†X86æŒ‡ä»¤é›†å’ŒX87 æŒ‡ä»¤é›†ç»Ÿç§°ä¸º<br>X86æŒ‡ä»¤é›†ã€‚è™½ç„¶éšç€CPUæŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼ŒIntelé™†ç»­ç ”åˆ¶å‡ºæ›´æ–°å‹çš„i80386ã€i80486ç›´åˆ°ä»Šå¤©çš„Pentium 4(ä»¥ä¸‹ç®€ä¸ºP4)ç³»åˆ—ï¼Œä½†ä¸ºäº†ä¿è¯ç”µè„‘èƒ½ç»§ç»­è¿è¡Œä»¥å¾€å¼€å‘çš„å„ç±»åº”ç”¨ç¨‹åºä»¥ä¿æŠ¤å’Œç»§æ‰¿ä¸°å¯Œçš„è½¯ä»¶èµ„æºï¼Œ æ‰€ä»¥Intelå…¬å¸æ‰€ç”Ÿäº§çš„æ‰€æœ‰CPUä»ç„¶ç»§ç»­ä½¿ç”¨X86æŒ‡ä»¤é›†ï¼Œæ‰€ä»¥å®ƒçš„CPUä»å±äºX86ç³»åˆ—ã€‚</p>
<h3 id="Altair-8800"><a href="#Altair-8800" class="headerlink" title="Altair 8800"></a>Altair 8800</h3><p>ä¸–ç•Œä¸Šçš„ç¬¬ä¸€å°ä¸ªäººç”µè„‘â€“â€œç‰µç‰›æ˜Ÿâ€ã€€ã€€</p>
<p>çˆ±å¾·Â·ç½—ä¼¯å…¹ï¼ˆEd Robertsï¼‰çš„æ¢¦æƒ³æ˜¯åšä¸€åå„¿ç§‘åŒ»ç”Ÿã€‚ä½†æ˜¯å‘½è¿å´è®©ä»–åŠ å…¥äº†ç¾å›½ç©ºå†›ï¼Œåšä¸€åå·¥ç¨‹å¸ˆã€‚é€€ä¼åï¼Œä»–åœ¨æ–°å¢¨è¥¿å“¥å·çš„é˜¿ä¼¯å…‹åŸºå¸‚æœºåœºé™„è¿‘çš„è’æ¼ ä¸Šåˆ›åŠäº†ä¸€å®¶ç§°ä¸ºç±³å…¹ï¼ˆMITSï¼‰çš„å…¬å¸ï¼Œç”Ÿäº§å„ç§ç”µå­éƒ¨ä»¶å’Œè®¾å¤‡ã€‚å…¬å¸æœ‰ä¸€æ®µæ—¶é—´çš„ç»è¥è¿˜ç®—é¡ºåˆ©ã€‚å½“å¸‚åœºä¸Šçš„æ‰‹æŒè®¡ç®—å™¨å–åˆ°395ç¾å…ƒæ—¶ï¼Œç±³å…¹å…¬å¸æ¨å‡ºäº†<br>ä¸åˆ°100ç¾å…ƒçš„åŒç±»äº§å“ã€‚ä½†æ˜¯ä¸ä¹…ä¹‹åï¼Œå¾·å·ä»ªå™¨ç­‰å¤§å…¬å¸è¿…é€Ÿè¿›å…¥æ‰‹æŒè®¡ç®—å™¨çš„å¸‚åœºï¼Œäº§å“ä»·æ ¼å¤§å¹…åº¦ä¸‹é™ï¼Œä½åˆ°äº†ç±³å…¹å…¬å¸çš„æˆæœ¬ä»·ä»¥ä¸‹ã€‚ç±³å…¹å…¬å¸çš„å…¶ä»–äº§å“é”€å”®æƒ…å†µä¹Ÿå¾ˆç³Ÿã€‚åˆ°äº†1974å¹´ï¼Œç±³å…¹å…¬å¸å·²æ¿’ä¸´ç ´äº§è¾¹ç¼˜ã€‚ã€€ã€€</p>
<p>ç½—ä¼¯å…¹ç»å°½è„‘æ±æ€è€ƒå¦‚ä½•æ‰­è½¬å…¬å¸çš„å›°å¢ƒã€‚ä»–æœ‰äº†ä¸€ä¸ªæƒ³æ³•ï¼šèƒ½ä¸èƒ½åˆ›é€ ä¸€ç§å¾ˆä¾¿å®œã€èƒ½è®©ä¸ªäººä½¿ç”¨çš„ç”µè„‘å‘¢ï¼Ÿå…¨å›½å·²ç»æœ‰å¾ˆå¤šç”µè„‘çˆ±å¥½è€…ï¼Œä»–ä»¬éƒ½æ€¥åˆ‡å¸Œæœ›è‡ªå·±èƒ½æ‹¥æœ‰ä¸€å°ç”µè„‘ï¼Œä¾›ä¸ªäººç©å¼„ï¼Œå°±åƒå¾ˆå¤šäººåœ¨é¼“æ£è‡ªåˆ¶çš„æ— çº¿ç”µæ”¶éŸ³æœºä¸€æ ·ã€‚å¸‚é¢ä¸Šç°åœ¨è¿˜æ²¡æœ‰è¿™æ ·çš„ä¸œè¥¿ã€‚å¸¦ç€è¿™ä¸ªæƒ³æ³•ï¼Œä»–å»è¯´æœæœ¬åœ°é“¶è¡Œå†ç»™ä»–çš„å…¬å¸è´·<br>ä¸€ç¬”æ¬¾ã€‚ç±³å…¹å…¬å¸å¿…é¡»è‡³å°‘å†è´·å°†è¿‘7ä¸‡ç¾å…ƒæ‰èƒ½ä¸è‡´äºç ´äº§ã€‚é“¶è¡Œå¯¹ç½—ä¼¯å…¹çš„æƒ³æ³•å¾ˆæ€€ç–‘ã€‚åŒæ–¹ä¸€ç›´è°ˆåˆ°æ·±å¤œã€‚ä¸è¿‡ï¼Œé“¶è¡Œé¢ä¸´ä¸€ä¸ªä¸¤éš¾çš„é€‰æ‹©ï¼šè¦ä¹ˆä¸å†è´·æ¬¾ç»™ç±³å…¹å…¬å¸ï¼Œè®©å®ƒå€’é—­ï¼Œé“¶è¡Œä»¥å‰çš„æŠ•èµ„ä¹Ÿå°±å…¨å®Œäº†ã€‚<br>è¦ä¹ˆå†æ”¾ä¸€ç¬”è´·æ¬¾ï¼Œä½†è¿™ç¬”æ–°è´·æ¬¾å¾ˆå¯èƒ½åˆä¼šæ‰“æ°´æ¼‚ã€‚æœ€åï¼Œé“¶è¡Œå†æ¬¡è®©ç½—ä¼¯å…¹ç¡®åˆ‡å‘Šè¯‰ä»–ä»¬ï¼Œè¿™ç§ä¸ªäººç”µè„‘ä»€ä¹ˆæ—¶å€™èƒ½å¼€å‘å‡ºæ¥ï¼Œç¬¬ä¸€å¹´èƒ½å–å¤šå°‘å¥—ã€‚ç½—ä¼¯å…¹å¯¹ä»€ä¹ˆæ—¶å€™èƒ½åšå‡ºæ¥æ˜¯æœ‰æŠŠæ¡çš„ï¼Œåªè¦å‡ ä¸ªæœˆçš„æ—¶é—´ã€‚<br>èƒ½å–å¤šå°‘å¥—ä»–å°±å®Œå…¨æ²¡æœ‰è°±äº†ã€‚äºæ˜¯ä»–è¯´äº†ä¸€ä¸ªéå¸¸ä¹è§‚çš„æ•°å­—ï¼šç¬¬ä¸€å¹´èƒ½å–800å¥—ï¼Œè¿™æ ·é”€å”®æ”¶å…¥å¯ä»¥æœ‰30ä¸‡ç¾å…ƒã€‚æ‹¿åˆ°è´·æ¬¾åï¼Œç±³å…¹å…¬å¸å…¨åŠ›å¼€å‘ä¸ªäººç”µè„‘äº§å“ã€‚å…¬å¸å¿…é¡»åœ¨æœ€çŸ­æ—¶é—´å†…æŠŠäº§å“å¼€å‘å‡ºæ¥å¹¶ä¸”å–å‡º<br>å»ï¼Œä¸ç„¶ç ´äº§å°±éš¾ä»¥é¿å…ã€‚ä¸ºäº†ç¼©çŸ­å¼€å‘æ—¶é—´å’Œé™ä½æˆæœ¬ï¼Œç½—ä¼¯å…¹å†³å®šå°½é‡é‡‡ç”¨ç°æˆçš„éƒ¨ä»¶ï¼Œåšå‡ºæ¥äº§å“ä¸æ˜¯ä¸€å°ç°æˆçš„è®¡ç®—æœºï¼Œè€Œæ˜¯ä¸€å¥—é›¶éƒ¨ä»¶ï¼Œéœ€è¦ç”¨æˆ·è‡ªå·±è£…é…ã€‚æ‰€æœ‰å¹¶éå¿…éœ€çš„äº§å“ç‰¹å¾éƒ½è¢«å»æ‰äº†ã€‚äº§å“æ ¹<br>æœ¬æ²¡æœ‰ä»Šå¤©çš„å¾®æœºä¸å¯å¿½ç¼ºçš„é”®ç›˜ã€é¼ æ ‡ã€æ˜¾ç¤ºå™¨ã€è½¯ç›˜ç­‰ç­‰è®¾å¤‡ã€‚äº§å“ä¹Ÿæ²¡æœ‰è½¯ä»¶ï¼Œæ‰€æœ‰è½¯ä»¶(åŒ…æ‹¬æ‰€è°“çš„ç³»ç»Ÿè½¯ä»¶)éƒ½éœ€è¦ç”¨æˆ·ç”¨è®¾ç½®å¼€å…³çš„æ–¹å¼ä¸€æ¡æŒ‡ä»¤ä¸€æ¡æŒ‡ä»¤åœ°æ‰‹å·¥è¾“å…¥è®¡ç®—æœºã€‚<br>ã€€ã€€<br>ä¸ç®¡å¤šä¹ˆç®€é™‹ï¼Œè¿™æ¯•ç«Ÿæ˜¯ä¸–ç•Œä¸Šçš„ç¬¬ä¸€å°ä¸ªäººç”µè„‘ï¼Œåˆç§°å¾®æœºã€‚ç±³å…¹å…¬å¸çš„å¾®æœºäº§å“æœ‰ä¸¤ä¸ªåœ¨å½“æ—¶æ— å¯æ¯”æ‹Ÿçš„ä¼˜ç‚¹ã€‚å®ƒå¾ˆä¾¿å®œï¼Œå”®ä»·åªæœ‰ä¸åˆ°500ç¾å…ƒï¼Œè€Œå½“æ—¶ä¸€äº›å¤§å…¬å¸çš„å®éªŒå®¤ä¹Ÿåšäº†ç±»ä¼¼å¾®æœºçš„ç³»ç»Ÿï¼Œæˆæœ¬åœ¨5<br>ä¸‡ç¾å…ƒå·¦å³ã€‚å¦å¤–ï¼Œç±³å…¹çš„å¾®æœºè®¾è®¡å…·æœ‰æ‰€è°“çš„å¯æ‰©å±•èƒ½åŠ›ã€‚ç”¨æˆ·å¯ä»¥å°†ç±³å…¹çš„å¾®æœºä¹°å›æ¥åï¼Œè‡ªå·±å†æƒ³æ³•é…ä¸Šæ›´å¤šçš„å†…å­˜æ¿å­å’Œå¤–éƒ¨è®¾å¤‡ã€‚æœ‰ä¸€ä¸ªç”¨æˆ·èŠ±äº†è¿‘500ç¾å…ƒä¹°äº†ä¸€å°å¾®æœºï¼Œå†èŠ±äº†3000ç¾å…ƒæŠŠå†…å­˜æ‰©å±•<br>åˆ°12KBã€‚ã€Šç”µå­ç§‘æ™®ã€‹ï¼ˆPopular Electronicsï¼‰æ‚å¿—å¬åˆ°è¿™ä¸ªæ¶ˆæ¯åï¼Œæ•é”åœ°æ„Ÿè§‰åˆ°è¿™æ˜¯ä¸€ä¸ªå†å²æ€§çš„äº‹ä»¶ï¼Œé©¬ä¸Šå†³å®šåœ¨1975å¹´1æœˆæœŸä½œä¸ºå°é¢æ–‡ç« æŠ¥é“ã€‚ä½†è¿™ä¸ªä¸ªäººç”µè„‘äº§å“å´è¿åå­—éƒ½è¿˜æ²¡æœ‰ã€‚ç½—ä¼¯å…¹åœ¨<br>æ‚å¿—çš„è´£ä»»ç¼–è¾‘å®¶é‡Œè®¨è®ºäº†å„ç§åå­—ã€‚åˆšå¥½ï¼Œç¼–è¾‘çš„å®¶äººæ­£åœ¨çœ‹ã€Šæ˜Ÿé™…æ—…è¡Œã€‹çš„ç”µè§†èŠ‚ç›®ã€‚é‚£ä¸€èŠ‚åˆšå¥½è®²åˆ°äº†ç‰µç‰›æ˜Ÿåº§ã€‚äºæ˜¯ï¼Œä¸–ç•Œä¸Šç¬¬ä¸€å°å¾®æœºå°±è¢«å‘½åä¸ºâ€œç‰µç‰›æ˜Ÿâ€ï¼Œå…¨ç§°æ˜¯â€œç‰µç‰›æ˜Ÿ8800ï¼ˆAltair 8800ï¼‰â€ã€‚</p>
<p>ç½—ä¼¯å…¹åšæ¢¦ä¹Ÿæ²¡æƒ³åˆ°çš„æ˜¯ï¼Œå…¨ç¾æœ‰è¿™ä¹ˆå¤šçš„ç”µè„‘çˆ±å¥½è€…ï¼Œäººäººéƒ½æƒ³æ‹¥æœ‰ä¸€å°å¾®æœºã€‚ã€Šç”µå­ç§‘æ™®ã€‹æ‚å¿—çš„æŠ¥é“å‘è¡¨åä¸€ä¸ªæœˆï¼Œç±³å…¹å…¬å¸æ¯å¤©éƒ½è¦æ”¶åˆ°200å¤šå°â€œç‰µç‰›æ˜Ÿâ€ç”µè„‘çš„è®¢å•ã€‚ç”Ÿäº§çº¿æ ¹æœ¬æ¥ä¸åŠæ»¡è¶³é”€å”®éœ€æ±‚ã€‚æœ‰<br>äº›ç”¨æˆ·å¹²è„†ä½åˆ°å…¬å¸å¤–é¢çš„è’æ¼ ä¸Šï¼Œç­‰ç€è‡ªå·±çš„å¾®æœºç”Ÿäº§å‡ºæ¥ã€‚å¤§å¤šæ•°ç”¨æˆ·åªæ˜¯è´­ä¹°åŸºæœ¬ç³»ç»Ÿã€‚ä¹Ÿæœ‰ç”¨æˆ·æ„¿æ„å‡º495ç¾å…ƒï¼Œè®©ç±³å…¹å…¬å¸ç”Ÿäº§ä¸€å°å·²ç»è£…é…å¥½çš„ç³»ç»Ÿã€‚ã€€ã€€</p>
<p>ä»Šå¤©ï¼Œç½—ä¼¯å…¹å·²ç»ç¦»å¼€äº†ç”µè„‘ç•Œã€‚ä»–å›åˆ°ä¹”æ²»äºšçš„è€å®¶ï¼Œè·å¾—äº†åŒ»å­¦åšå£«å­¦ä½ï¼Œä¸ºå„¿ç«¥æ²»ç—…ã€‚ä»–ä¸ºè‡ªå·±åˆ›é€ äº†è®¡ç®—æœºé¢†åŸŸçš„ä¸€ä¸ªé©å‘½è€Œè‡ªè±ªï¼Œä½†ä¸€ç‚¹ä¹Ÿä¸åæ‚”æ”¾å¼ƒç”µè„‘ä¸šï¼Œæ”¾å¼ƒäº†æˆä¸ºå¤§å¯Œç¿çš„æœºä¼šã€‚ä»–è§‰å¾—ä¸ºå„¿ç«¥æ²»ç—…æ›´æœ‰æ„ä¹‰ã€‚çˆ±å¾·Â·ç½—ä¼¯å…¹æ˜¯ä¸ªå¾ˆå¹¸ç¦çš„äººï¼Œä»–å®ç°äº†å„¿æ—¶çš„æ¢¦æƒ³ã€‚</p>
<h3 id="IBM5150"><a href="#IBM5150" class="headerlink" title="IBM5150"></a>IBM5150</h3><p>IBMæ¨å‡ºä¸–ç•Œä¸Šç¬¬ä¸€å°ä¸ªäººç”µè„‘ </p>
<p>1981å¹´8æœˆ12æ—¥ï¼Œæ€»éƒ¨è®¾åœ¨ç¾å›½çº½çº¦å·é˜¿è’™å…‹çš„å›½é™…å•†ç”¨æœºå™¨å…¬å¸ï¼ˆIBMï¼‰æ¨å‡º5150çš„æ–°æ¬¾ç”µè„‘ï¼Œâ€œä¸ªäººç”µè„‘â€è¿™ä¸ªæ–°ç”Ÿå¸‚åœºéšä¹‹è¯ç”Ÿã€‚IBM5150çœ‹èµ·æ¥åƒä¸ªç±³è‰²çš„â€œå¤§ç›’å­â€ï¼Œå”®ä»·1565ç¾å…ƒï¼Œåªæœ‰16Kå­—èŠ‚çš„å†…å­˜ï¼Œå¯ä»¥ä½¿ç”¨ç›’å¼å½•éŸ³ç£å¸¦æ¥ä¸‹è½½å’Œå­˜å‚¨æ•°æ®ï¼Œæ­¤å¤–ä¹Ÿå¯é…å¤‡5.25è‹±å¯¸çš„è½¯ä»¶ç›˜é©±åŠ¨å™¨ã€‚</p>
<h3 id="MOS-Technology-6502"><a href="#MOS-Technology-6502" class="headerlink" title="MOS Technology 6502"></a>MOS Technology 6502</h3><p>å½“ä¸€ä¸ªæ»¡è„¸æ¨ªè‚‰çš„æ€ªäººå°†è¿™ä¸ªå¾®èŠ¯ç‰‡è£…åœ¨ç”µè„‘ä¸Šï¼Œå¹¶å¯åŠ¨ç”µè„‘æ—¶ï¼Œæ•´ä¸ªå®‡å®™éƒ½éœ‡æƒŠäº†ã€‚è¿™ä¸ªæ€ªäººå°±æ˜¯è‹¹æœå…¬å¸åˆ›å§‹äººä¹‹ä¸€â€”â€”æ–¯è’‚èŠ¬Â·æ²ƒå…¹å°¼å…‹ï¼Œé‚£å°ç”µè„‘å°±æ˜¯Apple Iï¼Œå¤„ç†å™¨ç”¨çš„æ˜¯ç”±æ‘©æ–¯å¤ªå…‹å…¬å¸ç ”å‘çš„8ä½å¾®å¤„ç†å™¨6502ã€‚</p>
<p>è¿™ä¸€å¤„ç†å™¨åŒæ—¶ä¹Ÿæ˜¯Apple IIã€the Commodore PETã€BBC Microç­‰ç»å…¸ç”µè„‘ä»¥åŠè¯¸å¦‚ä»»å¤©å ‚å’ŒAtariç­‰æ¸¸æˆç³»ç»Ÿçš„å¤§è„‘ã€‚è¯¥å¤„ç†å™¨çš„è®¾è®¡è€…ä¹‹ä¸€Chuck Peddleå›å¿†ç§°ï¼Œä»–ä»¬æ˜¯åœ¨1975å¹´çš„ä¸€ä¸ªè´¸æ˜“å±•ç¤ºä¼šä¸Šæ¨å‡ºè¿™æ¬¾å¤„ç†å™¨çš„ã€‚ä»–ç§°ï¼šâ€œæˆ‘ä»¬ç”¨èŠ¯ç‰‡è£…æ»¡äº†ä¸¤ä¸ªç»ç’ƒã€‚æˆ‘å’Œæˆ‘çš„å¦»å­å°±ååœ¨é‚£é‡Œå–è¿™äº›èŠ¯ç‰‡ã€‚â€æ‘©æ–¯å¤ªå…‹å…¬å¸6502å¾®å¤„ç†å™¨ç»ˆäºè„±é¢–è€Œå‡ºï¼Œå…¶åŸå› æ˜¯ï¼Œ6502çš„é€Ÿåº¦å¹¶ä¸æ¯”å®ƒçš„ç«äº‰å¯¹æ‰‹å¿«å¤šå°‘ï¼Œä½†æ˜¯å®ƒçš„ä»·æ ¼ä¾¿å®œï¼Œæ¯éƒ¨å”®ä»·ä¸º25ç¾å…ƒï¼Œè€Œè‹±ç‰¹å°”çš„8080å’Œæ‘©æ‰˜ç½—æ‹‰çš„6800å”®ä»·å¤§çº¦åœ¨200ç¾å…ƒã€‚</p>
<h2 id=""><a href="#" class="headerlink" title=""></a><img src="pic/001.jpg" alt="001"></h2><h2 id="æ“ä½œç³»ç»Ÿç®€ä»‹"><a href="#æ“ä½œç³»ç»Ÿç®€ä»‹" class="headerlink" title="æ“ä½œç³»ç»Ÿç®€ä»‹"></a>æ“ä½œç³»ç»Ÿç®€ä»‹</h2><h3 id="Unix"><a href="#Unix" class="headerlink" title="Unix"></a>Unix</h3><h4 id="Unix-ç®€å²"><a href="#Unix-ç®€å²" class="headerlink" title="Unix ç®€å²"></a>Unix ç®€å²</h4><p>1965å¹´æ—¶ï¼Œè´å°”å®éªŒå®¤(Bell Labs)åŠ å…¥ä¸€é¡¹ç”±å¥‡å¼‚ç”µå­(General Electric)å’Œéº»çœç†å·¥å­¦é™¢(MIT)åˆä½œçš„è®¡åˆ’ï¼›è¯¥è®¡åˆ’è¦å»ºç«‹ä¸€å¥—å¤šä½¿ç”¨è€…ã€å¤šä»»åŠ¡ã€å¤šå±‚æ¬¡(multi-userã€multiprocessorã€multi-level)çš„MULTICSæ“ä½œç³»ç»Ÿã€‚ç›´åˆ°1969å¹´ï¼Œå› MULTICSè®¡åˆ’çš„å·¥ä½œè¿›åº¦å¤ªæ…¢ï¼Œè¯¥è®¡åˆ’å°±è¢«åœäº†ä¸‹æ¥ã€‚å½“æ—¶ï¼ŒKen Thompsonï¼ˆåè¢«ç§°ä¸ºUnixä¹‹çˆ¶ï¼‰å·²ç»æœ‰ä¸€ä¸ªç§°ä¸ºã€Œæ˜Ÿé™…æ—…è¡Œã€çš„ç¨‹åºåœ¨GE-635çš„æœºå™¨ä¸Šè·‘ï¼Œä½†æ˜¯ååº”éå¸¸çš„æ…¢ï¼Œæ­£å·§ä¹Ÿè¢«ä»–å‘ç°äº†ä¸€éƒ¨è¢«é—²ç½®çš„PDP-7(Digitalçš„ä¸»æœº)ï¼ŒKen Thompsonå’ŒDernis Ritchieå°±å°†ã€Œæ˜Ÿé™…æ—…è¡Œã€çš„ç¨‹åºç§»æ¤åˆ°PDP-7ä¸Šã€‚è€Œè¿™éƒ¨PDP-7å°±æ­¤åœ¨æ•´ä¸ªè®¡ç®—æœºå†å²ä¸Šç•™ä¸‹äº†èŠ³åã€‚</p>
<p>MULTICS å…¶å®æ˜¯â€MULTiplexed Information and Computing Systemâ€çš„ç¼©å†™ï¼Œåœ¨1970å¹´æ—¶ï¼Œé‚£éƒ¨PDP-7å´åªèƒ½æ”¯æŒä¸¤ä¸ªä½¿ç”¨è€…ï¼Œå½“æ—¶ï¼ŒBrian Kernighan å°±å¼€ç©ç¬‘åœ°æˆç§°ä»–ä»¬çš„ç³»ç»Ÿå…¶å®æ˜¯ï¼šâ€UNiplexed Information and Computing Systemâ€ï¼Œç¼©å†™ä¸ºâ€UNICSâ€ï¼Œåæ¥ï¼Œå¤§å®¶å–å…¶è°éŸ³ï¼Œå°±ç§°å…¶ä¸ºâ€Unixâ€äº†ã€‚1970å¹´å¯ç§°ä¸ºæ˜¯Unixå…ƒå¹´ã€‚</p>
<p>1971å¹´ï¼Œä»–ä»¬ç”³è¯·äº†ä¸€éƒ¨PDP-11/20ï¼Œç”³è¯·çš„åä¹‰æ˜¯ï¼šè¦å‘å±•æ–‡ä¹¦å¤„ç†ç³»ç»Ÿã€‚è¯¥ææ¡ˆè¢«è·é‡‡çº³ï¼Œä»–ä»¬ä¹Ÿå‘å±•å‡ºäº†ä¸€å¥—æ–‡ä¹¦å¤„ç†ç³»ç»Ÿ â”€ å°±æ˜¯ç°åœ¨Unixæ“ä½œç³»ç»Ÿé‡Œé¢æ–‡ä¹¦å¤„ç†ç³»ç»Ÿ(nroff/troff)çš„å‰èº«ã€‚æœ‰è¶£çš„æ˜¯ï¼Œæ²¡æœ‰å¤šä¹…ï¼Œè´å°”å®éªŒå®¤çš„ä¸“åˆ©éƒ¨é—¨çœŸçš„é‡‡ç”¨äº†è¿™å¥—ç³»ç»Ÿä½œä¸ºä»–ä»¬å¤„ç†æ–‡ä»¶çš„å·¥å…·ï¼Œè€Œè´å°”å®éªŒå®¤çš„ä¸“åˆ©éƒ¨é—¨ä¹Ÿå°±é¡ºç†æˆç« åœ°æˆä¸ºUnixçš„ç¬¬ä¸€ä¸ªæ­£å¼ä½¿ç”¨è€…ã€‚å½“æ—¶ï¼Œé‚£éƒ¨PDP-11ï¼20åªæœ‰0.5MBç£ç›˜ç©ºé—´ã€‚è€Œæè¿°è¿™æ•´ä¸ªç³»ç»Ÿçš„æ–‡ä»¶è¢«æ ‡ç¤ºä¸ºï¼šâ€First Editionâ€ï¼Œç‰ˆæœ¬æ—¥æœŸæ˜¯1970å¹´11æœˆã€‚ä»æ­¤ä»¥åï¼ŒUnixçš„ç‰ˆæœ¬å°±ä»¥ç³»ç»Ÿæ–‡ä»¶çš„ç‰ˆåˆ«æ¥ç§°å‘¼ã€‚</p>
<h4 id="UNIXå®¶è°±"><a href="#UNIXå®¶è°±" class="headerlink" title="UNIXå®¶è°±"></a>UNIXå®¶è°±</h4><p>UNIXçš„å†å²å¼€å§‹äº1969å¹´ken Thompsonï¼ŒDennis Ritchieï¼ˆå³è‘—åçš„K&amp;Gï¼ŒCè¯­è¨€çš„å‘æ˜äººï¼‰ä¸ä¸€ç¾¤äººåœ¨ä¸€éƒ¨PDP-7ä¸Šè¿›è¡Œçš„ä¸€äº›å·¥ä½œï¼Œåæ¥è¿™ä¸ªç³»ç»Ÿå˜æˆäº†UNIXã€‚å®ƒä¸»è¦çš„å‡ ä¸ªç‰ˆæœ¬ä¸ºï¼š</p>
<ul>
<li>V1ï¼ˆ1971ï¼‰ï¼šç¬¬ä¸€ç‰ˆçš„UNIXï¼Œä»¥PDP-11/20çš„æ±‡ç¼–è¯­è¨€å†™æˆã€‚åŒ…æ‹¬æ–‡ä»¶ç³»ç»Ÿï¼Œforkã€roffã€edç­‰è½¯ä»¶ã€‚</li>
<li>V4ï¼ˆ1973ï¼‰ï¼šä»¥Cè¯­è¨€ä»å¤´å†™è¿‡ï¼Œè¿™ä½¿å¾—UNIXä¿®æ”¹å®¹æ˜“ï¼Œå¯ä»¥åœ¨å‡ ä¸ªæœˆå†…ç§»æ¤åˆ°æ–°çš„ç¡¬ä»¶å¹³å°ä¸Šã€‚æœ€åˆCè¯­è¨€æ˜¯ä¸ºUNIXè®¾è®¡çš„ï¼Œæ‰€ä»¥Cä¸UNIXé—´æœ‰ç´§å¯†çš„å…³ç³»ã€‚</li>
<li>V6ï¼ˆ1975ï¼‰ï¼šç¬¬ä¸€ä¸ªåœ¨è´å°”å®éªŒå®¤å¤–ï¼ˆå°¤å…¶æ˜¯å¤§å­¦ä¸­ï¼‰å¹¿ä¸ºæµä¼ çš„UNIXç‰ˆæœ¬ã€‚è¿™ä¹Ÿæ˜¯UNIXåˆ†æ”¯çš„èµ·ç‚¹ä¸å¹¿å—æ¬¢è¿çš„å¼€å§‹ã€‚1.xBSD ï¼ˆPDP-IIï¼‰å°±æ˜¯ç”±è¿™ä¸ªç‰ˆæœ¬è¡ç”Ÿå‡ºæ¥çš„ã€‚</li>
<li>V7ï¼ˆ1979ï¼‰ï¼šåœ¨è®¸å¤šUNIXç©å®¶çš„å¿ƒç›®ä¸­ï¼Œè¿™æ˜¯â€œæœ€åä¸€ä¸ªçœŸæ­£çš„UNIXï¼Œâ€è¿™ä¸ªç‰ˆæœ¬åŒ…æ‹¬ä¸€ä¸ªå®Œæ•´çš„K&amp;RCç¼–è¯‘å™¨ï¼ŒBourne shellã€‚V7ç§»æ¤åˆ°VAXæœºå™¨åç§°ä¸º32Vã€‚</li>
</ul>
<p>ç›®å‰å¼€å‘UNIXï¼ˆSystem Vï¼‰çš„å…¬å¸æ˜¯Unix System Laboratories (USL)ã€‚USLæœ¬ä¸ºAT&amp;Tæ‰€æœ‰ï¼Œ1993å¹´åˆè¢«Novellæ”¶è´­ã€‚Novelläº1993å¹´æœ«å°†UNIXè¿™ä¸ªæ³¨å†Œå•†æ ‡è½¬è®©ç»™X/Openç»„ç»‡ã€‚</p>
<p>ç›®å‰ä¸ºæ­¢ï¼ŒUNIXæœ‰ä¸¤å¤§æµæ´¾ï¼šé‚£å°±æ˜¯AT&amp;Tå‘å¸ƒçš„UNIXæ“ä½œç³»ç»ŸSystem Vä¸ç¾å›½åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡å‘å¸ƒçš„UNIXç‰ˆBSDï¼ˆBerkeley Software Distributionï¼‰ã€‚SVR4æ˜¯ä¸¤å¤§æµæ´¾èåˆåçš„äº§ç‰©ã€‚1991å¹´åº•ï¼Œä¸System Vé’ˆé”‹ç›¸å¯¹çš„å¼€æ”¾è½¯ä»¶åŸºé‡‘ä¼š(Open Software Foundation)æ¨å‡ºäº†OSF/1ã€‚</p>
<p>ç°åœ¨å‡ ç§ä¸»è¦çš„UNIXç‰ˆæœ¬:</p>
<ul>
<li>AIXï¼šIBMçš„UNIXï¼Œæ˜¯æ ¹æ®SVR2ï¼ˆæœ€è¿‘å·²ç»å‡ºåˆ°SVR3.2ï¼‰ä»¥åŠä¸€éƒ¨åˆ†BSDå»¶ä¼¸è€Œæ¥ï¼ŒåŠ ä¸Šå„ç§ç¡¬ä»¶çš„æ”¯æŒã€‚å…·å¤‡ç‰¹æœ‰çš„ç³»ç»Ÿç®¡ç†ï¼ˆSMITï¼‰ã€‚</li>
<li>386BSDï¼šJolitzä»Net/2 softwareç§»æ¤è¿‡æ¥çš„ã€‚æ”¯æŒPosixï¼Œ32ä½ã€‚</li>
<li>FreeBSDï¼š1.xä»386BSD 0.1è€Œæ¥ï¼ŒFreeBSD 2.xç‰ˆæ˜¯ç”¨4.4BSD liteæ”¹å†™ã€‚</li>
<li>HP-UXï¼ˆHPï¼‰ï¼šæ—§ç³»ç»Ÿæ˜¯ä»S IIIï¼ˆSVRxï¼‰å‘å±•é¢æ¥ï¼Œç°åœ¨æ˜¯ç”±SVR2ï¼ˆ4.2BSDï¼‰å‘å±•è€Œæ¥ï¼Œç›®å‰æ˜¯10.xç‰ˆã€‚</li>
<li>Linux(x86)ï¼šéµä»POSIXï¼ŒSYSVåŠBSDçš„æ‰©å±•ï¼Œè¿™ä¸€ç‚¹ä»ä¸Šé¡µè¡¨ä¸­å³å¯çœ‹å‡ºã€‚</li>
<li>OSF/1ï¼ˆDECï¼‰ï¼šDECå¯¹OSF/1çš„ç§»æ¤ã€‚</li>
<li>SCO UNIXï¼ˆx86ï¼‰ï¼šSVR3.2ï¼Œç›®å‰å½±å“è¾ƒå¤§çš„PC UNIXã€‚</li>
<li>SunOSï¼ˆ680x0ï¼ŒSparcï¼Œi386ï¼‰ï¼šæ ¹æ®4.3BSDï¼ŒåŒ…å«è®¸å¤šæ¥è‡ªSystem Vçš„ä¸œè¥¿ã€‚Sunçš„ä¸»è¦æˆæœåœ¨äºï¼šNFSï¼ŒOpenLook GUIæ ‡å‡†ï¼Œåæ¥æ¼”å˜ä¸ºSolaris ã€‚è¿™ä¹Ÿæ˜¯ç›®å‰æœ€è‘—åçš„UNIXç‰ˆæœ¬ä¹‹ä¸€ã€‚</li>
<li>Ultrix(DEC)ï¼šæ ¹æ®4.2BSDå†åŠ ä¸Šè®¸å¤š4.3BSDçš„ä¸œè¥¿ã€‚</li>
<li>Xenix(x86)ï¼šIntelç¡¬ä»¶å¹³å°ä¸Šçš„UNIXï¼Œä»¥SVR2ä¸ºåŸºç¡€ï¼Œç”±å¾®è½¯æ¨å‡ºã€‚åœ¨ä¸­å›½ä½¿ç”¨è¾ƒå¹¿æ³›ã€‚</li>
</ul>
<h4 id="é»‘æš—å²"><a href="#é»‘æš—å²" class="headerlink" title="é»‘æš—å²"></a>é»‘æš—å²</h4><p>Unixä¸Linuxï¼ŒSCOä¸IBMã€å¾®è½¯ï¼Œä»–ä»¬æ˜¯æ€æ ·çº ç»“åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€å›¢è§£ä¸å¼€çš„ä¹±éº»ï¼Ÿ</p>
<h5 id="é£èµ·Unix"><a href="#é£èµ·Unix" class="headerlink" title="é£èµ·Unix"></a>é£èµ·Unix</h5><p>1969å¹´â€œé˜¿æ³¢ç½—11å·â€ç™»æœˆæˆåŠŸã€‚è´å°”å®éªŒå®¤ä¸­ä¸€ä¸ªå«Ken Thompsonçš„å¹´è½»äººä¸ºäº†ä¸€åœ†ç¿±æ¸¸å¤ªç©ºçš„æ¢¦æƒ³ï¼Œåœ¨å½“æ—¶çš„Multicsç³»ç»Ÿä¸Šå†™äº†ä¸€ä¸ªå«ã€Šæ˜Ÿé™…ä¹‹æ—…ã€‹çš„æ¸¸æˆã€‚ä½†å½“æ—¶å¤§å‹æœºçš„æœºæ—¶è´¹å¾ˆè´µï¼Œæ¯ç©ä¸€æ¬¡å…¬å¸å°±è¦ä¸ºæ­¤æ”¯ä»˜75ç¾é‡‘ï¼Œäºæ˜¯Thompsonæ‰“èµ·äº†å°å‹æœºPDP-7çš„ä¸»æ„ã€‚ä½†å½“æ—¶çš„PDP-7åªæœ‰ä¸€ä¸ªç®€é™‹çš„è¿è¡Œæ—¶ç³»ç»Ÿï¼Œä¸æ”¯æŒå¤šç”¨æˆ·ï¼Œä¸ºäº†èƒ½åŒäººå¯¹æˆ˜ï¼ŒThompsonæ‰¾æ¥Dennis Ritchieä¸€èµ·å¼€å‘æ–°çš„ä½œç³»ç»Ÿã€‚ä»–ä»¬åªèŠ±äº†ä¸€ä¸ªæœˆçš„æ—¶é—´å°±ç”¨æ±‡ç¼–è¯­è¨€å†™å‡ºäº†ä½œç³»ç»Ÿçš„åŸå‹ã€‚â€œä½ å†™çš„ç³»ç»Ÿå¤ªå·®åŠ²ï¼Œå¹²è„†å°±å«Unicsç®—äº†ã€‚â€60å¹´ä»£æœ«çš„ä¸€å¤©ï¼Œè´å°”å®éªŒå®¤çš„ä¸€ä½åŒäº‹å¯¹è‚¯Â·æ±¤æ™®ç”Ÿè¿™æ ·è¯´ã€‚åŒäº‹å¸ƒè±æ©Â·ç§‘å°”å°¼å¹² Brian W.Kernighançœ‹åˆ°åï¼Œæˆç§°è¿™ä¸ªç³»ç»Ÿä¸ºUnicsâ‘¡ã€‚Unixè¿™ä¸ªåå­—å…¸å‡ºäºæ­¤ã€‚</p>
<p>åœ¨è‹±æ–‡é‡Œï¼ŒUnicså‘éŸ³ä¸Eunuchsä¸€æ ·ï¼Œè€Œåè€…çš„æ„æ€æ˜¯â€œå¤ªç›‘â€ã€‚æ±¤æ™®ç”Ÿæ¥ä¸‹åŒäº‹çš„å˜²å¼„ï¼Œç¨ä½œä¿®æ”¹ï¼ŒæŠŠè‡ªå·±ç ”å‘çš„ç³»ç»Ÿå«åšUnixã€‚</p>
<p>1971å¹´ï¼ŒUnixå·²ç»èƒ½å¤Ÿæ”¯æŒä¸¤åç”¨æˆ·åœ¨PDP-11ä¸Šç©ã€Šæ˜Ÿé™…ä¹‹æ—…ã€‹äº†ï¼Œä½†å› ä¸ºå½“æ—¶çš„Unixæ˜¯ç”¨æ±‡ç¼–è¯­è¨€å†™çš„ï¼Œæ— æ³•ç§»æ¤åˆ°å…¶ä»–æœºå™¨ä¸Šï¼Œæ‰€ä»¥ä»–ä»¬å†³å®šç”¨é«˜çº§è¯­è¨€é‡å†™Unixï¼Œå¯å½“æ—¶çš„é«˜çº§è¯­è¨€æ— è®ºä»è¿è¡Œæ•ˆç‡è¿˜æ˜¯åŠŸèƒ½ä¸Šéƒ½æ— æ³•æ»¡è¶³ä»–ä»¬çš„éœ€è¦ã€‚Thompsonå…ˆæ˜¯åœ¨BCPLçš„åŸºç¡€ä¸Šèƒå–å‡ºäº†Bè¯­è¨€ï¼ŒRitchieåˆåœ¨Bçš„åŸºç¡€ä¸Šè¿›è¡Œäº†é‡æ–°è®¾è®¡ï¼Œè¿™æ‰æœ‰äº†ä»Šå¤©å¤§åé¼é¼çš„Cè¯­è¨€ã€‚</p>
<p>60å¹´ä»£çš„è®¡ç®—æœºè™½ç„¶å·²ä¸æ˜¯åºç„¶å¤§ç‰©äº†ï¼Œä½†ä½“ç§¯ä»ç„¶ä¸å°ï¼Œè€Œä¸”çˆ±å‡ºæ•…éšœã€‚æ±¤æ™®ç”Ÿå›å¿†ï¼šâ€œè®¡ç®—è®©äººç€è¿·ï¼Œç”µå­ä¹Ÿè®©äººç€è¿·ï¼Œåªæ˜¯ä¸å¤ªå¹²å‡€ï¼Œå¾ˆè„ï¼Œå› ä¸ºç»å¸¸æœ‰ä¸œè¥¿è¢«çƒ§åã€‚â€</p>
<p>æ“ä½œè¿™äº›åˆæ…¢ã€åˆç¬¨çš„å¤§å®¶ä¼™éœ€è¦ä¸“ä¸šçš„è®¡ç®—æœºç¨‹åºå‘˜ï¼Œä¸ºäº†æé«˜æ•ˆç‡ï¼Œæ€¥éœ€æ–°ç³»ç»Ÿã€‚åœ¨è¿™ç§èƒŒæ™¯ä¸‹ï¼Œæ±¤æ™®ç”Ÿå’Œä¸¹å°¼æ–¯Â·åˆ©å¥‡ç ”å‘äº†Unixæ“ä½œç³»ç»Ÿã€‚æ­¤æ—¶ï¼Œä¹”å¸ƒæ–¯å’Œç›–èŒ¨è¿˜åœ¨ä¸­å­¦é‡Œææ¶ä½œå‰§ï¼ŒPCå’Œå¾®è½¯æ“ä½œç³»ç»Ÿè¦åœ¨10å¹´åæ‰åˆéœ²ç«¯å€ªã€‚</p>
<p>Unixä¸¤ä½åˆ›å§‹äººå’Œè´å°”å®éªŒå®¤ä¹Ÿæ²¡æŠŠè¿™å¥—æ“ä½œç³»ç»Ÿå¤ªå½“å›äº‹ï¼Œåªæ˜¯åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œåæ¥å¤§å­¦ã€ç ”ç©¶æœºæ„ä¹Ÿå¯ä»¥å…è´¹ä½¿ç”¨ï¼Œè€Œä¸”è¿˜æä¾›ç»™ä»–ä»¬æºä»£ç ï¼Œå› æ­¤Unixæºä»£ç è¢«å¹¿ä¸ºæ‰©æ•£ã€‚åœ¨è¿™æ®µæ—¶é—´é‡Œï¼Œå®ƒæ²¡æœ‰åƒåæ¥çš„å•†ä¸šè½¯ä»¶é‚£æ ·æ€¥åŠŸè¿‘åˆ©ï¼Œç•™ä¸‹ä¸€å †çªŸçª¿å’Œè¡¥ä¸ï¼Œå› æ­¤ï¼ŒUnixåœ¨è¯ç”Ÿåçš„10å¹´é‡Œâ€œå…»åœ¨æ·±é—ºäººæœªè¯†â€ï¼Œåœ¨å®éªŒå®¤è¿›è¡Œç€å……åˆ†çš„ä½¿ç”¨å’Œè®ºè¯ï¼Œè¿™ä¹Ÿæ˜¯å®ƒåæ¥åœ¨è¦æ±‚ç¨³å®šæ€§ã€å®‰å…¨æ€§è¾ƒé«˜çš„ä¼ä¸šçº§å®¢æˆ·ä¸­å¾—åˆ°æ¨å´‡çš„ä¸»è¦åŸå› ã€‚</p>
<p>åˆ°äº†1980å¹´ï¼ŒUnixå¼€å§‹èµ°å‡ºå®éªŒå®¤ï¼Œæœ‰æ•°ä»¥åƒè®¡çš„æŠ€æœ¯é«˜æ‰‹æƒ³æŠŠUnixè£…åœ¨å®¶é‡Œçš„æœºå™¨ä¸Šã€‚</p>
<p>æ­¤æ—¶ï¼ŒåçŸ¥åè§‰çš„è´å°”å®éªŒå®¤å¼€å§‹è®¤è¯†åˆ°Unixçš„ä»·å€¼ï¼Œä½†ç”±äºæºä»£ç æ—©å·²å¤–æ•£ï¼Œæ— æ³•å°†å…¶æ‹¢èµ·æ¥è¿›è¡Œç²¾ç»†çš„å•†ä¸šå¼€å‘ï¼Œäºæ˜¯å¹²è„†é‡‡å–å¯¹å¤–æˆæƒçš„æ¨¡å¼ï¼Œç ”ç©¶æœºæ„ä½¿ç”¨å…è´¹ï¼Œä¼ä¸šä½¿ç”¨è¦äº¤æˆæƒè´¹ï¼Œè¿™æœ‰äº›é‡‘çŸ¿å½“åšé“œçŸ¿å–çš„å‘³é“ã€‚ä¸€ä½è´å°”é«˜çº§ä¸»ç®¡æ›¾æ„Ÿæ…¨ï¼šâ€œUnixæ˜¯ç»§æ™¶ä½“ç®¡ä»¥åçš„ç¬¬äºŒä¸ªæœ€é‡è¦å‘æ˜ã€‚â€ä½†è´å°”å®éªŒå®¤é”™å¤±å•†ä¸šå‘å±•æœºé‡ã€‚</p>
<p>â€œå¹¸è¿çš„æ—¶æœºå¥½æ¯”å¸‚åœºä¸Šçš„äº¤æ˜“ï¼Œåªè¦ä½ ç¨æœ‰å»¶è¯¯ï¼Œå®ƒå°±æ‰ä»·äº†ã€‚â€åŸ¹æ ¹åœ¨ã€Šè®ºæ—¶æœºã€‹ä¸­è¿™æ ·å†™åˆ°ã€‚å½“æ—¶æœ‰å¤šå®¶å¤§å­¦ã€ç ”ç©¶æœºæ„å’Œå…¬å¸è·å¾—äº†Unixæˆæƒï¼Œå¹¶ç”±æ­¤å¼€å§‹äº†å„è‡ªä¸åŒçš„ç‰ˆæœ¬æ¼”åŒ–ä¹‹è·¯ã€‚1993å¹´ï¼Œæ‹¥æœ‰è´å°”å®éªŒå®¤çš„ç¾å›½ç”µè¯ç”µæŠ¥å…¬å¸ï¼ˆAT&amp;Tï¼‰å°†è‡ªå·±æ‰€æ‹¥æœ‰çš„Unixæƒåˆ©å–ç»™Novellï¼Œåè€…æˆä¸ºæ¥å—Unixè¡£é’µçš„åˆæ³•ç»§æ‰¿äººã€‚å½“ç„¶æ­¤æ—¶çš„IBMã€DECã€HPå’ŒSunå› ä¸ºæ—©å¹´çš„æˆæƒç¼˜æ•…ï¼Œæœ‰æƒç»§ç»­è¿›è¡Œå„è‡ªçš„Unixç‰ˆæœ¬çš„ç ”å‘ã€‚</p>
<p>1995å¹´ï¼ŒNovellåˆå°†Unixç›¸å…³èµ„äº§å–ç»™SCOã€‚å’Œä¸¤å¹´å‰AT&amp;TæŠŠUnixå–ç»™Novellä¸€æŠŠæ¸…çš„å±€é¢æœ‰æ‰€ä¸åŒï¼ŒSCOå½“æ—¶æ²¡æœ‰è¶³å¤Ÿçš„ç°é‡‘ä¸€æ¬¡æ€§ä»˜æ¸…ï¼Œå› æ­¤NovellåˆæœŸåªæ˜¯æŠŠUnixæºä»£ç äº¤ç»™äº†SCOï¼Œå¯¹äºUnixè‘—ä½œæƒçš„å½’å±åè®®å­˜åœ¨ç€è¯­ç„‰ä¸è¯¦å’Œæ¨¡æ£±ä¸¤å¯çš„åœ°æ–¹ã€‚</p>
<p>èŠ±äº†é’±çš„SCOå®£ä¼ è‡ªå·±æ˜¯Unixæ­£å®—ä¼ äººï¼ŒNovellå½“æ—¶è§†Unixä¸ºé¸¡è‚‹ï¼Œæ²¡æœ‰å¼‚è®®ï¼Œè€Œä¸”æ­¤æ—¶SCOæ²¡æœ‰å¯¹åˆ«çš„è·å¾—è¿‡Unixæˆæƒçš„å‚å•†ç½®å–™ï¼Œäºæ˜¯å¤§å®¶è¿›å…¥äº†ä¸€æ®µç›¸å®‰æ— äº‹çš„æ—¶æœŸã€‚</p>
<h5 id="å¾®è½¯çš„è¿›è¿›å‡ºå‡º"><a href="#å¾®è½¯çš„è¿›è¿›å‡ºå‡º" class="headerlink" title="å¾®è½¯çš„è¿›è¿›å‡ºå‡º"></a>å¾®è½¯çš„è¿›è¿›å‡ºå‡º</h5><p>å…«åå¹´ä»£æœ«ï¼Œæœ‰äººé—®æ¯”å°”Â·ç›–èŒ¨æ€ä¹ˆçœ‹å¾…Unixä¸å¾®è½¯æ„æˆçš„ç«äº‰ï¼Œä»–ç¬‘ç€é—®é“ï¼šâ€œå“ªä¸ªUnixï¼Ÿâ€å¾®è½¯ä¸Unixçš„å…³ç³»æºè¿œæµé•¿ï¼Œå¹¶å¯¹SCOçš„æ¼”å˜èµ·äº†é‡è¦çš„å‚¬åŒ–ä½œç”¨ã€‚1979å¹´ï¼Œå¾®è½¯ä»ç¾å›½ç”µè¯ç”µæŠ¥å…¬å¸è·å¾—æˆæƒï¼Œä¸ºIntelå¤„ç†å™¨æ‰€å¼€å‘ä¸€ç§Unixæ“ä½œç³»ç»Ÿï¼Œç”±äºå®ƒè´­ä¹°çš„æˆæƒæ— æ³•ç›´æ¥è®©è¯¥æ“ä½œç³»ç»Ÿä»¥â€œUnixâ€ä¸ºåï¼Œäºæ˜¯è¯¥ç³»ç»Ÿå‘½åä¸ºXenixï¼Œå¯ç”¨åœ¨ä¸ªäººç”µè„‘åŠå¾®å‹è®¡ç®—æœºä¸Šä½¿ç”¨ã€‚å¾®è½¯å¹¶ä¸ç›´æ¥æŠŠXenixé”€å”®ç»™ç»ˆç«¯å®¢æˆ·ï¼Œè€Œæ˜¯ä»¥OEMçš„å½¢å¼å†æˆæƒç»™Intelã€Tandyã€æ–½ä¹AltosåŠSCOå…¬å¸ã€‚</p>
<p>å¯¹äºå¾®è½¯æ¥è¯´ï¼Œç”±äºéœ€è¦ä»ç¾å›½ç”µè¯ç”µæŠ¥å…¬å¸è·å¾—æˆæƒï¼Œå› è€Œè¿™æ˜¯ä¸€ç§è‡ªå·±éš¾ä»¥æŠŠæ¡å…¶æœªæ¥å‘å±•å‘½è¿çš„æ“ä½œç³»ç»Ÿï¼Œè€Œä¸”å½“æ—¶å…¶ä»–å‚å•†ä¸åŒçš„ç‰ˆæœ¬åœ¨æ…æµ‘è¿™ä¸ªå¸‚åœºï¼Œæ‰€ä»¥ï¼Œç›–èŒ¨åœ¨å¯»æ‰¾æœºä¼šé€€å‡ºè¿™ä¸ªé¢†åŸŸã€‚å½“å¾®è½¯å’ŒIBMè¾¾æˆå¼€å‘OS/2æ“ä½œç³»ç»Ÿçš„åè®®åï¼Œç›–èŒ¨ä¾¿å¤±å»äº†æ¨å¹¿Xenixçš„å…´è¶£ã€‚</p>
<p>å¤šå¹´åçš„å†å²èµ„æ–™æ­ç§˜æ˜¾ç¤ºï¼Œå¾®è½¯å½“æ—¶è„šè¸©å¤šæ¡èˆ¹ï¼Œé™¤å’ŒIBMè”æ‰‹å¼€å‘OS/2æ“ä½œç³»ç»Ÿå¤–ï¼Œå¾®è½¯è¿˜åœ¨ç´§é”£å¯†é¼“åœ°è¿›è¡Œç€Windows 3.0ç³»ç»Ÿçš„ç ”å‘ã€‚å¾®è½¯ä¸å¯èƒ½åœ¨ä¸‰æ¡çº¿ä¸ŠåŒæ—¶æŠ•å…¥ç²¾åŠ›ï¼Œäºæ˜¯å†³å®šèˆå¼ƒXenixæ“ä½œç³»ç»Ÿã€‚</p>
<p>â€œèµ›è½¦å’Œåšäººä¸€æ ·ï¼Œæœ‰æ—¶å€™è¦åœï¼Œæœ‰æ—¶å€™è¦å†²ã€‚â€è¿™æ˜¯ç”µè§†å‰§ã€Šæé€Ÿä¼ è¯´ã€‹ä¸­çš„ä¸€å¥å°è¯ã€‚1987å¹´ï¼Œå¾®è½¯ä¸SCOè¾¾æˆäº†ä¸€é¡¹åè®®ï¼Œä»¥æŒæœ‰åè€…è‚¡ç¥¨25%çš„æ¡ä»¶è½¬è®©äº†Xenixçš„æ‰€æœ‰æƒã€‚ä»å¾®è½¯æ¥ç›˜çš„SCOï¼Œå°†è¿™ç§æ“ä½œç³»ç»Ÿä»¥æœ€å¿«é€Ÿåº¦ç§»æ¤åˆ°386ç”µè„‘ï¼Œæˆä¸ºé¦–æ¬¾æ”¯æŒIntel386èŠ¯ç‰‡çš„æ“ä½œç³»ç»Ÿï¼ŒæŠ“ä½äº†å¸‚åœºçš„å…ˆæœºã€‚</p>
<p>å½“æ—¶çš„å¸‚åœºæ ¼å±€æ˜¯è¿™æ ·ï¼Œå°å‹æœºåŠ äº”èŠ±å…«é—¨çš„Unixæ“ä½œç³»ç»ŸæŠŠæŒäº†é«˜ç«¯çš„ä¼ä¸šçº§ç”¨æˆ·å¸‚åœºï¼Œå…¶ä¸­çš„ä»£è¡¨å‚å•†æ˜¯IBMã€DECã€æƒ æ™®ã€SUNã€SGIç­‰ï¼›IntelèŠ¯ç‰‡åŠ å¾®è½¯æ“ä½œç³»ç»Ÿï¼Œæ­£åœ¨å…¨é¢æ§åˆ¶ä¸ªäººç”µè„‘å¸‚åœºï¼Œå…¶ä¸­çš„ä»£è¡¨å‚å•†åŒ…æ‹¬åº·æŸã€ASTã€ä½°å¾·ç­‰ã€‚å°å‹æœºåŠ Unixæ“ä½œç³»ç»Ÿçš„é˜µè¥é„™è§†IntelèŠ¯ç‰‡åŠ å¾®è½¯æ“ä½œç³»ç»Ÿå½¢æˆçš„Wintelè”ç›Ÿï¼Œå‰è€…è®¤ä¸ºåè€…ç®€é™‹ï¼Œè€Œåè€…åˆ™è®¤ä¸ºå‰è€…æ˜¯è€åŒ–é¡½å›ºã€‚</p>
<p>SCOæ­¤æ—¶æ‰®æ¼”çš„è§’è‰²æœ‰ç‚¹åƒâ€œè™è â€ï¼Œéé¸Ÿéå…½ï¼Œå®ƒçš„è¿è¥æ¨¡å¼æ˜¯IntelèŠ¯ç‰‡åŠ Unixæ“ä½œç³»ç»Ÿï¼Œåœ¨ä¸¤å¤§é˜µè¥é—´ç¿©ç¿©é£ã€‚éšç€è£…æœ‰IntelèŠ¯ç‰‡ç”µè„‘çš„æ”»åŸç•¥åœ°ï¼ŒSCOä¹Ÿè·Ÿç€åˆ†åˆ°ä¸€æ¯ç¾¹ã€‚80å¹´ä»£æœ«ï¼Œæœ‰åª’ä½“ç§°Xenixä¸ºâ€œå¯èƒ½æ˜¯ä¼ æ’­æœ€å¹¿çš„UNIXæ“ä½œç³»ç»Ÿâ€ã€‚</p>
<p>SCOè¿›å…¥äº†å…¶å‘å±•å²ä¸Šæœ€è¾‰ç…Œçš„æ—¶æœŸã€‚å½“ç„¶è¿™æ®µæ—¶é—´ï¼ŒUnixçš„å‘å±•ä¹Ÿè¿›å…¥äº†é»„é‡‘æœŸã€‚1984å¹´9æœˆã€Šè´¢å¯Œã€‹æ‚å¿—ç§°ï¼Œå…¨çƒèŒƒå›´å†…750æ‰€å¤§å­¦ä¸­80ï¼…çš„è®¡ç®—æœºé¢†åŸŸçš„æ•™æˆæ˜¯Unixç”¨æˆ·ï¼Œå› æ­¤å½“æ—¶è®¡ç®—æœºä¸“ä¸šæ¯•ä¸šçš„å­¦ç”Ÿéƒ½æ¥è§¦è¿‡Unixï¼Œä»–ä»¬æ¯•ä¸šåæˆä¸ºITé¢†åŸŸçš„éª¨å¹²ã€‚</p>
<p>ç›–èŒ¨æŠ›å¼ƒäº†Unixï¼Œä½†æ²¡æ‰“ç®—æŠ›å¼ƒè¿™å—ä¸°é¥¶çš„å¸‚åœºï¼Œè€Œä¸”SCOçš„æˆåŠŸä¹Ÿåˆºæ¿€äº†ä»–ï¼šè‡ªå·±æ‰”æ‰çš„ä¸€å—é¸¡è‚‹ç«Ÿç„¶æˆäº†è¿™ä¸ªå°è·Ÿç­çš„è‚¥ç¾ç‰›æ’ã€‚æ¢è°ä¸æµå£æ°´å•Šï¼Ÿæœ‰å¥è°šè¯­æ˜¯â€œåˆ«è®©å£é¦‹çš„äººçœ‹è§ä½ çš„å¤§ç¢—â€ã€‚</p>
<p>Unixæœ‰ä¸ªè‡´å‘½ç¼ºé™·ï¼šä»æ¥å°±æ²¡æœ‰é€šç”¨ç‰ˆå­˜åœ¨ã€‚å¤šå¹´ä»¥æ¥ï¼Œç”±äºæ—©æœŸæ··ä¹±çš„æˆæƒï¼Œäº”èŠ±å…«é—¨ã€ä¸åŒç‰ˆæœ¬çš„Unixéåœ°å¼€èŠ±ï¼Œæ‰€ä»¥ä¸ºå…¶ä¸­ä¸€ä¸ªç‰ˆæœ¬å†™çš„åº”ç”¨ç¨‹åºï¼Œå¸¸å¸¸è¦ä¿®æ”¹åæ‰èƒ½è¿ç”¨åˆ°å¦ä¸€ä¸ªä¸Šï¼Œè¿™å¯¹äºä¸“ä¸šçš„ç¨‹åºå‘˜æ¥è¯´ä¹Ÿè®¸ä¸æ˜¯å¤ªå¤§é—®é¢˜ï¼Œä½†å¯¹æŠ€æœ¯å®åŠ›è¾ƒå¼±çš„ç”¨æˆ·æ¥è¯´ï¼Œåˆ™å¹³æ·»äº†è®¸å¤šéº»çƒ¦ã€‚</p>
<p>ä»Unixè„±èº«è€Œå‡ºçš„ç›–èŒ¨æ·±çŸ¥å…¶æ”¯ç¦»ç ´ç¢çš„å¼±ç‚¹ï¼Œä»–ä¸‹ä»¤å¾®è½¯æ‰“é€ ä¸€æ¬¾â€œå¯ç§»æ¤çš„â€çš„æ“ä½œç³»ç»Ÿâ€”â€”â€œUnixæ€æ‰‹â€ã€‚è¿™å°±æ˜¯å¾®è½¯çš„Windows NTï¼ŒåŒ…æ‹¬SCOåœ¨å†…çš„Unixé˜µè¥å°†æ„Ÿå—åˆ°å®ƒå¸¦æ¥çš„å·¨å¤§å‹åŠ›ã€‚</p>
<p>æ­Œæ‰‹é²å‹ƒÂ·è¿ªä¼¦åœ¨ã€Šæ—¶ä»£åœ¨è½¬å˜ã€‹ä¸€è¯—ä¸­å†™åˆ°ï¼šâ€œåŠ¨ç¬”é¢„è¨€ä¸–äº‹çš„ä½œå®¶ä¸è¯„è®ºå®¶ä»¬ï¼Œå¼ å¤§ä½ ä»¬çš„åŒçœ¼ï¼Œæœºä¼šä¸ä¼šå†æ¥ç¬¬äºŒéï¼Œè½®ç›˜è¿˜åœ¨æ—‹è½¬ï¼Œå…ˆåˆ«è¨€ä¹‹è¿‡å…ˆï¼Œçœ‹ä¸å‡ºæ¥è°ä¼šè¢«é€‰ï¼Œå› ä¸ºç›®å‰çš„è¾“å®¶æœªæ¥ä¼šé¢†å…ˆï¼Œå› ä¸ºæ—¶ä»£æ­£åœ¨æ”¹å˜ã€‚â€</p>
<h5 id="å¼ºæ‚å¯¹æ‰‹é€†è¢­"><a href="#å¼ºæ‚å¯¹æ‰‹é€†è¢­" class="headerlink" title="å¼ºæ‚å¯¹æ‰‹é€†è¢­"></a>å¼ºæ‚å¯¹æ‰‹é€†è¢­</h5><p>â€œæˆ‘ä¸ä¼šç”¨ç‹—å±å»æ±¡æŸ“ï¼ˆNTï¼‰â€ã€‚Windows NTç ”å‘è´Ÿè´£äººå¤§å«Â·å¡ç‰¹å‹’è¿™æ ·é«˜å£°åœ°åš·ç€ï¼Œä»–æ‹’ç»å…è¯ºæ–°ä¸€ä»£çš„æ“ä½œç³»ç»Ÿå…¼å®¹å·²æœ‰çš„DOSå’ŒWindowsã€‚åŸæ¥ï¼Œå®šä¸‹â€œUnixæ€æ‰‹â€è®¡åˆ’åï¼Œç›–èŒ¨å‡†å¤‡ç»„ç»‡ä¸€ä¸ªå›¢é˜Ÿæ¥å®Œæˆè¿™é¡¹å·¥ä½œã€‚â€œæˆ‘å¤ªæƒ³è¦ä¸€ä¸ªå¯ç§»æ¤çš„æ“ä½œç³»ç»Ÿäº†ï¼Œâ€ç›–èŒ¨è¯´ï¼Œâ€œé—®é¢˜ä¸åœ¨äºæˆ‘ä»¬æ˜¯å¦åº”è¯¥ç»„æˆå›¢é˜Ÿï¼Œè€Œåœ¨äºä½•æ—¶èƒ½ç»„æˆå›¢é˜Ÿå»å¼€å‘å®ƒã€‚â€</p>
<p>éšåæœºä¼šæ¥äº†ï¼ŒDECçš„æ ¸å¿ƒå·¥ç¨‹å¸ˆå¡ç‰¹å‹’å› åœ¨å…¬å¸åå†·æ¿å‡³è€ŒèŒç”Ÿå»æ„ã€‚â€œå¤§å¤šæ•°äººå­¦ä¼šå¦‚ä½•æŠŠä¸€ä»¶äº‹åšå¾—å¾ˆæ¼‚äº®ä»¥åï¼Œä¾¿ä¸€ç”Ÿä¸€ç›´åšè¿™ä¸ªï¼Œâ€å¡ç‰¹å‹’ä¸€ä¸ªåŒäº‹è¯„ä»·ä»–ï¼šâ€œå¡ç‰¹å‹’ä¼šä»è‡ªå·±çš„æˆåŠŸä¸­å­¦ä¹ ã€‚ä¸‹ä¸€æ¬¡ï¼Œä»–ä¼šåšå¾—æ›´å¥½ã€‚æ‰€ä»¥æ¯æ¬¡ï¼Œä»–éƒ½ä¸Šå‡åˆ°ä¸€ä¸ªæ–°çš„é«˜åº¦ã€‚â€</p>
<p>å¡ç‰¹å‹’å…¨èº«å¿ƒåœ°æŠ•å…¥ç¨‹åºå¼€å‘ï¼Œè€Œå†·è½äº†ä¸¤ä»»å¦»å­ï¼Œåæ¥ä»–å‘èª“å†ä¹Ÿä¸ä¼šç»“å©šï¼Œâ€œç»“å©šæ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œä½ åªèƒ½çŠ¯ä¸¤æ¬¡é”™â€ã€‚å¡ç‰¹å‹’åœ¨ç¨‹åºå¼€å‘ä¸Šç²¾ç›Šæ±‚ç²¾ï¼Œâ€œå¯¹å¯èƒ½å¹²æ‰°ä»–çš„ä»»ä½•äººå’Œäº‹ï¼Œä»–ä¸ä»…ç½®ä¹‹ä¸ç†ï¼Œè€Œä¸”è¿˜ä¼šå¯¹å…¶è¿›è¡Œæ”»å‡»å’Œè¯‹æ¯â€ï¼Œå› æ­¤ï¼Œä»–ä¸DECå…¬å¸é«˜ç®¡ä»¬ç›¸å¤„å¾—å¾ˆä¸æ„‰å¿«ã€‚</p>
<p>ç›–èŒ¨äº²è‡ªæ‹œä¼šå¡ç‰¹å‹’ï¼Œæƒ³è®©ä»–åŠ ç›Ÿå¾®è½¯ã€‚åˆæ¬¡è§é¢ï¼Œå¡ç‰¹å‹’å°±ç»™ç›–èŒ¨ä¸€ä¸ªä¸‹é©¬å¨ï¼Œç›´è¨€ä¸è®³åœ°ç§°å¾®è½¯çš„ä»£ç å†™å¾—å¾ˆâ€œçƒ‚â€ï¼Œè®¤ä¸ºç›–èŒ¨å½“æ—¶æ§åœ¨æ‰‹å¿ƒé‡Œçš„ã€æ·±ä»¥ä¸ºå‚²çš„DOSï¼Œåœ¨ä»–çš„çœ¼é‡Œå°±æ˜¯ä¸€ä¸ªç©å…·ã€‚å¡ç‰¹å‹’è¯´åªæœ‰è‡ªå·±æ‰æœ‰èƒ½åŠ›å¼€å‘å‡ºä¸€ä¸ªèƒ½é¢å‘æœªæ¥è¿›è¡Œç½‘ç»œç®¡ç†ã€å…·æœ‰é«˜å¯é æ€§çš„æ“ä½œç³»ç»Ÿã€‚</p>
<p>æ­¤æ—¶çš„ç›–èŒ¨å·²èµ°è¿‡åˆ›ä¸šæœŸï¼Œæ‹¥æœ‰æµ·é‡çš„è´¢å¯Œä¸å¼ºåŠ¿çš„æƒåŠ›ï¼Œè€³è¾¹å¹è¿‡çš„éƒ½æ˜¯â€œè½¯ä»¶ç¥ç«¥â€çš„æ‚¦è€³ä¹‹éŸ³ã€‚ä¸è¿‡ï¼Œå¡ç‰¹å‹’çš„åˆºè€³ä¹‹éŸ³å’Œè½»è”‘æ€åº¦åè€Œåšå®šäº†ç›–èŒ¨è˜è¯·ä»–çš„å†³å¿ƒï¼Œç›–èŒ¨å‘å¯¹æ–¹è¡¨ç¤ºå°†ç»™äºˆå……åˆ†çš„å‘å±•ç©ºé—´å’Œè‡ªç”±ã€‚åŠ±å¿—å¤§å¸ˆæˆ´å°”Â·è‚¯è€åŸºè¯´ï¼šâ€œåœ¨ä¸–ç•Œä¸Šï¼Œè¦å½±å“åˆ«äººçš„æƒŸä¸€åŠæ³•å°±æ˜¯è°ˆè®ºä»–ä»¬çš„éœ€è¦ï¼Œå¹¶å‘Šè¯‰ä»–ä»¬å»å¦‚ä½•æ»¡è¶³è¿™äº›éœ€è¦ã€‚â€</p>
<p>å¡ç‰¹å‹’åˆ°å¾®è½¯ä¹‹åï¼Œç›–èŒ¨å°½å¯èƒ½åœ°æ»¡è¶³ä»–çš„è¦æ±‚ï¼Œæœ‰äº›ç”šè‡³æ˜¯æ‰“ç ´å¾®è½¯æƒ¯ä¾‹çš„ã€‚è­¬å¦‚å¡ç‰¹å‹’ä¸è¦å¾®è½¯åŸæ¥çš„å·¥ç¨‹å¸ˆå‚ä¸ä»–çš„å›¢é˜Ÿï¼Œä»–æŠŠè‡ªå·±åœ¨DECå·¥ä½œæ—¶çš„å›¢é˜Ÿå¸¦äº†è¿‡æ¥ï¼Œå…¶ä¸­æœ‰äº›æ˜¯ç¡¬ä»¶å·¥ç¨‹å¸ˆï¼Œæ˜¯å¡ç‰¹å‹’çš„å¥½å‹ã€‚ç›–èŒ¨åŸæ¥ä¸æ‰“ç®—è¦ï¼Œä½†å¡ç‰¹å‹’å¨èƒä¸è®©ä»–ä»¬æ¥ï¼Œè‡ªå·±å°±ä¸æ¥ã€‚</p>
<p>ç›–èŒ¨è®©æ­¥ï¼Œæ»¡è¶³äº†å¡ç‰¹å‹’æ‰€éœ€è¦çš„ä¸€åˆ‡ã€‚æ­¤å‰ï¼Œæ§åˆ¶æ¬²æå¼ºçš„ç›–èŒ¨ä¼šäº²è‡ªæ£€æŸ¥å¾®è½¯çš„å¤§éƒ¨åˆ†ä»£ç ï¼Œåœ¨ä»–åˆ¨æ ¹æ­åº•åœ°ç©·é—®ä¸‹ï¼Œç¨‹åºå‘˜æœ‰æ—¶ä¼šéœ²å‡ºç ´ç»½ï¼Œè¿™æ—¶ç›–èŒ¨ä¼šä¸ç•™æƒ…é¢åœ°ç—›æ–¥ï¼Œå¸¦æœ‰æ”»å‡»æ€§è¨€è¯­ï¼Œè­¬å¦‚â€œè¿™æ˜¯æœ‰å²ä»¥æ¥æœ€æ„šè ¢çš„ä»£ç â€ä¼šåŠˆå¤´ç›–è„¸åœ°ç ¸è¿‡å»ã€‚ä½†ç›–èŒ¨å¯¹å¡ç‰¹å‹’çš„é¡¹ç›®åˆ™æ”¾æ‰‹åˆ°å‡ ä¹â€œæ”¾ä»»è‡ªæµâ€çš„åœ°æ­¥ã€‚Airbnbè”åˆåˆ›å§‹äººå…¼CEOå¸ƒè±æ©Â·åˆ‡æ–¯åŸºè¯´è¿‡ï¼šâ€œä½ æœ‰æ—¶å€™å¿…é¡»é è¾¹ç«™ï¼Œå¦‚æœä½ è¦æ’æ‰‹ç»†èŠ‚ï¼Œä½ ä¼šå¾ˆç—›è‹¦ã€‚ä½†æ˜¯ä½ è¦æ˜¯ç«™å¾—è¿œä¸€ç‚¹ï¼Œä½ å°±èƒ½çœ‹æ¸…å¤§å±€ã€‚â€</p>
<p>ç›–èŒ¨è¯†æ‰çš„çœ¼å…‰å’Œç”¨äººä¸ç–‘çš„æ€åº¦ï¼Œæœ€ç»ˆå¾—åˆ°äº†ä¸°åšçš„å›æŠ¥ï¼Œ1993å¹´ï¼ŒWindows NTå®Œç¾äº®ç›¸ï¼Œæˆä¸ºå¾®è½¯æ’¬åŠ¨Unixå¸‚åœºçš„ä¸€æŠŠåˆ©å™¨ã€‚å¡ç‰¹å‹’ä¹Ÿè·å¾—äº†Windows NTä¹‹çˆ¶çš„èµèª‰ï¼Œåœ¨å¾®è½¯å‘å±•å²ä¸Šå æœ‰ä¸€å¸­ä¹‹åœ°ã€‚ç½—æ°â€¢ç¦å°”å…‹åœ¨ã€Šæ¼«è°ˆä¼ä¸šç®¡ç†ã€‹ä¸­æåˆ°ï¼šâ€œä¸€ä¸ªäººåªæœ‰å¤„åœ¨æœ€èƒ½å‘æŒ¥å…¶æ‰èƒ½çš„å²—ä½ä¸Šï¼Œä»–æ‰ä¼šå¹²å¾—æœ€å¥½ã€‚â€ç›–èŒ¨è‡ªå·±åœ¨è¿™ä¸€æ—¶æœŸè¯´è¿‡ï¼šâ€œå¯¹æˆ‘æ¥è¯´ï¼Œè·Ÿä¸€ä¼™èªæ˜çš„å·¥ç¨‹å¸ˆä¸€èµ·å·¥ä½œï¼Œç ”å‘å‡ºäº§å“ï¼Œç„¶åä½ èµ°å‡ºå»çœ‹åˆ°äººä»¬ç¡®å®åœ¨ä½¿ç”¨å®ƒä»¬ï¼Œè¿™æ‰æ˜¯æ›´å¤§çš„ä¹è¶£æ‰€åœ¨ã€‚â€</p>
<p>åœ¨åŒ…æ‹¬SCOåœ¨å†…çš„Unixé˜µè¥å¼€è¶³é©¬åŠ›è´¬ä½Windows NTä¹‹æ—¶ï¼ŒWindows NTå´åœ¨é«˜ç«¯å¸‚åœºä¸Šå¤§æ­¥å‰è¿›ï¼ŒSCOåˆ™å¼€å§‹èµ°ä¸‹å¡è·¯ã€‚</p>
<p>â€œèŠ‚ç‰©é£å…‰ä¸ç›¸å¾…ï¼Œæ¡‘ç”°ç¢§æµ·é¡»è‡¾æ”¹ã€‚â€åœ¨å¾®è½¯ä¸Unixé˜µè¥çš„å¯¹æ‰‹è¿›è¡Œè½¦è½®æˆ˜çš„åŒæ—¶ï¼Œä¸€è‚¡æ–°çš„åŠ›é‡åœ¨ç”Ÿæˆå¹¶å˜å¾—å¼ºå¤§èµ·æ¥ï¼Œå·¦å³äº†æˆ˜å±€çš„å‘å±•æ–¹å‘ã€‚è¿™å°±æ˜¯Linuxã€‚</p>
<p>èµ·åˆç›–èŒ¨è®¤ä¸ºLinuxæ— è¶³è½»é‡ï¼Œä½†å¤§é‡çš„ç”¨æˆ·ä¸è¿™æ ·è®¤ä¸ºï¼Œä»–ä»¬å¯¹LinuxæŠ•å»é’ççš„ç›®å…‰ï¼Œå› ä¸ºLinuxå…¬å¼€æˆæƒï¼Œå…è®¸ç”¨æˆ·é”€å”®ã€æ‹·è´å¹¶ä¸”æ”¹åŠ¨ç¨‹åºï¼Œåªä¸è¿‡è¦æ±‚ä¿®æ”¹åçš„ä»£ç ä¹Ÿå…è´¹å…¬å¼€ï¼Œè¿™äº›ä¸¾æªæˆäº†Linuxè”“å»¶çš„å¼ºå¤§æ¨åŠ›ï¼Œå¹¶ç»™å¾®è½¯å¸¦æ¥äº†å¼ºçƒˆçš„å†²å‡»ã€‚</p>
<p>Linuxçš„å­˜åœ¨ç»™äº†å¯¹å¾®è½¯ä¸€ç›´å¿ƒå­˜æ•Œæ„çš„å¯¹æ‰‹ä»¬ä¸€æŠŠé›ªè€»çš„åˆ©åˆƒï¼ŒåŒ…æ‹¬IBMã€Oracleã€Sunç­‰ä¸šç•Œå¤§é³„ï¼Œçº·çº·è¡¨ç¤ºæ‰¶æŒLinuxï¼Œå¹¶ä»¥å„ç§æ–¹å¼æ”¯æŒLinuxï¼Œå‘é™·ä½å¾®è½¯æˆ˜é´çš„æ³¥æ½­çŒè¿›å»æ›´å¤šçš„æ°´ã€‚å¾®è½¯ä¸€åº¦é™·å…¥äº†è¢«åŠ¨çš„å±€é¢ã€‚ä½†éšç€Linuxçš„å‘å±•ï¼Œæˆ˜å±€å‘ç”Ÿäº†å¾®å¦™çš„å˜åŒ–ã€‚</p>
<p>åœ¨ä¸€ä¸ªå…¬å¼€åœºåˆï¼Œç›–èŒ¨è¡¨ç¤ºï¼šâ€œå—åˆ°Linuxèš•é£Ÿçš„æ˜¯Unixï¼Œè€Œä¸æ˜¯Windowsã€‚â€ä»–è¯´ï¼šâ€œæˆ‘ä»¬ç¡®å®åœ¨ä¸Linuxç«äº‰ï¼Œä½†è½¬æ¢åˆ°Linuxçš„Unixå¸‚åœºæ˜¯ç›¸å½“å¯è§‚çš„ã€‚Windowså’ŒLinuxå°†å…±åŒä¸»å¯¼å¸‚åœºã€‚â€</p>
<p>å¸‚åœºåˆ†ææœºæ„Gartnerä¹Ÿå®£ç§°ï¼ŒLinuxå’Œå¼€æ”¾æºä»£ç ä¼šç»§ç»­å‘å±•ï¼Œä½†å®ƒä»¬æ‰€æ å¤ºçš„æ˜¯Unixè€Œä¸æ˜¯å¾®è½¯çš„é¢†åœ°ã€‚ä¸Unixæœ‰ç€åƒä¸ä¸‡ç¼•è”ç³»çš„Linuxï¼Œç«Ÿç„¶æ‰®æ¼”äº†Unixç»ˆç»“è€…çš„è§’è‰²ï¼Ÿ</p>
<p>è¿™æ˜¯å› ä¸ºUnixæ“ä½œç³»ç»Ÿä»·æ ¼æ¯”å¾®è½¯çš„äº§å“æ›´é«˜ï¼Œå¸‚åœºä»½é¢ä¹Ÿæ›´å°‘ï¼Œå—åˆ°Linuxçš„å†²å‡»ä¹Ÿæ›´å¤§ï¼Œé ç€Unixåƒé¥­çš„SCOå¯¹æ­¤æ„ŸåŒèº«å—ã€‚ä¸€ä½Linuxå‚å•†æŠ€æœ¯æ€»ç›‘æ›¾æ”¾è¯ï¼šâ€œSCO Unixçš„ç”Ÿå‘½å‘¨æœŸå·²ç»ç»“æŸäº†ï¼Œç³»ç»Ÿç§»æ¤æ˜¯å¿…ç„¶çš„ã€‚â€</p>
<p>ä¸å…¶åä»¥å¾…æ¯™ï¼Œä¸å¦‚å¥‹åŠ›ä¸€å‡»ã€‚è¿›å…¥21ä¸–çºªåï¼Œæ—¥æ¸å¼å¾®çš„SCOå¼€å§‹ç­–åˆ’ä¸€å‡ºéœ‡æƒŠITä¸šç•Œçš„å¤§æˆã€‚</p>
<h5 id="è½¦è½®è¯‰è®¼å¤§æˆ˜"><a href="#è½¦è½®è¯‰è®¼å¤§æˆ˜" class="headerlink" title="è½¦è½®è¯‰è®¼å¤§æˆ˜"></a>è½¦è½®è¯‰è®¼å¤§æˆ˜</h5><p>â€œåœ¨è¿‡å»çš„18ä¸ªæœˆï¼Œæˆ‘ä»¬å‘ç°IBMæŠŠä¸€äº›æå…¶é«˜ç«¯çš„ä¼ä¸šè¿ç®—æŠ€æœ¯çš„æºä»£ç å…¬å¼€äº†ã€‚å…¶ä¸­éƒ¨åˆ†çœ‹ä¸Šå»ä¸æˆ‘ä»¬æ‹¥æœ‰çŸ¥è¯†äº§æƒçš„æŠ€æœ¯éå¸¸ç›¸ä¼¼ï¼Œè¿åäº†æˆ‘ä»¬ä¸IBMä¹‹é—´çš„åè®®ã€‚ä»–ä»¬çš„è¡Œä¸ºä¹‹é—´ç ´åäº†æˆ‘ä»¬ä¹‹é—´ä¸å…¬å¼€è¿™éƒ¨åˆ†æŠ€æœ¯çš„åè®®ï¼Œå•æ–¹é¢å…¬å¼€äº†æºä»£ç ã€‚æˆ‘ä»¬æœ‰è¯æ®è¡¨æ˜éƒ¨åˆ†ä»£ç æ˜¯é€å­—çš„æŠ„è¢­ã€‚â€2003å¹´5æœˆï¼ŒSCOçš„CEOè¾¾å°”Â·éº¦å…‹å¸ƒè±å¾·è¿™æ ·è¯´ã€‚</p>
<p>SCOæ§å‘ŠIBMçš„Linuxç ´åäº†åŒæ–¹ä¹‹å‰ç­¾è®¢çš„è½¯ä»¶ä»£ç æˆæƒåè®®ï¼Œå£°ç§°IBMå…è´¹æ•£å‘æœ‰çŸ¥è¯†äº§æƒçš„ä»£ç ï¼ŒæŠŠä¸€äº›Unixçš„ä»£ç æ”¹å¤´æ¢é¢ååŠ å…¥Linuxäº§å“ä¸­ï¼Œå› æ­¤è¦æ±‚è“è‰²å·¨äººèµ”å¿è‡ªå·±10äº¿ç¾å…ƒã€‚â€œåˆå¯’å†»å·¨æµ·ï¼Œæ€æ°”æµå¤§è’ã€‚â€æ­¤ä¸¾åœ¨Linuxé˜µè¥ç‚¸å¼€äº†é”…ï¼Œä»–ä»¬è®¤ä¸ºSCOæ­¤ä¸¾ä¸ºâ€œé¡¹åº„èˆå‰‘ï¼Œæ„åœ¨æ²›å…¬â€ï¼Œæœ€ç»ˆç›®æ ‡æ˜¯æŒŸåˆ¶æ•´ä¸ªLinuxé˜µè¥ã€‚</p>
<p>éšåï¼Œå¾®è½¯çš„åŠ¨ä½œè®©è¿™ä¸ªå±€é¢å˜å¾—æ··ä¹±èµ·æ¥ã€‚èµ·è¯‰IBMåä¸ä¹…ï¼ŒSCOå®£å¸ƒå‘å¾®è½¯å‘æ”¾UnixæŠ€æœ¯è®¸å¯ï¼ŒåŒ…æ‹¬ä¸“åˆ©æƒå’Œæºä»£ç ã€‚å°±æ˜¯è¯´ï¼Œå¾®è½¯ä»¥èŠ±é’±ä¹°è´­ä¹°SCOçš„UnixæŠ€æœ¯è®¸å¯æƒçš„æ–¹å¼ï¼Œæ‰¿è®¤äº†å¯¹æ–¹Unixåˆæ³•ä¼ äººçš„åœ°ä½ã€‚</p>
<p>å¸ƒé²æ–¯Â·ä½©ä¼¦æ–¯ç§°ï¼šâ€œå¯¹äºå¾®è½¯æ¥è¯´ï¼Œè´­ä¹°SCOçš„æºä»£ç æˆæƒå‡ ä¹æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚èŠ±é’±è´­ä¹°SCOå…¬å¸çš„æˆæƒï¼Œåªä¸è¿‡æ˜¯å¯¹ä¸€ç§â€˜è¡Œè´¿â€™è¡Œä¸ºçš„ç²‰é¥°ï¼Œé¡ºä¾¿è¿˜å¯¹æœªæ¥çš„Linuxç”¨æˆ·è¿›è¡Œæ«å“ã€‚å¯è°“ä¸€çŸ³åŒé¸Ÿï¼å¾ˆéš¾æƒ³è±¡å¾®è½¯çš„å‰å¯¹æ‰‹SCOèƒ½ä¸ºæ¯”å°”Â·ç›–èŒ¨å†²é”‹é™·é˜µï¼Œä½†æ˜¯ï¼Œå¾®è½¯çš„é’±æ”¹å˜äº†ä¸€åˆ‡ã€‚â€</p>
<p>Linuxé˜µè¥æ‹…å¿ƒçš„å°±æ˜¯è¿™ä¸€ç‚¹ï¼Œå¾®è½¯æ­¤ä¸¾å¼ºåŒ–äº†SCOçš„Unixâ€œæƒå¨åœ°ä½â€ï¼Œå¢å¼ºäº†SCOæŒ‘æˆ˜IBMçš„å†³å¿ƒã€‚ä¸€æ—¦SCOæ‹¿ä¸‹IBMï¼Œå°±æ‰“å¼€äº†ä¸€ä¸ªæ”¶é’±å£è¢‹ï¼Œå…¶ä»–æ¨è¡ŒLinuxçš„å‚å•†åªæœ‰ä¹–ä¹–çº³è´¡ã€‚</p>
<p>è€Œä¸”ä½¿ç”¨Linuxçš„å¹¿å¤§å•†ä¸šç”¨æˆ·ä¹Ÿé¢ä¸´ç€è¢«è¿½ç´¢çš„å±æœºï¼Œæ›´å¤šçš„æ½œåœ¨ç”¨æˆ·å°†ä¼šå¯¹Linuxæœ›è€Œç”Ÿç•ï¼Œè¿™éå¸¸ç¬¦åˆå¾®è½¯ä¸€ç›´é’ˆå¯¹Linuxå®æ–½çš„å¿ƒç†æˆ˜æˆ˜æœ¯ï¼Œè®©ç”¨æˆ·åœ¨ææƒ§ã€ä¸ç¡®å®šã€æ€€ç–‘çš„çŠ¶æ€ä¸‹å¯¹Linuxæ•¬è€Œè¿œä¹‹ã€‚è€ƒè™‘åˆ°å†å²ä¸Šå¾®è½¯ä¸SCOå¤æ‚çš„å…³ç³»ï¼Œäººä»¬æ€€ç–‘äºŒè€…åœ¨å¯†è°‹ï¼Œè®¤ä¸ºSCOåœ¨æ‰®æ¼”ä¸ºå¾®è½¯ç«ä¸­å–æ —çš„è§’è‰²ã€‚2004å¹´åˆï¼Œéº¦å…‹å¸ƒè±å¾·è­¦å‘Šï¼šå…¨çƒä¸€äº›å¤§å…¬å¸ç”±äºä½¿ç”¨äº†Linuxå°†å¯èƒ½å¾ˆå¿«é¢ä¸´è¯‰è®¼ï¼Œå…¶ä¸­åŒ…æ‹¬è‹±å›½çŸ³æ²¹ã€è¥¿é—¨å­å’Œå¯Œå£«é€šã€‚å°±æ˜¯è¯´ï¼ŒSCOçš„è¯‰è®¼é£æš´å³å°†å¸­å·å…¨çƒã€‚</p>
<p>å€Ÿç€SCOå¯¹Linuxé˜µè¥çš„å‹åŠ›ï¼Œ2004å¹´11æœˆï¼Œå¾®è½¯CEOé²å°”é»˜åœ¨æ–°åŠ å¡ä¸¾è¡Œçš„ä¸€ä¸ªé«˜çº§åˆ«æ”¿åºœè®ºå›ä¸Šè¡¨ç¤ºï¼ŒLinuxä¾µçŠ¯äº†è‡³å°‘228é¡¹ä¸“åˆ©ï¼Œä¸è¿‡ä»–å¹¶æ²¡æœ‰æ˜ç¡®è¡¨ç¤ºä¾µçŠ¯äº†å“ªäº›ä¸“åˆ©ã€‚ä»–è¯´ï¼šâ€œå¯¹äºé‚£äº›å·²ç»åŠ å…¥ä¸–ç•Œè´¸æ˜“ç»„ç»‡çš„å›½å®¶è€Œè¨€ï¼Œä½¿ç”¨Linuxå°±æ„å‘³ç€æœ‰ä¸€å¤©ä¼šæœ‰äººè¿‡æ¥å‘ä½ æ”¶å–ä¸“åˆ©è´¹ã€‚â€</p>
<p>2005å¹´1æœˆï¼Œç¾å›½æ³•é™¢åˆ¤å†³IBMäº¤å‡º20äº¿è¡Œçš„ç¨‹åºä»£ç ç»™SCOï¼Œæ¶ˆæ¯ä¼ å‡ºåï¼ŒSCOè‚¡ä»·æš´æ¶¨20%ã€‚</p>
<p>SCOä¼¼ä¹å¯ä»¥åŠ¨æ‰‹æ•›é’±äº†ï¼Œç„¶è€Œé£äº‘åˆå˜ï¼ŒåŠè·¯æ€å‡ºä¸€ä¸ªç¨‹å’¬é‡‘ã€‚Novellå…¬å¸ç«™äº†å‡ºæ¥ï¼Œç§°è‡ªå·±æ‰æ˜¯Unixç‰ˆæƒçš„åˆæ³•æ‹¥æœ‰è€…ï¼Œè¯´è‡ªå·±å½“å¹´æ²¡æœ‰æŠŠUnixç‰ˆæƒå–ç»™SCOï¼ŒSCOä¹Ÿåªæ˜¯ä¸ªæˆæƒä½¿ç”¨è€…ï¼Œå¹¶ä¸”è¦å¯¹æ–¹æŠŠä»å¾®è½¯å’ŒSunæ”¶åˆ°çš„æˆæƒè®¸å¯è´¹ç»™åå‡ºæ¥ã€‚</p>
<p>äºæ˜¯ï¼ŒSCOåˆå’ŒNovellå…¬å¸å¹²ä¸Šäº†ï¼Œå¼€å§‹äº†æ³•åº­ä¸Šçš„äº’æœ‰èƒœè´Ÿçš„å¯¹å³™ã€‚</p>
<h5 id="æ ‘æ•Œè¿‡å¤šåçš„ç ´äº§"><a href="#æ ‘æ•Œè¿‡å¤šåçš„ç ´äº§" class="headerlink" title="æ ‘æ•Œè¿‡å¤šåçš„ç ´äº§"></a>æ ‘æ•Œè¿‡å¤šåçš„ç ´äº§</h5><p>â€œSCOå…¬å¸åœ¨è¯‰è®¼è¿‡ç¨‹ä¸­æ ‘æ•Œè¿‡å¤šã€‚â€ä¸šå†…äººå£«æ¸©ä¼¯æ ¼è¿™æ ·è¡¨ç¤ºã€‚è¿å¹´è¯‰è®¼è€—å°½äº†SCOèµ„æºï¼Œå…¬å¸é‡ç‚¹ä¹Ÿæ²¡æœ‰æ”¾åœ¨ä¸šåŠ¡ä¸Šï¼Œè¯åˆè¯´å›æ¥ï¼Œå…¶Unixä¸šåŠ¡å·²æ—¥è–„è¥¿å±±ï¼Œä¹Ÿæ²¡å•¥å¥½ç»§ç»­å¼€å±•çš„äº†ã€‚</p>
<p>2007å¹´8æœˆï¼Œç¾å›½çŠ¹ä»–å·åœ°æ–¹æ³•é™¢ä¸€åæ³•å®˜è£å®šï¼ŒUnixæ“ä½œç³»ç»Ÿçš„ç‰ˆæƒå½’å±äºNovellï¼Œè€Œä¸æ˜¯SCOã€‚è¿™æ„å‘³ç€SCOéœ€è¦å‘Novellæ”¯ä»˜æ•°ç™¾ä¸‡ç¾å…ƒçš„èµ”å¿ã€‚</p>
<p>æ­¤ä¸¾ä¹Ÿæ„å‘³ç€ï¼ŒSCOåœ¨ä¸IBMè¿›è¡Œçš„æ³•å¾‹å¤§æˆ˜ä¸­å¤±å»èƒœç®—ã€‚Linuxé˜µè¥å¤´é¡¶çš„ä¹Œäº‘ä¹Ÿéšå³æ•£å»ã€‚è¿™å¹´12æœˆ27æ—¥ï¼ŒSCOæ­£å¼è¢«çº³æ–¯è¾¾å…‹æ‘˜ç‰Œã€‚</p>
<p>èŠ¥å·é¾™ä¹‹ä»‹è¯´è¿‡ï¼šäººç”Ÿå¥½æ¯”ä¸€ç›’ç«æŸ´ï¼Œä¸¥ç¦ä½¿ç”¨æ˜¯æ„šè ¢çš„ï¼Œæ»¥ç”¨åˆ™æ˜¯å±é™©çš„ã€‚</p>
<p><img src="pic/002.jpg" alt="002"></p>
<h3 id="Minix"><a href="#Minix" class="headerlink" title="Minix"></a>Minix</h3><p>MinixåŸæ¥æ˜¯è·å…°é˜¿å§†æ–¯ç‰¹ä¸¹çš„Vrijeå¤§å­¦è®¡ç®—æœºç§‘å­¦ç³»çš„Andrew S. Tanenbaumæ•™æˆæ‰€å‘å±•çš„ä¸€ä¸ªç±»Unixæ“ä½œç³»ç»Ÿã€‚å…¨éƒ¨çš„ç¨‹åºç å…±çº¦12,000è¡Œï¼Œå¹¶ç½®äºä»–çš„è‘—ä½œOperating Systems: Design andImplementation(ISBN 0-13-637331-3)çš„é™„å½•é‡Œä½œä¸ºèŒƒä¾‹ã€‚Minixçš„ç³»ç»Ÿè¦æ±‚åœ¨å½“æ—¶æ¥è¯´éå¸¸ç®€å•ï¼Œåªè¦ä¸‰ç‰‡ç£ç‰‡å°±å¯ä»¥å¯åŠ¨ã€‚MinixåŸå§‹æ˜¯è®¾è®¡ç»™1980å¹´ä»£åˆ°1990å¹´ä»£çš„IBM PCå’ŒIBM PC/ATå…¼å®¹ç”µè„‘ä¸Šæ‰§è¡Œã€‚1.5ç‰ˆä¹Ÿæœ‰ç§»æ¤åˆ°ä»¥Motorola 68000ç³»åˆ—CPUä¸ºåŸºç¡€çš„ç”µè„‘ä¸Šï¼ˆå¦‚Atari STï¼ŒAmigaï¼Œå’Œæ—©æœŸçš„Apple Macintoshï¼‰å’Œä»¥SPARCä¸ºåŸºç¡€çš„æœºå™¨ï¼ˆå¦‚å‡é˜³sunå…¬å¸çš„å·¥ä½œç«™ï¼‰ã€‚2.0ç‰ˆåˆ™åªæœ‰x86æ¶æ„çš„ç‰ˆæœ¬ã€‚</p>
<p>å› ä¸ºAT&amp;Tçš„æ”¿ç­–æ”¹å˜ï¼Œåœ¨Version 7 Unixæ¨å‡ºä¹‹åï¼Œå‘å¸ƒæ–°çš„ä½¿ç”¨æ¡æ¬¾ï¼Œå°†UNIXæºä»£ç ç§æœ‰åŒ–ï¼Œåœ¨å¤§å­¦ä¸­ä¸å†èƒ½ä½¿ç”¨UNIXæºä»£ç ã€‚å¡”èƒ½é²å§†æ•™æˆä¸ºäº†èƒ½åœ¨è¯¾å ‚ä¸Šæ•™æˆå­¦ç”Ÿæ“ä½œç³»ç»Ÿè¿ä½œçš„å®åŠ¡ç»†èŠ‚ï¼Œå†³å®šåœ¨ä¸ä½¿ç”¨ä»»ä½•AT&amp;Tçš„æºä»£ç å‰æä¸‹ï¼Œè‡ªè¡Œå¼€å‘ä¸UNIXå…¼å®¹çš„æ“ä½œç³»ç»Ÿï¼Œä»¥é¿å…ç‰ˆæƒä¸Šçš„äº‰è®®ã€‚ä»–ä»¥å°å‹UNIXï¼ˆmini-UNIXï¼‰ä¹‹æ„ï¼Œå°†å®ƒç§°ä¸ºMINIXã€‚</p>
<p>å…¨å¥—Minixé™¤äº†èµ·åŠ¨çš„éƒ¨ä»½ä»¥æ±‡ç¼–è¯­è¨€ç¼–å†™ä»¥å¤–ï¼Œå…¶ä»–å¤§éƒ¨ä»½éƒ½æ˜¯çº¯ç²¹ç”¨Cè¯­è¨€ç¼–å†™ã€‚åˆ†ä¸ºï¼šå†…æ ¸ã€å†…å­˜ç®¡ç†åŠæ¡£æ¡ˆç®¡ç†ä¸‰éƒ¨ä»½ã€‚</p>
<h4 id="ä¸Linuxçš„å…³ç³»"><a href="#ä¸Linuxçš„å…³ç³»" class="headerlink" title="ä¸Linuxçš„å…³ç³»"></a>ä¸Linuxçš„å…³ç³»</h4><p>å¦‚æœæƒ³äº†è§£ç±»Unixç³»ç»Ÿçš„å†…éƒ¨å·¥ä½œæƒ…å†µï¼Œå­¦ç”Ÿå¯ä»¥åœ¨ä»–ä»¬è‡ªå·±çš„ç”µè„‘ä¸Šè¿è¡ŒMinixã€‚æ®æŠ¥é“ï¼Œå³ä½¿æ˜¯æ¯«æ— ç»éªŒçš„å­¦ç”Ÿä¹Ÿèƒ½åœ¨å‡ ä¸ªæœˆçš„å…¸å‹åŸ¹è®­è¯¾ç¨‹çš„å­¦ä¹ ä¸­è·å¾—å¯¹æ•´ä¸ªç³»ç»Ÿçš„å¾ˆå¥½çš„äº†è§£ã€‚Minixæœ€æœ‰åçš„å­¦ç”Ÿç”¨æˆ·æ˜¯Linus Torvaldsï¼Œä»–åœ¨èŠ¬å…°çš„èµ«å°”è¾›åŸºå¤§å­¦ç”¨Minixæ“ä½œå¹³å°å»ºç«‹äº†ä¸€ä¸ªæ–°çš„æ“ä½œç³»ç»Ÿçš„å†…æ ¸ï¼Œä»–æŠŠå®ƒå«åšLinuxã€‚</p>
<p>Linuxæ˜¯å…¶ä½œè€…å—åˆ°Minixçš„å½±å“è€Œä½œæˆçš„ï¼ˆLinus Torvaldsä¸å–œæ¬¢ä»–çš„386ç”µè„‘ä¸Šçš„MS-DOSæ“ä½œç³»ç»Ÿï¼Œå®‰è£…äº†Minixï¼Œå¹¶ä»¥å®ƒä¸ºæ ·æœ¬å¼€å‘äº†åŸå§‹çš„Linuxå†…æ ¸ï¼‰ã€‚ä½†åœ¨è®¾è®¡å“²å­¦ä¸Šï¼ŒLinuxåˆ™å’ŒMinixå¤§ç›¸è¿³åº­ã€‚Minixåœ¨å†…æ ¸è®¾è®¡ä¸Šé‡‡ç”¨å¾®å†…æ ¸çš„åŸåˆ™ï¼Œä½†Linuxåˆ™å’ŒåŸå§‹çš„Unixç›¸åŒéƒ½é‡‡ç”¨å®å†…æ ¸çš„æ¦‚å¿µã€‚åœ¨Linuxå‘å±•ä¹‹åˆï¼ŒåŒæ–¹è¿˜äº1992å¹´åœ¨æ–°é—»ç»„ä¸Šæœ‰è¿‡ä¸€åœºç²¾å½©çš„ç†å¿µäº‰è®ºã€‚Minixçš„ä½œè€…å’Œæ”¯æŒè€…è®¤ä¸ºLinuxçš„å•å†…æ ¸æ„é€ æ˜¯â€œå‘ä¸ƒåå¹´ä»£çš„å¤§å€’é€€â€ï¼Œè€ŒLinuxçš„æ”¯æŒè€…è®¤ä¸ºMinixæœ¬èº«æ²¡æœ‰å®ç”¨æ€§ã€‚</p>
<h4 id="æˆæƒæ–¹å¼"><a href="#æˆæƒæ–¹å¼" class="headerlink" title="æˆæƒæ–¹å¼"></a>æˆæƒæ–¹å¼</h4><p>åœ¨æˆæƒæ–¹å¼ä¸Šï¼ŒMinixçš„ç‰ˆæƒå®£å‘Šåœ¨æ—©æœŸè¢«è®¤ä¸ºæ˜¯ç›¸å½“è‡ªç”±çš„ï¼Œåœ¨ä½œè€…Andrew S. Tanenbaumå¸Œæœ›æ‹¿Minixä½œä¸ºä¸€ä¸ªå…¬å¼€çš„æ•™æä¸å‡ºç‰ˆç¤¾å¸Œæœ›ä¿æŠ¤ç¨‹åºç è‘—ä½œè´¢äº§æƒçš„å¹³è¡¡ä¸‹ï¼Œå®ƒåªè¦æ±‚ä¸€ä¸ªç›¸å½“ä½çš„æˆæƒè´¹ã€‚ä½†å› ä¸ºå®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªå¼€æ”¾æºç çš„æˆæƒæ–¹æ¡ˆï¼Œæ‰€ä»¥å¿—æ„¿å·¥ä½œè€…åœ¨ä»¥GPLæ–¹å¼æ•£å¸ƒçš„Linuxæ ¸å¿ƒå‡ºç°åå°±å¤šè½¬å‘Linuxå¹³å°ã€‚è€ŒUnixä¹Ÿåœ¨æŸå…‹è±ç³»ç»Ÿä¸AT&amp;Tè¾¾æˆåè®®åï¼Œå‡ºç°äº†ä»¥BSD æˆæƒæ•£å¸ƒçš„FreeBSDå¼€æ”¾å¹³å°ã€‚Minixè™½ç„¶åœ¨2000å¹´æ”¹ç”¨BSD æˆæƒï¼Œä½†è¿™æ—¶å…¶å®ƒçš„æ“ä½œç³»ç»Ÿåœ¨åŠŸèƒ½ä¸Šå¤§å¹…è¶…è¶Šäº†å®ƒï¼Œè€Œå®ƒå¤±å»äº†å‘å±•æˆä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿçš„æœºä¼šï¼Œåªç•™ä¸‹ï¼Œå¦‚å®ƒçš„ä½œè€…Andrew S. Tanenbaumï¼ŒåŸæ¥æœŸæœ›çš„ï¼Œä½œä¸ºä¸€ä¸ªå¼€æ”¾çš„æ•™æçš„ç”¨é€”ã€‚</p>
<p><img src="pic/003.jpg" alt="003"></p>
<h3 id="GUN"><a href="#GUN" class="headerlink" title="GUN"></a>GUN</h3><p>GNUè®¡åˆ’ï¼Œåˆç§°é©å¥´è®¡åˆ’ï¼Œæ˜¯ç”±Richard Stallmanåœ¨1983å¹´9æœˆ27æ—¥å…¬å¼€å‘èµ·çš„ã€‚å®ƒçš„ç›®æ ‡æ˜¯åˆ›å»ºä¸€å¥—å®Œå…¨è‡ªç”±çš„æ“ä½œç³»ç»Ÿã€‚Richard Stallmanæœ€æ—©æ˜¯åœ¨net.unix-wizardsæ–°é—»ç»„ä¸Šå…¬å¸ƒè¯¥æ¶ˆæ¯ï¼Œå¹¶é™„å¸¦ã€ŠGNUå®£è¨€ã€‹ç­‰è§£é‡Šä¸ºä½•å‘èµ·è¯¥è®¡åˆ’çš„æ–‡ç« ï¼Œå…¶ä¸­ä¸€ä¸ªç†ç”±å°±æ˜¯è¦â€œé‡ç°å½“å¹´è½¯ä»¶ç•Œåˆä½œäº’åŠ©çš„å›¢ç»“ç²¾ç¥â€ã€‚ä¸ºä¿è¯GNUè½¯ä»¶å¯ä»¥è‡ªç”±åœ°â€œä½¿ç”¨ã€å¤åˆ¶ã€ä¿®æ”¹å’Œå‘å¸ƒâ€ï¼Œæ‰€æœ‰GNUè½¯ä»¶éƒ½æœ‰ä¸€ä»½åœ¨ç¦æ­¢å…¶ä»–äººæ·»åŠ ä»»ä½•é™åˆ¶çš„æƒ…å†µä¸‹æˆæƒæ‰€æœ‰æƒåˆ©ç»™ä»»ä½•äººçš„åè®®æ¡æ¬¾ï¼ŒGNUé€šç”¨å…¬å…±è®¸å¯è¯ï¼ˆGNU General PublicLicenseï¼ŒGPLï¼‰ã€‚å³â€œåç‰ˆæƒâ€ï¼ˆæˆ–ç§°Copyleftï¼‰æ¦‚å¿µã€‚</p>
<h4 id="å†å²"><a href="#å†å²" class="headerlink" title="å†å²"></a>å†å²</h4><p>1985å¹´Richard Stallmanåˆåˆ›ç«‹äº†è‡ªç”±è½¯ä»¶åŸºé‡‘ä¼šï¼ˆFree Software Foundationï¼‰æ¥ä¸ºGNUè®¡åˆ’æä¾›æŠ€æœ¯ã€æ³•å¾‹ä»¥åŠè´¢æ”¿æ”¯æŒã€‚å°½ç®¡GNUè®¡åˆ’å¤§éƒ¨åˆ†æ—¶å€™æ˜¯ç”±ä¸ªäººè‡ªæ„¿æ— å¿è´¡çŒ®ï¼Œä½†FSFæœ‰æ—¶è¿˜æ˜¯ä¼šè˜è¯·ç¨‹åºå‘˜å¸®åŠ©ç¼–å†™ã€‚å½“GNUè®¡åˆ’å¼€å§‹é€æ¸è·å¾—æˆåŠŸæ—¶ï¼Œä¸€äº›å•†ä¸šå…¬å¸å¼€å§‹ä»‹å…¥å¼€å‘å’ŒæŠ€æœ¯æ”¯æŒã€‚å½“ä¸­æœ€è‘—åçš„å°±æ˜¯ä¹‹åè¢«Red Hatå…¼å¹¶çš„Cygnus Solutionsã€‚</p>
<p>åˆ°äº†1990å¹´ï¼ŒGNUè®¡åˆ’å·²ç»å¼€å‘å‡ºçš„è½¯ä»¶åŒ…æ‹¬äº†ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ–‡å­—ç¼–è¾‘å™¨Emacs[1] ã€‚GCCï¼ˆGNUCompiler Collectionï¼ŒGNUç¼–è¯‘å™¨é›†åˆï¼‰ï¼Œæ˜¯ä¸€å¥—ç”± GNU å¼€å‘çš„ç¼–ç¨‹è¯­è¨€ç¼–è¯‘å™¨ã€‚ä»¥åŠå¤§éƒ¨åˆ†UNIXç³»ç»ŸGNUæ“ä½œç³»ç»Ÿçš„å†…æ ¸Linuxçš„ç¨‹åºåº“å’Œå·¥å…·ã€‚å”¯ä¸€ä¾ç„¶æ²¡æœ‰å®Œæˆçš„é‡è¦ç»„ä»¶å°±æ˜¯æ“ä½œç³»ç»Ÿçš„å†…æ ¸(ç§°ä¸ºHURD)ã€‚</p>
<p>1991å¹´Linus Torvaldsç¼–å†™å‡ºäº†ä¸UNIXå…¼å®¹çš„Linuxæ“ä½œç³»ç»Ÿå†…æ ¸å¹¶åœ¨GPLæ¡æ¬¾ä¸‹å‘å¸ƒã€‚Linuxä¹‹ååœ¨ç½‘ä¸Šå¹¿æ³›æµä¼ ï¼Œè®¸å¤šç¨‹åºå‘˜å‚ä¸äº†å¼€å‘ä¸ä¿®æ”¹ã€‚1992å¹´Linuxä¸å…¶ä»–GNUè½¯ä»¶ç»“åˆï¼Œå®Œå…¨è‡ªç”±çš„æ“ä½œç³»ç»Ÿæ­£å¼è¯ç”Ÿã€‚è¯¥æ“ä½œç³»ç»Ÿå¾€å¾€è¢«ç§°ä¸ºâ€œGNU/Linuxâ€æˆ–ç®€ç§°Linuxã€‚ï¼ˆå°½ç®¡å¦‚æ­¤GNUè®¡åˆ’è‡ªå·±çš„å†…æ ¸Hurdä¾ç„¶åœ¨å¼€å‘ä¸­ï¼Œå·²ç»å‘å¸ƒBetaç‰ˆæœ¬ã€‚ï¼‰</p>
<p>è®¸å¤šUNIXç³»ç»Ÿä¸Šä¹Ÿå®‰è£…äº†GNUè½¯ä»¶ï¼Œå› ä¸ºGNUè½¯ä»¶çš„è´¨é‡æ¯”ä¹‹å‰UNIXçš„è½¯ä»¶è¿˜è¦å¥½ã€‚GNUå·¥å…·è¿˜è¢«å¹¿æ³›åœ°ç§»æ¤åˆ°Windowså’ŒMac OSä¸Šã€‚</p>
<h4 id="åè®®æ¡æ¬¾"><a href="#åè®®æ¡æ¬¾" class="headerlink" title="åè®®æ¡æ¬¾"></a>åè®®æ¡æ¬¾</h4><p>GNU åŒ…å«3ä¸ªåè®®æ¡æ¬¾:</p>
<ol>
<li>GPLï¼šGNUé€šç”¨å…¬å…±è®¸å¯è¯ï¼ˆGNU General Public Licenseï¼‰</li>
<li>LGPLï¼šGNUè¾ƒå®½æ¾å…¬å…±è®¸å¯è¯ (GNU Lesser General Public Licenseï¼‰, ) ï¼Œæ—§ç§° GNU Library General Public License (GNU åº“é€šç”¨å…¬å…±è®¸å¯è¯)ï¼›</li>
<li>GFDL ï¼š GNUè‡ªç”±æ–‡æ¡£è®¸å¯è¯ï¼ˆGNU Free Documentation License ï¼‰çš„ç¼©å†™å½¢å¼ã€‚</li>
</ol>
<p>è¿™é‡ŒæŒ‡çš„è‡ªç”±ï¼Œå¹¶ä¸æ˜¯ä»·æ ¼å…è´¹ï¼Œè¿™å’Œä»·æ ¼æ— å…³è€Œæ˜¯ä½¿ç”¨è½¯ä»¶å¯¹æ‰€æœ‰çš„ç”¨æˆ·æ¥è¯´æ˜¯è‡ªç”±çš„ã€‚</p>
<p>é€šè¿‡å¦‚ä¸‹é€”å¾„å®ç°è¿™ä¸€ç›®æ ‡ï¼š</p>
<ol>
<li>å®ƒè¦æ±‚è½¯ä»¶ä»¥æºä»£ç çš„å½¢å¼å‘å¸ƒï¼Œå¹¶è§„å®šä»»ä½•ç”¨æˆ·èƒ½å¤Ÿä»¥æºä»£ç çš„å½¢å¼å°†è½¯ä»¶å¤åˆ¶æˆ–å‘å¸ƒç»™åˆ«çš„ç”¨æˆ·ã€‚</li>
<li>å¦‚æœç”¨æˆ·çš„è½¯ä»¶ä½¿ç”¨äº†å— GPL ä¿æŠ¤çš„ä»»ä½•è½¯ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆè¯¥è½¯ä»¶å°±ç»§æ‰¿äº† GPL è½¯ä»¶ï¼Œå¹¶å› æ­¤è€Œæˆä¸º GPL è½¯ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´å¿…é¡»éšåº”ç”¨ç¨‹åºä¸€èµ·å‘å¸ƒæºä»£ç ã€‚</li>
<li>GPL å¹¶ä¸æ’æ–¥å¯¹è‡ªç”±è½¯ä»¶è¿›è¡Œå•†ä¸šæ€§è´¨çš„åŒ…è£…å’Œå‘è¡Œï¼Œä¹Ÿä¸é™åˆ¶åœ¨è‡ªç”±è½¯ä»¶çš„åŸºç¡€ä¸Šæ‰“åŒ…å‘è¡Œå…¶ä»–éè‡ªç”±è½¯ä»¶ã€‚</li>
</ol>
<p>ç”±äºGPLå¾ˆéš¾è¢«å•†ä¸šè½¯ä»¶æ‰€åº”ç”¨ï¼Œå®ƒè¦æ±‚è°ƒç”¨å®ƒçš„åº“çš„ä»£ç ä¹Ÿå¾—GPLï¼Œå…¨éƒ¨å¼€æ”¾ï¼Œå¹¶ä¸”ä¸€åŒå‘å¸ƒï¼Œä¸èƒ½ç›´æ¥è¿æ¥ã€‚æ‰€ä»¥åæ¥GNUæ¨å‡ºäº†LGPLè®¸å¯è¯</p>
<p>åœ¨GPLä¸LGPLè®¸å¯è¯ä¿æŠ¤ä¸‹å‘å¸ƒæºä»£ç çš„ç»“æœå¾ˆç›¸ä¼¼ï¼Œå¯¹æ—§ä»£ç æ‰€åšçš„ä»»ä½•ä¿®æ”¹å¯¹äºæƒ³çŸ¥é“è¿™äº›ä»£ç çš„äººå¿…é¡»æ˜¯å…¬å¼€çš„ï¼Œå”¯ä¸€çœŸæ­£çš„ä¸åŒä¹‹å¤„åœ¨äºç§äººç‰ˆæƒä»£ç æ˜¯å¦å¯ä»¥ä¸å¼€æ”¾æºä»£ç ç›¸äº’è¿æ¥ï¼ŒLGPLå…è®¸å®ä½“è¿æ¥ç§äººä»£ç åˆ°å¼€æ”¾æºä»£ç ï¼Œå¹¶å¯ä»¥åœ¨ä»»ä½•å½¢å¼ä¸‹å‘å¸ƒè¿™äº›åˆæˆçš„äºŒè¿›åˆ¶ä»£ç ã€‚åªè¦è¿™äº›ä»£ç æ˜¯åŠ¨æ€è¿æ¥çš„å°±æ²¡æœ‰é™åˆ¶ã€‚ï¼ˆä½¿ç”¨åŠ¨æ€é“¾æ¥æ—¶ï¼Œå³ä½¿æ˜¯ç¨‹åºåœ¨è¿è¡Œä¸­è°ƒç”¨å‡½æ•°åº“ä¸­çš„å‡½æ•°æ—¶ï¼Œåº”ç”¨ç¨‹åºæœ¬èº«å’Œå‡½æ•°åº“ä¹Ÿæ˜¯ä¸åŒçš„å®ä½“ï¼‰</p>
<h4 id="è‡ªç”±è½¯ä»¶"><a href="#è‡ªç”±è½¯ä»¶" class="headerlink" title="è‡ªç”±è½¯ä»¶"></a>è‡ªç”±è½¯ä»¶</h4><p>â€œè‡ªç”±è½¯ä»¶â€ æ˜¯æƒåˆ©é—®é¢˜ï¼Œä¸æ˜¯ä»·æ ¼é—®é¢˜ã€‚è¦ç†è§£è¿™ä¸ªæ¦‚å¿µï¼Œè‡ªç”±åº”è¯¥æ˜¯â€œè¨€è®ºè‡ªç”±â€ä¸­çš„â€œè‡ªç”±â€ï¼Œè€Œä¸æ˜¯â€œå…è´¹å•¤é…’â€ä¸­çš„â€œå…è´¹â€ã€‚</p>
<p>è‡ªç”±è½¯ä»¶å…³ä¹ä½¿ç”¨è€…è¿è¡Œã€å¤åˆ¶ã€å‘å¸ƒã€ç ”ç©¶ã€ä¿®æ”¹å’Œæ”¹è¿›è¯¥è½¯ä»¶çš„è‡ªç”±ã€‚ æ›´ç²¾ç¡®åœ°è¯´ï¼Œè‡ªç”±è½¯ä»¶èµ‹äºˆè½¯ä»¶ä½¿ç”¨è€…å››ç§è‡ªç”±ï¼š</p>
<ol>
<li>ä¸è®ºç›®çš„ä¸ºä½•ï¼Œæœ‰è¿è¡Œè¯¥è½¯ä»¶çš„è‡ªç”±ï¼ˆè‡ªç”±ä¹‹é›¶ï¼‰ã€‚</li>
<li>æœ‰ç ”ç©¶è¯¥è½¯ä»¶å¦‚ä½•è¿è¡Œï¼Œä»¥åŠæŒ‰éœ€æ”¹å†™è¯¥è½¯ä»¶çš„è‡ªç”±ï¼ˆè‡ªç”±ä¹‹ä¸€ï¼‰ã€‚å–å¾—è¯¥è½¯ä»¶æºä»£ç ä¸ºè¾¾æˆæ­¤ç›®çš„ä¹‹å‰æã€‚</li>
<li>æœ‰é‡æ–°å‘å¸ƒæ‹·è´çš„è‡ªç”±ï¼Œè¿™æ ·ä½ å¯ä»¥å€Ÿæ­¤æ¥æ•¦äº²ç¦é‚»ï¼ˆè‡ªç”±ä¹‹äºŒï¼‰ã€‚</li>
<li>æœ‰æ”¹è¿›è¯¥è½¯ä»¶ï¼Œä»¥åŠå‘å…¬ä¼—å‘å¸ƒæ”¹è¿›çš„è‡ªç”±ï¼Œè¿™æ ·æ•´ä¸ªç¤¾ç¾¤éƒ½å¯å—æƒ ï¼ˆè‡ªç”±ä¹‹ä¸‰ï¼‰ã€‚å–å¾—è¯¥è½¯ä»¶æºç ä¸ºè¾¾æˆæ­¤ç›®çš„ä¹‹å‰æã€‚</li>
</ol>
<p><img src="pic/006.jpg" alt="004"></p>
<h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><p>Linuxæ˜¯ä¸€å¥—å…è´¹ä½¿ç”¨å’Œè‡ªç”±ä¼ æ’­çš„ç±»Unixæ“ä½œç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªåŸºäºPOSIXå’ŒUNIXçš„å¤šç”¨æˆ·ã€å¤šä»»åŠ¡ã€æ”¯æŒå¤šçº¿ç¨‹å’Œå¤šCPUçš„æ“ä½œç³»ç»Ÿã€‚å®ƒèƒ½è¿è¡Œä¸»è¦çš„UNIXå·¥å…·è½¯ä»¶ã€åº”ç”¨ç¨‹åºå’Œç½‘ç»œåè®®ã€‚å®ƒæ”¯æŒ32ä½å’Œ64ä½ç¡¬ä»¶ã€‚Linuxç»§æ‰¿äº†Unixä»¥ç½‘ç»œä¸ºæ ¸å¿ƒçš„è®¾è®¡æ€æƒ³ï¼Œæ˜¯ä¸€ä¸ªæ€§èƒ½ç¨³å®šçš„å¤šç”¨æˆ·ç½‘ç»œæ“ä½œç³»ç»Ÿã€‚Linuxæ“ä½œç³»ç»Ÿè¯ç”Ÿäº1991 å¹´10 æœˆ5 æ—¥ï¼ˆè¿™æ˜¯ç¬¬ä¸€æ¬¡æ­£å¼å‘å¤–å…¬å¸ƒæ—¶é—´ï¼‰ã€‚Linuxå­˜åœ¨ç€è®¸å¤šä¸åŒçš„Linuxç‰ˆæœ¬ï¼Œä½†å®ƒä»¬éƒ½ä½¿ç”¨äº†Linuxå†…æ ¸ã€‚Linuxå¯å®‰è£…åœ¨å„ç§è®¡ç®—æœºç¡¬ä»¶è®¾å¤‡ä¸­ï¼Œæ¯”å¦‚æ‰‹æœºã€å¹³æ¿ç”µè„‘ã€è·¯ç”±å™¨ã€è§†é¢‘æ¸¸æˆæ§åˆ¶å°ã€å°å¼è®¡ç®—æœºã€å¤§å‹æœºå’Œè¶…çº§è®¡ç®—æœºã€‚</p>
<p>ä¸¥æ ¼æ¥è®²ï¼ŒLinuxè¿™ä¸ªè¯æœ¬èº«åªè¡¨ç¤ºLinuxå†…æ ¸ï¼Œä½†å®é™…ä¸Šäººä»¬å·²ç»ä¹ æƒ¯äº†ç”¨Linuxæ¥å½¢å®¹æ•´ä¸ªåŸºäºLinuxå†…æ ¸ï¼Œå¹¶ä¸”ä½¿ç”¨GNU å·¥ç¨‹å„ç§å·¥å…·å’Œæ•°æ®åº“çš„æ“ä½œç³»ç»Ÿã€‚</p>
<h4 id="Linuxç®€å²"><a href="#Linuxç®€å²" class="headerlink" title="Linuxç®€å²"></a>Linuxç®€å²</h4><p>Linux æ“ä½œç³»ç»Ÿçš„è¯ç”Ÿã€å‘å±•å’Œæˆé•¿è¿‡ç¨‹å§‹ç»ˆä¾èµ–ç€äº”ä¸ªé‡è¦æ”¯æŸ±ï¼šUNIX æ“ä½œç³»ç»Ÿã€MINIX æ“ä½œç³»ç»Ÿã€GNUè®¡åˆ’ã€POSIX æ ‡å‡†å’ŒInternet ç½‘ç»œã€‚</p>
<p>1981 å¹´IBMå…¬å¸æ¨å‡ºå¾®å‹è®¡ç®—æœºIBM PCã€‚</p>
<p>1991å¹´ï¼ŒGNUè®¡åˆ’å·²ç»å¼€å‘å‡ºäº†è®¸å¤šå·¥å…·è½¯ä»¶ï¼Œæœ€å—æœŸç›¼çš„GNU Cç¼–è¯‘å™¨å·²ç»å‡ºç°ï¼ŒGNUçš„æ“ä½œç³»ç»Ÿæ ¸å¿ƒHURDä¸€ç›´å¤„äºå®éªŒé˜¶æ®µï¼Œæ²¡æœ‰ä»»ä½•å¯ç”¨æ€§ï¼Œå®è´¨ä¸Šä¹Ÿæ²¡èƒ½å¼€å‘å‡ºå®Œæ•´çš„GNUæ“ä½œç³»ç»Ÿï¼Œä½†æ˜¯GNUå¥ å®šäº†Linuxç”¨æˆ·åŸºç¡€å’Œå¼€å‘ç¯å¢ƒã€‚</p>
<p>1991å¹´åˆï¼Œæ—çº³æ–¯Â·æ‰˜ç“¦å…¹å¼€å§‹åœ¨ä¸€å°386sxå…¼å®¹å¾®æœºä¸Šå­¦ä¹ minixæ“ä½œç³»ç»Ÿã€‚1991å¹´4æœˆï¼Œæ—çº³æ–¯Â·æ‰˜ç“¦å…¹å¼€å§‹é…é…¿å¹¶ç€æ‰‹ç¼–åˆ¶è‡ªå·±çš„æ“ä½œç³»ç»Ÿã€‚</p>
<p>1991 å¹´4 æœˆ13 æ—¥åœ¨comp.os.minix ä¸Šå‘å¸ƒè¯´è‡ªå·±å·²ç»æˆåŠŸåœ°å°†bash ç§»æ¤åˆ°äº†minix ä¸Šï¼Œè€Œä¸”å·²ç»çˆ±ä¸é‡Šæ‰‹ã€ä¸èƒ½ç¦»å¼€è¿™ä¸ªshell è½¯ä»¶äº†ã€‚</p>
<p>1991å¹´7æœˆ3æ—¥ï¼Œç¬¬ä¸€ä¸ªä¸Linuxæœ‰å…³çš„æ¶ˆæ¯æ˜¯åœ¨comp.os.minixä¸Šå‘å¸ƒçš„ï¼ˆå½“ç„¶æ­¤æ—¶è¿˜ä¸å­˜åœ¨Linuxè¿™ä¸ªåç§°ï¼Œå½“æ—¶æ—çº³æ–¯Â·æ‰˜ç“¦å…¹çš„è„‘å­é‡Œæƒ³çš„å¯èƒ½æ˜¯FREAXï¼ŒFREAXçš„è‹±æ–‡å«ä¹‰æ˜¯æ€ªè¯çš„ã€æ€ªç‰©ã€å¼‚æƒ³å¤©å¼€ç­‰ï¼‰ã€‚</p>
<p>1991å¹´çš„10æœˆ5æ—¥ï¼Œæ—çº³æ–¯Â·æ‰˜ç“¦å…¹åœ¨comp.os.minixæ–°é—»ç»„ä¸Šå‘å¸ƒæ¶ˆæ¯ï¼Œæ­£å¼å‘å¤–å®£å¸ƒLinuxå†…æ ¸çš„è¯ç”Ÿï¼ˆFreeminix-like kernel sources for 386-ATï¼‰ã€‚</p>
<p>1993å¹´ï¼Œå¤§çº¦æœ‰100ä½™åç¨‹åºå‘˜å‚ä¸äº†Linuxå†…æ ¸ä»£ç ç¼–å†™/ä¿®æ”¹å·¥ä½œï¼Œå…¶ä¸­æ ¸å¿ƒç»„ç”±5äººç»„æˆï¼Œæ­¤æ—¶Linux 0.99çš„ä»£ç å¤§çº¦æœ‰åä¸‡è¡Œï¼Œç”¨æˆ·å¤§çº¦æœ‰10ä¸‡å·¦å³ã€‚</p>
<p>1994å¹´3æœˆï¼ŒLinux1.0å‘å¸ƒï¼Œä»£ç é‡17ä¸‡è¡Œï¼Œå½“æ—¶æ˜¯æŒ‰ç…§å®Œå…¨è‡ªç”±å…è´¹çš„åè®®å‘å¸ƒï¼Œéšåæ­£å¼é‡‡ç”¨GPLåè®®ã€‚</p>
<p>1995å¹´1æœˆï¼ŒBob Youngåˆ›åŠäº†RedHatï¼ˆå°çº¢å¸½ï¼‰ï¼Œä»¥GNU/Linuxä¸ºæ ¸å¿ƒï¼Œé›†æˆäº†400å¤šä¸ªæºä»£ç å¼€æ”¾çš„ç¨‹åºæ¨¡å—ï¼Œæå‡ºäº†ä¸€ç§å† ä»¥å“ç‰Œçš„Linuxï¼Œå³RedHat Linux,ç§°ä¸ºLinuxâ€å‘è¡Œç‰ˆâ€ï¼Œåœ¨å¸‚åœºä¸Šå‡ºå”®ã€‚è¿™åœ¨ç»è¥æ¨¡å¼ä¸Šæ˜¯ä¸€ç§åˆ›ä¸¾ã€‚</p>
<p>1996å¹´6æœˆï¼ŒLinux 2.0å†…æ ¸å‘å¸ƒï¼Œæ­¤å†…æ ¸æœ‰å¤§çº¦40ä¸‡è¡Œä»£ç ï¼Œå¹¶å¯ä»¥æ”¯æŒå¤šä¸ªå¤„ç†å™¨ã€‚æ­¤æ—¶çš„Linuxå·²ç»è¿›å…¥äº†å®ç”¨é˜¶æ®µï¼Œå…¨çƒå¤§çº¦æœ‰350ä¸‡äººä½¿ç”¨ã€‚</p>
<p>1998å¹´2æœˆï¼Œä»¥Eric Raymondä¸ºé¦–çš„ä¸€æ‰¹å¹´è½»çš„â€è€ç‰›ç¾šéª¨å¹²åˆ†å­â€ç»ˆäºè®¤è¯†åˆ°GNU/Linuxä½“ç³»çš„äº§ä¸šåŒ–é“è·¯çš„æœ¬è´¨ï¼Œå¹¶éæ˜¯ä»€ä¹ˆè‡ªç”±å“²å­¦ï¼Œè€Œæ˜¯å¸‚åœºç«äº‰çš„é©±åŠ¨ï¼Œåˆ›åŠäº†â€Open Source Intiativeâ€ï¼ˆå¼€æ”¾æºä»£ç ä¿ƒè¿›ä¼šï¼‰â€å¤å…´â€çš„å¤§æ——ï¼Œåœ¨äº’è”ç½‘ä¸–ç•Œé‡Œå±•å¼€äº†ä¸€åœºå†å²æ€§çš„Linuxäº§ä¸šåŒ–è¿åŠ¨ã€‚</p>
<p>2001å¹´1æœˆï¼ŒLinux 2.4å‘å¸ƒï¼Œå®ƒè¿›ä¸€æ­¥åœ°æå‡äº†SMPç³»ç»Ÿçš„æ‰©å±•æ€§ï¼ŒåŒæ—¶å®ƒä¹Ÿé›†æˆäº†å¾ˆå¤šç”¨äºæ”¯æŒæ¡Œé¢ç³»ç»Ÿçš„ç‰¹æ€§ï¼šUSBï¼ŒPCå¡ï¼ˆPCMCIAï¼‰çš„æ”¯æŒï¼Œå†…ç½®çš„å³æ’å³ç”¨ï¼Œç­‰ç­‰åŠŸèƒ½ã€‚</p>
<p>2003å¹´12æœˆï¼ŒLinux 2.6ç‰ˆå†…æ ¸å‘å¸ƒï¼Œç›¸å¯¹äº2.4ç‰ˆå†…æ ¸2.6åœ¨å¯¹ç³»ç»Ÿçš„æ”¯æŒéƒ½æœ‰å¾ˆå¤§çš„å˜åŒ–ã€‚</p>
<p>2004å¹´çš„ç¬¬1æœˆï¼ŒSuSEå«åˆ°äº†Novellï¼ŒSCOç»§ç»­é¡¶ç€éª‚åå››å¤„å¼ºè¡Œâ€œåŒ–ç¼˜â€ï¼Œ Asianuxï¼ŒMandrakeSoftä¹Ÿåœ¨äº”å¹´ä¸­é¦–æ¬¡å®£å¸ƒå­£åº¦èµ¢åˆ©ã€‚3æœˆï¼ŒSGIå®£å¸ƒæˆåŠŸå®ç°äº†Linuxæ“ä½œç³»ç»Ÿæ”¯æŒ256ä¸ªItanium 2å¤„ç†å™¨ã€‚</p>
<p><img src="pic/004.jpg" alt="005"></p>
<p><img src="pic/005.jpg" alt="006"></p>
]]></content>
      <categories>
        <category>æŠ€æœ¯åŸ¹è®­</category>
        <category>Linuxç³»ç»ŸåŸºç¡€åŸ¹è®­</category>
      </categories>
      <tags>
        <tag>åŸ¹è®­</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux åŸºç¡€å‘½ä»¤</title>
    <url>/2016/12/22/booboo_linux_base/01-Linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<ul>
<li><p>åœ¨æ•™å®¤ç‰©ç†æœºåŒ…æ‹¬rhel7å’Œrhel6ä¸¤å°å®éªŒè™šæ‹Ÿæœºï¼Œä¸Šæ‰“å¼€è™šæ‹Ÿæœºå‘½ä»¤: <em>rht-vmctl start rhel7</em> </p>
<ul>
<li>åœ¨ç‰©ç†æœºä¸Šè¿œç¨‹ç™»é™†åˆ°è™šæ‹Ÿæœºrhel7 <em>ssh root@rhel7-fN</em> ï¼Œ<em>N</em> ä¸ºä½ çš„æœºå™¨ç¼–å·ï¼Œ <em>root</em>å¯†ç éƒ½æ˜¯<em>uplooking</em>ï¼Œç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªæ™®é€šç”¨æˆ·<em>student</em>ï¼Œå…¶å¯†ç ä¸º<em>student</em>ã€‚</li>
<li>åœ¨è™šæ‹Ÿæœºä¸­å…³é—­è™šæ‹Ÿæœºçš„å‘½ä»¤ä¸º<em>shutdown -h now</em>ï¼Œä¹Ÿå¯ä»¥åœ¨ç‰©ç†æœºä¸Šæ‰§è¡Œ<em>rht-vmctl poweroff rhel7</em>ã€‚</li>
</ul>
</li>
<li><p>åœ¨ç‰©ç†æœºä¸Šè®¾ç½®å½•å±è§†é¢‘ï¼Œç”±äºGnome3çš„bugä¼šæœ‰30ç§’æ—¶é—´é™åˆ¶ï¼Œä¿®æ­£æ—¶é—´é™åˆ¶çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[kiosk@fundation0 ~]$ gsettings set org.gnome.settings-daemon.plugins.media-keys max-screencast-length "uint32 0"</span><br></pre></td></tr></table></figure>

<h2 id="å‘½ä»¤ç®€ä»‹"><a href="#å‘½ä»¤ç®€ä»‹" class="headerlink" title="å‘½ä»¤ç®€ä»‹"></a>å‘½ä»¤ç®€ä»‹</h2><h3 id="å‘½ä»¤çš„æ„æˆ"><a href="#å‘½ä»¤çš„æ„æˆ" class="headerlink" title="å‘½ä»¤çš„æ„æˆ"></a>å‘½ä»¤çš„æ„æˆ</h3><p>å‘½ä»¤å­— é€‰é¡¹ å‚æ•°</p>
<ul>
<li>å‘½ä»¤åˆ†:å†…éƒ¨å‘½ä»¤ã€å¤–éƒ¨å‘½ä»¤;</li>
<li>é€‰é¡¹: - å•ä¸ªå­—ç¬¦ â€“ å¤šä¸ªå­—ç¬¦</li>
<li>å‚æ•°:å¯¹è°æ‰§è¡Œè¿™ä¸ªå‘½ä»¤,å¯ä»¥æœ‰å¤šä¸ª,é€‰é¡¹å’Œå‚æ•°å¯ä»¥äº’æ¢ä½ç½®</li>
</ul>
<h3 id="å‘½ä»¤ä½¿ç”¨çš„åŸå› "><a href="#å‘½ä»¤ä½¿ç”¨çš„åŸå› " class="headerlink" title="å‘½ä»¤ä½¿ç”¨çš„åŸå› "></a>å‘½ä»¤ä½¿ç”¨çš„åŸå› </h3><p>Shellæ˜¯ç³»ç»Ÿçš„ç”¨æˆ·ç•Œé¢ï¼Œæä¾›äº†ç”¨æˆ·ä¸å†…æ ¸è¿›è¡Œäº¤äº’æ“ä½œçš„ä¸€ç§æ¥å£ã€‚å®ƒæ¥æ”¶ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤å¹¶æŠŠå®ƒé€å…¥å†…æ ¸å»æ‰§è¡Œã€‚å®é™…ä¸ŠShellæ˜¯ä¸€ä¸ªå‘½ä»¤è§£é‡Šå™¨ï¼Œå®ƒè§£é‡Šç”±ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤å¹¶ä¸”æŠŠå®ƒä»¬é€åˆ°å†…æ ¸ã€‚ä»è¿™é‡Œå¼€å§‹å­¦ä¹ Linuxå‘½ä»¤ï¼Œæœ¬è¯¾ç¨‹è®©ä½ æ›´æ¸…æ¥šåœ°äº†è§£å’ŒæŒæ¡å®ƒï¼Œåœ¨Linuxä¸­å‘½ä»¤æ˜¯è®²ç©¶å¤§å°å†™çš„ã€‚ä½¿ç”¨å‘½ä»¤å³å¿«é€Ÿåˆèƒ½å‡å°‘æœºå™¨çš„æ€§èƒ½æ¶ˆè€—ã€‚</p>
<h3 id="å‘½ä»¤æç¤ºç¬¦"><a href="#å‘½ä»¤æç¤ºç¬¦" class="headerlink" title="å‘½ä»¤æç¤ºç¬¦"></a>å‘½ä»¤æç¤ºç¬¦</h3><ul>
<li># root ç”¨æˆ·</li>
<li>$ ä¸€èˆ¬ç”¨æˆ·</li>
<li>[ ç”¨æˆ·çš„èº«ä»½ @ ä¸»æœºå å½“å‰ä½ç½® ]</li>
</ul>
<p>å½“å‰ä½ç½®æ˜¾ç¤ºçš„æ˜¯ç›®å½•å</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# hostname</span><br><span class="line">www.dabao.com</span><br><span class="line">[root@rhel7 ~]# groupadd tom</span><br><span class="line">[root@rhel7 ~]# useradd -g tom tom</span><br><span class="line">[root@rhel7 ~]# id tom</span><br><span class="line">uid=501(tom) gid=501(tom) groups=501(tom)</span><br><span class="line">[root@rhel7 ~]# su - tom</span><br><span class="line">[tom@rhel7 ~]$ who</span><br><span class="line">root tty1</span><br><span class="line">2016-03-20 23:56 (:0)</span><br><span class="line">root pts/0</span><br><span class="line">2016-03-21 00:39 (:0.0)</span><br></pre></td></tr></table></figure>

<h2 id="å¸¸ç”¨çš„å‘½ä»¤"><a href="#å¸¸ç”¨çš„å‘½ä»¤" class="headerlink" title="å¸¸ç”¨çš„å‘½ä»¤"></a>å¸¸ç”¨çš„å‘½ä»¤</h2><h3 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h3><table>
<thead>
<tr>
<th align="left">å¸¸ç”¨å‚æ•°</th>
<th align="left">å«ä¹‰åŠç”¨æ³•</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-l</td>
<td align="left">long çš„ç¼©å†™ è¯¦ç»†åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å±æ€§     ä¸ƒåˆ— æ–‡ä»¶å &lt;=255 ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td align="left">-d</td>
<td align="left">directory çš„ç¼©å†™ æŸ¥çœ‹å½“å‰ç›®å½•æœ¬èº«çš„ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">ä»¥äººæ€§åŒ–çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶å¤§å°,å½•çš„å¤§å°å¹¶ä¸ä»£è¡¨ç›®å½•å†…æ‰€æœ‰æ–‡ä»¶çš„å¤§å° du -sh /etc&lt;== æŸ¥çœ‹ etc ç›®å½•çœŸæ­£çš„å¤§å°</td>
</tr>
<tr>
<td align="left">-a</td>
<td align="left">æŸ¥çœ‹éšè—æ–‡ä»¶ ä»¥ . å¼€å¤´çš„æ–‡ä»¶</td>
</tr>
<tr>
<td align="left">-R</td>
<td align="left">æŸ¥çœ‹å¤šå±‚ç›®å½•</td>
</tr>
<tr>
<td align="left">-b</td>
<td align="left">ç‰¹æ®Šå­—ç¬¦å°†ä»¥ \ åˆ†å‰² ls æŸ¥çœ‹æœ‰ç‰¹æ®Šå­—ç¬¦çš„æ–‡ä»¶</td>
</tr>
</tbody></table>
<h4 id="lså®éªŒ"><a href="#lså®éªŒ" class="headerlink" title="lså®éªŒ"></a>lså®éªŒ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[tom@rhel7 tmp]$ ls -hl</span><br><span class="line">total 68K</span><br><span class="line">srwxr-xr-x. 1 root root 0 Mar 20 23:59 gedit.root.3177893063</span><br><span class="line">drwx------. 2 root root 4.0K Feb 5 18:24 keyring-JL7MKY</span><br><span class="line">[tom@rhel7 tmp]$ ls -ld /tmp</span><br><span class="line">drwxrwxrwt. 22 root root 4096 Mar 21 00:43 /tmp</span><br><span class="line">[tom@rhel7 tmp]$ ls -la /tmp</span><br><span class="line">total 96</span><br><span class="line">drwxrwxrwt. 22 root root 4096 Mar 21 00:43 .</span><br><span class="line">dr-xr-xr-x. 29 root root 4096 Mar 20 23:55 ..</span><br><span class="line">drwx------. 2 root root 4096 Mar 20 23:56 .esd-0</span><br><span class="line">drwx------. 2 cong cong 4096 Jan 1 18:33 .esd-500</span><br><span class="line">[tom@rhel7 tmp]$ ls -bl</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 Mar 21 00:48 a\ b.txt</span><br><span class="line">[tom@rhel7 tmp]$ ls -l</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 Mar 21 00:48 a b.txt</span><br><span class="line">[tom@rhel7 tmp]$ mkdir -p a/b/c</span><br><span class="line">[tom@rhel7 tmp]$ ls -lR a/</span><br><span class="line">a/:</span><br><span class="line">total 4</span><br><span class="line">drwxrwxr-x. 3 tom tom 4096 Mar 21 00:50 b</span><br><span class="line">a/b:</span><br><span class="line">total 4</span><br><span class="line">drwxrwxr-x. 2 tom tom 4096 Mar 21 00:50 c</span><br><span class="line">a/b/c:</span><br><span class="line">total 0</span><br></pre></td></tr></table></figure>

<h3 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h3><table>
<thead>
<tr>
<th align="left">cd</th>
<th align="left">change directory åˆ‡æ¢å·¥ä½œç›®å½•</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ç»å¯¹è·¯å¾„</td>
<td align="left">ä»¥æ ¹ä¸ºèµ·å§‹çš„è·¯å¾„</td>
</tr>
<tr>
<td align="left">ç›¸å¯¹è·¯å¾„</td>
<td align="left">~å½“å‰ç”¨æˆ·çš„å®¶ç›®å½• ;. å½“å‰ç›®å½• ;.. ä¸Šä¸€å±‚ç”¨æˆ· ;- å›åˆ°ä¸Šä¸€æ¬¡æ‰€åœ¨ä½ç½®</td>
</tr>
</tbody></table>
<h4 id="cdå®éªŒ"><a href="#cdå®éªŒ" class="headerlink" title="cdå®éªŒ"></a>cdå®éªŒ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[tom@rhel7 tmp]$ cd /etc/</span><br><span class="line">[tom@rhel7 etc]$ cd ~</span><br><span class="line">[tom@rhel7 ~]$ cd .</span><br><span class="line">[tom@rhel7  ~]$ cd ..</span><br><span class="line">[tom@rhel7  home]$ cd -</span><br><span class="line">/home/tom</span><br></pre></td></tr></table></figure>

<h3 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h3><p>pwd:print working directory æ˜¾ç¤ºå½“å‰æ‰€åœ¨ä½ç½®çš„ç»å¯¹è·¯å¾„</p>
<h4 id="pwdå®éªŒ"><a href="#pwdå®éªŒ" class="headerlink" title="pwdå®éªŒ"></a>pwdå®éªŒ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[tom@rhel7 tmp]$ cd /etc/nginx</span><br><span class="line">[tom@rhel7 nginx]$ cd conf.d</span><br><span class="line">[tom@rhel7 conf.d]$ pwd</span><br><span class="line">/etc/nginx/conf.d</span><br></pre></td></tr></table></figure>

<h2 id="ç¬¦å·"><a href="#ç¬¦å·" class="headerlink" title="ç¬¦å·"></a>ç¬¦å·</h2><h3 id="é€šé…ç¬¦"><a href="#é€šé…ç¬¦" class="headerlink" title="é€šé…ç¬¦ *"></a>é€šé…ç¬¦ *</h3><p>åŒ¹é…ä»»æ„å¤šä¸ªå­—ç¬¦</p>
<p>ä¾‹å¦‚ï¼ša* åŒ…æ‹¬aa*ã€ab*ã€ac* ç­‰ç­‰ </p>
<h3 id="é€šé…ç¬¦-1"><a href="#é€šé…ç¬¦-1" class="headerlink" title="é€šé…ç¬¦ ?"></a>é€šé…ç¬¦ ?</h3><p>åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦<br>ä¾‹å¦‚ï¼š a? å¯ä»¥æ˜¯abã€acã€adã€a1ã€a9ã€a#ç­‰ç­‰</p>
<h4 id="ï¼Ÿå®éªŒ"><a href="#ï¼Ÿå®éªŒ" class="headerlink" title="*ï¼Ÿå®éªŒ"></a>*ï¼Ÿå®éªŒ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rm -f *1</span><br><span class="line">rm -f 1*</span><br><span class="line">rm -f 1*1</span><br><span class="line">rm -f test?</span><br><span class="line">æƒ³åˆ é™¤ test åé¢æœ‰ä¸€ä¸ªå­—ç¬¦çš„æ–‡ä»¶</span><br></pre></td></tr></table></figure>

<h3 id="ç®¡é“"><a href="#ç®¡é“" class="headerlink" title="| ç®¡é“"></a>| ç®¡é“</h3><p>output | input</p>
<p>å¯¹æŸäº›å‘½ä»¤æ‰§è¡Œçš„ç»“æœå»ä½œæ“ä½œ,ä¼šç”¨åˆ°ç®¡é“ï¼›ç”¨äºå‘½ä»¤ä¸å‘½ä»¤ä¹‹é—´çš„è¿æ¥ï¼Œå‰ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºæ˜¯åä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥</p>
<h4 id="ç®¡é“å®éªŒ"><a href="#ç®¡é“å®éªŒ" class="headerlink" title="| ç®¡é“å®éªŒ"></a>| ç®¡é“å®éªŒ</h4><p>è¯¦ç»†åˆ—å‡º /tmp ç›®å½•ä¸‹çš„æ–‡ä»¶,å¹¶æˆªå–ä»¥ç©ºæ ¼ä¸ºåˆ†å‰²çš„ç¬¬ä¸‰åˆ—</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[tom@rhel7 ~]$ ls -l /tmp|cut -d" " -f3</span><br><span class="line">tom</span><br><span class="line">tom</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">root</span><br><span class="line">è¯¦ç»†åˆ—å‡º /tmp ç›®å½•ä¸‹çš„æ–‡ä»¶,æˆªå–å«æœ‰å…³é”®å­— tom çš„è¡Œ,å†æˆªå–ä»¥ç©ºæ ¼ä¸ºåˆ†å‰²çš„ç¬¬ä¸€åˆ—å†…å®¹</span><br><span class="line">[tom@rhel7 ~]$ ls -l /tmp|grep tom|cut -d" " -f1</span><br><span class="line">drwxrwxr-x.</span><br><span class="line">-rw-rw-r--.</span><br></pre></td></tr></table></figure>

<h2 id="é’ˆå¯¹æ–‡ä»¶çš„çš„åŸºæœ¬æ“ä½œ"><a href="#é’ˆå¯¹æ–‡ä»¶çš„çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="é’ˆå¯¹æ–‡ä»¶çš„çš„åŸºæœ¬æ“ä½œ"></a>é’ˆå¯¹æ–‡ä»¶çš„çš„åŸºæœ¬æ“ä½œ</h2><h3 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h3><p>touch [filename] </p>
<p>åˆ›å»ºæ–‡ä»¶,å‚æ•°å¯ä»¥è·Ÿå¤šä¸ª</p>
<p>å¦‚æœè¦åˆ›å»º 50 ä¸ªæœ‰è§„å¾‹çš„æ–‡ä»¶,ä¾‹å¦‚ text1-text50</p>
<p>åˆ©ç”¨å‚æ•°æ‰©å±•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">touch test&#123;1..50&#125;</span><br><span class="line">touch test&#123;a..e&#125;</span><br><span class="line">touch test&#123;a..e&#125;_&#123;1..3&#125;---&gt; ä¼šåˆ›å»º a_1 a_2 a_3...</span><br></pre></td></tr></table></figure>

<p>ä¸Šå¸ä¹‹æ‰‹,æœ¬æ¥æ˜¯ç”¨æ¥ä¿®æ”¹æ–‡ä»¶æ—¶é—´æˆ³çš„ã€‚æ–‡ä»¶çš„ä¸‰ä¸ªæ—¶é—´ ctime\mtime\atime</p>
<p>æ‹“å±•å†…å®¹ï¼šå¯ä»¥é€šè¿‡â€œstatâ€å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶çš„ä¸‰ä¸ªæ—¶é—´</p>
<p>touch â€œ â€œ å¯ä»¥æ”¾ä¸€äº›ç‰¹æ®Šå­—ç¬¦</p>
<h4 id="touchå®éªŒ"><a href="#touchå®éªŒ" class="headerlink" title="touchå®éªŒ"></a>touchå®éªŒ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[tom@rhel7 ~]$ touch test&#123;a..c&#125;_&#123;1..4&#125;</span><br><span class="line">[tom@rhel7 ~]$ ls</span><br><span class="line">testa_1 testa_4 testb_3 testc_2</span><br><span class="line">testa_2 testb_1 testb_4 testc_3</span><br><span class="line">testa_3 testb_2 testc_1 testc_4</span><br><span class="line"></span><br><span class="line">--full-timeå¯ä»¥æŸ¥çœ‹mtimeçš„å®Œæ•´æ—¶é—´</span><br><span class="line"></span><br><span class="line">[tom@rhel7 ~]$ ls -l --full-time</span><br><span class="line">total 0</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 2016-03-21 01:31:22.853039590 +0800 testa_1</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 2016-03-21 01:31:22.853039590 +0800 testa_2</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 2016-03-21 01:31:22.853039590 +0800 testa_3</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 2016-03-21 01:31:22.853039590 +0800 testa_4</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 2016-03-21 01:31:22.853039590 +0800 testb_1</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 2016-03-21 01:31:22.853039590 +0800 testb_2</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 2016-03-21 01:31:22.853039590 +0800 testb_3</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 2016-03-21 01:31:22.853039590 +0800 testb_4</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 2016-03-21 01:31:22.854039544 +0800 testc_1</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 2016-03-21 01:31:22.854039544 +0800 testc_2</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 2016-03-21 01:31:22.854039544 +0800 testc_3</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 2016-03-21 01:31:22.854039544 +0800 testc_4</span><br><span class="line"></span><br><span class="line">[tom@rhel7 ~]$ touch "ab cd"</span><br><span class="line"></span><br><span class="line">[tom@rhel7 ~]$ ls -b</span><br><span class="line">ab\ \ \ cd testa_3 testb_2 testc_1 testc_4</span><br><span class="line">testa_1 testa_4 testb_3 testc_2</span><br><span class="line">testa_2 testb_1 testb_4 testc_3</span><br></pre></td></tr></table></figure>

<h4 id="touchæ‹“å±•å®éªŒ"><a href="#touchæ‹“å±•å®éªŒ" class="headerlink" title="touchæ‹“å±•å®éªŒ"></a>touchæ‹“å±•å®éªŒ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[booboo@rhel7 ~]$ touch booboo</span><br><span class="line">[booboo@rhel7 ~]$ ll</span><br><span class="line">total 0</span><br><span class="line">-rw-rw-r--. 1 booboo booboo 0 Jun 15 23:28 booboo</span><br><span class="line">[booboo@rhel7 ~]$ stat booboo</span><br><span class="line">  File: â€˜boobooâ€™</span><br><span class="line">  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file</span><br><span class="line">Device: fd01h/64769d	Inode: 143         Links: 1</span><br><span class="line">Access: (0664/-rw-rw-r--)  Uid: ( 1001/  booboo)   Gid: ( 1001/  booboo)</span><br><span class="line">Context: unconfined_u:object_r:user_home_t:s0</span><br><span class="line">Access: 2016-06-15 23:28:55.041578819 -0400     #atime æ–‡ä»¶æœ€è¿‘ä¸€æ¬¡è¢«è®¿é—®çš„æ—¶é—´</span><br><span class="line">Modify: 2016-06-15 23:28:55.041578819 -0400    #mtime æ–‡ä»¶å†…å®¹æœ€è¿‘ä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´</span><br><span class="line">Change: 2016-06-15 23:28:55.041578819 -0400    #ctime æ–‡ä»¶å±æ€§æœ€è¿‘ä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´</span><br><span class="line"> Birth: -</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨catå»è®¿é—®boobooæ–‡ä»¶ï¼Œå¯ä»¥å‘ç°atimeè¢«ä¿®æ”¹äº†</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[booboo@rhel7 ~]$ cat booboo</span><br><span class="line">[booboo@rhel7 ~]$ stat booboo</span><br><span class="line">  File: â€˜boobooâ€™</span><br><span class="line">  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file</span><br><span class="line">Device: fd01h/64769d	Inode: 143         Links: 1</span><br><span class="line">Access: (0664/-rw-rw-r--)  Uid: ( 1001/  booboo)   Gid: ( 1001/  booboo)</span><br><span class="line">Context: unconfined_u:object_r:user_home_t:s0</span><br><span class="line">Access: 2016-06-15 23:32:35.898724748 -0400</span><br><span class="line">Modify: 2016-06-15 23:28:55.041578819 -0400</span><br><span class="line">Change: 2016-06-15 23:28:55.041578819 -0400</span><br><span class="line"> Birth: -</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡chmodä¿®æ”¹æ–‡ä»¶æƒé™åï¼Œä¼šçœ‹åˆ°ctimeæ—¶é—´æ”¹å˜ï¼Œé€šè¿‡llå‘½ä»¤çœ‹åˆ°çš„æ—¶é—´ä¸ºmtime</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[booboo@rhel7 ~]$ chmod 777 booboo</span><br><span class="line">[booboo@rhel7 ~]$ ll</span><br><span class="line">total 0</span><br><span class="line">-rwxrwxrwx. 1 booboo booboo 0 Jun 15 23:28 booboo  </span><br><span class="line">[booboo@rhel7 ~]$ stat booboo</span><br><span class="line">  File: â€˜boobooâ€™</span><br><span class="line">  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file</span><br><span class="line">Device: fd01h/64769d	Inode: 143         Links: 1</span><br><span class="line">Access: (0777/-rwxrwxrwx)  Uid: ( 1001/  booboo)   Gid: ( 1001/  booboo)</span><br><span class="line">Context: unconfined_u:object_r:user_home_t:s0</span><br><span class="line">Access: 2016-06-15 23:32:35.898724748 -0400</span><br><span class="line">Modify: 2016-06-15 23:28:55.041578819 -0400</span><br><span class="line">Change: 2016-06-15 23:33:49.195445761 -0400</span><br><span class="line"> Birth: -</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡echoå‘½ä»¤å‘boobooæ–‡ä»¶è¿½åŠ ä¸€äº›å†…å®¹ï¼Œä¼šçœ‹åˆ°mtimeæ—¶é—´å˜äº†ï¼Œå¹¶ä¸”ctimeä¹Ÿå˜äº†ï¼Œæ€è€ƒä¸ºä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[booboo@rhel7 ~]$ echo hi &gt;&gt; booboo</span><br><span class="line">[booboo@rhel7 ~]$ ll</span><br><span class="line">total 4</span><br><span class="line">-rwxrwxrwx. 1 booboo booboo 3 Jun 15 23:34 booboo</span><br><span class="line">[booboo@rhel7 ~]$ stat booboo</span><br><span class="line">  File: â€˜boobooâ€™</span><br><span class="line">  Size: 3         	Blocks: 8          IO Block: 4096   regular file</span><br><span class="line">Device: fd01h/64769d	Inode: 143         Links: 1</span><br><span class="line">Access: (0777/-rwxrwxrwx)  Uid: ( 1001/  booboo)   Gid: ( 1001/  booboo)</span><br><span class="line">Context: unconfined_u:object_r:user_home_t:s0</span><br><span class="line">Access: 2016-06-15 23:32:35.898724748 -0400</span><br><span class="line">Modify: 2016-06-15 23:34:53.251332183 -0400</span><br><span class="line">Change: 2016-06-15 23:34:53.251332183 -0400</span><br><span class="line"> Birth: -</span><br></pre></td></tr></table></figure>

<h3 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h3><table>
<thead>
<tr>
<th align="left">rm</th>
<th align="left">[filename] remove åˆ é™¤æ–‡ä»¶,å¯¹ root ç”¨æˆ·æœ‰æç¤º,æ™®é€šç”¨æˆ·æ²¡æœ‰æç¤º</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-f</td>
<td align="left">force å¼ºåˆ¶åˆ é™¤, root æ— æç¤º</td>
</tr>
<tr>
<td align="left">-i</td>
<td align="left">æ™®é€šç”¨æˆ·æœ‰æç¤ºçš„åˆ é™¤</td>
</tr>
<tr>
<td align="left">-r</td>
<td align="left">é€’å½’åˆ é™¤,æ…é‡ä½¿ç”¨ -rf</td>
</tr>
</tbody></table>
<h4 id="rmå®éªŒ"><a href="#rmå®éªŒ" class="headerlink" title="rmå®éªŒ"></a>rmå®éªŒ</h4><p>æ™®é€šç”¨æˆ· tom</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[tom@rhel7 ~]$ rm testa_1</span><br><span class="line">[tom@rhel7 ~]$ rm -i testa_2</span><br><span class="line">rm: remove regular empty file `testa_2'? Y</span><br></pre></td></tr></table></figure>

<p>root ç”¨æˆ·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# rm a.test</span><br><span class="line">rm: remove regular empty file `a.test'? Y</span><br><span class="line">[root@rhel7 ~]# rm -f b.test</span><br></pre></td></tr></table></figure>

<p>æ™®é€šç”¨æˆ· tom</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[tom@rhel7 ~]$ mkdir -p a/b/c</span><br><span class="line">[tom@rhel7 ~]$ rm a/</span><br><span class="line">rm: cannot remove `a/': Is a directory</span><br><span class="line">[tom@rhel7 ~]$ rm -r a/</span><br></pre></td></tr></table></figure>

<h3 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h3><p>mkdir:make directory åˆ›å»ºç›®å½•</p>
<p><code>mkdir -p /test/test1</code></p>
<p>é€’å½’åˆ›å»ºç›®å½•</p>
<p><code>mkdir {a..e}</code></p>
<p>åˆ›å»º a-e çš„ç›®å½•</p>
<p><code>touch {a..e}/file{1..4}</code></p>
<p> åœ¨ a-e çš„ç›®å½•ä¸‹æ–°å»º file1-file4 æ–‡ä»¶</p>
<h4 id="mkdirå®éªŒ"><a href="#mkdirå®éªŒ" class="headerlink" title="mkdirå®éªŒ"></a>mkdirå®éªŒ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[tom@rhel7 ~]$ mkdir -p test/test1</span><br><span class="line">[tom@rhel7 ~]$ ls</span><br><span class="line">ab cd testa_3 testb_2 testc_1 testc_4</span><br><span class="line">p        testa_4 testb_3 testc_2</span><br><span class="line">test    testb_1 testb_4 testc_3</span><br><span class="line">[tom@rhel7 ~]$ mkdir &#123;a..f&#125;</span><br><span class="line">[tom@rhel7 ~]$ ls</span><br><span class="line">a d test testb_2 testc_2</span><br><span class="line">ab cd e testa_3 testb_3 testc_3</span><br><span class="line">b f testa_4 testb_4 testc_4 c p testb_1 testc_1</span><br><span class="line">[tom@rhel7 ~]$ touch &#123;a..f&#125;/file&#123;1..4&#125;</span><br><span class="line">[tom@rhel7 ~]$ ls</span><br><span class="line">a d test testb_2 testc_2</span><br><span class="line">ab cd e testa_3 testb_3 testc_3</span><br><span class="line">b f testa_4 testb_4 testc_4 c p testb_1 testc_1</span><br><span class="line">[tom@rhel7 ~]$ ls -rR</span><br><span class="line">.:</span><br><span class="line">testc_4 testb_4 testa_4 f b</span><br><span class="line">testc_3 testb_3 testa_3 e ab cd</span><br><span class="line">testc_2 testb_2 test d a</span><br><span class="line">testc_1 testb_1 p c</span><br><span class="line">./test:</span><br><span class="line">test1</span><br><span class="line">./test/test1:</span><br><span class="line">./p:</span><br><span class="line">./f:</span><br><span class="line">file4 file3 file2 file1</span><br><span class="line">./e:</span><br><span class="line">file4 file3 file2 file1</span><br><span class="line">./d:</span><br><span class="line">file4 file3 file2 file1</span><br><span class="line">./c:</span><br><span class="line">file4 file3 file2 file1</span><br><span class="line">./b:</span><br><span class="line">file4 file3 file2 file1</span><br><span class="line">./a:</span><br><span class="line">file4 file3 file2 file1</span><br></pre></td></tr></table></figure>

<h3 id="rmdir"><a href="#rmdir" class="headerlink" title="rmdir"></a>rmdir</h3><p>rmdir:remove directory åˆ é™¤ç›®å½•</p>
<p>åªèƒ½åˆ é™¤ç©ºç›®å½•,å‡ºäºå®‰å…¨æ€§çš„è€ƒè™‘</p>
<p><code>rm -rf [d_name]</code></p>
<p>å¯ä»¥åˆ é™¤éç©ºç›®å½•</p>
<h4 id="rmdir-å®éªŒ"><a href="#rmdir-å®éªŒ" class="headerlink" title="rmdir å®éªŒ"></a>rmdir å®éªŒ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[booboo@rhel7 ~]$ mkdir aa</span><br><span class="line">[booboo@rhel7 ~]$ mkdir -p cc/bb</span><br><span class="line">[booboo@rhel7 ~]$ rmdir aa</span><br><span class="line">[booboo@rhel7 ~]$ ll</span><br><span class="line">total 4</span><br><span class="line">-rwxrwxrwx. 1 booboo booboo  3 Jun 15 23:34 booboo</span><br><span class="line">drwxrwxr-x. 3 booboo booboo 15 Jun 16 00:08 cc</span><br><span class="line">[booboo@rhel7 ~]$ rmdir cc</span><br><span class="line">rmdir: failed to remove â€˜ccâ€™: Directory not empty</span><br><span class="line">[booboo@rhel7 ~]$ rm -rf cc</span><br><span class="line">[booboo@rhel7 ~]$ ll</span><br><span class="line">total 4</span><br><span class="line">-rwxrwxrwx. 1 booboo booboo 3 Jun 15 23:34 booboo</span><br></pre></td></tr></table></figure>

<h3 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h3><p>cp:copy å¤åˆ¶æ–‡ä»¶</p>
<p>cp æºæ–‡ä»¶ ç›®çš„åœ°(ç›®å½•)</p>
<p>-p ä¿ç•™æ–‡ä»¶åŸå±æ€§</p>
<p>-r å¤åˆ¶ç›®å½•</p>
<h4 id="cpå®éªŒ"><a href="#cpå®éªŒ" class="headerlink" title="cpå®éªŒ"></a>cpå®éªŒ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">ä½¿ç”¨ root ç”¨æˆ·,è¿›å…¥ tom çš„å®¶ç›®å½•</span><br><span class="line"></span><br><span class="line">[root@rhel7 ~]# cd /home/tom</span><br><span class="line"></span><br><span class="line">ä¿ç•™åŸæ–‡ä»¶å±æ€§å¤åˆ¶ testa_3 æ–‡ä»¶åˆ° /tmp ç›®å½•ä¸‹</span><br><span class="line"></span><br><span class="line">[root@rhel7 tom]# cp -p testa_3 /tmp</span><br><span class="line">[root@rhel7 tom]# ll /tmp/testa_3</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 Mar 21 01:31 /tmp/testa_3</span><br><span class="line">[root@rhel7 tom]# cp testa_4 /tmp</span><br><span class="line">[root@rhel7 tom]# ll /tmp/testa_4</span><br><span class="line">-rw-r--r--. 1 root root 0 Mar 21 01:55 /tmp/testa_4</span><br><span class="line"></span><br><span class="line">æ‹·è´ç›®å½• a åˆ° /tmp ä¸‹,å¿…é¡»åŠ ä¸Š -r ,å› ä¸º a ç›®å½•ä¸‹è¿˜æœ‰ b/c ç›®å½•</span><br><span class="line"></span><br><span class="line">[root@rhel7 tom]# cp a /tmp</span><br><span class="line">cp: omitting directory `a'</span><br><span class="line">[root@rhel7 tom]# cp -r a /tmp</span><br></pre></td></tr></table></figure>

<h3 id="mv"><a href="#mv" class="headerlink" title="mv"></a>mv</h3><p>mv:move ç§»åŠ¨ ç§»åŠ¨å’Œé‡å‘½å</p>
<p>mv æºæ–‡ä»¶ ç›®çš„åœ°(ç›®å½•)</p>
<h4 id="mvå®éªŒ"><a href="#mvå®éªŒ" class="headerlink" title="mvå®éªŒ"></a>mvå®éªŒ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[tom@rhel7 ~]$ mv testa_3 test</span><br><span class="line">[tom@rhel7 ~]$ ls</span><br><span class="line">a</span><br><span class="line">c f testa_4 testb_3 testc_2</span><br><span class="line">ab cd d p testb_1 testb_4 testc_3</span><br><span class="line">b</span><br><span class="line">e test testb_2 testc_1 testc_4</span><br><span class="line">[tom@rhel7 ~]$ mv test??? f/</span><br><span class="line">[tom@rhel7 ~]$ ll -R f</span><br><span class="line">f:</span><br><span class="line">total 0</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 Mar 21 01:47 file1</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 Mar 21 01:47 file2</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 Mar 21 01:47 file3</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 Mar 21 01:47 file4</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 Mar 21 01:31 testa_4</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 Mar 21 01:31 testb_1</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 Mar 21 01:31 testb_2</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 Mar 21 01:31 testb_3</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 Mar 21 01:31 testb_4</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 Mar 21 01:31 testc_1</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 Mar 21 01:31 testc_2</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 Mar 21 01:31 testc_3</span><br><span class="line">-rw-rw-r--. 1 tom tom 0 Mar 21 01:31 testc_4</span><br></pre></td></tr></table></figure>


<h2 id="é’ˆå¯¹æ–‡ä»¶å†…å®¹çš„åŸºæœ¬æ“ä½œ"><a href="#é’ˆå¯¹æ–‡ä»¶å†…å®¹çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="é’ˆå¯¹æ–‡ä»¶å†…å®¹çš„åŸºæœ¬æ“ä½œ"></a>é’ˆå¯¹æ–‡ä»¶å†…å®¹çš„åŸºæœ¬æ“ä½œ</h2><h3 id="æ–‡ä»¶çš„æŸ¥çœ‹"><a href="#æ–‡ä»¶çš„æŸ¥çœ‹" class="headerlink" title="æ–‡ä»¶çš„æŸ¥çœ‹"></a>æ–‡ä»¶çš„æŸ¥çœ‹</h3><table>
<thead>
<tr>
<th align="left">æ–‡ä»¶</th>
<th align="left">å‘½ä»¤</th>
<th align="left">è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td align="left">å°æ–‡ä»¶</td>
<td align="left">cat</td>
<td align="left">ä»¥æ­£åºæŸ¥çœ‹ è°ƒç”¨å†…å­˜æ¯”è¾ƒå¤š -n æ˜¾ç¤ºè¡Œå·</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">tac</td>
<td align="left">ä»¥å€’åºæŸ¥çœ‹ è°ƒç”¨å†…å­˜æ¯”è¾ƒå¤š</td>
</tr>
<tr>
<td align="left">å¤§æ–‡ä»¶</td>
<td align="left">head</td>
<td align="left">æŸ¥çœ‹æ–‡ä»¶é¦–éƒ¨ï¼Œé»˜è®¤10è¡Œ ï¼Œ-n æŒ‡å®šè¡Œå·</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">tail</td>
<td align="left">æŸ¥çœ‹æ–‡ä»¶å°¾éƒ¨ï¼Œé»˜è®¤10è¡Œï¼Œ-næŒ‡å®šè¡Œå·</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">more</td>
<td align="left">æŒ‰ç©ºæ ¼ space ä¸‹ä¸€é¡µ b å‘ä¸Šç¿»é¡µ enter ä¸‹ä¸€è¡Œ</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">less</td>
<td align="left">æ¯” more å¤šäº†ä¸€ä¸ªæœç´¢åŠŸèƒ½ /[ éœ€æœç´¢çš„å­æ®µ ]N å‘ä¸ŠæŸ¥æ‰¾ n å‘ä¸‹æŸ¥ q é€€å‡º</td>
</tr>
</tbody></table>
<h4 id="æ–‡ä»¶æŸ¥çœ‹å®éªŒ"><a href="#æ–‡ä»¶æŸ¥çœ‹å®éªŒ" class="headerlink" title="æ–‡ä»¶æŸ¥çœ‹å®éªŒ"></a>æ–‡ä»¶æŸ¥çœ‹å®éªŒ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[tom@rhel7 ~]$ cat -n passwd</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">4 adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">6 sync:x:5:0:sync:/sbin:/bin/sync</span><br><span class="line">7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">8 halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">9 mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">10 cong:x:500:500:cong:/home/cong:/bin/bash</span><br><span class="line">11 nginx:x:496:491:Nginx web server:/var/lib/nginx:/sbin/nologin</span><br><span class="line">12 tom:x:501:501::/home/tom:/bin/bash</span><br><span class="line">[tom@rhel7 ~]$ tac passwd</span><br><span class="line">tom:x:501:501::/home/tom:/bin/bash</span><br><span class="line">nginx:x:496:491:Nginx web server:/var/lib/nginx:/sbin/nologin</span><br><span class="line">cong:x:500:500:cong:/home/cong:/bin/bash</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">sync:x:5:0:sync:/sbin:/bin/sync</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br></pre></td></tr></table></figure>

<h3 id="æ–‡ä»¶çš„ä¿®æ”¹"><a href="#æ–‡ä»¶çš„ä¿®æ”¹" class="headerlink" title="æ–‡ä»¶çš„ä¿®æ”¹"></a>æ–‡ä»¶çš„ä¿®æ”¹</h3><table>
<thead>
<tr>
<th align="left">è½¯ä»¶</th>
<th align="left">è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td align="left">LibreOffice</td>
<td align="left">.odt ç»“å°¾ ç±»ä¼¼äº windows office</td>
</tr>
<tr>
<td align="left">gedit</td>
<td align="left">ç±»ä¼¼äº windows è®°äº‹æœ¬</td>
</tr>
<tr>
<td align="left">vim</td>
<td align="left">æ’å…¥æ¨¡å¼ åé¢ä¼šä¸“é—¨è®²åˆ° vim ç¼–è¾‘å™¨çš„ä½¿ç”¨ é€€å‡ºæ¨¡å¼ å‘½ä»¤æ¨¡å¼</td>
</tr>
<tr>
<td align="left">echo</td>
<td align="left">æœ¬èº«ä»£è¡¨å›æ˜¾ echo xxx &gt; file å°† xxx å†™å…¥ file æ–‡ä»¶,å¹¶è¦†ç›–åŸæœ‰å†…å®¹ echo xxx &gt;&gt; file åœ¨ file æ–‡ä»¶è¿½åŠ </td>
</tr>
</tbody></table>
<h4 id="echoå®éªŒ"><a href="#echoå®éªŒ" class="headerlink" title="echoå®éªŒ"></a>echoå®éªŒ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[booboo@rhel7 ~]$ echo hi &gt; file1</span><br><span class="line">[booboo@rhel7 ~]$ cat file1</span><br><span class="line">hi</span><br><span class="line">[booboo@rhel7 ~]$ echo booboo &gt; file1</span><br><span class="line">[booboo@rhel7 ~]$ cat file1</span><br><span class="line">booboo</span><br><span class="line">[booboo@rhel7 ~]$ echo hihihihi &gt;&gt; file1</span><br><span class="line">[booboo@rhel7 ~]$ cat file1</span><br><span class="line">booboo</span><br><span class="line">hihihihi</span><br></pre></td></tr></table></figure>

<h3 id="æ–‡ä»¶çš„è¿‡æ»¤"><a href="#æ–‡ä»¶çš„è¿‡æ»¤" class="headerlink" title="æ–‡ä»¶çš„è¿‡æ»¤"></a>æ–‡ä»¶çš„è¿‡æ»¤</h3><p>grep</p>
<p>æˆªå–è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">grep [OPTIONS] PATTERN [FILE...]</span><br><span class="line">è¿‡æ»¤å¸¦æœ‰ [ å­—ç¬¦ä¸² ] çš„è¡Œ</span><br><span class="line">grep [ å­—ç¬¦ä¸² ] [ æ–‡ä»¶ ]	</span><br><span class="line">è¿‡æ»¤ä»¥ [ å­—ç¬¦ä¸² ] ä¸ºå¼€å§‹çš„è¡Œ</span><br><span class="line">grep [^ å­—ç¬¦ä¸² ] [ æ–‡ä»¶ ]</span><br><span class="line">è¿‡æ»¤ä»¥ [ å­—ç¬¦ä¸² ] ä¸ºç»“å°¾çš„è¡Œ</span><br><span class="line">grep [ å­—ç¬¦ä¸² $] [ æ–‡ä»¶ ]</span><br><span class="line">è¿‡æ»¤åé€‰</span><br><span class="line">grep -v [ å­—ç¬¦ä¸² ] [ æ–‡ä»¶ ]</span><br><span class="line"></span><br><span class="line">eg.</span><br><span class="line">è¿‡æ»¤ä»¥ root ä¸ºå¼€å§‹çš„è¡Œ</span><br><span class="line"> grep ^root /etc/passwd</span><br><span class="line">è¿‡æ»¤ä»¥ bash ä¸ºç»“å°¾çš„è¡Œ</span><br><span class="line">grep bash$ /etc/passwd</span><br></pre></td></tr></table></figure>

<p>cut</p>
<p>æˆªå–åˆ—</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cut -d" åˆ†å‰²ç¬¦ "( ä»¥ä»€ä¹ˆä¸ºåˆ†éš”ç¬¦ ) -fn( ç¬¬å‡ åˆ— ) [ æ–‡ä»¶ ]</span><br><span class="line">eg. cut -d":" -f2 /etc/resolv.conf</span><br></pre></td></tr></table></figure>

<p>wc</p>
<p>ç»Ÿè®¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wc è¡Œæ•° å•è¯æ•° å­—ç¬¦æ•° æ–‡ä»¶å</span><br><span class="line">-l åªæ˜¾ç¤ºè¡Œæ•°</span><br><span class="line">-w, --words æ˜¾ç¤ºå•è¯æ•°</span><br><span class="line">-c, -m,--bytes æ˜¾ç¤ºå­—èŠ‚</span><br><span class="line">eg.</span><br><span class="line">[root@stu15 ~]# wc /etc/resolv.conf ã€</span><br><span class="line">4 11 98 /etc/resolv.conf</span><br></pre></td></tr></table></figure>

<p>sort</p>
<p>æ’åº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">é»˜è®¤æŒ‰ç…§é¦–å­—æ¯ ACII ç </span><br><span class="line">-n æŒ‰ç…§æ•°å­—å¤§å°æ’åº</span><br><span class="line">-u å‰”é™¤é‡å¤çš„è¡Œ</span><br><span class="line">-r é™åºæ’åˆ—</span><br><span class="line">-k æŒ‡å®šæŸä¸€åˆ—</span><br><span class="line">-t åˆ†éš”ç¬¦</span><br><span class="line">eg.sort -n -k 2 -t : file1 </span><br><span class="line">å°† file1 ä»¥ç¬¬äºŒåˆ—çš„æ•°å­—æ’åº,åˆ—ä»¥:åˆ†å‰²</span><br></pre></td></tr></table></figure>

<p>uniq</p>
<p>å‰”é™¤é‡å¤è¡Œ</p>
<p><code>uniq [file_name]</code></p>
<h4 id="æ–‡ä»¶è¿‡æ»¤å®éªŒ"><a href="#æ–‡ä»¶è¿‡æ»¤å®éªŒ" class="headerlink" title="æ–‡ä»¶è¿‡æ»¤å®éªŒ"></a>æ–‡ä»¶è¿‡æ»¤å®éªŒ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">grep</span><br><span class="line"></span><br><span class="line">[booboo@rhel7 ~]$ grep root passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">[booboo@rhel7 ~]$ grep ^booboo passwd</span><br><span class="line">booboo:x:1001:1001::/home/booboo:/bin/bash</span><br><span class="line">[booboo@rhel7 ~]$ grep ^root passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">[booboo@rhel7 ~]$ grep bash$ passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">student:x:1000:1000:student:/home/student:/bin/bash</span><br><span class="line">booboo:x:1001:1001::/home/booboo:/bin/bash</span><br><span class="line">[booboo@rhel7 ~]$ grep -v nologin passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">sync:x:5:0:sync:/sbin:/bin/sync</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">student:x:1000:1000:student:/home/student:/bin/bash</span><br><span class="line">booboo:x:1001:1001::/home/booboo:/bin/bash</span><br><span class="line"></span><br><span class="line">cut</span><br><span class="line"></span><br><span class="line">[booboo@rhel7 ~]$ cut -d":" -f1 passwd</span><br><span class="line">root</span><br><span class="line">bin</span><br><span class="line">daemon</span><br><span class="line">adm</span><br><span class="line">lp</span><br><span class="line">sync</span><br><span class="line">shutdown</span><br><span class="line">halt</span><br><span class="line">mail</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">wc</span><br><span class="line"></span><br><span class="line">[booboo@rhel7 ~]$ wc passwd</span><br><span class="line">  42   72 2121 passwd</span><br><span class="line">[booboo@rhel7 ~]$ wc -l passwd</span><br><span class="line">42 passwd</span><br><span class="line">[booboo@rhel7 ~]$ wc -w passwd</span><br><span class="line">72 passwd</span><br><span class="line">[booboo@rhel7 ~]$ wc -c passwd</span><br><span class="line">2121 passwd</span><br><span class="line"></span><br><span class="line">sort</span><br><span class="line"></span><br><span class="line">[booboo@rhel7 ~]$ vi num</span><br><span class="line">[booboo@rhel7 ~]$ cat num</span><br><span class="line">booboo 20 100</span><br><span class="line">tom 21 100</span><br><span class="line">tom 21 100</span><br><span class="line">kevin 19 200</span><br><span class="line">booboo 20 100</span><br><span class="line">mark 20 200</span><br><span class="line">[booboo@rhel7 ~]$ sort num</span><br><span class="line">booboo 20 100</span><br><span class="line">booboo 20 100</span><br><span class="line">kevin 19 200</span><br><span class="line">mark 20 200</span><br><span class="line">tom 21 100</span><br><span class="line">tom 21 100</span><br><span class="line">[booboo@rhel7 ~]$ sort -r num</span><br><span class="line">tom 21 100</span><br><span class="line">tom 21 100</span><br><span class="line">mark 20 200</span><br><span class="line">kevin 19 200</span><br><span class="line">booboo 20 100</span><br><span class="line">booboo 20 100</span><br><span class="line">[booboo@rhel7 ~]$ sort -u num</span><br><span class="line">booboo 20 100</span><br><span class="line">kevin 19 200</span><br><span class="line">mark 20 200</span><br><span class="line">tom 21 100</span><br><span class="line">[booboo@rhel7 ~]$ sort -n -k 2 -t " " num |sort -u</span><br><span class="line">booboo 20 100</span><br><span class="line">kevin 19 200</span><br><span class="line">mark 20 200</span><br><span class="line">tom 21 100</span><br><span class="line"></span><br><span class="line">uniq</span><br><span class="line"></span><br><span class="line">[booboo@rhel7 ~]$ uniq num</span><br><span class="line">booboo 20 100</span><br><span class="line">tom 21 100</span><br><span class="line">kevin 19 200</span><br><span class="line">booboo 20 100</span><br><span class="line">mark 20 200</span><br></pre></td></tr></table></figure>

<h2 id="å¸®åŠ©å‘½ä»¤"><a href="#å¸®åŠ©å‘½ä»¤" class="headerlink" title="å¸®åŠ©å‘½ä»¤"></a>å¸®åŠ©å‘½ä»¤</h2><table>
<thead>
<tr>
<th align="left">å‘½ä»¤</th>
<th align="left">è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td align="left">type [ å‘½ä»¤ ]</td>
<td align="left">åˆ¤æ–­æ˜¯å†…éƒ¨å‘½ä»¤ or å¤–éƒ¨å‘½ä»¤</td>
</tr>
<tr>
<td align="left">â€“help</td>
<td align="left">å¤–éƒ¨å‘½ä»¤</td>
</tr>
<tr>
<td align="left">help</td>
<td align="left">åªé’ˆå¯¹ç³»ç»Ÿå†…éƒ¨å‘½ä»¤</td>
</tr>
<tr>
<td align="left">man []</td>
<td align="left">å†…å®¹æ¸…æ™°ã€è¯¦ç»†,åœ¨çº¿æ–‡æ¡£,æ”¯æŒæœç´¢( /name ) <code>man [ ç« èŠ‚ ] [name]</code></td>
</tr>
<tr>
<td align="left">info []</td>
<td align="left">å¤ªè¯¦ç»†</td>
</tr>
<tr>
<td align="left">/usr/share/doc</td>
<td align="left">å­˜æ”¾å¸®åŠ©æ–‡æ¡£,åœ¨ä¸è½¯ä»¶åŒåçš„ç›®å½•ä¸‹æœ‰æ‰€æœ‰è½¯ä»¶çš„ä½¿ç”¨æ–‡æ¡£</td>
</tr>
</tbody></table>
<p><strong>manå’Œâ€”helpä»¥åŠhelpçš„åŒºåˆ«</strong></p>
<p>manå‘½ä»¤</p>
<p>ç³»ç»Ÿä¸­ä¼šæœ‰å•ç‹¬çš„manæ–‡ä»¶ï¼Œå°±æ˜¯è¯´ï¼Œå¦‚æœç³»ç»Ÿæ²¡æœ‰å®‰è£…å¯¹åº”manæ–‡ä»¶ï¼Œå“ªæ€•å‘½ä»¤å®Œå…¨æ­£å¸¸ï¼Œmanéƒ½æ²¡ç»“æœï¼ˆåŒæ ·ï¼Œåªè¦å®‰è£…äº†manæ–‡ä»¶ï¼Œå“ªæ€•æ²¡å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥å¾—åˆ°ä¸€å¤§å †ä¸œè¥¿ï¼‰ã€‚</p>
<p>â€“helpå‚æ•°<br>å°†ä¼šæ˜¾ç¤ºå¯æ‰§è¡Œç¨‹åºè‡ªå¸¦çš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯æ˜¯åµŒå…¥åˆ°ç¨‹åºæœ¬èº«çš„ï¼Œæ‰€ä»¥â€“helpä¿¡æ¯è¾ƒç®€çŸ­ã€‚</p>
<p>helpå‘½ä»¤<br>æ˜¯é€‰é¡¹å¸®åŠ©å‘½ä»¤ï¼Œé¡¾åæ€ä¹‰  ä½ å¯ä»¥æŠŠå•ç‹¬æŸä¸ªå‘½ä»¤çš„æŸä¸ªé€‰é¡¹åˆ—å‡ºæ¥ï¼Œæ–¹ä¾¿å¿«æ·å¾ˆå¤šï¼Œçœå»äº†manå½“ä¸­æŸ¥æ‰¾çš„ç¹çï¼Œä½†æ˜¯helpåªæ”¯æŒshellçš„å†…éƒ¨å‘½ä»¤ã€‚å†…éƒ¨å‘½ä»¤å³å­˜å‚¨åœ¨shellå†…éƒ¨å¯ä»¥ç›´æ¥è°ƒç”¨çš„ä¸€äº›ç®€å•å‘½ä»¤ï¼Œæ¯”å¦‚è¯´echoï¼Œcdï¼Œpwdç­‰ã€‚</p>
<h3 id="type"><a href="#type" class="headerlink" title="type"></a>type</h3><p>typeå‘½ä»¤ç”¨æ¥æ˜¾ç¤ºæŒ‡å®šå‘½ä»¤çš„ç±»å‹ï¼Œåˆ¤æ–­ç»™å‡ºçš„æŒ‡ä»¤æ˜¯å†…éƒ¨æŒ‡ä»¤è¿˜æ˜¯å¤–éƒ¨æŒ‡ä»¤ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¯­æ³•</span><br><span class="line">type(é€‰é¡¹)(å‚æ•°)</span><br><span class="line">é€‰é¡¹</span><br><span class="line">-tï¼šè¾“å‡ºâ€œfileâ€ã€â€œaliasâ€æˆ–è€…â€œbuiltinâ€ï¼Œåˆ†åˆ«è¡¨ç¤ºç»™å®šçš„æŒ‡ä»¤ä¸ºâ€œå¤–éƒ¨æŒ‡ä»¤â€ã€â€œå‘½ä»¤åˆ«åâ€æˆ–è€…â€œå†…éƒ¨æŒ‡ä»¤â€ï¼›</span><br><span class="line">-pï¼šå¦‚æœç»™å‡ºçš„æŒ‡ä»¤ä¸ºå¤–éƒ¨æŒ‡ä»¤ï¼Œåˆ™æ˜¾ç¤ºå…¶ç»å¯¹è·¯å¾„ï¼›</span><br><span class="line">-aï¼šåœ¨ç¯å¢ƒå˜é‡â€œPATHâ€æŒ‡å®šçš„è·¯å¾„ä¸­ï¼Œæ˜¾ç¤ºç»™å®šæŒ‡ä»¤çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬å‘½ä»¤åˆ«åã€‚ å‚æ•° æŒ‡ä»¤ï¼šè¦æ˜¾ç¤ºç±»å‹çš„æŒ‡ä»¤ã€‚</span><br><span class="line">å‚æ•°</span><br><span class="line">å…³é”®å­—ï¼šæŒ‡å®šè¦æœç´¢å¸®åŠ©çš„å…³é”®å­—</span><br><span class="line">å‘½ä»¤ç±»å‹</span><br><span class="line">aliasï¼šåˆ«å</span><br><span class="line">keywordï¼šå…³é”®å­—ï¼ŒShellä¿ç•™å­—</span><br><span class="line">functionï¼šå‡½æ•°ï¼ŒShellå‡½æ•°</span><br><span class="line">builtinï¼šå†…å»ºå‘½ä»¤ï¼ŒShellå†…å»ºå‘½ä»¤</span><br><span class="line">fileï¼šæ–‡ä»¶ï¼Œç£ç›˜æ–‡ä»¶ï¼Œå¤–éƒ¨å‘½ä»¤</span><br><span class="line">unfoundï¼šæ²¡æœ‰æ‰¾åˆ°</span><br><span class="line"></span><br><span class="line">å°è¯•å‡ ä¸ªå‘½ä»¤man,ls,touch,echo,cat</span><br><span class="line"></span><br><span class="line">[booboo@rhel7 ~]$ type man</span><br><span class="line">man is /bin/man</span><br><span class="line">[booboo@rhel7 ~]$ type ls</span><br><span class="line">ls is aliased to `ls â€“color=auto'</span><br><span class="line">[booboo@rhel7 ~]$ which ls</span><br><span class="line">alias ls='ls --color=auto'</span><br><span class="line">	/bin/ls</span><br><span class="line">[booboo@rhel7 ~]$ type touch</span><br><span class="line">touch is hashed (/bin/touch)</span><br><span class="line">[booboo@rhel7 ~]$ type echo</span><br><span class="line">echo is a shell builtin</span><br><span class="line">[booboo@rhel7 ~]$ type cat</span><br><span class="line">cat is hashed (/bin/cat)</span><br></pre></td></tr></table></figure>
<p>å†…ç½®å‘½ä»¤ä¸€èˆ¬æ˜¾ç¤ºä¸ºâ€œis a shell builtin â€</p>
<p>é™¤äº†å†…ç½®å‘½ä»¤å¤–ï¼Œå…¶ä»–å‘½ä»¤éƒ½æ˜¯é€šè¿‡æŸä¸ªå®‰è£…åŒ…å®‰è£…ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹è¿™äº›å‘½ä»¤éƒ½æ˜¯ä»€ä¹ˆè½¯ä»¶ç”Ÿæˆçš„</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[booboo@rhel7 ~]$ rpm -qf /bin/man</span><br><span class="line">man-db-2.6.3-9.el7.x86_64</span><br><span class="line">[booboo@rhel7 ~]$ rpm -qf /bin/ls</span><br><span class="line">coreutils-8.22-11.el7.x86_64</span><br><span class="line">[booboo@rhel7 ~]$ rpm -qf /bin/touch</span><br><span class="line">coreutils-8.22-11.el7.x86_64</span><br><span class="line">[booboo@rhel7 ~]$ rpm -qf /bin/cat</span><br><span class="line">coreutils-8.22-11.el7.x86_64</span><br><span class="line">[booboo@rhel7 ~]$ type if</span><br><span class="line">if is a shell keyword</span><br></pre></td></tr></table></figure>

<h3 id="â€“help-å‚æ•°"><a href="#â€“help-å‚æ•°" class="headerlink" title="â€“help å‚æ•°"></a>â€“help å‚æ•°</h3><p>â€“helpå‚æ•°æ˜¯å¤§æ‰€æ•°å‘½ä»¤è‡ªå¸¦çš„é€‰é¡¹ï¼Œç”¨äºæŸ¥çœ‹ä½¿ç”¨å¸®åŠ©ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[booboo@rhel7 ~]$ ls --help</span><br><span class="line">Usage: ls [OPTION]... [FILE]...</span><br><span class="line">List information about the FILEs (the current directory by default).</span><br><span class="line">Sort entries alphabetically if none of -cftuvSUX nor --sort is specified.</span><br><span class="line"></span><br><span class="line">Mandatory arguments to long options are mandatory for short options too.</span><br><span class="line">  -a, --all                  do not ignore entries starting with .</span><br><span class="line">  -A, --almost-all           do not list implied . and ..</span><br><span class="line">      --author               with -l, print the author of each file</span><br><span class="line">  -b, --escape               print C-style escapes for nongraphic characters</span><br><span class="line">      --block-size=SIZE      scale sizes by SIZE before printing them; e.g.,</span><br><span class="line">                               '--block-size=M' prints sizes in units of</span><br><span class="line">                               1,048,576 bytes; see SIZE format below</span><br><span class="line">  -B, --ignore-backups       do not list implied entries ending with ~</span><br><span class="line">  -c                         with -lt: sort by, and show, ctime (time of last</span><br><span class="line">                               modification of file status information);</span><br><span class="line">                               with -l: show ctime and sort by name;</span><br><span class="line">                               otherwise: sort by ctime, newest first</span><br><span class="line">  -C                         list entries by columns</span><br><span class="line">      --color[=WHEN]         colorize the output; WHEN can be 'never', 'auto',</span><br><span class="line">                               or 'always' (the default); more info below</span><br><span class="line">  -d, --directory            list directories themselves, not their contents</span><br><span class="line">  -D, --dired                generate output designed for Emacs' dired mode</span><br><span class="line">  -f                         do not sort, enable -aU, disable -ls --color</span><br></pre></td></tr></table></figure>

<h3 id="help"><a href="#help" class="headerlink" title="help"></a>help</h3><p>helpåªæ”¯æŒshellçš„å†…éƒ¨å‘½ä»¤ã€‚å†…éƒ¨å‘½ä»¤å³å­˜å‚¨åœ¨shellå†…éƒ¨å¯ä»¥ç›´æ¥è°ƒç”¨çš„ä¸€äº›ç®€å•å‘½ä»¤,ä¾‹å¦‚cd,echo,helpç­‰ã€‚</p>
<p>help(é€‰é¡¹)(å‚æ•°)<br>-sï¼šè¾“å‡ºçŸ­æ ¼å¼çš„å¸®åŠ©ä¿¡æ¯ã€‚ä»…åŒ…æ‹¬å‘½ä»¤æ ¼å¼ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[booboo@rhel7 ~]$ type cd</span><br><span class="line">cd is a shell builtin</span><br><span class="line">[booboo@rhel7 ~]$ help cd</span><br><span class="line">cd: cd [-L|[-P [-e]]] [dir]</span><br><span class="line">    Change the shell working directory.</span><br><span class="line"></span><br><span class="line">    Change the current directory to DIR.  The default DIR is the value of the</span><br><span class="line">    HOME shell variable.</span><br><span class="line"></span><br><span class="line">    The variable CDPATH defines the search path for the directory containing</span><br><span class="line">    DIR.  Alternative directory names in CDPATH are separated by a colon (:).</span><br><span class="line">    A null directory name is the same as the current directory.  If DIR begins</span><br><span class="line">    with a slash (/), then CDPATH is not used.</span><br><span class="line"></span><br><span class="line">    If the directory is not found, and the shell option `cdable_vars' is set,</span><br><span class="line">    the word is assumed to be  a variable name.  If that variable has a value,</span><br><span class="line">    its value is used for DIR.</span><br><span class="line"></span><br><span class="line">    Options:</span><br><span class="line">        -L	force symbolic links to be followed</span><br><span class="line">        -P	use the physical directory structure without following symbolic</span><br><span class="line">    	links</span><br><span class="line">        -e	if the -P option is supplied, and the current working directory</span><br><span class="line">    	cannot be determined successfully, exit with a non-zero status</span><br><span class="line"></span><br><span class="line">    The default is to follow symbolic links, as if `-L' were specified.</span><br><span class="line"></span><br><span class="line">    Exit Status:</span><br><span class="line">    Returns 0 if the directory is changed, and if $PWD is set successfully when</span><br><span class="line">    -P is used; non-zero otherwise.</span><br><span class="line">[booboo@rhel7 ~]$ type touch</span><br><span class="line">touch is hashed (/bin/touch)</span><br><span class="line">[booboo@rhel7 ~]$ type echo</span><br><span class="line">echo is a shell builtin</span><br><span class="line">[booboo@rhel7 ~]$ help echo</span><br><span class="line">echo: echo [-neE] [arg ...]</span><br></pre></td></tr></table></figure>

<h3 id="man"><a href="#man" class="headerlink" title="man"></a>man</h3><p>manå‘½ä»¤æ˜¯Linuxä¸‹çš„å¸®åŠ©æŒ‡ä»¤ï¼Œé€šè¿‡manæŒ‡ä»¤å¯ä»¥æŸ¥çœ‹Linuxä¸­çš„æŒ‡ä»¤å¸®åŠ©ã€é…ç½®æ–‡ä»¶å¸®åŠ©å’Œç¼–ç¨‹å¸®åŠ©ç­‰ä¿¡æ¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¯­æ³•</span><br><span class="line">man(é€‰é¡¹)(å‚æ•°)</span><br><span class="line">é€‰é¡¹</span><br><span class="line">-aï¼šåœ¨æ‰€æœ‰çš„manå¸®åŠ©æ‰‹å†Œä¸­æœç´¢ï¼›</span><br><span class="line">-fï¼šç­‰ä»·äºwhatisæŒ‡ä»¤ï¼Œæ˜¾ç¤ºç»™å®šå…³é”®å­—çš„ç®€çŸ­æè¿°ä¿¡æ¯ï¼›</span><br><span class="line">-Pï¼šæŒ‡å®šå†…å®¹æ—¶ä½¿ç”¨åˆ†é¡µç¨‹åºï¼›</span><br><span class="line">-Mï¼šæŒ‡å®šmanæ‰‹å†Œæœç´¢çš„è·¯å¾„ã€‚</span><br><span class="line">å‚æ•°</span><br><span class="line">æ•°å­—ï¼šæŒ‡å®šä»å“ªæœ¬manæ‰‹å†Œä¸­æœç´¢å¸®åŠ©</span><br><span class="line">å…³é”®å­—ï¼šæŒ‡å®šè¦æœç´¢å¸®åŠ©çš„å…³é”®å­—</span><br></pre></td></tr></table></figure>

<p>ä¾‹å¦‚è¾“å…¥man lsï¼Œå®ƒä¼šåœ¨å·¦ä¸Šè§’æ˜¾ç¤ºâ€œECHO(1)â€â€œECHOâ€ä»£è¡¨æ‰‹å†Œåç§°ï¼›â€œ(1)â€ä»£è¡¨ è¡¨ç¤ºè¯¥æ‰‹å†Œä½äºç¬¬ä¸€èŠ‚ç« 1ï¼‰â€è¡¨ç¤ºè¯¥æ‰‹å†Œä½äºç¬¬ä¸€èŠ‚ç« ï¼ŒåŒæ ·ï¼Œæˆ‘ä»¬è¾“man ifconfigå®ƒä¼šåœ¨æœ€å·¦ä¸Šè§’æ˜¾ç¤ºâ€œIFCONFIGï¼ˆ8ï¼‰â€ã€‚ä¹Ÿå¯ä»¥è¿™æ ·è¾“å…¥å‘½ä»¤ï¼šâ€œman [ç« èŠ‚å·] æ‰‹å†Œåç§°â€ã€‚ manæ˜¯æŒ‰ç…§æ‰‹å†Œçš„ç« èŠ‚å·çš„é¡ºåºè¿›è¡Œæœç´¢çš„ï¼Œæ¯”å¦‚ï¼š man sleep åªä¼šæ˜¾ç¤ºsleepå‘½ä»¤çš„æ‰‹å†Œ,å¦‚æœæƒ³æŸ¥çœ‹åº“å‡½æ•°sleepï¼Œå°±è¦è¾“å…¥: man 3 sleep</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[booboo@rhel7 ~]$ man echo|cat</span><br><span class="line">ECHO(1)                         User Commands                         ECHO(1)</span><br><span class="line"><span class="meta">#</span><span class="bash">æ­¤å¤„â€œECHOâ€ä»£è¡¨æ‰‹å†Œåç§°ï¼›â€œï¼ˆ1ï¼‰â€ä»£è¡¨ è¡¨ç¤ºè¯¥æ‰‹å†Œä½äºç¬¬ä¸€èŠ‚ç« </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line">       echo - display a line of text</span><br><span class="line"></span><br><span class="line">SYNOPSIS</span><br><span class="line">       echo [SHORT-OPTION]... [STRING]...</span><br><span class="line">       echo LONG-OPTION</span><br><span class="line"></span><br><span class="line">DESCRIPTION</span><br><span class="line">       Echo the STRING(s) to standard output.</span><br><span class="line"></span><br><span class="line">       -n     do not output the trailing newline</span><br><span class="line"></span><br><span class="line">       -e     enable interpretation of backslash escapes</span><br><span class="line"></span><br><span class="line">       -E     disable interpretation of backslash escapes (default)</span><br><span class="line"></span><br><span class="line">       --help display this help and exit</span><br><span class="line"></span><br><span class="line">       --version</span><br><span class="line">              output version information and exit</span><br><span class="line"></span><br><span class="line">       If -e is in effect, the following sequences are recognized:</span><br><span class="line"></span><br><span class="line">       \\     backslash</span><br><span class="line"></span><br><span class="line">       \a     alert (BEL)</span><br><span class="line"></span><br><span class="line">       \b     backspace</span><br><span class="line"></span><br><span class="line">       \c     produce no further output</span><br><span class="line"></span><br><span class="line">       \e     escape</span><br><span class="line"></span><br><span class="line">       \f     form feed</span><br><span class="line"></span><br><span class="line">       \n     new line</span><br><span class="line"></span><br><span class="line">       \r     carriage return</span><br><span class="line"></span><br><span class="line">       \t     horizontal tab</span><br><span class="line"></span><br><span class="line">       \v     vertical tab</span><br><span class="line"></span><br><span class="line">       \0NNN  byte with octal value NNN (1 to 3 digits)</span><br><span class="line"></span><br><span class="line">       \xHH   byte with hexadecimal value HH (1 to 2 digits)</span><br><span class="line"></span><br><span class="line">       NOTE:  your  shell  may  have  its  own version of echo, which usually</span><br><span class="line">       supersedes the version described here.  Please refer to  your  shell's</span><br><span class="line">       documentation for details about the options it supports.</span><br><span class="line"></span><br><span class="line">       GNU  coreutils  online  help: &lt;http://www.gnu.org/software/coreutils/&gt;</span><br><span class="line">       Report echo translation bugs to &lt;http://translationproject.org/team/&gt;</span><br><span class="line">AUTHOR</span><br><span class="line">       Written by Brian Fox and Chet Ramey.</span><br><span class="line">COPYRIGHT</span><br><span class="line">       Copyright Â© 2013 Free Software Foundation, Inc.  License  GPLv3+:  GNU</span><br><span class="line">       GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;.</span><br><span class="line">       This  is  free  software:  you are free to change and redistribute it.</span><br><span class="line">       There is NO WARRANTY, to the extent permitted by law.</span><br><span class="line">SEE ALSO</span><br><span class="line">       The full documentation for echo is maintained as a Texinfo manual.  If</span><br><span class="line">       the  info  and  echo programs are properly installed at your site, the</span><br><span class="line">       command</span><br><span class="line">             info coreutils 'echo invocation'</span><br><span class="line">      should give you access to the complete manual.</span><br><span class="line"></span><br><span class="line">GNU coreutils 8.22               January 2014                         ECHO(1)</span><br></pre></td></tr></table></figure>

<h3 id="infoï¼ˆä½œä¸ºæ‹“å±•å†…å®¹ï¼‰"><a href="#infoï¼ˆä½œä¸ºæ‹“å±•å†…å®¹ï¼‰" class="headerlink" title="infoï¼ˆä½œä¸ºæ‹“å±•å†…å®¹ï¼‰"></a>infoï¼ˆä½œä¸ºæ‹“å±•å†…å®¹ï¼‰</h3><p>infoå‘½ä»¤æ˜¯Linuxä¸‹infoæ ¼å¼çš„å¸®åŠ©æŒ‡ä»¤ã€‚ å°±å†…å®¹æ¥è¯´ï¼Œinfoé¡µé¢æ¯”man pageç¼–å†™å¾—è¦æ›´å¥½ã€æ›´å®¹æ˜“ç†è§£ï¼Œä¹Ÿæ›´å‹å¥½ï¼Œä½†man pageä½¿ç”¨èµ·æ¥ç¡®å®è¦æ›´å®¹æ˜“å¾—å¤šã€‚ä¸€ä¸ªman pageåªæœ‰ä¸€é¡µï¼Œè€Œinfoé¡µé¢å‡ ä¹æ€»æ˜¯å°†å®ƒä»¬çš„å†…å®¹ç»„ç»‡æˆå¤šä¸ªåŒºæ®µï¼ˆç§°ä¸ºèŠ‚ç‚¹ï¼‰ï¼Œæ¯ä¸ªåŒºæ®µä¹Ÿå¯èƒ½åŒ…å«å­åŒºæ®µï¼ˆç§°ä¸ºå­èŠ‚ç‚¹ï¼‰ã€‚ç†è§£è¿™ä¸ªå‘½ä»¤çš„çªé—¨å°±æ˜¯ä¸ä»…è¦å­¦ä¹ å¦‚ä½•åœ¨å•ç‹¬çš„Infoé¡µé¢ä¸­æµè§ˆå¯¼èˆªï¼Œè¿˜è¦å­¦ä¹ å¦‚ä½•åœ¨èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹ä¹‹é—´åˆ‡æ¢ã€‚å¯èƒ½åˆšå¼€å§‹ä¼šä¸€æ—¶å¾ˆéš¾åœ¨infoé¡µé¢çš„èŠ‚ç‚¹ä¹‹é—´ç§»åŠ¨å’Œæ‰¾åˆ°ä½ è¦çš„ä¸œè¥¿ï¼ŒçœŸæ˜¯å…·æœ‰è®½åˆºæ„å‘³ï¼šåŸæœ¬ä»¥ä¸ºå¯¹äºæ–°æ‰‹æ¥è¯´ï¼ŒæŸä¸ªä¸œè¥¿æ¯”manå‘½ä»¤ä¼šæ›´å¥½äº›ï¼Œä½†å®é™…ä¸Šå­¦ä¹ å’Œä½¿ç”¨èµ·æ¥æ›´å›°éš¾ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¯­æ³•</span><br><span class="line">info(é€‰é¡¹)(å‚æ•°)</span><br><span class="line">é€‰é¡¹</span><br><span class="line">-dï¼šæ·»åŠ åŒ…å«infoæ ¼å¼å¸®åŠ©æ–‡æ¡£çš„ç›®å½•ï¼›</span><br><span class="line"> -fï¼šæŒ‡å®šè¦è¯»å–çš„infoæ ¼å¼çš„å¸®åŠ©æ–‡æ¡£ï¼›</span><br><span class="line">-nï¼šæŒ‡å®šé¦–å…ˆè®¿é—®çš„infoå¸®åŠ©æ–‡ä»¶çš„èŠ‚ç‚¹ï¼›</span><br><span class="line"> -oï¼šè¾“å‡ºè¢«é€‰æ‹©çš„èŠ‚ç‚¹å†…å®¹åˆ°æŒ‡å®šæ–‡ä»¶ã€‚</span><br><span class="line">å‚æ•°</span><br><span class="line"> å¸®åŠ©ä¸»é¢˜ï¼šæŒ‡å®šéœ€è¦è·å¾—å¸®åŠ©çš„ä¸»é¢˜ï¼Œå¯ä»¥æ˜¯æŒ‡ä»¤ã€å‡½æ•°ä»¥åŠé…ç½®æ–‡ä»¶ã€‚</span><br><span class="line">å¸¸ç”¨å¿«æ·é”®</span><br><span class="line">?é”®ï¼šå®ƒå°±ä¼šæ˜¾ç¤ºinfoçš„å¸¸ç”¨å¿«æ·é”®ã€‚</span><br><span class="line">Né”®ï¼šæ˜¾ç¤ºï¼ˆç›¸å¯¹äºæœ¬èŠ‚ç‚¹çš„ï¼‰ä¸‹ä¸€èŠ‚ç‚¹çš„æ–‡æ¡£å†…å®¹ã€‚</span><br><span class="line">Pé”®ï¼šæ˜¾ç¤ºï¼ˆç›¸å¯¹äºæœ¬èŠ‚ç‚¹çš„ï¼‰å‰ä¸€èŠ‚ç‚¹çš„æ–‡æ¡£å†…å®¹ã€‚</span><br><span class="line">Ué”®ï¼šè¿›å…¥å½“å‰å‘½ä»¤æ‰€åœ¨çš„ä¸»é¢˜ã€‚</span><br><span class="line">Mé”®ï¼šæ•²Mé”®åè¾“å…¥å‘½ä»¤çš„åç§°å°±å¯ä»¥æŸ¥çœ‹è¯¥å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£äº†ã€‚</span><br><span class="line">Gé”®ï¼šæ•²Gé”®åè¾“å…¥ä¸»é¢˜åç§°ï¼Œè¿›å…¥è¯¥ä¸»é¢˜ã€‚</span><br><span class="line">Lé”®ï¼šå›åˆ°ä¸Šä¸€ä¸ªè®¿é—®çš„é¡µé¢ã€‚ SPACEé”®ï¼šå‘å‰æ»šåŠ¨ä¸€é¡µã€‚</span><br><span class="line">BACKUPæˆ–DELé”®ï¼šå‘åæ»šåŠ¨ä¸€é¡µã€‚</span><br><span class="line">Qï¼šé€€å‡ºinfoã€‚</span><br><span class="line">å‘½ä»¤</span><br><span class="line">ï¼Ÿ æ˜¾ç¤ºå¸®åŠ©çª—å£</span><br><span class="line">åœ¨å¸®åŠ©çª—å£ä¸­ï¼š</span><br><span class="line">Ctrl-x 0 å…³é—­å¸®åŠ©çª—å£</span><br><span class="line">Ctrl-x Ctrl-c å…³é—­æ•´ä¸ª Info</span><br><span class="line">q é€€å‡º info</span><br><span class="line">n æ‰“å¼€ä¸æœ¬ Node å…³è”çš„ä¸‹ä¸€ä¸ª Node</span><br><span class="line">p æ‰“å¼€ä¸æœ¬ Node å…³è”çš„å‰ä¸€ä¸ª Node</span><br><span class="line">u æ‰“å¼€ä¸æœ¬ Node å…³è”çš„ä¸Šä¸€ä¸ª Node</span><br><span class="line">l å›åˆ°ä¸Šä¸€æ¬¡è®¿é—®çš„ Node</span><br><span class="line">mæˆ–g é€‰æ‹©ä¸€ä¸ªèœå•é¡¹ï¼ˆNode çš„åå­—ï¼‰</span><br><span class="line">           è¾“å…¥æŒ‡å®šèœå•çš„åå­—åæŒ‰å›è½¦ï¼Œæ‰“å¼€æŒ‡å®šèœå•é¡¹å…³è”çš„ Node</span><br><span class="line">ç©ºæ ¼é”® ä¸‹ä¸€é¡µï¼ˆPageDown ä¹Ÿå¯ä»¥ï¼Œä¸‹ä¸€é¡µä»å½“å‰é¡µçš„æœ€åä¸¤è¡Œå¼€å§‹ç®—èµ·ï¼‰</span><br><span class="line">           ä¸‹ä¸€ä¸ª Node ï¼ˆè‹¥å½“å‰é¡µåœ¨ Node æ–‡æ¡£çš„æœ«å°¾ï¼‰</span><br><span class="line">Del é”® ä¸Šä¸€é¡µï¼ˆPageUp ä¹Ÿå¯ä»¥ï¼Œä¸Šä¸€é¡µä»å½“å‰é¡µçš„å¼€å§‹ä¸¤è¡Œå¼€å§‹ç®—èµ·ï¼‰</span><br><span class="line">       ä¸Šä¸€ä¸ª Node ï¼ˆè‹¥å½“å‰é¡µ Node æ–‡æ¡£çš„å¼€å§‹ï¼‰</span><br><span class="line">b æˆ– t æˆ– Home æ–‡æ¡£çš„å¼€å§‹ï¼ˆb æ˜¯ begining çš„æ„æ€ï¼‰</span><br><span class="line">e æˆ– End æ–‡æ¡£çš„æœ«å°¾ï¼ˆb æ˜¯ ending çš„æ„æ€ï¼‰</span><br><span class="line">Ctrl-l åˆ·æ–°å½“å‰é¡µï¼Œè‹¥å½“å‰æ–‡æ¡£æ˜¾ç¤ºæƒ…å†µæœ‰é—®é¢˜æ—¶</span><br><span class="line">Ctrl-g å–æ¶ˆæ‰€é”®å…¥çš„æŒ‡ä»¤</span><br></pre></td></tr></table></figure>

<h2 id="å…³äºæ—¶é—´çš„å‘½ä»¤"><a href="#å…³äºæ—¶é—´çš„å‘½ä»¤" class="headerlink" title="å…³äºæ—¶é—´çš„å‘½ä»¤"></a>å…³äºæ—¶é—´çš„å‘½ä»¤</h2><h3 id="date"><a href="#date" class="headerlink" title="date"></a>date</h3><p>dateå‘½ä»¤æ˜¯æ˜¾ç¤ºæˆ–è®¾ç½®ç³»ç»Ÿæ—¶é—´ä¸æ—¥æœŸã€‚ å¾ˆå¤šshellè„šæœ¬é‡Œé¢éœ€è¦æ‰“å°ä¸åŒæ ¼å¼çš„æ—¶é—´æˆ–æ—¥æœŸï¼Œä»¥åŠè¦æ ¹æ®æ—¶é—´å’Œæ—¥æœŸæ‰§è¡Œæ“ä½œã€‚å»¶æ—¶é€šå¸¸ç”¨äºè„šæœ¬æ‰§è¡Œè¿‡ç¨‹ä¸­æä¾›ä¸€æ®µç­‰å¾…çš„æ—¶é—´ã€‚æ—¥æœŸå¯ä»¥ä»¥å¤šç§æ ¼å¼å»æ‰“å°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤è®¾ç½®å›ºå®šçš„æ ¼å¼ã€‚åœ¨ç±»UNIXç³»ç»Ÿä¸­ï¼Œæ—¥æœŸè¢«å­˜å‚¨ä¸ºä¸€ä¸ªæ•´æ•°ï¼Œå…¶å¤§å°ä¸ºè‡ªä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼ˆUTCï¼‰1970å¹´1æœˆ1æ—¥0æ—¶0åˆ†0ç§’èµ·æµé€çš„ç§’æ•°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¯­æ³•</span><br><span class="line">date(é€‰é¡¹)(å‚æ•°)</span><br><span class="line">é€‰é¡¹</span><br><span class="line">-d&lt;å­—ç¬¦ä¸²&gt;ï¼šæ˜¾ç¤ºå­—ç¬¦ä¸²æ‰€æŒ‡çš„æ—¥æœŸä¸æ—¶é—´ã€‚å­—ç¬¦ä¸²å‰åå¿…é¡»åŠ ä¸ŠåŒå¼•å·ï¼›</span><br><span class="line">-s&lt;å­—ç¬¦ä¸²&gt;ï¼šæ ¹æ®å­—ç¬¦ä¸²æ¥è®¾ç½®æ—¥æœŸä¸æ—¶é—´ã€‚å­—ç¬¦ä¸²å‰åå¿…é¡»åŠ ä¸ŠåŒå¼•å·ï¼›</span><br><span class="line"> -uï¼šæ˜¾ç¤ºGMTï¼›</span><br><span class="line">--helpï¼šåœ¨çº¿å¸®åŠ©ï¼›</span><br><span class="line">--versionï¼šæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚</span><br><span class="line">å‚æ•°</span><br><span class="line">&lt;+æ—¶é—´æ—¥æœŸæ ¼å¼&gt;ï¼šæŒ‡å®šæ˜¾ç¤ºæ—¶ä½¿ç”¨çš„æ—¥æœŸæ—¶é—´æ ¼å¼ã€‚</span><br></pre></td></tr></table></figure>

<p>æ—¥æœŸæ ¼å¼å­—ç¬¦ä¸²åˆ—è¡¨<br>| æ ¼å¼    | è¯´æ˜                              |<br>| :â€”- | :â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” |<br>| %H    | å°æ—¶ï¼Œ24å°æ—¶åˆ¶ï¼ˆ00<del>23ï¼‰                 |<br>| %I    | å°æ—¶ï¼Œ12å°æ—¶åˆ¶ï¼ˆ01</del>12ï¼‰                 |<br>| %k    | å°æ—¶ï¼Œ24å°æ—¶åˆ¶ï¼ˆ0<del>23ï¼‰                  |<br>| %l    | å°æ—¶ï¼Œ12å°æ—¶åˆ¶ï¼ˆ1</del>12ï¼‰                  |<br>| %M    | åˆ†é’Ÿï¼ˆ00<del>59ï¼‰                       |<br>| %p    | æ˜¾ç¤ºå‡ºAMæˆ–PM                        |<br>| %r    | æ˜¾ç¤ºæ—¶é—´ï¼Œ12å°æ—¶åˆ¶ï¼ˆhh:mm:ss %pï¼‰         |<br>| %s    | ä»1970å¹´1æœˆ1æ—¥00:00:00åˆ°ç›®å‰ç»å†çš„ç§’æ•°      |<br>| %S    | æ˜¾ç¤ºç§’ï¼ˆ00</del>59ï¼‰                      |<br>| %T    | æ˜¾ç¤ºæ—¶é—´ï¼Œ24å°æ—¶åˆ¶ï¼ˆhh:mm:ssï¼‰            |<br>| %X    | æ˜¾ç¤ºæ—¶é—´çš„æ ¼å¼ï¼ˆ%H:%M:%Sï¼‰               |<br>| %Z    | æ˜¾ç¤ºæ—¶åŒºï¼Œæ—¥æœŸåŸŸï¼ˆCSTï¼‰                   |<br>| %a    | æ˜ŸæœŸçš„ç®€ç§°ï¼ˆSun<del>Satï¼‰                  |<br>| %A    | æ˜ŸæœŸçš„å…¨ç§°ï¼ˆSunday</del>Saturdayï¼‰          |<br>| %h,%b | æœˆçš„ç®€ç§°ï¼ˆJan<del>Decï¼‰                   |<br>| %B    | æœˆçš„å…¨ç§°ï¼ˆJanuary</del>Decemberï¼‰          |<br>| %c    | æ—¥æœŸå’Œæ—¶é—´ï¼ˆTue Nov 20 14:12:58 2012ï¼‰ |<br>| %d    | ä¸€ä¸ªæœˆçš„ç¬¬å‡ å¤©ï¼ˆ01<del>31ï¼‰                  |<br>| %x,%D | æ—¥æœŸï¼ˆmm/dd/yyï¼‰                    |<br>| %j    | ä¸€å¹´çš„ç¬¬å‡ å¤©ï¼ˆ001</del>366ï¼‰                 |<br>| %m    | æœˆä»½ï¼ˆ01<del>12ï¼‰                       |<br>| %w    | ä¸€ä¸ªæ˜ŸæœŸçš„ç¬¬å‡ å¤©ï¼ˆ0ä»£è¡¨æ˜ŸæœŸå¤©ï¼‰                |<br>| %W    | ä¸€å¹´çš„ç¬¬å‡ ä¸ªæ˜ŸæœŸï¼ˆ00</del>53ï¼Œæ˜ŸæœŸä¸€ä¸ºç¬¬ä¸€å¤©ï¼‰         |<br>| %y    | å¹´çš„æœ€åä¸¤ä¸ªæ•°å­—ï¼ˆ1999åˆ™æ˜¯99ï¼‰              |<br>| %Y    | å¹´1999                           |</p>
<h4 id="date-å®éªŒ"><a href="#date-å®éªŒ" class="headerlink" title="date å®éªŒ"></a>date å®éªŒ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">æ ¼å¼åŒ–è¾“å‡º</span><br><span class="line">[booboo@rhel7 ~]$ date +"%y/%m/%d"</span><br><span class="line">16/06/16</span><br><span class="line">[booboo@rhel7 ~]$ date +"%Y/%m/%d"</span><br><span class="line">2016/06/16</span><br><span class="line">è¾“å‡ºæ˜¨å¤©æˆ–åå¤©çš„æ—¥æœŸ</span><br><span class="line">[booboo@rhel7 ~]$ date -d "1 day ago" +"%Y-%m-%d"</span><br><span class="line">2016-06-15</span><br><span class="line">[booboo@rhel7 ~]$ date -d "-1 day" +%Y%m%d</span><br><span class="line">20160615</span><br><span class="line">[booboo@rhel7 ~]$ date -d "+1 day" +%Y%m%d</span><br><span class="line">20160617</span><br><span class="line">è¾“å‡º50ç§’åçš„æ—¶é—´</span><br><span class="line">[booboo@rhel7 ~]$ date -d "50 second" +"%Y-%m-%d %H:%M:%S"</span><br><span class="line">2016-06-16 02:52:41</span><br><span class="line">ä¼ è¯´ä¸­çš„1234567890ç§’</span><br><span class="line">[booboo@rhel7 ~]$ date -d "1970-01-01 1234567890 seconds" +"%Y-%m-%d %H:%M:%S"</span><br><span class="line">2009-02-13 23:31:30</span><br><span class="line">2009å¹´2æœˆ13æ—¥æ˜ŸæœŸäº”ï¼Œåè°ƒä¸–ç•Œæ—¶ï¼ˆUTCï¼‰æ™šä¸Š11:31:30ï¼ŒUNIXæ—¶é—´å°†æŠµè¾¾1234567890ç§’ã€‚</span><br><span class="line">UNIXæ—¶é—´æ˜¯UNIXæˆ–ç±»UNIXç³»ç»Ÿä½¿ç”¨çš„æ—¶é—´è¡¨ç¤ºæ–¹å¼ï¼šä»åè°ƒä¸–ç•Œæ—¶1970å¹´1æœˆ1æ—¥0æ—¶0åˆ†0ç§’èµ·è‡³ç°åœ¨çš„æ€»ç§’æ•°ï¼Œä¸åŒ…æ‹¬é—°ç§’ã€‚ç”±äºå¤§éƒ¨åˆ†UNIXçš„ç³»ç»Ÿéƒ½æ˜¯32ä½ï¼Œå› æ­¤åˆ°2038å¹´æ—¶é—´è®¡æ•°å°±å¯èƒ½æº¢å‡ºï¼Œè§£å†³æ–¹æ³•æ˜¯æ›´æ¢ä¸º64ä½æ¨¡å¼ã€‚Linuxå†…æ ¸å¼€å‘è€…Alan Coxè¡¨ç¤ºï¼ŒLinuxç°åœ¨éƒ½è¿è¡Œ64ä½æ—¶é—´æ¨¡å¼ï¼Œå®ƒå¯ä»¥è®°å½•åˆ°2900äº¿å¹´åï¼Œå› æ­¤å³ä½¿å¤ªé˜³ç‡ƒæ–™ç”¨å°½ä¹Ÿä¸ä¼šå‡ºé—®é¢˜ã€‚</span><br><span class="line">æ™®é€šæ ¼å¼è½¬åŒ–</span><br><span class="line">[booboo@rhel7 ~]$ date -d "2016-06-16" +"%Y/%m/%d %H:%M:%S"</span><br><span class="line">2016/06/16 00:00:00</span><br><span class="line">è®¾å®šæ—¶é—´éœ€è¦rootç”¨æˆ·æƒé™ï¼Œæ­¤å¤„ç”¨boobooç”¨æˆ·æ¨¡æ‹Ÿï¼Œæ²¡æœ‰çœŸçš„ä¿®æ”¹æ—¶é—´</span><br><span class="line">[booboo@rhel7 ~]$ date</span><br><span class="line">Thu Jun 16 03:01:19 EDT 2016</span><br><span class="line">[booboo@rhel7 ~]$ date -s "02:03:08 2018-05-09"</span><br><span class="line">date: cannot set date: Operation not permitted</span><br><span class="line">Wed May  9 02:03:08 EDT 2018</span><br><span class="line">[booboo@rhel7 ~]$ date -s "02:03:08 20180509"</span><br><span class="line">date: cannot set date: Operation not permitted</span><br><span class="line">Wed May  9 02:03:08 EDT 2018</span><br><span class="line">[booboo@rhel7 ~]$ date -s "20180509 15:02:02"</span><br><span class="line">date: cannot set date: Operation not permitted</span><br><span class="line">Wed May  9 15:02:02 EDT 2018</span><br><span class="line">[booboo@rhel7 ~]$ date -s "2018-05-09 15:02:02"</span><br><span class="line">date: cannot set date: Operation not permitted</span><br><span class="line">Wed May  9 15:02:02 EDT 2018</span><br><span class="line">[booboo@rhel7 ~]$ date -s "2019/05/09 15:02:02"</span><br><span class="line">date: cannot set date: Operation not permitted</span><br><span class="line">Thu May  9 15:02:02 EDT 2019</span><br></pre></td></tr></table></figure>

<h4 id="date-æ‹“å±•å®éªŒ"><a href="#date-æ‹“å±•å®éªŒ" class="headerlink" title="date æ‹“å±•å®éªŒ"></a>date æ‹“å±•å®éªŒ</h4><p>1) æœ‰æ—¶éœ€è¦æ£€æŸ¥ä¸€ç»„å‘½ä»¤èŠ±è´¹çš„æ—¶é—´ æ¯”å¦‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pingæ‰§è¡Œçš„æ—¶é—´</span><br><span class="line">[root@rhel7 ~]# vi a.sh</span><br><span class="line">[root@rhel7 ~]# cat a.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">start=$(date +%s)</span><br><span class="line">ping -c 10 172.25.0.11 &amp;&gt; /dev/null</span><br><span class="line">end=$(date +%s)</span><br><span class="line">difference=$(( $end - $start ))</span><br><span class="line">echo $difference seconds.</span><br><span class="line">[root@rhel7 ~]# bash a.sh</span><br><span class="line">9 seconds.</span><br><span class="line">sqlè„šæœ¬è¿è¡Œçš„æ˜¯æ—¶é—´</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">start=$(date +%s)</span><br><span class="line"><span class="meta">$</span><span class="bash">mysql&lt; mysql.all.sql &amp;&gt; /dev/null</span></span><br><span class="line">end=$(date +%s)</span><br><span class="line">difference=$(( $end - $start ))</span><br><span class="line">echo $difference seconds.</span><br></pre></td></tr></table></figure>

<p>2) åˆ›å»ºä»¥å½“å‰æ—¶é—´ä¸ºæ–‡ä»¶åçš„ç›®å½•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# mkdir `date +%Y%m%d`</span><br><span class="line">[root@rhel7 ~]# ls</span><br><span class="line">20160616</span><br></pre></td></tr></table></figure>

<p>3ï¼‰å¤‡ä»½ä»¥æ—¶é—´åšä¸ºæ–‡ä»¶åçš„</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# tar -cvf `date +%Y%m%d`.tar ./`date +%Y%m%d`</span><br><span class="line">./20160616/</span><br><span class="line">[root@rhel7 ~]# ls</span><br><span class="line">20160616         Documents                         Pictures</span><br><span class="line">20160616.tar</span><br></pre></td></tr></table></figure>

<p>4ï¼‰ç¼–å†™shellè„šæœ¬è®¡ç®—ç¦»è‡ªå·±ç”Ÿæ—¥è¿˜æœ‰å¤šå°‘å¤©ï¼Ÿ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# cat bb.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">read -p "Input your birthday(YYYYmmdd):" date1</span><br><span class="line">m=`date -d "$date1" +%m`    #å¾—åˆ°ç”Ÿæ—¥çš„æœˆ</span><br><span class="line">d=`date -d "$date1" +%d`    #å¾—åˆ°ç”Ÿæ—¥çš„æ—¥</span><br><span class="line">date_now=`date +%s`             #å¾—åˆ°å½“å‰æ—¶é—´çš„ç§’å€¼</span><br><span class="line">y=`date +%Y`                    #å¾—åˆ°å½“å‰æ—¶é—´çš„å¹´</span><br><span class="line">birth=`date -d "$y$m$d" +%s`      #å¾—åˆ°ä»Šå¹´çš„ç”Ÿæ—¥æ—¥æœŸçš„ç§’å€¼</span><br><span class="line">internal=$(($birth-$date_now))        #è®¡ç®—ä»Šæ—¥åˆ°ç”Ÿæ—¥æ—¥æœŸçš„é—´éš”æ—¶é—´</span><br><span class="line">if [ "$internal" -lt "0" ]; then             #åˆ¤æ–­ä»Šå¤©çš„ç”Ÿæ—¥æ˜¯å¦å·²è¿‡</span><br><span class="line">       	birth=`date --date="$(($y+1))$m$d" +%s`      #å¾—åˆ°æ˜å¹´çš„ç”Ÿæ—¥æ—¥æœŸç§’å€¼</span><br><span class="line">       	internal=$(($birth-$date_now))               #è®¡ç®—ä»Šå¤©åˆ°ä¸‹ä¸€ä¸ªç”Ÿæ—¥çš„é—´éš”æ—¶é—´</span><br><span class="line">fi</span><br><span class="line">        echo "There is :$(($internal/60/60/24)) days."       #è¾“å‡ºç»“æœï¼Œç§’æ¢ç®—ä¸ºå¤©</span><br><span class="line">Input your birthday(YYYYmmdd):19960506</span><br><span class="line">There is :323 days.</span><br><span class="line">[root@rhel7 ~]# bash bb.sh</span><br><span class="line">Input your birthday(YYYYmmdd):19960902</span><br><span class="line">There is :77 days.</span><br></pre></td></tr></table></figure>

<h3 id="hwclock"><a href="#hwclock" class="headerlink" title="hwclock"></a>hwclock</h3><p>hwclockå‘½ä»¤æ˜¯ä¸€ä¸ªç¡¬ä»¶æ—¶é’Ÿè®¿é—®å·¥å…·ï¼Œå®ƒå¯ä»¥æ˜¾ç¤ºå½“å‰æ—¶é—´ã€è®¾ç½®ç¡¬ä»¶æ—¶é’Ÿçš„æ—¶é—´å’Œè®¾ç½®ç¡¬ä»¶æ—¶é’Ÿä¸ºç³»ç»Ÿæ—¶é—´ï¼Œä¹Ÿå¯è®¾ç½®ç³»ç»Ÿæ—¶é—´ä¸ºç¡¬ä»¶æ—¶é’Ÿçš„æ—¶é—´ã€‚ åœ¨Linuxä¸­æœ‰ç¡¬ä»¶æ—¶é’Ÿä¸ç³»ç»Ÿæ—¶é’Ÿç­‰ä¸¤ç§æ—¶é’Ÿã€‚ç¡¬ä»¶æ—¶é’Ÿæ˜¯æŒ‡ä¸»æœºæ¿ä¸Šçš„æ—¶é’Ÿè®¾å¤‡ï¼Œä¹Ÿå°±æ˜¯é€šå¸¸å¯åœ¨BIOSç”»é¢è®¾å®šçš„æ—¶é’Ÿã€‚ç³»ç»Ÿæ—¶é’Ÿåˆ™æ˜¯æŒ‡kernelä¸­çš„æ—¶é’Ÿã€‚å½“Linuxå¯åŠ¨æ—¶ï¼Œç³»ç»Ÿæ—¶é’Ÿä¼šå»è¯»å–ç¡¬ä»¶æ—¶é’Ÿçš„è®¾å®šï¼Œä¹‹åç³»ç»Ÿæ—¶é’Ÿå³ç‹¬ç«‹è¿ä½œã€‚æ‰€æœ‰Linuxç›¸å…³æŒ‡ä»¤ä¸å‡½æ•°éƒ½æ˜¯è¯»å–ç³»ç»Ÿæ—¶é’Ÿçš„è®¾å®šã€‚</p>
<p>æŸ¥çœ‹ BIOS æ—¶é—´</p>
<p>ä¿®æ”¹ BIOS æ—¶é—´</p>
<p><code>hwclock --systohc</code> å°†ç¡¬ä»¶æ—¶é—´ä¸ç³»ç»Ÿæ—¶é—´åŒæ­¥,ä»¥ç³»ç»Ÿä¸ºåŸºå‡†</p>
<p><code>hwclock --hctosys</code> å°†ç³»ç»Ÿæ—¶é—´ä¸ç¡¬ä»¶æ—¶é—´åŒæ­¥,ä»¥ç¡¬ä»¶ä¸ºåŸºå‡†</p>
<h3 id="timedatectl"><a href="#timedatectl" class="headerlink" title="timedatectl"></a>timedatectl</h3><p>æ¯” date å¤šäº†æ—¶åŒºçš„åŠŸèƒ½</p>
<p>rhel6ä¿®æ”¹æ—¶åŒº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[booboo@rhel7 ~]$ tzselect</span><br><span class="line">Please identify a location so that time zone rules can be set correctly.</span><br><span class="line">Please select a continent or ocean.</span><br><span class="line"> 1) Africa</span><br><span class="line"> 2) Americas</span><br><span class="line"> 3) Antarctica</span><br><span class="line"> 4) Arctic Ocean</span><br><span class="line"> 5) Asia</span><br><span class="line"> 6) Atlantic Ocean</span><br><span class="line"> 7) Australia</span><br><span class="line"> 8) Europe</span><br><span class="line"> 9) Indian Ocean</span><br><span class="line">10) Pacific Ocean</span><br><span class="line">11) none - I want to specify the time zone using the Posix TZ format.</span><br><span class="line">\#? 5</span><br><span class="line">Please select a country.</span><br><span class="line"> 1) Afghanistan		  18) Israel		    35) Palestine</span><br><span class="line"> 2) Armenia		  19) Japan		    36) Philippines</span><br><span class="line"> 3) Azerbaijan		  20) Jordan		    37) Qatar</span><br><span class="line"> 4) Bahrain		  21) Kazakhstan	    38) Russia</span><br><span class="line"> 5) Bangladesh		  22) Korea (North)	    39) Saudi Arabia</span><br><span class="line"> 6) Bhutan		  23) Korea (South)	    40) Singapore</span><br><span class="line"> 7) Brunei		  24) Kuwait		    41) Sri Lanka</span><br><span class="line"> 8) Cambodia		  25) Kyrgyzstan	    42) Syria</span><br><span class="line"> 9) China		  26) Laos		    43) Taiwan</span><br><span class="line">10) Cyprus		  27) Lebanon		    44) Tajikistan</span><br><span class="line">11) East Timor		  28) Macau		    45) Thailand</span><br><span class="line">12) Georgia		  29) Malaysia		    46) Turkmenistan</span><br><span class="line">13) Hong Kong		  30) Mongolia		    47) United Arab Emirates</span><br><span class="line">14) India		  31) Myanmar (Burma)	    48) Uzbekistan</span><br><span class="line">15) Indonesia		  32) Nepal		    49) Vietnam</span><br><span class="line">16) Iran		  33) Oman		    50) Yemen</span><br><span class="line">17) Iraq		  34) Pakistan</span><br><span class="line">\#? 9</span><br><span class="line">Please select one of the following time zone regions.</span><br><span class="line">1) east China - Beijing, Guangdong, Shanghai, etc.</span><br><span class="line">2) Heilongjiang (except Mohe), Jilin</span><br><span class="line">3) central China - Sichuan, Yunnan, Guangxi, Shaanxi, Guizhou, etc.</span><br><span class="line">4) most of Tibet &amp; Xinjiang</span><br><span class="line">5) west Tibet &amp; Xinjiang</span><br><span class="line">\#? 1</span><br><span class="line"></span><br><span class="line">The following information has been given:</span><br><span class="line"></span><br><span class="line">	China</span><br><span class="line">	east China - Beijing, Guangdong, Shanghai, etc.</span><br><span class="line"></span><br><span class="line">Therefore TZ='Asia/Shanghai' will be used.</span><br><span class="line">Local time is now:	Thu Jun 16 15:08:57 CST 2016.</span><br><span class="line">Universal Time is now:	Thu Jun 16 07:08:57 UTC 2016.</span><br><span class="line">Is the above information OK?</span><br><span class="line">1) Yes</span><br><span class="line">2) No</span><br><span class="line">\#? 1</span><br><span class="line"></span><br><span class="line">You can make this change permanent for yourself by appending the line</span><br><span class="line">	TZ='Asia/Shanghai'; export TZ</span><br><span class="line">to the file '.profile' in your home directory; then log out and log in again.</span><br><span class="line"></span><br><span class="line">Here is that TZ value again, this time on standard output so that you</span><br><span class="line">can use the /bin/tzselect command in shell scripts:</span><br><span class="line">Asia/Shanghai</span><br></pre></td></tr></table></figure>

<p>rhel7 ç‰ˆæœ¬</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[kiosk@foundation0 Desktop]$ timedatectl</span><br><span class="line">      Local time: Wed 2016-06-15 16:47:40 CST</span><br><span class="line">  Universal time: Wed 2016-06-15 08:47:40 UTC</span><br><span class="line">        RTC time: Wed 2016-06-15 16:47:40</span><br><span class="line">       Time zone: Asia/Shanghai (CST, +0800)</span><br><span class="line">     NTP enabled: yes</span><br><span class="line">NTP synchronized: yes</span><br><span class="line"> RTC in local TZ: yes</span><br><span class="line">      DST active: n/a</span><br></pre></td></tr></table></figure>

<p>å…³é”®è¯ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">UTC	åè°ƒä¸–ç•Œæ—¶ Coordinated Universal Time</span><br><span class="line">	åˆç§°ä¸–ç•Œç»Ÿä¸€æ—¶é—´ï¼Œä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼Œå›½é™…åè°ƒæ—¶é—´ã€‚1972 å¹´1 æœˆ1æ—¥ï¼ŒUTCï¼ˆåè°ƒä¸–ç•Œæ—¶ï¼‰æˆä¸ºæ–°çš„ä¸–ç•Œæ ‡å‡†æ—¶é—´ã€‚</span><br><span class="line">CST	æ—¶åŒºç¼©å†™</span><br><span class="line">	CSTå¯ä»¥ä¸ºå¦‚ä¸‹4ä¸ªä¸åŒçš„æ—¶åŒºçš„ç¼©å†™ï¼š</span><br><span class="line">ã€€ã€€	ç¾å›½ä¸­éƒ¨æ—¶é—´ï¼šCentral Standard Time (USA) UT-6:00</span><br><span class="line">	æ¾³å¤§åˆ©äºšä¸­éƒ¨æ—¶é—´ï¼šCentral Standard Time (Australia) UT+9:30</span><br><span class="line">	ä¸­å›½æ ‡å‡†æ—¶é—´ï¼šChina Standard Time UT+8:00 ä¾‹å¦‚ï¼ŒUTCæ˜¯0ç‚¹ï¼Œé‚£ä¹ˆCSTä¸­å›½ä¸ºæ—©æ™¨8ç‚¹</span><br><span class="line">	å¤å·´æ ‡å‡†æ—¶é—´ï¼šCuba Standard Time UT-4:00</span><br><span class="line">RTC Time</span><br><span class="line">	ç¡¬ä»¶æ—¶é’Ÿæ—¶é—´</span><br><span class="line">	set-local-rtc 1 æœ¬åœ°æ—¶åŒº</span><br><span class="line">	set-local-rtc 0	UTC</span><br><span class="line">DST	Daylight Saving Timeæ—¥å…‰èŠ‚çº¦æ—¶é—´ã€å¤ä»¤æ—¶</span><br><span class="line">	æ˜¯ä¸€ç§ä¸ºèŠ‚çº¦èƒ½æºè€Œäººä¸ºè§„å®šåœ°æ–¹æ—¶é—´çš„åˆ¶åº¦ï¼Œåœ¨è¿™ä¸€åˆ¶åº¦å®è¡ŒæœŸé—´æ‰€é‡‡ç”¨çš„ç»Ÿä¸€æ—¶é—´ç§°ä¸ºâ€œå¤ä»¤æ—¶é—´â€ã€‚</span><br><span class="line">	ä¸€èˆ¬åœ¨å¤©äº®æ—©çš„å¤å­£äººä¸ºå°†æ—¶é—´æå‰ä¸€å°æ—¶ï¼Œå¯ä»¥ä½¿äººæ—©èµ·æ—©ç¡ï¼Œå‡å°‘ç…§æ˜é‡ï¼Œä»¥å……åˆ†åˆ©ç”¨å…‰ç…§èµ„æºï¼Œä»è€ŒèŠ‚çº¦ç…§æ˜ç”¨ç”µã€‚</span><br><span class="line">	å„ä¸ªé‡‡çº³å¤æ—¶åˆ¶çš„å›½å®¶å…·ä½“è§„å®šä¸åŒã€‚ç›®å‰å…¨ä¸–ç•Œæœ‰è¿‘110ä¸ªå›½å®¶æ¯å¹´è¦å®è¡Œå¤ä»¤æ—¶ã€‚</span><br><span class="line">	1986å¹´è‡³1991å¹´ï¼Œä¸­å›½åœ¨å…¨å›½èŒƒå›´å®è¡Œäº†å…­å¹´å¤ä»¤æ—¶ï¼Œ1992å¹´4æœˆ5æ—¥åä¸å†å®è¡Œã€‚</span><br></pre></td></tr></table></figure>

<h3 id="cal"><a href="#cal" class="headerlink" title="cal"></a>cal</h3><p>calå‘½ä»¤ç”¨äºæ˜¾ç¤ºå½“å‰æ—¥å†ï¼Œæˆ–è€…æŒ‡å®šæ—¥æœŸçš„æ—¥å†ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cal [-smjy13] [[[day] month] year]</span><br><span class="line">-1 æ˜¾ç¤ºå½“æœˆæ—¥å†å¹¶å°†ä»Šæ—¥æ ‡é»‘</span><br><span class="line">-3 æ˜¾ç¤ºä¸Šä¸ªæœˆã€å½“æœˆã€ä¸‹ä¸ªæœˆã€‚</span><br><span class="line">-s å‘¨æ—¥ä½œä¸ºç¬¬ä¸€åˆ—</span><br><span class="line">-m å‘¨ä¸€ä½œä¸ºç¬¬ä¸€åˆ—</span><br><span class="line">-j åˆ—å‡ºä»Šå¤©æ˜¯ä¸€å¹´çš„ç¬¬å‡ å¤©</span><br><span class="line">-y åˆ—å‡ºä»Šå¹´æ‰€æœ‰çš„æœˆ</span><br><span class="line">[root@rhel7 ~]# cal</span><br><span class="line">      June 2016     </span><br><span class="line">Su Mo Tu We Th Fr Sa</span><br><span class="line">          1  2  3  4</span><br><span class="line"> 5  6  7  8  9 10 11</span><br><span class="line">12 13 14 15 16 17 18</span><br><span class="line">19 20 21 22 23 24 25</span><br><span class="line">26 27 28 29 30</span><br><span class="line"></span><br><span class="line">[root@rhel7 ~]# cal -3</span><br><span class="line">      May 2016              June 2016             July 2016     </span><br><span class="line">Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa</span><br><span class="line"> 1  2  3  4  5  6  7            1  2  3  4                  1  2</span><br><span class="line"> 8  9 10 11 12 13 14   5  6  7  8  9 10 11   3  4  5  6  7  8  9</span><br><span class="line">15 16 17 18 19 20 21  12 13 14 15 16 17 18  10 11 12 13 14 15 16</span><br><span class="line">22 23 24 25 26 27 28  19 20 21 22 23 24 25  17 18 19 20 21 22 23</span><br><span class="line">29 30 31              26 27 28 29 30        24 25 26 27 28 29 30</span><br><span class="line">                                            31                  </span><br><span class="line">[root@rhel7 ~]# cal -j</span><br><span class="line">         June 2016         </span><br><span class="line">Sun Mon Tue Wed Thu Fri Sat</span><br><span class="line">            153 154 155 156</span><br><span class="line">157 158 159 160 161 162 163</span><br><span class="line">164 165 166 167 168 169 170</span><br><span class="line">171 172 173 174 175 176 177</span><br><span class="line">178 179 180 181 182</span><br></pre></td></tr></table></figure>

<h2 id="Linux-åŸºç¡€å‘½ä»¤ä½œä¸š"><a href="#Linux-åŸºç¡€å‘½ä»¤ä½œä¸š" class="headerlink" title="Linux åŸºç¡€å‘½ä»¤ä½œä¸š"></a>Linux åŸºç¡€å‘½ä»¤ä½œä¸š</h2><ol>
<li>åœ¨/tmp ç›®å½•ä¸‹åˆ›å»º testdir ç›®å½•,åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»º file1 åˆ° file30 çš„ 30 ä¸ªæ–‡ä»¶ã€‚</li>
<li>åˆ é™¤æ‰€æœ‰ä»¥ file1 èµ·å§‹çš„æ–‡ä»¶ã€‚</li>
<li>åˆ é™¤ file2 ååŒ¹é…ä¸€ä¸ªå­—ç¬¦çš„æ‰€æœ‰æ–‡ä»¶ã€‚</li>
<li>åœ¨/home/student ç›®å½•ä¸‹é€’å½’åˆ›å»ºä¸€ä¸ª/home/student/a/b/c/d/e ç›® å½•,å¹¶ä¸”å°†è¯¥ a ç›®å½•ä¿ç•™åŸå±æ€§çš„å¤åˆ¶åˆ°/tmp ç›®å½•ä¸‹ã€‚</li>
<li>å°†/tmp ä¸‹çš„ a ç›®å½•é‡å‘½åä¸º test ç›®å½•ã€‚</li>
<li>ç»Ÿè®¡ä¸€ä¸‹/etc/passwd æ–‡ä»¶æ€»å…±æœ‰å‡ è¡Œã€‚</li>
<li>åœ¨/tmp ä¸‹åˆ›å»ºä¸€ä¸ªç›®å½•,ç›®å½•åä¸º study</li>
<li>åœ¨ study ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶, æ–‡ä»¶åä»»æ„, å¹¶å‘è¿™ä¸ªæ–‡ä»¶é‡Œå†™ hello å­—æ®µ</li>
<li>å¾€è¯¥æ–‡ä»¶é‡Œè¿½åŠ  study å­—æ®µã€‚</li>
<li>æŸ¥çœ‹è¯¥æ–‡ä»¶å†…å®¹ã€‚</li>
<li>ç»Ÿè®¡ä¸€ä¸‹è¯¥æ–‡ä»¶å…±æœ‰å‡ è¡Œ,å‡ ä¸ªå•è¯,å‡ ä¸ªå­—èŠ‚ã€‚</li>
<li>å°†/etc/passwd é‡Œä»¥ bash ç»“å°¾çš„è¡Œè¿‡æ»¤å‡ºæ¥,å¹¶ä»ä¸­æˆªå–ç¬¬ä¸€åˆ—å­—<br>æ®µå†…å®¹ã€‚</li>
<li>ç»Ÿè®¡/boot/ä¸‹æ‰€æœ‰æ–‡ä»¶çš„å±æ€§ä¸­å« root å­—æ®µçš„æ–‡ä»¶å…±æœ‰å‡ ä¸ªã€‚</li>
<li>ç†Ÿæ‚‰ä¸€ä¸‹ vim ç¼–è¾‘å™¨,åˆ©ç”¨ vim ç¼–è¾‘å™¨ä¹¦å†™æ•´ç†ä¸€ä¸‹ä»Šå¤©æ‰€å­¦çš„ çŸ¥è¯†ç‚¹ã€‚</li>
<li>åˆ¤æ–­ä¸€ä¸‹ boot ç›®å½•ä¸‹æ–‡ä»¶çš„å†…å®¹ç±»å‹,å¹¶å°†å±äº ASCII ç æ–‡ä»¶å†…å®¹ ç±»å‹çš„æ–‡ä»¶åæ˜¾ç¤ºåˆ°å±å¹•ä¸Š</li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯åŸ¹è®­</category>
        <category>Linuxç³»ç»ŸåŸºç¡€åŸ¹è®­</category>
      </categories>
      <tags>
        <tag>åŸ¹è®­</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux ç”¨æˆ·å’Œç»„</title>
    <url>/2016/12/22/booboo_linux_base/02-Linux%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84/</url>
    <content><![CDATA[<h2 id="è¯¾å ‚ä½œä¸š"><a href="#è¯¾å ‚ä½œä¸š" class="headerlink" title="è¯¾å ‚ä½œä¸š"></a>è¯¾å ‚ä½œä¸š</h2><ol>
<li>æ·»åŠ 2ä¸ªç»„ï¼Œä¸€ä¸ªç»„åä¸ºjusticeï¼Œå¦å¤–ä¸€ä¸ªç»„åä¸ºninjaã€‚</li>
<li>æ·»åŠ 4ä¸ªæ–°ç”¨æˆ·ï¼Œåˆ†åˆ«ä¸º supermanã€batmanã€wonderwomanã€greenlanternï¼Œå¯†ç å‡ä¸ºuplookingï¼›å…¶é™„åŠ ç»„ä¸ºjusticeã€‚</li>
<li>æ·»åŠ 4ä¸ªæ–°ç”¨æˆ·ï¼Œåˆ†åˆ«ä¸º leoã€raphã€mikeyã€don ï¼Œå¯†ç å‡ä¸ºuplookingï¼Œå…¶é™„åŠ ç»„ä¸ºninjaã€‚</li>
<li>mikeyç”¨æˆ·æ€»æ˜¯åœ¨ç³»ç»Ÿé‡Œæç ´åï¼Œrootå†³å®šå°ä»–çš„å·ï¼Œè®©ä»–ä¸èƒ½ç™»é™†ã€‚è¿‡äº†å‡ å¤©ï¼Œå†è§£å°ã€‚</li>
<li>leoæƒ³åŠ å…¥justiceï¼ŒrootåŒæ„äº†ï¼Œå°†justiceä½œä¸ºé™„åŠ ç»„æ·»åŠ ç»™leoã€‚</li>
<li>donæ•´å¤©æåˆ›é€ ï¼Œrootè¦æ±‚ä»–çš„å¯†ç è¦æ›´å®‰å…¨ï¼Œæ‰€ä»¥å°†ä»–çš„å¯†ç è®¾ç½®æˆ7å¤©ä¹‹åè¦æ¢å¯†ç ï¼Œå¹¶ä¸”å¯†ç è¿‡æœŸå‰3å¤©è¦æé†’ä»–ï¼Œå¦‚æœå¯†ç è¿‡æœŸå2å¤©è¿˜æ²¡æœ‰è®¾ç½®æ–°å¯†ç ï¼Œé‚£ä¹ˆå°±å°é”donè´¦æˆ·ã€‚</li>
<li>batmanæ€»æ˜¯å–œæ¬¢ä¿®æ”¹å¯†ç ï¼Œæ²¡äº‹å°±åœ¨ä¿®æ”¹å¯†ç ï¼Œè€Œä½¿ç”¨è¯¥batmanè´¦æˆ·çš„äººæœ‰å¥½å‡ ä¸ªï¼Œæ¯”å¦‚è™è ä¾ ï¼Œè™è ä¾ çš„ç®¡å®¶ï¼Œè™è ä¾ çš„åŠ©æ‰‹ç½—å®¾ç­‰ç­‰ã€‚æ‰€ä»¥rootå†³å®šå°†batmanè´¦æˆ·çš„å¯†ç çš„æœ€å°å­˜æ´»æœŸæ”¹ä¸º10å¤©ã€‚ä¹Ÿå°±æ˜¯è¯´10å¤©ä¹‹å†…batmanè´¦æˆ·ä¸èƒ½ä¿®æ”¹å¯†ç ã€‚</li>
<li>leoæƒ³é€€å‡ºjustice,rootå¸®ä»–è®¾ç½®ä¸€ä¸‹ã€‚</li>
<li>supermanæƒ³æŠŠå¯†ç æ”¹ä¸ºuplooking123ï¼Œè®©ä»–è‡ªå·±æ”¹ã€‚å‘ç°æ”¹ä¸äº†ï¼Œå¯†ç å¤ªç®€å•äº†ï¼Œè‡ªå·±å»æƒ³ä¸€ä¸ªå¤æ‚çš„å¯†ç ã€‚</li>
<li>è®©supermanèƒ½å¤Ÿä¿®æ”¹rootç”¨æˆ·çš„å¯†ç ã€‚</li>
</ol>
<h2 id="ç”¨æˆ·å’Œç»„çš„ç›¸å…³æ–‡ä»¶"><a href="#ç”¨æˆ·å’Œç»„çš„ç›¸å…³æ–‡ä»¶" class="headerlink" title="ç”¨æˆ·å’Œç»„çš„ç›¸å…³æ–‡ä»¶"></a>ç”¨æˆ·å’Œç»„çš„ç›¸å…³æ–‡ä»¶</h2><table>
<thead>
<tr>
<th align="left">æ–‡ä»¶å</th>
<th align="left">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="left">/etc/passwd</td>
<td align="left">ç³»ç»Ÿä¸­çš„è´¦å·ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">etc/shadow</td>
<td align="left">å­˜æ”¾å¯†ç åŠå…¶ç­–ç•¥ç›¸å…³ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">/etc/group</td>
<td align="left">å­˜æ”¾ç”¨æˆ·ç»„çš„ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">/etc/gshadow</td>
<td align="left">å­˜æ”¾ç”¨æˆ·ç»„çš„å¯†ç åŠå…¶ç­–ç•¥ç›¸å…³ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">/etc/default/useradd</td>
<td align="left">åˆ›å»ºæ–°ç”¨æˆ·æ—¶é»˜è®¤çš„é…ç½®ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">/etc/skel/*</td>
<td align="left">Directory containing default files.</td>
</tr>
<tr>
<td align="left">/etc/login.defs</td>
<td align="left">ç”¨æˆ·å’Œç»„é»˜è®¤çš„é…ç½®ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">/etc/shells</td>
<td align="left">è¯¥æ–‡ä»¶è®°å½•ç€åˆæ³•çš„ shell ç‰ˆæœ¬</td>
</tr>
</tbody></table>
<h3 id="etc-passwd"><a href="#etc-passwd" class="headerlink" title="/etc/passwd"></a>/etc/passwd</h3><p>æ¯ä¸€è¡Œéƒ½ä»£è¡¨ä¸€ä¸ªè´¦å· , æœ‰å‡ è¡Œå°±ä»£è¡¨æœ‰å‡ ä¸ªè´¦å·åœ¨ä½ çš„ç³»ç»Ÿä¸­</p>
<p>ç³»ç»Ÿç»Ÿè´¦å·: bin, daemon, adm, nobody</p>
<p>ä»¥â€œï¼šâ€ä½œä¸ºåˆ†éš”ç¬¦,ä¸ƒä¸ªå­—æ®µ</p>
<p><code>root:x:0:0:root:/root:/bin/bash</code> </p>
<ol>
<li><p>è´¦å·åç§° :root</p>
</li>
<li><p>å¯†ç  :X</p>
</li>
<li><p>UID: ä½¿ç”¨è€…æ ‡è¯†ç¬¦<br>rhel6 root_uid=0 sys_uid=1-499 user_uid=500-65535 ( 2^32-1 )<br>rhel7 root_uid=0 sys_uid=201-999 user_uid=1000-65535</p>
</li>
<li><p>GID: ç”¨æˆ·ç»„æ ‡è¯†ç¬¦ root_guid=0</p>
</li>
<li><p>ç”¨æˆ·ä¿¡æ¯è¯´æ˜æ  </p>
</li>
<li><p>å®¶ç›®å½• : ç”¨æˆ·çš„å®¶ç›®å½• root çš„å®¶ç›®å½•åœ¨ /root, é»˜è®¤ç”¨æˆ·çš„å®¶ç›®å½•åœ¨ /home/yourname</p>
</li>
<li><p>Shell: å‘½ä»¤è§£é‡Šå™¨</p>
<ul>
<li>ç³»ç»Ÿé»˜è®¤ä¸º /bin/bash</li>
</ul>
</li>
</ol>
<ul>
<li>/sbin/nologin ä¸å¯é€šè¿‡ç»ˆç«¯ç™»å½•ç³»ç»Ÿ</li>
</ul>
<h3 id="etc-shadow"><a href="#etc-shadow" class="headerlink" title="/etc/shadow"></a>/etc/shadow</h3><p>å­˜æ”¾å¯†ç åŠå…¶ç­–ç•¥ç›¸å…³ä¿¡æ¯</p>
<p>ä»¥â€œï¼šâ€ä½œä¸ºåˆ†éš”ç¬¦ä¹ä¸ªå­—æ®µ</p>
<p><code>root:$1$/30QpE5e$y9N/D0bh6rAACBEz.hqo00:14126:0:99999:7:::</code></p>
<ol>
<li>è´¦å·åç§° :root</li>
<li>å¯†ç  : åŠ å¯†åçš„å­—ç¬¦ä¸²ï¼Œä»¥$N$ å¼€å¤´</li>
<li>æœ€è¿‘å˜æ›´å¯†ç çš„æ—¥æœŸ : å¤©æ•°,ä»¥ 1970 å¹´ 1 æœˆ 1 æ—¥ä½œä¸º 1 è€Œç´¯åŠ çš„æ—¥æœŸ<br>echo $(($(date â€“date=â€2008/09/04â€ +%s)/86400+1))<br>14126</li>
<li>å¯†ç ä¸å¯è¢«æ›´æ”¹çš„å¤©æ•° :0 : è¡¨ç¤ºå¯†ç éšæ—¶å¯ä»¥æ›´æ”¹ï¼Œ 20 :è¡¨ç¤º è·æœ€è¿‘ä¸€æ¬¡ä¿®æ”¹å¯†ç 20 å¤©ä¹‹å†…éƒ½ä¸èƒ½ä¿®æ”¹å¯†ç </li>
<li>å¯†ç éœ€è¦é‡æ–°å˜æ›´çš„å¤©æ•° :99999 ( è®¡ç®—ä¸º 273 å¹´ ) è¡¨ç¤ºå¯†ç çš„å˜æ›´æ²¡æœ‰å¼ºåˆ¶æ€§ã€‚</li>
<li>å¯†ç éœ€è¦å˜æ›´æœŸé™å‰çš„è­¦å‘Šå¤©æ•° : åœ¨å¯†ç åˆ°æœŸä¹‹å‰å‡ å¤©æé†’</li>
<li>å¯†ç è¿‡æœŸåçš„è´¦å·å®½é™æ—¶é—´ ( å¯†ç å¤±æ•ˆæ—¥ ): å¯†ç è¿‡æœŸç‰¹æ€§ã€‚</li>
<li>è´¦å·å¤±æ•ˆæ—¥æœŸ : å¤©æ•°ï¼Œä»¥ 1970 å¹´ 1 æœˆ 1 æ—¥ä½œä¸º 1 è€Œç´¯åŠ çš„æ—¥æœŸ</li>
<li>ä¿ç•™ : ä¿ç•™æ®µ</li>
</ol>
<h3 id="etc-group"><a href="#etc-group" class="headerlink" title="/etc/group"></a>/etc/group</h3><p>å­˜æ”¾ç”¨æˆ·ç»„çš„ä¿¡æ¯</p>
<p>æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªç¾¤ç»„ä»¥â€œï¼šâ€ä½œä¸ºåˆ†éš”ç¬¦å››ä¸ªå­—æ®µ</p>
<p><code>root:x:0:root</code></p>
<ol>
<li>ç»„å :root</li>
<li>ç¾¤ç»„å¯†ç  :x ä¸€èˆ¬ä¸è®¾å®š,é€šå¸¸æ˜¯ç»™ã€ç¾¤ç»„ç®¡ç†å‘˜ã€ä½¿ç”¨</li>
<li>GID: ç¾¤ç»„çš„ ID</li>
<li>æ­¤ç¾¤ç»„æ”¯æŒçš„è´¦å·åç§° : ä¸€ä¸ªè´¦å·å¯ä»¥åŠ å…¥å¤šä¸ªç¾¤ç»„</li>
</ol>
<p>ä¾‹å¦‚,å°† dabao åŠ å…¥ root ç¾¤ç»„å :</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">root:x:0:root,dmtsai</span><br></pre></td></tr></table></figure>

<h3 id="etc-gshadow"><a href="#etc-gshadow" class="headerlink" title="/etc/gshadow"></a>/etc/gshadow</h3><p>å­˜æ”¾ç”¨æˆ·ç»„çš„å¯†ç åŠå…¶ç­–ç•¥ç›¸å…³ä¿¡æ¯</p>
<p>æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªç¾¤ç»„ â€œ: â€ ä½œä¸ºåˆ†éš”ç¬¦å››ä¸ªå­—æ®µ</p>
<p><code>newgroup:!::redhat</code></p>
<ol>
<li>ç»„å :newgroup</li>
<li>å¯†ç æ  : å¼€å¤´ä¸º ! è¡¨ç¤ºæ— åˆæ³•å¯†ç  , æ‰€ä»¥æ— ç¾¤ç»„ç®¡ç†å‘˜</li>
<li>ç¾¤ç»„ç®¡ç†å‘˜çš„è´¦å·</li>
<li>æ­¤ç¾¤ç»„æ”¯æŒçš„è´¦å·åç§° : ä¸ /etc/group ç›¸åŒ</li>
</ol>
<h3 id="etc-default-useradd"><a href="#etc-default-useradd" class="headerlink" title="/etc/default/useradd"></a>/etc/default/useradd</h3><p>åˆ›å»ºæ–°ç”¨æˆ·æ—¶é»˜è®¤çš„é…ç½®ä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">GROUP=100 &lt;== é¢„è®¾çš„ç¾¤ç»„ï¼Œç°å·²ä¸ç”Ÿæ•ˆï¼Œå¦‚æœåˆ›å»ºç”¨æˆ·æ—¶ä¸æŒ‡å®šç¾¤ç»„ï¼Œåˆ™ä½¿ç”¨ä¸ç”¨æˆ·åŒåçš„ç¾¤ç»„</span><br><span class="line">HOME=/home &lt;== é»˜è®¤çš„å®¶ç›®å½•æ‰€åœ¨ç›®å½•</span><br><span class="line">INACTIVE=-1 &lt;== å¯†ç å¤±æ•ˆæ—¥ , åœ¨ shadow ç¬¬ 7 æ </span><br><span class="line">EXPIRE= &lt;== è´¦å·å¤±æ•ˆæ—¥ , åœ¨ shadow ç¬¬ 8 æ </span><br><span class="line">SHELL=/bin/bash &lt;== é¢„è®¾çš„ shell /sbin/nologin å°†æ— æ³•ç™»é™†</span><br><span class="line">SKEL=/etc/skel&lt;== ç”¨æˆ·å®¶ç›®å½•çš„å†…å®¹æ•°æ®å‚è€ƒç›®å½•</span><br><span class="line">CREATE_MAIL_SPOOL=yes &lt;== æ˜¯å¦ä¸»åŠ¨å¸®åŠ©ä½¿ç”¨è€…å»ºç«‹é‚®ä»¶ä¿¡ç®± (mailbox)</span><br></pre></td></tr></table></figure>


<h3 id="etc-skel"><a href="#etc-skel" class="headerlink" title="/etc/skel/"></a>/etc/skel/</h3><p>Directory containing default files.</p>
<p>.bash_logout .bash_profile .bashrc .gnome2 .mozilla</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 skel]# ll -a /etc/skel</span><br><span class="line">total 40</span><br><span class="line">drwxr-xr-x. 4 root root 4096 Jan 2 01:58 .</span><br><span class="line">drwxr-xr-x. 125 root root 12288 Mar 21 03:09 ..</span><br><span class="line">-rw-r--r--. 1 root root 18 Jul 9 2013 .bash_logout</span><br><span class="line">-rw-r--r--. 1 root root 176 Jul 9 2013 .bash_profile</span><br><span class="line">-rw-r--r--. 1 root root 124 Jul 9 2013 .bashrc</span><br><span class="line">-rw-r--r--. 1 root root 500 May 7 2013 .emacs</span><br><span class="line">drwxr-xr-x. 2 root root 4096 Jul 14 2010 .gnome2</span><br><span class="line">drwxr-xr-x. 4 root root 4096 Jan 2 01:52 .mozilla</span><br></pre></td></tr></table></figure>

<h3 id="etc-login-defs"><a href="#etc-login-defs" class="headerlink" title="/etc/login.defs"></a>/etc/login.defs</h3><p>é»˜è®¤çš„é…ç½®ä¿¡æ¯ rhel6 ä¸‹çš„ä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">MAIL_DIR           /var/spool/mail ç”¨æˆ·é»˜è®¤é‚®ä»¶ä¿¡ç®±æ”¾ç½®ç›®å½•</span><br><span class="line">PASS_MAX_DAYS      99999 /etc/shadow ç¬¬ 5 æ  , å¯†ç éœ€è¦é‡æ–°å˜æ›´çš„å¤©æ•°</span><br><span class="line">PASS_MIN_DAYS      0 /etc/shadow ç¬¬ 4 æ  , å¯†ç ä¸å¯è¢«æ›´åŠ¨çš„å¤©æ•°</span><br><span class="line">PASS_MIN_LEN       5 å¯†ç æœ€çŸ­çš„å­—ç¬¦é•¿åº¦ , å·²è¢« pam æ¨¡å—å–ä»£ , å¤±å»æ•ˆç”¨ !</span><br><span class="line">PASS_WARN_AGE      7 /etc/shadow ç¬¬ 6 æ  , è¿‡æœŸå‰ä¼šè­¦å‘Šå¤©æ•°</span><br><span class="line">UID_MIN            500 ä½¿ç”¨è€…æœ€å°çš„ UID ä¸èƒ½ &lt;500</span><br><span class="line">UID_MAX            60000  ä½¿ç”¨è€…æœ€å¤§çš„ UID ä¸èƒ½ &gt;60000</span><br><span class="line">GID_MIN            500  è‡ªå®šä¹‰ç»„æœ€å°çš„ UID ä¸èƒ½ &lt;500</span><br><span class="line">GID_MAX            60000  è‡ªå®šä¹‰ç»„æœ€å¤§çš„ UID ä¸èƒ½ &gt;60000</span><br><span class="line">CREATE_HOME     yes  åœ¨ username å‘½ä»¤ä¸åŠ  -M åŠ -m æ—¶ , æ˜¯å¦ä¸»åŠ¨å»ºç«‹ç”¨æˆ·å®¶ç›®å½•</span><br><span class="line">UMASK        077  ç”¨æˆ·å®¶ç›®å½•å»ºç«‹çš„ umask , å› æ­¤æƒé™ä¼šæ˜¯ 700 ã€ drwx------ ã€</span><br><span class="line">USERGROUPS_ENAB  yes  ä½¿ç”¨ userdel æ—¶ , æ˜¯å¦ä¼šåˆ é™¤åˆå§‹ç¾¤ç»„(å¦‚æœä½¿ç”¨ userdel å»åˆ é™¤ä¸€ä¸ªè´¦å·æ—¶ , è¯¥è´¦å·æ‰€å±çš„åˆå§‹ç¾¤ç»„å·²ç»æ²¡æœ‰äººéš¶å±äºè¯¥ç¾¤ç»„äº† , é‚£ä¸¾å°±åˆ æ‰è¯¥ç¾¤ç»„)</span><br><span class="line">ENCRYPT_METHOD    SHA512  ç»è¿‡ SHA512 è¿›è¡ŒåŠ å¯†å¤„ç†</span><br></pre></td></tr></table></figure>

<h3 id="etc-shells"><a href="#etc-shells" class="headerlink" title="/etc/shells"></a>/etc/shells</h3><p>è¯¥æ–‡ä»¶è®°å½•ç€åˆæ³•çš„ shell ç‰ˆæœ¬</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 skel]# cat /etc/shells</span><br><span class="line">/bin/sh</span><br><span class="line">/bin/bash</span><br><span class="line">/sbin/nologin</span><br><span class="line">/bin/dash</span><br><span class="line">/bin/tcsh</span><br><span class="line">/bin/csh</span><br></pre></td></tr></table></figure>

<h2 id="ç”¨æˆ·å’Œç»„çš„ç›¸å…³å‘½ä»¤"><a href="#ç”¨æˆ·å’Œç»„çš„ç›¸å…³å‘½ä»¤" class="headerlink" title="ç”¨æˆ·å’Œç»„çš„ç›¸å…³å‘½ä»¤"></a>ç”¨æˆ·å’Œç»„çš„ç›¸å…³å‘½ä»¤</h2><table>
<thead>
<tr>
<th align="left">ç”¨æˆ·å’Œç»„</th>
<th align="left"></th>
</tr>
</thead>
<tbody><tr>
<td align="left">æ–°å»ºç»„</td>
<td align="left">groupadd</td>
</tr>
<tr>
<td align="left">æ–°å»ºç”¨æˆ·</td>
<td align="left">useradd</td>
</tr>
<tr>
<td align="left">ä¿®æ”¹å¯†ç </td>
<td align="left">passwd å¯†ç  &gt;8 ä½å­—ç¬¦ã€å°å†™ / å¤§å†™ / æ•°å­— / ç‰¹æ®Šç¬¦å·ä¹‹é—´ä»»é€‰ 3 ä½</td>
</tr>
<tr>
<td align="left">ä¿®æ”¹ç”¨æˆ·å±æ€§</td>
<td align="left">usermod</td>
</tr>
<tr>
<td align="left">ä¿®æ”¹ç»„å±æ€§</td>
<td align="left">groupmod</td>
</tr>
<tr>
<td align="left">ä¿®æ”¹å¯†ç å±æ€§</td>
<td align="left">chage</td>
</tr>
<tr>
<td align="left">ä¿®æ”¹ shell</td>
<td align="left">chsh</td>
</tr>
<tr>
<td align="left">åˆ é™¤ç”¨æˆ·</td>
<td align="left">userdel</td>
</tr>
<tr>
<td align="left">åˆ é™¤ç»„</td>
<td align="left">groupdel</td>
</tr>
<tr>
<td align="left">æŸ¥çœ‹å·²å­˜åœ¨ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</td>
<td align="left">id</td>
</tr>
<tr>
<td align="left">æŸ¥çœ‹å½“å‰ç”¨æˆ·æ”¯æŒçš„ç¾¤ç»„ä¿¡æ¯</td>
<td align="left">groups</td>
</tr>
</tbody></table>
<p>é€šè¿‡æ–‡ä»¶æŸ¥çœ‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/etc/passwd</span><br><span class="line">/etc/shadow</span><br><span class="line">/etc/group</span><br><span class="line">/etc/gshadow</span><br></pre></td></tr></table></figure>

<h3 id="æ–°å»ºç”¨æˆ·å’Œç»„"><a href="#æ–°å»ºç”¨æˆ·å’Œç»„" class="headerlink" title="æ–°å»ºç”¨æˆ·å’Œç»„"></a>æ–°å»ºç”¨æˆ·å’Œç»„</h3><h4 id="groupadd"><a href="#groupadd" class="headerlink" title="groupadd"></a>groupadd</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">groupadd åˆ›å»ºç»„</span><br><span class="line">-g, --gid GID</span><br><span class="line">-r, --system  Create a system group</span><br><span class="line"></span><br><span class="line"> æ–°å»ºç»„ test åˆ¶å®š gid ä¸º 888</span><br><span class="line">[root@rhel7 ~]# groupadd -g 888 test</span><br><span class="line"> æ–°å»ºä¸€ä¸ªç³»ç»Ÿç»„ baby</span><br><span class="line">[root@rhel7 ~]# groupadd -r baby</span><br><span class="line"> æŸ¥çœ‹ä¸€ä¸‹åˆšåˆšæ–°å»ºçš„ç»„çš„ä¿¡æ¯</span><br><span class="line">[root@rhel7 ~]# tail -n 2 /etc/group</span><br><span class="line">test:x:888:</span><br><span class="line">baby:x:490:</span><br></pre></td></tr></table></figure>

<h4 id="useradd"><a href="#useradd" class="headerlink" title="useradd"></a>useradd</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">åˆ›å»ºæ–°ç”¨æˆ·</span><br><span class="line">useradd [-u UID] [-g åˆå§‹ç¾¤ç»„ ] [-G æ¬¡è¦ç¾¤ç»„ ] [-mM] [-c è¯´æ˜æ  ] [-d å®¶ç›®å½•ç»å¯¹è·¯å¾„ ] [-s shell] è´¦å·å</span><br><span class="line">æ‹“å±•: -e : æ¥æ—¥æœŸã€ YYYY-MM-DD ã€ shadow ç¬¬å…«å­—æ®µè´¦å·å¤±æ•ˆæ—¥æœŸ</span><br><span class="line"> 	-f : æ¥å¤©æ•° shadow ç¬¬ä¸ƒå­—æ®µå¯†ç å¤±æ•ˆæ—¥ 0 :ç«‹åˆ»å¤±æ•ˆ -1 :æ°¸ä¸å¤±æ•ˆ</span><br><span class="line">		å¤±æ•ˆåå¯ç™»é™†,ä½†æ˜¯ä¼šå¼ºåˆ¶ä½ é‡æ–°è®¾ç½®å¯†ç </span><br><span class="line">[root@rhel7 ~]# useradd -u 888 -g 888 -f 0 -e 2016-03-21 t1</span><br><span class="line">[root@rhel7 ~]# id t1</span><br><span class="line">uid=888(t1) gid=888(test) groups=888(test)</span><br><span class="line">[root@rhel7 ~]# tail -n 1 /etc/passwd</span><br><span class="line">t1:x:888:888::/home/t1:/bin/bash</span><br><span class="line">[root@rhel7 ~]# tail -n 1 /etc/shadow</span><br><span class="line">t1:!!:16880:0:99999:7:0:16881:</span><br></pre></td></tr></table></figure>

<h4 id="passwd"><a href="#passwd" class="headerlink" title="passwd"></a>passwd</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ç»™ç”¨æˆ·è®¾ç½®å¯†ç </span><br><span class="line">passwd [--sdtin] &lt;&#x3D;&#x3D; æ‰€æœ‰äººå‡å¯ä½¿ç”¨æ›´æ”¹è‡ªå·±çš„å¯†ç </span><br><span class="line">passwd [-l] [-u] [--sdtin] [-S] [-n æ—¥æ•° ] [-x æ—¥æ•° ] [-w æ—¥æ•° ] [-i æ—¥æœŸ ] è´¦å· &lt;&#x3D;&#x3D;root åŠŸèƒ½</span><br><span class="line">é€‰é¡¹ä¸å‚æ•° :</span><br><span class="line">--stdin : å¯ä»¥é€è¿‡æ¥è‡ªå‰ä¸€ä¸ªç®¡çº¿çš„æ•°æ® , ä½œä¸ºå¯†ç è¾“å…¥ echo 123 | passwd --stdin dabao</span><br><span class="line">-l : æ˜¯ Lock çš„ç¼©å†™ , ä¼šå°† &#x2F;etc&#x2F;shadow ç¬¬äºŒæ æœ€å‰é¢åŠ ä¸Š ! ä½¿å¯†ç å¤±æ•ˆ</span><br><span class="line">-u : ä¸ -l ç›¸å¯¹ , æ˜¯ Unlock çš„ç¼©å†™</span><br><span class="line">-S : åˆ—å‡ºå¯†ç ç›¸å…³å‚æ•° shadow å¤§éƒ¨åˆ†ä¿¡æ¯ã€‚</span><br><span class="line">-n : åé¢æ¥å¤©æ•° ,shadow ç¬¬ 4 å­—æ®µ , å¯†ç ä¸å¯è¢«æ›´åŠ¨çš„å¤©æ•°</span><br><span class="line">-x : åé¢æ¥å¤©æ•° ,shadow ç¬¬ 5 å­—æ®µ , å¯†ç éœ€è¦é‡æ–°å˜æ›´çš„å¤©æ•°</span><br><span class="line">-w : åé¢æ¥å¤©æ•° ,shadow ç¬¬ 6 å­—æ®µ , å¯†ç éœ€è¦å˜æ›´æœŸé™å‰çš„è­¦å‘Šå¤©æ•°</span><br><span class="line">-i : åé¢æ¥å¤©æ•° ,shadow ç¬¬ 7 å­—æ®µ , å¯†ç å¤±æ•ˆæ—¥æœŸ</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# passwd t1</span><br><span class="line">Changing password for user t1.</span><br><span class="line">New password:</span><br><span class="line">BAD PASSWORD: it is based on a dictionary word</span><br><span class="line">Retype new password:</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line"></span><br><span class="line"> è®¾ç½®å¯†ç å¤±æ•ˆæ—¥æœŸä¸º 7 å¤©</span><br><span class="line">[root@rhel7 ~]# passwd -i 7 t1</span><br><span class="line">Adjusting aging data for user t1.</span><br><span class="line">passwd: Success</span><br><span class="line"></span><br><span class="line"> æŸ¥çœ‹è®°å½•ç”¨æˆ·å¯†ç å±æ€§çš„æ–‡ä»¶ /etc/shadow ,æˆªå– t1 ç”¨æˆ·çš„é‚£ä¸€è¡Œ</span><br><span class="line">[root@rhel7 ~]# sed -n '/t1/p' /etc/shadow</span><br><span class="line">t1:$6$TDnycU/C$0AmM5AoZmoHZQMex.dQCoroH2JxdSnDhLnBMorcUPlWgshYrlstZJmH.Q.fT</span><br><span class="line">OTV.pECGEuqFqugj8YccRqcdD/:16880:0:99999:7:7:16881:</span><br><span class="line"></span><br><span class="line"> æˆªå– t1 ç”¨æˆ·å¯†ç å±æ€§,ä»¥ : ä¸ºåˆ†å‰²çš„ç¬¬ 7 å­—æ®µ</span><br><span class="line">[root@rhel7 ~]# sed -n '/t1/p' /etc/shadow|cut -d":" -f 7</span><br><span class="line">7</span><br><span class="line">[root@rhel7 ~]# sed -n '/t1/p' /etc/shadow|awk -F: '&#123;print 7&#125;'</span><br><span class="line">7</span><br></pre></td></tr></table></figure>

<h3 id="ä¿®æ”¹ç”¨æˆ·å’Œç»„å±æ€§"><a href="#ä¿®æ”¹ç”¨æˆ·å’Œç»„å±æ€§" class="headerlink" title="ä¿®æ”¹ç”¨æˆ·å’Œç»„å±æ€§"></a>ä¿®æ”¹ç”¨æˆ·å’Œç»„å±æ€§</h3><h4 id="groupmod"><a href="#groupmod" class="headerlink" title="groupmod"></a>groupmod</h4><p>ä¿®æ”¹ç»„å±æ€§</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">groupmod -g gid [gname] ä¿®æ”¹ gid</span><br><span class="line">groupmod -n new_gname [gname] ä¿®æ”¹ç»„çš„åå­—</span><br><span class="line">[root@rhel7 ~]# groupmod -g 999 test</span><br><span class="line">[root@rhel7 ~]# grep test /etc/group</span><br><span class="line">test:x:999:</span><br><span class="line">[root@rhel7 ~]# groupmod -n test1 test</span><br><span class="line">[root@rhel7 ~]# grep test /etc/group</span><br><span class="line">test1:x:999:</span><br></pre></td></tr></table></figure>

<h4 id="usermod"><a href="#usermod" class="headerlink" title="usermod"></a>usermod</h4><p>ä¿®æ”¹ç”¨æˆ·å±æ€§</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">usermod [-cdegGlsuLU] username</span><br><span class="line">é€‰é¡¹ä¸å‚æ•° :</span><br><span class="line">-c : åé¢æ¥è´¦å·çš„è¯´æ˜ ä¿®æ”¹ &#x2F;etc&#x2F;passwd ç¬¬ 5 å­—æ®µ</span><br><span class="line">-d : åé¢æ¥è´¦å·çš„å®¶ç›®å½• ä¿®æ”¹ &#x2F;etc&#x2F;passwd ç¬¬ 6 å­—æ®µ</span><br><span class="line">-e : åé¢æ¥æ—¥æœŸ , æ ¼å¼æ˜¯ YYYY-MM-DD ä¿®æ”¹ shadow ç¬¬ 8 å­—æ®µ ( è´¦å·å¤±æ•ˆæ—¥ )</span><br><span class="line">-f : åé¢æ¥å¤©æ•° ä¿®æ”¹ shadow ç¬¬ 7 å­—æ®µ ( å¯†ç å¤±æ•ˆæ—¥æœŸ )</span><br><span class="line">-g : åé¢æ¥åˆå§‹ç¾¤ç»„ ä¿®æ”¹ &#x2F;etc&#x2F;passwd ç¬¬ 4 å­—æ®µ GID</span><br><span class="line">-G : åé¢æ¥æ¬¡è¦ç¾¤ç»„ , ä¿®æ”¹è¿™ä¸ªä½¿ç”¨è€…èƒ½å¤Ÿæ”¯æŒçš„ç¾¤ç»„ ä¿®æ”¹ &#x2F;etc&#x2F;group</span><br><span class="line">-aG : ã€å¢åŠ æ¬¡è¦ç¾¤ç»„çš„æ”¯æŒã€è€Œéã€è®¾å®šã€</span><br><span class="line">-l : åé¢æ¥è´¦å·åç§° ä¿®æ”¹è´¦å·åç§° ä¿®æ”¹ &#x2F;etc&#x2F;passwd ç¬¬ 1 å­—æ®µ</span><br><span class="line">-s : åé¢æ¥ Shell çš„å®é™…æ¡£æ¡ˆ , ä¾‹å¦‚ &#x2F;bin&#x2F;bash &#x2F;bin&#x2F;csh ç­‰ç­‰</span><br><span class="line">-u : åé¢æ¥ UID æ•°å­—å•¦ ! å² &#x2F;etc&#x2F;passwd ç¬¬ä¸‰æ çš„èµ„æ–™ ;</span><br><span class="line">-L : æš‚æ—¶å°†ç”¨æˆ·çš„å¯†ç å†»ç»“ , è®©ä»–æ— æ³•ç™»å…¥ã€‚ä¿®æ”¹ &#x2F;etc&#x2F;shadow å¯†ç æ </span><br><span class="line">-U : å°† &#x2F;etc&#x2F;shadow å¯†ç æ çš„ ! æ‹¿æ‰ , è§£å†»</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# usermod -g test2 -G test3 t1</span><br><span class="line">[root@rhel7 ~]# id t1</span><br><span class="line">uid=888(t1) gid=1000(test2) groups=1000(test2),1001(test3)</span><br><span class="line">[root@rhel7 ~]# usermod -s /sbin/nologin t1</span><br><span class="line">[root@rhel7 ~]# grep t1 /etc/passwd</span><br><span class="line">t1:x:888:1000::/home/t1:/sbin/nologin</span><br><span class="line">[root@rhel7 ~]# su - t1</span><br><span class="line">This account is currently not available.</span><br></pre></td></tr></table></figure>

<h4 id="chage"><a href="#chage" class="headerlink" title="chage"></a>chage</h4><p>ä¿®æ”¹ç”¨æˆ·å¯†ç å±æ€§</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">chage [-ldEImMW] è´¦å·å</span><br><span class="line">é€‰é¡¹ä¸å‚æ•° :</span><br><span class="line">-l : åˆ—å‡ºè¯¥è´¦å·çš„è¯¦ç»†å¯†ç å‚æ•° ;</span><br><span class="line">-d : åé¢æ¥æ—¥æœŸ , ä¿®æ”¹ shadow ç¬¬ 3 å­—æ®µ ( æœ€è¿‘ä¸€æ¬¡æ›´æ”¹å¯†ç çš„æ—¥æœŸ ), æ ¼å¼ YYYY-MM-DD</span><br><span class="line">-m : åé¢æ¥å¤©æ•° , ä¿®æ”¹ shadow ç¬¬ 4 å­—æ®µ ( å¯†ç ä¸å¯è¢«æ›´åŠ¨çš„å¤©æ•° )</span><br><span class="line">-M : åé¢æ¥å¤©æ•° , ä¿®æ”¹ shadow ç¬¬ 5 å­—æ®µ ( å¯†ç éœ€è¦é‡æ–°å˜æ›´çš„å¤©æ•° )</span><br><span class="line">-W : åé¢æ¥å¤©æ•° , ä¿®æ”¹ shadow ç¬¬ 6 å­—æ®µ ( å¯†ç éœ€è¦å˜æ›´æœŸé™å‰çš„è­¦å‘Šå¤©æ•° )</span><br><span class="line">-I : åé¢æ¥å¤©æ•° , ä¿®æ”¹ shadow ç¬¬ 7 å­—æ®µ ( å¯†ç å¤±æ•ˆæ—¥æœŸ )</span><br><span class="line">-E : åé¢æ¥æ—¥æœŸ , ä¿®æ”¹ shadow ç¬¬ 8 å­—æ®µ ( è´¦å·å¤±æ•ˆæ—¥ ), æ ¼å¼ YYYY-MM-DD</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# chage t1</span><br><span class="line">Changing the aging information for t1</span><br><span class="line">Enter the new value, or press ENTER for the default</span><br><span class="line">Minimum Password Age [0]:</span><br><span class="line">Maximum Password Age [99999]:</span><br><span class="line">Last Password Change (YYYY-MM-DD) [2016-03-20]:</span><br><span class="line">Password Expiration Warning [7]:</span><br><span class="line">Password Inactive [7]:</span><br><span class="line">Account Expiration Date (YYYY-MM-DD) [2016-03-21]:</span><br></pre></td></tr></table></figure>

<h4 id="chsh"><a href="#chsh" class="headerlink" title="chsh"></a>chsh</h4><p>change shell çš„ç®€å†™</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chsh [-ls]</span><br><span class="line">é€‰é¡¹ä¸å‚æ•° :</span><br><span class="line">-l : åˆ—å‡ºç›®å‰ç³»ç»Ÿä¸Šé¢å¯ç”¨çš„ shell /etc/shells é‡Œå†…å®¹</span><br><span class="line">-s : ä¿®æ”¹è‡ªå·±çš„ Shell</span><br><span class="line">[root@rhel7 ~]# chsh -s /bin/bash t1</span><br><span class="line">Changing shell for t1.</span><br><span class="line">Shell changed.</span><br><span class="line">[root@rhel7 ~]# grep t1 /etc/passwd</span><br><span class="line">t1:x:888:1000::/home/t1:/bin/bash</span><br></pre></td></tr></table></figure>

<h3 id="åˆ é™¤ç”¨æˆ·å’Œç»„"><a href="#åˆ é™¤ç”¨æˆ·å’Œç»„" class="headerlink" title="åˆ é™¤ç”¨æˆ·å’Œç»„"></a>åˆ é™¤ç”¨æˆ·å’Œç»„</h3><h4 id="groupdel"><a href="#groupdel" class="headerlink" title="groupdel"></a>groupdel</h4><p>åˆ é™¤ç»„</p>
<p>groupdel groupname</p>
<h4 id="userdel"><a href="#userdel" class="headerlink" title="userdel"></a>userdel</h4><p>åˆ é™¤ç”¨æˆ·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">userdel [-r] username</span><br><span class="line">é€‰é¡¹ä¸å‚æ•° :</span><br><span class="line">-r æ²¡æœ‰è¿™ä¸ªé€‰é¡¹åˆ é™¤ä¼šä¸å½»åº•,å…³äºç”¨æˆ·çš„ç›®å½•ã€æ–‡æ¡£å…¨éƒ¨åˆ é™¤</span><br><span class="line"></span><br><span class="line">[root@rhel7 ~]# tail -3 /etc/group</span><br><span class="line">test:x:999:</span><br><span class="line">test2:x:1000:</span><br><span class="line">test3:x:1001:t1</span><br><span class="line">[root@rhel7 ~]# groupdel test3</span><br><span class="line">[root@rhel7 ~]# tail -3 /etc/group</span><br><span class="line">baby:x:490:</span><br><span class="line">test:x:999:</span><br><span class="line">test2:x:1000:</span><br><span class="line">[root@rhel7 ~]# userdel -r t1</span><br><span class="line">[root@rhel7 ~]# ll /home</span><br><span class="line">total 12</span><br><span class="line">drwx------. 27 cong cong 4096 Jan 1 18:40 cong</span><br><span class="line">drwx------. 4 g2</span><br><span class="line">888 4096 Mar 21 03:56 g2</span><br><span class="line">drwx------. 12 tom tom 4096 Mar 21 02:14 tom</span><br></pre></td></tr></table></figure>

<h3 id="æŸ¥çœ‹ç”¨æˆ·å’Œç»„ä¿¡æ¯"><a href="#æŸ¥çœ‹ç”¨æˆ·å’Œç»„ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ç”¨æˆ·å’Œç»„ä¿¡æ¯"></a>æŸ¥çœ‹ç”¨æˆ·å’Œç»„ä¿¡æ¯</h3><h4 id="id"><a href="#id" class="headerlink" title="id"></a>id</h4><p>æŸ¥çœ‹å·²å­˜åœ¨ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# id root</span><br><span class="line">uid=0(root) gid=0(root) groups=0(root)</span><br><span class="line">[root@rhel7 ~]# id -g root</span><br><span class="line">0</span><br><span class="line">[root@rhel7 ~]# id -u root</span><br><span class="line">0</span><br></pre></td></tr></table></figure>

<h4 id="groups"><a href="#groups" class="headerlink" title="groups"></a>groups</h4><p>æŸ¥çœ‹å½“å‰ç”¨æˆ·æ”¯æŒçš„ç¾¤ç»„ä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# groups</span><br><span class="line">root</span><br></pre></td></tr></table></figure>

<p>æ€è€ƒé¢˜: root å’Œæ™®é€šç”¨æˆ·éƒ½å¯ä»¥ä¿®æ”¹ /etc/passwd æ–‡æ¡£,é‚£ä¹ˆè¿™ä¸ªæ–‡æ¡£çš„æƒé™æ˜¯ä»€ä¹ˆå‘¢?<br>SUID</p>
<h2 id="ç”¨æˆ·èº«ä»½åˆ‡æ¢-sudo-su"><a href="#ç”¨æˆ·èº«ä»½åˆ‡æ¢-sudo-su" class="headerlink" title="ç”¨æˆ·èº«ä»½åˆ‡æ¢ sudo / su"></a>ç”¨æˆ·èº«ä»½åˆ‡æ¢ sudo / su</h2><h3 id="su"><a href="#su" class="headerlink" title="su"></a>su</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">su [-lm] [-c æŒ‡ä»¤ ] [username]</span><br><span class="line">é€‰é¡¹ä¸å‚æ•° :</span><br><span class="line">- : å•çº¯ä½¿ç”¨ - å¦‚ã€ su - ã€ ä»¥ login-shell å˜é‡æ¡£æ¡ˆè¯»å–æ–¹å¼ç™»å…¥ç³»ç»Ÿ ; é»˜è®¤åˆ‡æ¢ä¸º root</span><br><span class="line">-l : ä¸ - ç±»ä¼¼ login-shell</span><br><span class="line">-m :-m ä¸ -p ä¸€æ · , è¡¨ç¤ºã€ä½¿ç”¨ç›®å‰çš„ç¯å¢ƒè®¾å®š , è€Œä¸è¯»å–æ–°ä½¿ç”¨è€…çš„é…ç½®æ–‡ä»¶ã€</span><br><span class="line">-c : æ¥æŒ‡ä»¤</span><br></pre></td></tr></table></figure>

<p>æ€»ç»“:</p>
<ol>
<li>su - username æˆ– su -l username<br>å®Œæ•´åˆ‡æ¢æˆæ–°ä½¿ç”¨è€…çš„ç¯å¢ƒ ç”¨ env æŸ¥çœ‹ç¯å¢ƒå˜é‡<br>PATH/USER/MAIL</li>
<li>su - -c â€œ æŒ‡ä»¤ â€œ<br>ä»…æƒ³è¦æ‰§è¡Œä¸€æ¬¡ root çš„æŒ‡ä»¤</li>
<li>ä½¿ç”¨ root åˆ‡æ¢æˆä¸ºä»»ä½•ä½¿ç”¨è€…æ—¶ , ä¸éœ€è¦è¾“å…¥æ–°ç”¨æˆ·å¯†ç </li>
<li>ç¼ºç‚¹:å½“ä¸»æœºå¤šäººç®¡ç†æ—¶, su åˆ‡æ¢æˆ root ,é‚£æ¯ä¸ªäººéƒ½éœ€è¦çŸ¥é“ root å¯†ç ,ä¸å®‰å…¨ã€‚</li>
</ol>
<h3 id="sudo"><a href="#sudo" class="headerlink" title="sudo"></a>sudo</h3><p>sudo [-u user name | #uid] [command]</p>
<h4 id="sudo-æ‰§è¡Œæµç¨‹"><a href="#sudo-æ‰§è¡Œæµç¨‹" class="headerlink" title="sudo æ‰§è¡Œæµç¨‹"></a>sudo æ‰§è¡Œæµç¨‹</h4><ol>
<li>åœ¨ /etc/sudoers æ¡£æ¡ˆä¸­æŸ¥çœ‹ user æ˜¯å¦æœ‰ sudo æ‰§è¡Œæƒé™</li>
<li>è‹¥æœ‰ sudo æ‰§è¡Œæƒé™ , ã€è¾“å…¥ç”¨æˆ·çš„å¯†ç ã€</li>
<li>å¯†ç æ­£ç¡® , å¼€å§‹æ‰§è¡Œ sudo åç»­æ¥çš„æŒ‡ä»¤</li>
<li>root æ— éœ€å¯†ç ,è‡ªå·±åˆ‡æ¢è‡ªå·±ä¹Ÿæ— éœ€å¯†ç </li>
</ol>
<h4 id="æ·»åŠ ç”¨æˆ·-sudo-æ‰§è¡Œæƒé™çš„æ–¹æ³•"><a href="#æ·»åŠ ç”¨æˆ·-sudo-æ‰§è¡Œæƒé™çš„æ–¹æ³•" class="headerlink" title="æ·»åŠ ç”¨æˆ· sudo æ‰§è¡Œæƒé™çš„æ–¹æ³•"></a>æ·»åŠ ç”¨æˆ· sudo æ‰§è¡Œæƒé™çš„æ–¹æ³•</h4><p>(å¦‚ä½•è®©ç”¨æˆ·å¯ä»¥ä½¿ç”¨ sudo ?)</p>
<ol>
<li>visudo å¯ä»¥è®©ç³»ç»Ÿæ£€éªŒ /etc/sudoers çš„è¯­æ³•æ˜¯å¦æ­£ç¡®</li>
<li>ä¿®æ”¹ /etc/sudoers ä¸­çš„è¯­æ³•</li>
</ol>
<p>1 )å•ä¸€ç”¨æˆ·å¯ä½¿ç”¨ root æ‰€æœ‰æŒ‡ä»¤æˆ–æŸäº›æŒ‡ä»¤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root 		ALL=(ALL) 	ALL &lt;== æ‰¾åˆ°è¿™ä¸€è¡Œ ,rh6 åœ¨ 98 è¡Œ</span><br><span class="line">username 	ALL=(ALL) 	ALL &lt;== æ–°å¢è¿™ä¸€è¡Œ</span><br><span class="line">username 	ALL=(root) 	/bin/touch&lt;== æ–°å¢è¿™ä¸€è¡Œ</span><br></pre></td></tr></table></figure>

<p>è¯­æ³•è§£é‡Š:</p>
<p>ä½¿ç”¨è€…è´¦å· ç™»å…¥è€…çš„æ¥æºä¸»æœºå =( å¯åˆ‡æ¢çš„èº«ä»½ )     å¯ä¸‹è¾¾çš„æŒ‡ä»¤</p>
<p>root             ALL=(ALL)                 ALL &lt;== è¿™æ˜¯é»˜è®¤å€¼</p>
<ol>
<li>ä½¿ç”¨è€…å¸å·:ç³»ç»Ÿå“ªä¸ªå¸å·å¯ä»¥ä½¿ç”¨ sudo</li>
<li>ç™»å…¥è€…çš„æ¥æºä¸»æœºå:ä¿¡ä»»ç”¨æˆ· é»˜è®¤ root å¯æ¥è‡ªä»»ä½•ä¸€éƒ¨ç½‘ç»œä¸»æœº</li>
<li>å¯åˆ‡æ¢çš„èº«ä»½:è¯¥è´¦å·å¯ä»¥åˆ‡æ¢æˆè°æ¥ä¸‹å‘½ä»¤ , æœ«æ—¥ root å¯ä»¥åˆ‡æ¢æˆä»»ä½•äºº</li>
<li>å¯ä¸‹è¾¾çš„æŒ‡ä»¤:å¯ç”¨è¯¥èº«ä»½ä¸‹è¾¾ä»€ä¹ˆæŒ‡ä»¤ã€‚å¿…éœ€ä½¿ç”¨ç»å¯¹è·¯å¾„ ( å¯é€šè¿‡ which\whereis æŸ¥è¯¢ )</li>
<li>ALL : æ˜¯ç‰¹æ®Šå…³é”®è¯ , ä»£è¡¨ä»»ä½•èº«ä»½ã€ä»»ä½•ä¸»æœºã€ä»»ä½•å‘½ä»¤</li>
</ol>
<p>2 )ç¾¤ç»„å’Œå…å¯†ç çš„åŠŸèƒ½å¤„ç†</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">%</span><span class="bash">wheel ALL=(ALL) ALL&lt;== æ‰¾åˆ°è¿™ä¸€è¡Œ ,rh6 åœ¨ 105 è¡Œ</span></span><br><span class="line"><span class="meta">%</span><span class="bash">wheel ALL=(ALL) NOPASSWD: ALL&lt;== æ‰¾åˆ°è¿™ä¸€è¡Œ ,rh6 åœ¨ 108 è¡Œ</span></span><br></pre></td></tr></table></figure>

<p>è¯­æ³•è§£é‡Š:</p>
<ol>
<li>% æ¥ç¾¤ç»„</li>
<li>wheel ç¾¤ç»„å†…çš„ç”¨æˆ·æœ‰ä½¿ç”¨ sudo çš„æƒé™,å¹¶å¯ä»¥åˆ‡æ¢æˆä»»ä½•äºº,æ‰§è¡Œåˆ‡æ¢åèº«ä»½çš„ä»»ä½•å‘½ä»¤</li>
<li>wheel ç¾¤ç»„å†…çš„ç”¨æˆ·åˆ‡æ¢ç”¨æˆ·æ—¶ä¸éœ€è¦è¾“å…¥è‡ªå·±çš„å¯†ç </li>
</ol>
<p>3ï¼‰æœ‰é™çš„æƒé™æ“ä½œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">dabao ALL=(root) /usr/bin/passwd &lt;== æœ‰ bug , dabao èƒ½ä¿®æ”¹ root å¯†ç </span><br><span class="line">dabao ALL=(root) !/usr/bin/passwd, /usr/bin/passwd [A-Za-z]*,!/usr/bin/passwd root&lt;== å¯ä»¥æ‰§</span><br><span class="line">è¡Œã€ passwd ä»»æ„å­—ç¬¦ã€ , ä½†æ˜¯ã€ passwd ã€å’Œã€ passwd root ã€è¿™ä¸¤ä¸ªå‘½ä»¤ä¸å¯æ‰§è¡Œ</span><br></pre></td></tr></table></figure>

<p>4 )åˆ«åè®¾ç½® visudo</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">User_Alias DABAO=dabao,jerry,tom,g1,g2,g3</span><br><span class="line">Cmnd_Alias DABAOCOM = !/usr/bin/passwd,/usr/bin/passwd [A-Za-z]*,!/usr/bin/passwd root</span><br><span class="line">DABAO ALL=(root) DABAOCOM</span><br></pre></td></tr></table></figure>

<p>5) sudo æ­é… su ä½¿ç”¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">username ALL=(root) /bin/su -</span><br><span class="line">sudo su - &lt;==sudo -u root su -l root</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ç›´æ¥åˆ‡æ¢æˆ root ç”¨æˆ·,è€Œä¸”ä¸éœ€è¦è¾“å…¥ root å¯†ç </p>
<p>6 ) 5 åˆ†é’Ÿå†…å¯ä»¥ä¸ç”¨å†è¾“å…¥å¯†ç ã€‚</p>
<h2 id="Linuxç”¨æˆ·å’Œç»„è¯¾åä½œä¸š"><a href="#Linuxç”¨æˆ·å’Œç»„è¯¾åä½œä¸š" class="headerlink" title="Linuxç”¨æˆ·å’Œç»„è¯¾åä½œä¸š"></a>Linuxç”¨æˆ·å’Œç»„è¯¾åä½œä¸š</h2><ol>
<li>æ–°å»ºä¸€ä¸ªç”¨æˆ·åä¸º redhatã€‚å¯†ç ä¸º password ï¼Œé…ç½®ä»¥ä¸‹ä¿¡æ¯,ä»¥è¾¾åˆ°è¦æ±‚:</li>
</ol>
<ul>
<li>å¯†ç çš„æœ€å°å­˜æ´»æœŸä¸º:1 å¤©</li>
<li>å¯†ç çš„æœ€å¤§å­˜æ´»æœŸä¸º:10 å¤©</li>
<li>å¯†ç è¿‡æœŸå‰ 5 å¤©æé†’</li>
<li>å¯†ç è¿‡æœŸåå¦‚ 15 å¤©ä»æœªè®¾ç½®æ–°å¯†ç ,åˆ™å°é”è¯¥å¸æˆ·ã€‚</li>
</ul>
<ol>
<li>åˆ›å»ºä¸€ä¸ªæ–°ç»„ newgroupã€å°† redhat ä»¥é™„åŠ ç»„æˆå‘˜çš„èº«ä»½åŠ å…¥ åˆ° newgroup ä¸­ã€‚</li>
<li>æ·»åŠ  3 ä¸ªç”¨æˆ·,ç”¨æˆ· harry,natasha,tom,å’Œä¸€ä¸ªç»„ ,ç»„åä¸º admin ç»„ ï¼Œ<br>è¦æ±‚ ï¼š</li>
</ol>
<ul>
<li>harry,natasha ç”¨æˆ·çš„é™„åŠ ç»„ä¸º admin ç»„ï¼›</li>
<li>tom ç”¨æˆ·çš„ç™»é™† shell ä¸ºéäº¤äº’å¼ shellï¼›</li>
<li>ç”¨æˆ·å¯†ç éƒ½ä¸º uplooking</li>
</ul>
<ol>
<li>ä½¿ç”¨ harry ç”¨æˆ·ç™»é™†ç³»ç»Ÿ,å°è¯•ä¿®æ”¹è‡ªå·±çš„å¯†ç ,å¯†ç è‡ªå·±è®¾ å®šã€‚</li>
<li>åˆ›å»ºä¸€ä¸ªå«åš alex ç”¨æˆ·,ç”¨æˆ· uid ä¸º 1234,ä¸èƒ½ç™»é™†ç³»ç»Ÿã€‚</li>
<li>ä»¥ root ç”¨æˆ·èº«ä»½ç»™ natasha ç”¨æˆ·ä¿®æ”¹å¯†ç ,å¯†ç ä¿®æ”¹ä¸º abc12345ã€‚</li>
<li>ç»™ tom ç”¨æˆ·è¿½åŠ é™„åŠ ç»„,è¿½åŠ çš„é™„åŠ ç»„ä¸º alex,åŒæ—¶ç»™ tom ç”¨æˆ·ä¿®æ”¹ uid,ä¿®æ”¹ä¸º 2222ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯åŸ¹è®­</category>
        <category>Linuxç³»ç»ŸåŸºç¡€åŸ¹è®­</category>
      </categories>
      <tags>
        <tag>åŸ¹è®­</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux æ–‡ä»¶å’Œç›®å½•</title>
    <url>/2016/12/22/booboo_linux_base/03-Linux%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95/</url>
    <content><![CDATA[<h2 id="Linux-ç›®å½•"><a href="#Linux-ç›®å½•" class="headerlink" title="Linux ç›®å½•"></a>Linux ç›®å½•</h2><h3 id="Linux-ç›®å½•é…ç½®çš„ä¾æ®-â€“FHS"><a href="#Linux-ç›®å½•é…ç½®çš„ä¾æ®-â€“FHS" class="headerlink" title="Linux ç›®å½•é…ç½®çš„ä¾æ® â€“FHS"></a>Linux ç›®å½•é…ç½®çš„ä¾æ® â€“FHS</h3><p>å› ä¸ºåˆ©ç”¨ Linux æ¥å¼€å‘äº§å“æˆ– distributions çš„ç¤¾åŒº / å…¬å¸æˆ–ä¸ªäººå®åœ¨å¤ªå¤šäº† , å¦‚æœæ¯ä¸ªäººéƒ½ç”¨è‡ªå·±çš„æƒ³æ³•æ¥é…ç½®æ–‡ä»¶æ”¾ç½®çš„ç›®å½• , é‚£å°†å¯èƒ½é€ æˆå¾ˆå¤šç®¡ç†ä¸Šçš„å›°æ‰°ã€‚ ä½ èƒ½æƒ³è±¡ , ä½ è¿›å…¥ä¸€ä¸ªä¼ä¸šä¹‹å , æ‰€ æ¥è§¦åˆ°çš„ Linux ç›®å½•é…ç½®æ–¹æ³•ç«Ÿç„¶è·Ÿä½ ä»¥å‰å­¦çš„å®Œå…¨ä¸åŒå— ? å¾ˆéš¾æƒ³è±¡å§ ~ æ‰€ä»¥ , åæ¥å°±æœ‰æ‰€è°“çš„Filesystem Hierarchy Standard (FHS) æ ‡å‡†çš„å‡ºç‚‰äº† !</p>
<p>æ ¹æ® FHS(<a href="http://www.pathname.com/fhs/" target="_blank" rel="noopener">http://www.pathname.com/fhs/</a>) çš„å®˜æ–¹æ–‡ä»¶æŒ‡å‡º , ä»–ä»¬çš„ä¸»è¦ç›®çš„æ˜¯å¸Œæœ›è®©ä½¿ç”¨è€…å¯ä»¥äº†è§£åˆ°å·²å®‰è£…è½¯ä»¶é€šå¸¸æ”¾ç½®åœ¨å“ªä¸ªç›®å½•ä¸‹ , æ‰€ä»¥ä»–ä»¬å¸Œæœ›ç‹¬ç«‹çš„è½¯ä»¶å¼€å‘å•†ã€æ“ä½œç³»ç»Ÿåˆ¶ä½œè€…ã€ä»¥åŠæƒ³è¦ç»´æŠ¤ç³»ç»Ÿçš„ç”¨æˆ· , éƒ½èƒ½å¤Ÿéµå¾ª FHS çš„æ ‡å‡†ã€‚ ä¹Ÿå°±æ˜¯è¯´ ,FHS çš„é‡ç‚¹åœ¨äºè§„èŒƒæ¯ä¸ªç‰¹å®šçš„ç›®å½•ä¸‹åº”è¯¥å­˜æ”¾ä»€ä¹ˆæ ·å­çš„æ•°æ®è€Œå·²ã€‚</p>
<p>äºŠå®ä¸Š ,FHS æ˜¯æ ¹æ®è¿‡å»çš„ç»éªŒä¸€ç›´å†æŒç»­çš„æ”¹ç‰ˆçš„ ,FHS ä¾æ®æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨çš„é¢‘ç¹ä¸å¦å…è®¸ä½¿ç”¨è€…éšæ„æ›´åŠ¨ , è€Œå°†ç›®å½•å®šä¹‰æˆä¸ºå››ç§äº¤äº’ä½œç”¨çš„å½¢æ€ , ç”¨è¡¨æ ¼æ¥è¯´æœ‰ç‚¹åƒåº•ä¸‹è¿™æ · ï¼š</p>
<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">å¯åˆ†äº«çš„ (shareable)</th>
<th align="left">ä¸å¯åˆ†äº«çš„ (unshareable)</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ä¸å˜çš„ (static)</td>
<td align="left">/usr ( è½¯ä»¶æ”¾ç½®å¤„ )</td>
<td align="left">/etc ( é…ç½®æ–‡ä»¶ )</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">/opt ( ç¬¬ä¸‰æ–¹ååŠ›è½¯ä»¶ )</td>
<td align="left">/boot ( å¼€æœºä¸æ ¸å¿ƒæ¡£ )</td>
</tr>
<tr>
<td align="left">å¯å˜åŠ¨çš„ (variable)</td>
<td align="left">/var/mail ( ä½¿ç”¨è€…é‚®ä»¶ä¿¡ç®± )</td>
<td align="left">/var/run ( ç¨‹åºç›¸å…³ )</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">/var/spool/news ( æ–°é—»ç»„ )</td>
<td align="left">/var/lock ( ç¨‹åºç›¸å…³ )</td>
</tr>
</tbody></table>
<p><img src="pic/02.png" alt="02"></p>
<h3 id="ç›®å½•æ ‘"><a href="#ç›®å½•æ ‘" class="headerlink" title="ç›®å½•æ ‘"></a>ç›®å½•æ ‘</h3><p>åœ¨ç±» Unix ç³»ç»Ÿä¸­å¹¶ä¸å­˜åœ¨ C/D/E/F ç›˜ç¬¦,ä¸€åˆ‡çš„æ–‡ä»¶éƒ½æ˜¯ä» â€œ æ ¹ (/)â€ ç›®å½•å¼€å§‹çš„å¹¶æŒ‰ç…§æ–‡ä»¶ç³»ç»Ÿç›®å½•æ ‡å‡† FHS é‡‡ç”¨æ ‘å½¢ç»“æ„æ¥å­˜æ”¾æ–‡ä»¶å¹¶å®šä¹‰äº†æ¯ä¸ªåŒºåŸŸçš„ç”¨é€”ã€‚</p>
<p>ç›®å½•åç§°ä¸¥æ ¼çš„åŒºåˆ†å¤§å°å†™,ä¾‹å¦‚ root ã€ rOOt ã€ Root ã€ rooT ç­‰ç­‰å‡ä»£è¡¨æ˜¯ä¸åŒçš„ç‹¬ç«‹ç›®å½•,å¹¶ä¸”åç§°ä¸­ä¸å¾—åŒ…å«åæ–œæ  (/) ã€‚</p>
<p><img src="pic/04.png" alt="04"></p>
<p>ä¸»è¦å¸¸è§çš„ç›®å½•å®šä¹‰:</p>
<table>
<thead>
<tr>
<th align="left">ç›®å½•åç§°</th>
<th align="left">åº”æ”¾ç½®æ–‡ä»¶çš„å†…å®¹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">/boot</td>
<td align="left">å¼€æœºæ‰€éœ€æ–‡ä»¶ â€”â€” å†…æ ¸,å¼€æœºèœå•åŠæ‰€éœ€é…ç½®æ–‡ä»¶ç­‰</td>
</tr>
<tr>
<td align="left">/dev</td>
<td align="left">ä»»ä½•è®¾å¤‡ä¸æ¥å£éƒ½ä»¥æ–‡ä»¶å½¢å¼å­˜æ”¾åœ¨æ­¤ç›®å½•</td>
</tr>
<tr>
<td align="left">/etc</td>
<td align="left">é…ç½®æ–‡ä»¶</td>
</tr>
<tr>
<td align="left">/home</td>
<td align="left">ç”¨æˆ·ä¸»ç›®å½•</td>
</tr>
<tr>
<td align="left">/bin</td>
<td align="left">å•ç”¨æˆ·ç»´æŠ¤æ¨¡å¼ä¸‹è¿˜èƒ½å¤Ÿè¢«æ“ä½œçš„å‘½ä»¤</td>
</tr>
<tr>
<td align="left">/lib</td>
<td align="left">å¼€æœºæ—¶ç”¨åˆ°çš„å‡½æ•°åº“åŠ/bin ä¸/sbin ä¸‹é¢å‘½ä»¤è¦è°ƒç”¨çš„å‡½æ•°</td>
</tr>
<tr>
<td align="left">/sbin</td>
<td align="left">å¼€æœºè¿‡ç¨‹ä¸­éœ€è¦çš„</td>
</tr>
<tr>
<td align="left">/media</td>
<td align="left">ä¸€èˆ¬æŒ‚è½½æˆ–åˆ é™¤çš„è®¾å¤‡</td>
</tr>
<tr>
<td align="left">/opt</td>
<td align="left">æ”¾ç½®ç¬¬ä¸‰æ–¹çš„è½¯ä»¶</td>
</tr>
<tr>
<td align="left">/root</td>
<td align="left">ç³»ç»Ÿç®¡ç†å‘˜çš„ä¸»æ–‡ä»¶å¤¹</td>
</tr>
<tr>
<td align="left">/srv</td>
<td align="left">ä¸€äº›ç½‘ç»œæœåŠ¡çš„æ•°æ®ç›®å½•</td>
</tr>
<tr>
<td align="left">/tmp</td>
<td align="left">ä»»ä½•äººå‡å¯ä½¿ç”¨çš„ â€œ å…±äº« â€ ä¸´æ—¶ç›®å½•</td>
</tr>
<tr>
<td align="left">/proc</td>
<td align="left">è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ,ä¾‹å¦‚ç³»ç»Ÿå†…æ ¸,è¿›ç¨‹,å¤–éƒ¨è®¾å¤‡åŠç½‘ç»œçŠ¶æ€ç­‰</td>
</tr>
<tr>
<td align="left">/usr/local</td>
<td align="left">ç”¨æˆ·è‡ªè¡Œå®‰è£…çš„è½¯ä»¶</td>
</tr>
<tr>
<td align="left">/usr/sbin</td>
<td align="left">éç³»ç»Ÿå¼€æœºæ—¶éœ€è¦çš„è½¯ä»¶/å‘½ä»¤/è„šæœ¬</td>
</tr>
<tr>
<td align="left">/usr/share</td>
<td align="left">å¸®åŠ©ä¸è¯´æ˜æ–‡ä»¶,ä¹Ÿå¯æ”¾ç½®å…±äº«æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td align="left">/var</td>
<td align="left">ä¸»è¦å­˜æ”¾ç»å¸¸å˜åŒ–çš„æ–‡ä»¶,å¦‚æ—¥å¿—ã€‚</td>
</tr>
<tr>
<td align="left">/lost+found</td>
<td align="left">å½“æ–‡ä»¶ç³»ç»Ÿå‘ç”Ÿé”™è¯¯æ—¶,å°†ä¸€äº›ä¸¢å¤±çš„æ–‡ä»¶ç‰‡æ®µå­˜æ”¾åœ¨è¿™é‡Œ1.3 è·¯å¾„</td>
</tr>
</tbody></table>
<p>å¦å¤–ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µ â€œ è·¯å¾„ â€ ,è¿™ä¸ªè·¯å¾„æŒ‡çš„æ˜¯å¦‚ä½•æ‰¾åˆ°æŸä¸ªæ–‡ä»¶,åˆ†ä¸º â€œ ç»å¯¹è·¯å¾„ â€ ä¸ â€œ ç›¸å¯¹è·¯å¾„ â€ :</p>
<ul>
<li>ç»å¯¹è·¯å¾„ (absolute): ç”±æ ¹ç›®å½• (/) å¼€å§‹å†™èµ·çš„ç›®å½•æˆ–æ–‡ä»¶å</li>
<li>ç›¸å¯¹è·¯å¾„ (relative): ç›¸å¯¹äºå½“å‰è·¯å¾„çš„å†™æ³•</li>
</ul>
<p>ä¸¾ä¾‹æ¥è¯´ä¸€ä¸ªå®¢äººæƒ³æ‰¾ä¸‹å•æ‰€,ä½ æœ‰ä¸¤ç§å›ç­”çš„æ–¹æ³•ã€‚</p>
<ul>
<li>ç»å¯¹è·¯å¾„:é¦–å…ˆåè½¦æ¥åˆ°ä½ å®¶,åˆ°äº†ä½ å®¶åï¼Œå³æ‰‹è¾¹ç¬¬ä¸€ä¸ªæˆ¿é—´å°±æ˜¯å•æ‰€ã€‚</li>
<li>ç›¸å¯¹è·¯å¾„:å‰é¢å³æ‹ç¬¬ä¸€ä¸ªæˆ¿é—´ã€‚</li>
</ul>
<p>å¦‚æœä½ è¯´çš„æ˜¯ç»å¯¹è·¯å¾„,é‚£ä¹ˆä»»ä½•å®¢äººéƒ½å¯ä»¥æŒ‰ç…§è¿™ä¸ªæç¤ºæ‰¾åˆ°ä½ å®¶çš„å•æ‰€,ä½†ç¼ºç‚¹æ˜¯è¿‡äºç¹ç,å¦‚æœè¯´çš„æ˜¯ç›¸å¯¹è·¯å¾„,é‚£ä¹ˆè¿™ä¸ªäººå¹¶ä¸æ˜¯åœ¨æ¯ä¸ªè·¯å£å³è½¬éƒ½èƒ½æ‰¾åˆ°å•æ‰€,ç¼ºç‚¹æ˜¯ä¸å…·å¤‡æ™®éæ€§ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# cd /etc/sysconfig/network-scripts/</span><br><span class="line">[root@rhel7 network-scripts]# pwd</span><br><span class="line">/etc/sysconfig/network-scripts</span><br><span class="line">[root@rhel7 network-scripts]# cd ../modules</span><br><span class="line">[root@rhel7 modules]# pwd</span><br><span class="line">/etc/sysconfig/modules</span><br></pre></td></tr></table></figure>

<h2 id="æ–‡ä»¶å±æ€§"><a href="#æ–‡ä»¶å±æ€§" class="headerlink" title="æ–‡ä»¶å±æ€§"></a>æ–‡ä»¶å±æ€§</h2><p>ç±» Unix ç³»ç»Ÿçš„è®¾è®¡åˆè¡·å°±æ˜¯ä¸ºè®©å¤šç”¨æˆ·åŒæ—¶å·¥ä½œ,æ‰€ä»¥ä¹Ÿè¿«ä½¿ Linux ç³»ç»Ÿæœ‰äº†æå¼ºçš„å®‰å…¨æ€§ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹ linux ç³»ç»Ÿç¤ºå¦‚ä½•å®ç°å®‰å…¨æ€§çš„ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 tmp]# ll /</span><br><span class="line">total 4148</span><br><span class="line">lrwxrwxrwx.   1 root root        7 May  5 17:28 bin -&gt; usr/bin</span><br><span class="line">dr-xr-xr-x.   4 root root     4096 May  5 17:40 boot</span><br><span class="line">drwxr-xr-x.  15 root root     4096 Aug 19 13:19 content</span><br><span class="line">-rw-------    1 root root  2166784 Aug  8 05:24 core.2052</span><br><span class="line">-rw-------    1 root root 19017728 Aug  8 05:27 core.2488</span><br><span class="line">drwxr-xr-x   19 root root     3380 Oct 26 12:22 dev</span><br><span class="line">drwxr-xr-x. 138 root root    12288 Oct 26 12:22 etc</span><br><span class="line">drwxr-xr-x.   4 root root       31 Aug 23 17:32 home</span><br><span class="line">lrwxrwxrwx.   1 root root        7 May  5 17:28 lib -&gt; usr/lib</span><br><span class="line">lrwxrwxrwx.   1 root root        9 May  5 17:28 lib64 -&gt; usr/lib64</span><br><span class="line">drwxr-xr-x.   2 root root        6 May 25  2015 media</span><br><span class="line">drwxr-xr-x.   2 root root        6 May 25  2015 mnt</span><br><span class="line">drwxr-xr-x.   4 root root       36 May  6 13:19 opt</span><br><span class="line">dr-xr-xr-x  229 root root        0 Oct 26  2016 proc</span><br><span class="line">dr-xr-x---.  26 root root     4096 Oct 12 14:11 root</span><br><span class="line">drwxr-xr-x   39 root root     1200 Oct 26 12:24 run</span><br><span class="line">lrwxrwxrwx.   1 root root        8 May  5 17:28 sbin -&gt; usr/sbin</span><br><span class="line">drwxr-xr-x.   2 root root        6 May 25  2015 srv</span><br><span class="line">dr-xr-xr-x   13 root root        0 Oct 26  2016 sys</span><br><span class="line">drwxrwxrwt.  31 root root     4096 Oct 26 12:42 tmp</span><br><span class="line">drwxr-xr-x.  13 root root     4096 May  5 17:28 usr</span><br><span class="line">drwxr-xr-x.  23 root root     4096 Oct 26  2016 var</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒå­—æ®µ,æ–‡ä»¶ç¡¬é“¾æ¥æ•°æˆ–ç›®å½•å­ç›®å½•æ•°</p>
<h3 id="æ–‡ä»¶çš„åˆ†ç±»"><a href="#æ–‡ä»¶çš„åˆ†ç±»" class="headerlink" title="æ–‡ä»¶çš„åˆ†ç±»"></a>æ–‡ä»¶çš„åˆ†ç±»</h3><table>
<thead>
<tr>
<th align="left">æ–‡ä»¶</th>
<th align="left"></th>
<th align="left">æ“ä½œ</th>
</tr>
</thead>
<tbody><tr>
<td align="left">æ™®é€šæ–‡ä»¶</td>
<td align="left">çº¯æ–‡æœ¬æ¡£ (ASCII)</td>
<td align="left">touch file</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">äºŒè¿›åˆ¶æ–‡ä»¶ (binary)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left">æ•°æ®æ ¼å¼æ–‡ä»¶ (data)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">ç›®å½•</td>
<td align="left">(directory)</td>
<td align="left">mkdir dire</td>
</tr>
<tr>
<td align="left">è¿ç»“æ¡£</td>
<td align="left">(link)</td>
<td align="left">ln file hfile</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left">ln -s file sfile</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left">ln -s â€˜pwdâ€™/file ssfile ç»å¯¹è·¯å¾„çš„è½¯é“¾æ¥æ–‡ä»¶</td>
</tr>
<tr>
<td align="left">è®¾å¤‡ä¸è£…ç½®æ–‡ä»¶</td>
<td align="left">(device)</td>
<td align="left">mknod bfile b 252 0 å—è®¾å¤‡</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left">mknod cfile c 4 2 å­—ç¬¦è®¾å¤‡</td>
</tr>
<tr>
<td align="left">æ•°æ®è¾“é€æ–‡ä»¶</td>
<td align="left">(FIFO, pipe)</td>
<td align="left">mkfifo pfile ç®¡é“æ–‡ä»¶</td>
</tr>
<tr>
<td align="left">èµ„æ–™æ¥å£æ–‡ä»¶</td>
<td align="left">(sockets)</td>
<td align="left">mksock sfile sock æ–‡ä»¶</td>
</tr>
</tbody></table>
<p>-: æ™®é€šæ–‡ä»¶, d: ç›®å½•æ–‡ä»¶, l: é“¾æ¥æ–‡ä»¶, b: å—è®¾å¤‡æ–‡ä»¶, c: å­—ç¬¦è®¾å¤‡æ–‡ä»¶, p: ç®¡é“æ–‡ä»¶</p>
<h3 id="ä¸€èˆ¬æƒé™-UGO"><a href="#ä¸€èˆ¬æƒé™-UGO" class="headerlink" title="ä¸€èˆ¬æƒé™ UGO"></a>ä¸€èˆ¬æƒé™ UGO</h3><p>Linux ç³»ç»Ÿä¸­ä¸€åˆ‡éƒ½æ˜¯æ–‡ä»¶,æ–‡ä»¶å’Œç›®å½•çš„æ‰€å±ä¸æƒé™ â€”â€” æ¥åˆ†åˆ«è§„å®šæ‰€æœ‰è€…ã€æ‰€æœ‰ç»„ã€å…¶ä½™äººçš„è¯»,å†™,æ‰§è¡Œæƒé™ã€‚</p>
<p>è¯» (read) ,å†™ (write) ,æ‰§è¡Œ (execute )ç®€å†™å³ä¸º (r,w,x) ,äº¦å¯ç”¨æ•°å­— (4,2,1) è¡¨ç¤º</p>
<table>
<thead>
<tr>
<th align="left">æƒé™</th>
<th align="left">è¯»</th>
<th align="left">å†™</th>
<th align="left">æ‰§è¡Œ</th>
<th align="left">è¯»</th>
<th align="left">å†™</th>
<th align="left">æ‰§è¡Œ</th>
<th align="left">è¯»</th>
<th align="left">å†™</th>
<th align="left">æ‰§è¡Œ</th>
</tr>
</thead>
<tbody><tr>
<td align="left">å­—ç¬¦è¡¨ç¤º</td>
<td align="left">r</td>
<td align="left">w</td>
<td align="left">x</td>
<td align="left">r</td>
<td align="left">w</td>
<td align="left">x</td>
<td align="left">r</td>
<td align="left">w</td>
<td align="left">x</td>
</tr>
<tr>
<td align="left">æ•°å­—è¡¨ç¤º</td>
<td align="left">4</td>
<td align="left">2</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">2</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">2</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">æƒé™åˆ†é…</td>
<td align="left">æ–‡ä»¶æ‰€æœ‰è€…</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">æ–‡ä»¶æ‰€å±ç»„</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">å…¶ä»–ç”¨æˆ·</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<p>ä¸¾ä¾‹ : å¦‚æœæŸæ–‡ä»¶æƒé™ä¸º 7 åˆ™ä»£è¡¨å¯è¯»,å¯å†™,å¯æ‰§è¡Œ (4+2+1) ã€‚è‹¥æƒé™ä¸º 6(4+2) åˆ™ä»£è¡¨å¯è¯»,å¯å†™ã€‚é‚£ä¹ˆæƒé™ä¸º 5 ä¸ 3 æ—¶åˆ†åˆ«ä»£è¡¨äº†ä»€ä¹ˆ?</p>
<p>ç­”æ¡ˆ:æƒé™ä¸º 5 ä»£è¡¨å¯è¯» (4) å’Œå¯æ‰§è¡Œ (1) ã€‚è€Œæƒé™ä¸º 3 ä»£è¡¨å¯å†™ (2) å’Œå¯æ‰§è¡Œ (1) ã€‚</p>
<hr>
<p>æ–‡ä»¶çš„æƒé™ä¸º rw-râ€“râ€“ ä¹Ÿå°±æ˜¯åˆ†åˆ«è¡¨ç¤ºæ‰€æœ‰è€… ( å±ä¸» ) æœ‰è¯»å†™æƒé™,æ‰€æœ‰ç»„ ( å±ç»„ ) æœ‰è¯»æƒé™,å…¶ä½™äººä¹Ÿä»…æœ‰è¯»æƒé™ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™å‘ç°é—®é¢˜äº†å—?å¯¹äºç›®å½•æ–‡ä»¶çš„è¯»å’Œå†™æƒé™æˆ‘ä»¬è¿˜å¯ä»¥ç†è§£,ç›®å½•è¦èƒ½æ‰§è¡Œæ“ä½œ?</p>
<p>æ™®é€šæ–‡ä»¶å³å®é™…ä¿å­˜æ•°æ®çš„åœ°æ–¹,å…¶å¹¶ä¸å…·å¤‡åˆ é™¤è‡ªèº«çš„æƒé™:</p>
<ul>
<li>r: å¯è¯»å–æ–‡ä»¶çš„å®é™…å†…å®¹</li>
<li>w: å¯ç¼–è¾‘ / æ–°å¢ / ä¿®æ”¹è¯¥æ–‡ä»¶çš„å®é™…å†…å®¹</li>
<li>x: å¯è¢«æ‰§è¡Œ</li>
</ul>
<p>ç›®å½•æ–‡ä»¶å³ä¿å­˜æœ‰ç›®å½•ç»“æ„å’Œæ–‡ä»¶æƒé™:</p>
<ul>
<li>r: å¯è¯»å–ç›®å½•ç»“æ„å’Œæƒé™</li>
<li>w: å¯æ›´æ”¹ç›®å½•ç»“æ„åˆ—è¡¨ã€æ–°å»º / åˆ é™¤ / é‡å‘½å / è½¬ç§»å­æ–‡ä»¶ / ç›®å½•ã€‚</li>
<li>x: è¡¨ç¤ºç”¨æˆ·å¯è¿›å…¥åˆ°è¯¥ç›®å½•ä¸­</li>
</ul>
<h3 id="ç‰¹æ®Šæƒé™-suid-sgid-sticky"><a href="#ç‰¹æ®Šæƒé™-suid-sgid-sticky" class="headerlink" title="ç‰¹æ®Šæƒé™ suid\sgid\sticky"></a>ç‰¹æ®Šæƒé™ suid\sgid\sticky</h3><p>å•çº¯å¯¹æ–‡ä»¶ä½ç½®çš„ rwx æƒé™è‚¯å®šä¸èƒ½æ»¡è¶³æˆ‘ä»¬å¯¹å®‰å…¨ã€ä¾¿æ·å·¥ä½œçš„éœ€æ±‚,æ‰€ä»¥ä¾¿æœ‰äº† SUID ä¸ SGID çš„ç‰¹æ®Šæƒé™æœºåˆ¶ã€‚</p>
<p>SUID</p>
<ul>
<li>èŒƒå›´ : äºŒè¿›åˆ¶çš„å¯æ‰§è¡Œçš„æ–‡ä»¶</li>
<li>ä½œç”¨ : ä¸´æ—¶æ‹¥æœ‰æ‰€æœ‰è€…çš„æƒé™</li>
</ul>
<p>SGID</p>
<ul>
<li>èŒƒå›´ : ç›®å½•æˆ–è€…æ‹¥æœ‰å¯æ‰§è¡Œæƒé™çš„æ–‡ä»¶</li>
<li>ä½œç”¨ : ç»§æ‰¿ç›®å½•æ‰€å±ç»„</li>
</ul>
<p>SBIT ( STICKY )</p>
<ul>
<li>èŒƒå›´ : ç›®å½•</li>
<li>ä½œç”¨ : åªæœ‰ root ç”¨æˆ·å’Œæ–‡ä»¶æ‹¥æœ‰è€…æœ‰æƒåˆ é™¤ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚</li>
</ul>
<p>SUID</p>
<p>æ¯”å¦‚:<br><code>-rwsr-xr-x. 1 root root 27832 Jan 30 2014 /usr/bin/passwd</code></p>
<p>æ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥æ‰§è¡Œç”¨äºä¿®æ”¹ç”¨æˆ·å¯†ç çš„ passwd å‘½ä»¤,ä½†ç”¨æˆ·å¯†ç ä¿å­˜åœ¨ /etc/shadow æ–‡ä»¶ä¸­,é»˜è®¤æƒé™æ˜¯ 000 å³é™¤äº†è¶…çº§ç”¨æˆ· root å¤–çš„æ‰€æœ‰ç”¨æˆ·éƒ½æ²¡æœ‰æŸ¥çœ‹æˆ–ç¼–è¾‘è¯¥æ–‡ä»¶çš„æƒé™,æ‰€ä»¥å¯¹ passwd å‘½ä»¤åŠ ä¸ŠSUID æƒé™ä½,åˆ™å¯è®©æ™®é€šç”¨æˆ·ä¸´æ—¶è·å¾—ç¨‹åºæ‰€æœ‰è€…çš„èº«ä»½,å³ä»¥ root ç”¨æˆ·çš„èº«ä»½å°†å˜æ›´çš„å¯†ç ä¿¡æ¯å†™å…¥åˆ° shadow æ–‡ä»¶ä¸­ã€‚</p>
<p><code>---s--x--x. 1 root root 130712 Sep 1 2015 sudo</code></p>
<p>SGID:</p>
<p>åŠŸèƒ½ä¸€:è®©æ‰§è¡Œè€…ä¸´æ—¶æ‹¥æœ‰å±ç»„çš„æƒé™(å¯¹æ‹¥æœ‰æ‰§è¡Œæƒé™çš„äºŒè¿›åˆ¶ç¨‹åºè®¾ç½®)</p>
<p>ä¸¾ä¾‹:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-r-xr-sr-x. 1 root tty</span><br><span class="line">-rwxr-sr-x. 1 root tty</span><br><span class="line">15344 Jan 27 2014 wall</span><br><span class="line">19536 Aug 21 2015 write</span><br></pre></td></tr></table></figure>

<p>åŠŸèƒ½äºŒ:åœ¨è¯¥ç›®å½•ä¸­åˆ›å»ºçš„æ–‡ä»¶è‡ªåŠ¨ç»§æ‰¿æ­¤ç›®å½•çš„ç”¨æˆ·ç»„(åªå¯ä»¥å¯¹ç›®å½•è®¾ç½®)</p>
<p>æ¯”å¦‚:æˆ‘ä»¬å°†æŸä¸ªéƒ¨é—¨çš„å·¥ä½œç›®å½•ç»™äºˆäº† SGID æƒé™,è¿™æ ·æ‰€æœ‰äººåˆ›å»ºçš„æ–‡ä»¶éƒ½å½’ç›¸åŒçš„å·¥ä½œç»„,è¿™æ ·æ–¹ä¾¿ä»¥åçš„ç®¡ç†ã€‚</p>
<p>SBIT(Sticky Bit):</p>
<p>æ¯”å¦‚:<br><code>drwxrwxrwt. 7 root root 4096 Jun 22 13:20 /tmp</code></p>
<p>ä¸€èˆ¬è€å¸ˆå¸Œæœ›å­¦ç”Ÿå¯ä»¥å°†ä½œä¸šä¸Šä¼ åˆ°æŸä¸ªç‰¹å®šç›®å½• â€”â€” ä½†ä¸ºäº†é¿å…æŸäº›å°ç ´åä»½å­,æƒ³é™åˆ¶åˆ é™¤å…¶ä»–äººæ–‡ä»¶çš„è¯,é‚£å°±è¦è®¾ç½® SBIT ä½äº†,å½“ç„¶ä¹Ÿå¯ä»¥å«åšç‰¹æ®Šæƒé™ä½ä¹‹ç²˜æ»ä½ã€‚</p>
<h3 id="éšè—å±æ€§-ATTR"><a href="#éšè—å±æ€§-ATTR" class="headerlink" title="éšè—å±æ€§ ATTR"></a>éšè—å±æ€§ ATTR</h3><p>æ–‡ä»¶æƒé™é™¤äº† UGO è¯»å†™æ‰§è¡Œä¸ SUID ã€ SGID ã€ SBIT å¤–è¿˜æœ‰ä¸€ç§éšè—æƒé™,ä¾‹å¦‚æ˜æ˜æœ‰æƒé™åˆ é™¤æŸä¸ªæ–‡ä»¶å´æŠ¥é”™äº†,æˆ–è€…ä»…èƒ½ä¸ºæŸä¸ªæ–‡ä»¶è¿½åŠ å†…å®¹è€Œä¸èƒ½å‡å°‘å†…å®¹,é‡åˆ°è¿™ç§å¾ˆ â€œ å¥‡æ€ª â€ çš„æ–‡ä»¶,å°±è¦æ€€ç–‘æ˜¯æ–‡ä»¶è¢«è®¾ç½®éšè—æƒé™äº†ã€‚</p>
<p>chattr å‘½ä»¤ç”¨äºè®¾ç½®æ–‡ä»¶çš„éšè—æƒé™,æ ¼å¼ä¸º: â€œ chattr [ å‚æ•° ] æ–‡ä»¶ â€ ã€‚</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="left">i</td>
<td align="left">å°†æ— æ³•å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹,è‹¥å¯¹ç›®å½•è®¾ç½®ååˆ™ä»…èƒ½ä¿®æ”¹å­æ–‡ä»¶è€Œä¸èƒ½æ–°å»ºæˆ–åˆ é™¤ã€‚</td>
</tr>
<tr>
<td align="left">a</td>
<td align="left">ä»…å…è®¸è¡¥å……(è¿½åŠ )å†…å®¹.æ— æ³•è¦†ç›–/åˆ é™¤(Append Only)ã€‚</td>
</tr>
<tr>
<td align="left">S</td>
<td align="left">æ–‡ä»¶å†…å®¹å˜æ›´åç«‹å³åŒæ­¥åˆ°ç¡¬ç›˜(sync)ã€‚</td>
</tr>
<tr>
<td align="left">s</td>
<td align="left">å½»åº•ä»ç¡¬ç›˜ä¸­åˆ é™¤,ä¸å¯æ¢å¤(ç”¨ 0 å¡«å……åŸæ–‡ä»¶æ‰€åœ¨ç¡¬ç›˜åŒºåŸŸ)ã€‚</td>
</tr>
<tr>
<td align="left">A</td>
<td align="left">ä¸å†ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶çš„æœ€åè®¿é—®æ—¶é—´(atime)ã€‚</td>
</tr>
<tr>
<td align="left">b</td>
<td align="left">ä¸å†ä¿®æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„å­˜å–æ—¶é—´ã€‚</td>
</tr>
<tr>
<td align="left">D</td>
<td align="left">æ£€æŸ¥å‹ç¼©æ–‡ä»¶ä¸­çš„é”™è¯¯ã€‚</td>
</tr>
<tr>
<td align="left">d</td>
<td align="left">å½“ä½¿ç”¨ dump å‘½ä»¤å¤‡ä»½æ—¶å¿½ç•¥æœ¬æ–‡ä»¶/ç›®å½•ã€‚</td>
</tr>
<tr>
<td align="left">c</td>
<td align="left">é»˜è®¤å°†æ–‡ä»¶æˆ–ç›®å½•è¿›è¡Œå‹ç¼©ã€‚</td>
</tr>
<tr>
<td align="left">u</td>
<td align="left">å½“åˆ é™¤æ­¤æ–‡ä»¶åä¾ç„¶ä¿ç•™å…¶åœ¨ç¡¬ç›˜ä¸­çš„æ•°æ®,æ–¹ä¾¿æ—¥åæ¢å¤ã€‚</td>
</tr>
<tr>
<td align="left">t</td>
<td align="left">è®©æ–‡ä»¶ç³»ç»Ÿæ”¯æŒå°¾éƒ¨åˆå¹¶(tail-merging)ã€‚</td>
</tr>
<tr>
<td align="left">X</td>
<td align="left">å¯ä»¥ç›´æ¥è®¿é—®å‹ç¼©æ–‡ä»¶çš„å†…å®¹ã€‚</td>
</tr>
</tbody></table>
<p>lsattr å‘½ä»¤ç”¨äºæ˜¾ç¤ºæ–‡ä»¶çš„éšè—æƒé™,æ ¼å¼ä¸º: â€œ lsattr [ å‚æ•° ] æ–‡ä»¶ â€ ã€‚</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="left">a</td>
<td align="left">æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶å’Œç›®å½•ã€‚</td>
</tr>
<tr>
<td align="left">l</td>
<td align="left">æ˜¾ç¤ºéšè—å±æ€§çš„å…¨ç§°(é»˜è®¤ç®€å†™æˆä¸€ä¸ªå­—æ¯)ã€‚</td>
</tr>
<tr>
<td align="left">R</td>
<td align="left">é€’å½’å¤„ç†,å°†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åŠå­ç›®å½•ä¸€å¹¶å¤„ç†ã€‚</td>
</tr>
<tr>
<td align="left">d</td>
<td align="left">è‹¥ç›®æ ‡æ–‡ä»¶ä¸ºç›®å½•,è¯·åŠ æ­¤å‚æ•°ã€‚</td>
</tr>
</tbody></table>
<p>å…·ä½“ç”¨æ³•è§ç¬¬ä¸‰ç« èŠ‚</p>
<h3 id="æ–‡ä»¶è®¿é—®æ§åˆ¶åˆ—è¡¨-ACL"><a href="#æ–‡ä»¶è®¿é—®æ§åˆ¶åˆ—è¡¨-ACL" class="headerlink" title="æ–‡ä»¶è®¿é—®æ§åˆ¶åˆ—è¡¨ ACL"></a>æ–‡ä»¶è®¿é—®æ§åˆ¶åˆ—è¡¨ ACL</h3><p>ä¸çŸ¥å¤§å®¶æœ‰æ²¡æœ‰å‘ç°å…¶å®ä¸Šé¢è®²è§£çš„ rwx æƒé™ã€ç‰¹æ®Šæƒé™ã€éšè—æƒé™éƒ½æ˜¯å¯¹æŸä¸€ç±»ç”¨æˆ·è®¾ç½®çš„,è€Œå¦‚æœå¸Œæœ›å¯¹æŸä¸ªæŒ‡å®šçš„ç”¨æˆ·è¿›è¡Œå•ç‹¬çš„æƒé™è®¾ç½®,é‚£ä¹ˆå°±éœ€è¦ç”¨æ–‡ä»¶çš„è®¿é—®æ§åˆ¶åˆ—è¡¨æ¥å®ç°å•¦ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åŸºäºæ™®é€šæ–‡ä»¶æˆ–ç›®å½•è®¾ç½®è¿›è¡Œè®¾ç½® ACL ,é€šä¿—æ¥è¯´ ACL å°±æ˜¯è®¾ç½®æŒ‡å®šçš„ç‰¹å®šç”¨æˆ·æˆ–ç”¨æˆ·ç»„å¯¹æŸä¸ªæ–‡ä»¶çš„æ“ä½œæƒé™ã€‚å¹¶ä¸”å¦‚æœå¯¹æŸä¸ªç›®å½•è®¾ç½®äº†è®¿é—®æ§åˆ¶ç­–ç•¥,é‚£ä¹ˆå­æ–‡ä»¶åˆ™ç»§æ‰¿å…¶è®¿é—®ç­–ç•¥,è€Œè‹¥å¯¹æ–‡ä»¶è®¾ç½®äº†è®¿é—®æ§åˆ¶ç­–ç•¥åˆ™ä¸å†ç»§æ‰¿ä¸Šçº§ç›®å½•çš„æ§åˆ¶ç­–ç•¥ã€‚</p>
<p>ACL:Access Control List ç¼©å†™ ,UGO çš„ rwx æƒé™ä»¥å¤–çš„ç»†éƒ¨æƒé™è®¾ç½®ã€‚</p>
<ul>
<li>setfacl å‘½ä»¤ç”¨äºå¢åŠ æˆ–è€…ä¿®æ”¹ ACL è§„åˆ™,æ ¼å¼ä¸º: â€ setfacl [ å‚æ•° ] æ–‡ä»¶ â€ ã€‚</li>
<li>getfacl å‘½ä»¤ç”¨äºæ˜¾ç¤ºæ–‡ä»¶çš„ ACL è§„åˆ™,æ ¼å¼ä¸º: â€ getfacl æ–‡ä»¶ â€ ã€‚</li>
</ul>
<p>è¯¦ç»†å‘½ä»¤ç”¨æ³•è¯·çœ‹ç¬¬ä¸‰ç« èŠ‚ã€‚</p>
<h2 id="æ–‡ä»¶ç›¸å…³çš„å‘½ä»¤"><a href="#æ–‡ä»¶ç›¸å…³çš„å‘½ä»¤" class="headerlink" title="æ–‡ä»¶ç›¸å…³çš„å‘½ä»¤"></a>æ–‡ä»¶ç›¸å…³çš„å‘½ä»¤</h2><table>
<thead>
<tr>
<th align="left">æ–‡ä»¶</th>
<th align="left">å‘½ä»¤</th>
<th align="left">è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td align="left">æ–‡ä»¶çš„ç®¡ç†</td>
<td align="left">ls ,cd, pwd, touch,mkdir, rmdir</td>
<td align="left">æ–°å»ºã€åˆ é™¤</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">cp, rm, mv</td>
<td align="left">å¤åˆ¶ã€åˆ é™¤ã€ç§»åŠ¨</td>
</tr>
<tr>
<td align="left">æ–‡ä»¶å†…å®¹çš„æŸ¥çœ‹</td>
<td align="left">cat, tac, nl</td>
<td align="left">ç›´æ¥æŸ¥çœ‹å†…å®¹</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">more, less</td>
<td align="left">å¯ç¿»é¡µæŸ¥çœ‹</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">head, tail</td>
<td align="left">èµ„æ–™æ’·å–</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">od</td>
<td align="left">éçº¯æ–‡æœ¬æ¡£</td>
</tr>
<tr>
<td align="left">æ–‡ä»¶çš„æƒé™</td>
<td align="left">chmod chown</td>
<td align="left">æ–‡ä»¶çš„æ‹¥æœ‰è€…å’Œæ‰€å±ç»„ ugo æƒé™</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">umask</td>
<td align="left">æ–‡ä»¶é¢„è®¾</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">chattr, lsattr</td>
<td align="left">æ–‡ä»¶éšè—å±æ€§</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">SUID, SGID, SBIT</td>
<td align="left">æ–‡ä»¶ç‰¹æ®Šæƒé™</td>
</tr>
<tr>
<td align="left">æ–‡ä»¶ç±»å‹</td>
<td align="left">file</td>
<td align="left">æ–‡ä»¶ç±»å‹æŸ¥çœ‹</td>
</tr>
<tr>
<td align="left">æ–‡ä»¶çš„æœç´¢</td>
<td align="left">which</td>
<td align="left">æŒ‡ä»¤æ–‡ä»¶çš„æœç´¢</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">whereis, locate, find</td>
<td align="left">æ–‡ä»¶çš„æœç´¢</td>
</tr>
</tbody></table>
<h3 id="æƒé™çš„ä¿®æ”¹-chmod-chown-chgrp-umask"><a href="#æƒé™çš„ä¿®æ”¹-chmod-chown-chgrp-umask" class="headerlink" title="æƒé™çš„ä¿®æ”¹ chmod chown chgrp umask"></a>æƒé™çš„ä¿®æ”¹ chmod chown chgrp umask</h3><h4 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h4><p>chmod [ u g o a æ‰€æœ‰ç”¨æˆ· ] [ + - = ] [ rwx] /[ 777]</p>
<ul>
<li>w ç»“åˆ x æƒé™å¯ä»¥å¯¹ç›®å½•ä¸‹çš„æ–‡ä»¶è¿›è¡Œä»¥ä¸‹æ“ä½œ : cd rm touch cp</li>
<li>r ç»“åˆ x æƒé™å¯ä»¥å¯¹ç›®å½•ä¸‹çš„æ–‡ä»¶è¿›è¡Œ ls æ“ä½œ</li>
<li>x å†³å®šäº†èƒ½å¦è¿›å…¥ç›®å½•</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[ root@www tmp]# ll dabao</span><br><span class="line">-rw-r--r--. 1 root root 0 Mar 21 06:09 dabao</span><br><span class="line">[ root@www tmp]# chmod 777 dabao</span><br><span class="line">[ root@www tmp]# ll dabao</span><br><span class="line">-rwxrwxrwx. 1 root root 0 Mar 21 06:09 dabao3.1.2 chown</span><br></pre></td></tr></table></figure>

<p>chown user:group ç›®å½• / æ–‡ä»¶</p>
<p>-R é’ˆå¯¹ç›®å½•é€’å½’ä¿®æ”¹æ‹¥æœ‰è€…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[ root@www tmp]# chown dabao. dabao</span><br><span class="line">[ root@www tmp]# ll dabao</span><br><span class="line">-rwxrwxrwx. 1 dabao dabao 0 Mar 21 06:09 dabao</span><br><span class="line">[ root@www tmp]# chown -R dabao dabao1</span><br><span class="line">[ root@www tmp]# ll -R dabao1</span><br><span class="line">dabao1:</span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x. 3 dabao root 4096 Mar 21 06:11 1</span><br><span class="line">dabao1/1:</span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x. 2 dabao root 4096 Mar 21 06:11 2</span><br><span class="line">dabao1/1/2:</span><br><span class="line">total 0</span><br></pre></td></tr></table></figure>

<h4 id="chgrp"><a href="#chgrp" class="headerlink" title="chgrp"></a>chgrp</h4><p>ä¿®æ”¹æ–‡ä»¶ç›®å½•çš„æ‰€å±ç»„</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[ root@www tmp]# chgrp -R dabao dabao1</span><br><span class="line">[ root@www tmp]# ll -R dabao1</span><br><span class="line">dabao1:</span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x. 3 dabao dabao 4096 Mar 21 06:11 1</span><br><span class="line">dabao1/1:</span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x. 2 dabao dabao 4096 Mar 21 06:11 2</span><br><span class="line">dabao1/1/2:</span><br><span class="line">total 0</span><br></pre></td></tr></table></figure>

<h4 id="umask"><a href="#umask" class="headerlink" title="umask"></a>umask</h4><p>umask åˆ›å»ºæ–‡ä»¶ / ç›®å½•çš„é»˜è®¤æƒé™</p>
<p>å…¬å¼</p>
<p>æœ€å¤§æƒé™ -umask= é»˜è®¤æƒé™</p>
<ul>
<li>user æ–‡ä»¶ 666 -002 = 644 rw-rw-râ€“</li>
<li>root æ–‡ä»¶ 666 -022 = 664 rw-râ€“râ€“</li>
<li>user ç›®å½• 777 -002 = 755 rwxrwxr-x</li>
<li>root ç›®å½• 777 -022 = 775 rwxr-xr-x</li>
</ul>
<p>umask 777 åªé’ˆå¯¹å½“å‰ç¯å¢ƒä¸´æ—¶ç”Ÿæ•ˆ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[ root@www tmp]# umask</span><br><span class="line">0022</span><br></pre></td></tr></table></figure>

<h4 id="ç›¸å…³æ–‡æ¡£-etc-profile-bash-profile"><a href="#ç›¸å…³æ–‡æ¡£-etc-profile-bash-profile" class="headerlink" title="ç›¸å…³æ–‡æ¡£ /etc/profile ~/.bash_profile"></a>ç›¸å…³æ–‡æ¡£ /etc/profile ~/.bash_profile</h4><ul>
<li>/etc/profile å®šä¹‰äº†æ™®é€šç”¨æˆ·å’Œ root ç”¨æˆ·çš„ umask å€¼ , å¯¹æ‰€æœ‰ç”¨æˆ·ç”Ÿæ•ˆ</li>
<li>~/.bash_profile å¯ä»¥å®šä¹‰å½“å‰ç”¨æˆ·çš„ umask å€¼ , åªå¯¹å½“å‰ç”¨æˆ·ç”Ÿæ•ˆ , éœ€è¦é‡æ–°ç™»é™†ç”¨æˆ·åç”Ÿæ•ˆã€‚</li>
</ul>
<p>é»˜è®¤å±æ€§ç›¸åŠ å‡ , åˆ™æ¡£æ¡ˆå˜æˆ :666-003=663, æ˜¯ -rw-rwâ€“wx , é”™ !!</p>
<h3 id="ATTR-æƒé™å‘½ä»¤-chattr-lsattr"><a href="#ATTR-æƒé™å‘½ä»¤-chattr-lsattr" class="headerlink" title="ATTR æƒé™å‘½ä»¤ chattr lsattr"></a>ATTR æƒé™å‘½ä»¤ chattr lsattr</h3><h4 id="chattr"><a href="#chattr" class="headerlink" title="chattr"></a>chattr</h4><p>é…ç½®æ–‡ä»¶æ¡ˆéšè—å±æ€§</p>
<p>å±æ€§è®¾ç½®å¸¸è§çš„æ˜¯ a å’Œ i çš„è®¾å®š , å¿…é¡»è¦ root èº«ä»½</p>
<p>chattr [ +-= ][ ASacdistu] æ–‡ä»¶ / ç›®å½•</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="left">+</td>
<td align="left">å¢åŠ </td>
</tr>
<tr>
<td align="left">-</td>
<td align="left">ç§»é™¤</td>
</tr>
<tr>
<td align="left">=</td>
<td align="left">è®¾å®šä¸º</td>
</tr>
<tr>
<td align="left">A</td>
<td align="left">è®¿é—®æ—¶é—´ atime ä¸ä¿®æ”¹ , å¯¹é€Ÿåº¦è¾ƒæ…¢è®¡ç®—æœºæœ‰å¸®åŠ©</td>
</tr>
<tr>
<td align="left">S</td>
<td align="left">ã€åŒæ­¥ã€å†™å…¥ç£ç›˜</td>
</tr>
<tr>
<td align="left">a</td>
<td align="left">åªèƒ½å¢åŠ æ•°æ® , ä¸èƒ½åˆ é™¤ / ä¿®æ”¹æ•°æ® (root)</td>
</tr>
<tr>
<td align="left">c</td>
<td align="left">è‡ªåŠ¨ã€å‹ç¼©ã€ , è¯»å–æ—¶è‡ªåŠ¨è§£å‹ç¼©</td>
</tr>
<tr>
<td align="left">d</td>
<td align="left">ä¸è¢« dump å¤‡ä»½</td>
</tr>
<tr>
<td align="left">i</td>
<td align="left">ä»¥ä¸‹æ“ä½œä¸å¯æ‰§è¡Œ : ã€åˆ é™¤ã€æ”¹åã€è®¾ç½®è¿ç»“ã€å†™å…¥ã€æ–°å¢èµ„æ–™ã€ ( root )</td>
</tr>
<tr>
<td align="left">s</td>
<td align="left">å½»åº•åˆ é™¤ , æ— æ³•æŒ½å›</td>
</tr>
<tr>
<td align="left">u</td>
<td align="left">ä¸ s ç›¸å , åˆ é™¤å¯æŒ½å›</td>
</tr>
</tbody></table>
<h4 id="lsattr"><a href="#lsattr" class="headerlink" title="lsattr"></a>lsattr</h4><p>lsattr [ -adR] æ–‡ä»¶ / ç›®å½•</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-a</td>
<td align="left">æ˜¾ç¤ºéšè—æ–‡ä»¶çš„å±æ€§</td>
</tr>
<tr>
<td align="left">-d</td>
<td align="left">ä»…åˆ—å‡ºç›®å½•æœ¬èº«å±æ€§</td>
</tr>
<tr>
<td align="left">-R</td>
<td align="left">è¿åŒå­ç›®å½•</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">A è®¿é—®æ—¶é—´ atime ä¸ä¿®æ”¹</span><br><span class="line">[root@rhel7 tmp]# chattr +A file1</span><br><span class="line">[root@rhel7 tmp]# lsattr file1</span><br><span class="line">-------A-------- file1</span><br><span class="line">[root@rhel7 tmp]# cat file1</span><br><span class="line">hi</span><br><span class="line">[root@rhel7 tmp]# stat file1</span><br><span class="line">File: â€˜file1â€™</span><br><span class="line">Size: 3</span><br><span class="line">Blocks: 8</span><br><span class="line">IO Block: 4096 regular file</span><br><span class="line">Device: fd00h/64768d</span><br><span class="line">Inode: 52973916 Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--) Uid: ( 0/ root) Gid: ( 0/ root)</span><br><span class="line">Context: unconfined_u:object_r:user_tmp_t:s0Access: 2016-06-22 14:49:50.221000000 +0800</span><br><span class="line">Modify: 2016-06-22 14:49:48.025000000 +0800</span><br><span class="line">Change: 2016-06-22 14:50:14.621000000 +0800</span><br><span class="line">Birth: -</span><br><span class="line">[root@rhel7 tmp]# cat file1</span><br><span class="line">hi</span><br><span class="line">[root@rhel7 tmp]# stat file1</span><br><span class="line">File: â€˜file1â€™</span><br><span class="line">Size: 3</span><br><span class="line">Blocks: 8</span><br><span class="line">IO Block: 4096 regular file</span><br><span class="line">Device: fd00h/64768d</span><br><span class="line">Inode: 52973916 Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--) Uid: ( 0/ root) Gid: ( 0/ root)</span><br><span class="line">Context: unconfined_u:object_r:user_tmp_t:s0</span><br><span class="line">Access: 2016-06-22 14:49:50.221000000 +0800</span><br><span class="line">Modify: 2016-06-22 14:49:48.025000000 +0800</span><br><span class="line">Change: 2016-06-22 14:50:14.621000000 +0800</span><br><span class="line">Birth: -</span><br><span class="line">[root@rhel7 tmp]# chattr -A file1</span><br><span class="line">a åªèƒ½å¢åŠ æ•°æ® , ä¸èƒ½åˆ é™¤ / ä¿®æ”¹æ•°æ® (root)</span><br><span class="line">[root@rhel7 tmp]# chattr +a file1</span><br><span class="line">[root@rhel7 tmp]# lsattr file1</span><br><span class="line">-----a---------- file1</span><br><span class="line">[root@rhel7 tmp]# echo 99 &gt; file1</span><br><span class="line">-bash: file1: Operation not permitted</span><br><span class="line">[root@rhel7 tmp]# echo 99 &gt;&gt; file1</span><br><span class="line">[root@rhel7 tmp]# cat file1</span><br><span class="line">hi</span><br><span class="line">99</span><br><span class="line">i ä»¥ä¸‹æ“ä½œä¸å¯æ‰§è¡Œ : ã€åˆ é™¤ã€æ”¹åã€è®¾ç½®è¿ç»“ã€å†™å…¥ã€æ–°å¢èµ„æ–™ã€ ( root )</span><br><span class="line">[root@rhel7 tmp]# chattr +i file1</span><br><span class="line">[root@rhel7 tmp]# rm -rf file1</span><br><span class="line">rm: cannot remove â€˜file1â€™: Operation not permitted</span><br><span class="line">[root@rhel7 tmp]# mv file1 file100</span><br><span class="line">mv: cannot move â€˜file1â€™ to â€˜file100â€™: Operation not permitted</span><br><span class="line">[root@rhel7 tmp]# link file1 file1h</span><br><span class="line">link: cannot create link â€˜file1hâ€™ to â€˜file1â€™: Operation not permitted</span><br><span class="line">[root@rhel7 tmp]# echo nini&gt;&gt;file1</span><br><span class="line">-bash: file1: Permission denied</span><br><span class="line">[root@rhel7 tmp]# chattr -i file1</span><br><span class="line">[root@rhel7 tmp]# lsattr file1</span><br><span class="line">---------------- file1</span><br></pre></td></tr></table></figure>


<h3 id="ACL-æƒé™å‘½ä»¤"><a href="#ACL-æƒé™å‘½ä»¤" class="headerlink" title="ACL æƒé™å‘½ä»¤"></a>ACL æƒé™å‘½ä»¤</h3><h4 id="ACL-æƒé™æ¦‚å¿µ"><a href="#ACL-æƒé™æ¦‚å¿µ" class="headerlink" title="ACL æƒé™æ¦‚å¿µ"></a>ACL æƒé™æ¦‚å¿µ</h4><p>ACL:Access Control List ç¼©å†™ ,UGO çš„ rwx æƒé™ä»¥å¤–çš„ç»†éƒ¨æƒé™è®¾ç½®ã€‚</p>
<p>ACL å¯ä»¥é’ˆå¯¹å•ä¸€ç”¨æˆ· , å•ä¸€æ–‡ä»¶ , å•ä¸€ç›®å½• r,w,x çš„æƒé™è§„èŒƒ</p>
<p>é’ˆå¯¹å‡ ä¸ªé¡¹ç›® :</p>
<ol>
<li>ä½¿ç”¨è€… (user): å¯ä»¥é’ˆå¯¹ä½¿ç”¨è€…è®¾å®šæƒé™</li>
<li>ç¾¤ç»„ (group): é’ˆå¯¹ç¾¤ç»„ä¸ºå¯¹è±¡è®¾å®šæƒé™</li>
<li>é»˜è®¤å±æ€§ (mask): è¿˜å¯ä»¥é’ˆå¯¹åœ¨è¯¥ç›®å½•ä¸‹åœ¨å»ºç«‹æ–°æ¡£æ¡ˆæˆ–ç›®å½•æ—¶ , è§„èŒƒæ–°æ•°æ®çš„é»˜è®¤æƒé™</li>
</ol>
<h4 id="getfacl"><a href="#getfacl" class="headerlink" title="getfacl"></a>getfacl</h4><p>å–å¾—æ–‡ä»¶ / ç›®å½•çš„ ACL è®¾å®šå†…å®¹</p>
<p>getfacl filename</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@www tmp]# getfacl dabao</span><br><span class="line"> file: dabao</span><br><span class="line"> owner: dabao</span><br><span class="line"> group: dabao</span><br><span class="line">user::rwx</span><br><span class="line">group::rwx</span><br><span class="line">other::rwx</span><br></pre></td></tr></table></figure>

<h4 id="setfacl"><a href="#setfacl" class="headerlink" title="setfacl"></a>setfacl</h4><p>è®¾ç½®æ–‡ä»¶ / ç›®å½•çš„ ACL è§„èŒƒ</p>
<p>setfacl [-bkRd] [{-m|-x} acl å‚æ•° ] ç›®æ ‡æ–‡ä»¶å</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-m</td>
<td align="left">è®¾ç½® acl å‚æ•°</td>
</tr>
<tr>
<td align="left">-x</td>
<td align="left">åˆ é™¤ acl å‚æ•°</td>
</tr>
<tr>
<td align="left">-b</td>
<td align="left">åˆ é™¤æ‰€æœ‰ acl å‚æ•°</td>
</tr>
<tr>
<td align="left">-k</td>
<td align="left">åˆ é™¤é¢„è®¾çš„ acl å‚æ•°</td>
</tr>
<tr>
<td align="left">-R</td>
<td align="left">é€’å½’è®¾ç½® acl å‚æ•°</td>
</tr>
<tr>
<td align="left">-d</td>
<td align="left">è®¾ç½®ã€é¢„è®¾ acl å‚æ•°ã€åªå¯¹ç›®å½•æœ‰æ•ˆ , åœ¨è¯¥ç›®å½•æ–°å»ºçš„æ•°æ®ä¼šå¼•ç”¨</td>
</tr>
</tbody></table>
<p>å‘½ä»¤æ ¼å¼ :</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ã€ u:[ ä½¿ç”¨è€…è´¦å·åˆ—è¡¨ ]:[ rwx] ã€ &lt;= = é’ˆå¯¹ç‰¹å®šç”¨æˆ·</span><br><span class="line">ã€ g:[ ç¾¤ç»„åˆ—è¡¨ ]:[rwx] ã€ &lt;= = é’ˆå¯¹ç‰¹å®šç”¨æˆ·ç»„</span><br><span class="line">ã€ m:[ rwx] ã€ &lt;= = é’ˆå¯¹æœ‰æ•ˆæƒé™ mask</span><br><span class="line">ã€ d:[ ug]: ä½¿ç”¨è€…åˆ—è¡¨ :[ rwx] ã€ é’ˆå¯¹é¢„è®¾æƒé™ , å±æ€§å°†ç»§æ‰¿åˆ°æ¬¡ç›®å½•</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 tmp]# setfacl -m u:student:rwx file1</span><br><span class="line">[root@rhel7 tmp]# setfacl -m g:student:rw file1</span><br><span class="line">[root@rhel7 tmp]# getfacl file1</span><br><span class="line"> file: file1</span><br><span class="line"> owner: root</span><br><span class="line"> group: root</span><br><span class="line">user::rw-</span><br><span class="line">user:student:rwx</span><br><span class="line">group::r--</span><br><span class="line">group:student:rw-</span><br><span class="line">mask::rwx</span><br><span class="line">other::r--</span><br><span class="line">-d é’ˆå¯¹é¢„è®¾æƒé™ , å±æ€§å°†ç»§æ‰¿åˆ°æ¬¡ç›®å½•</span><br><span class="line">[root@rhel7 tmp]# mkdir dabao</span><br><span class="line">[root@rhel7 tmp]# setfacl -d -m u:student:rwx dabao</span><br><span class="line">[root@rhel7 tmp]# getfacl dabao</span><br><span class="line"> file: dabao</span><br><span class="line"> owner: root</span><br><span class="line"> group: root</span><br><span class="line">user::rwx</span><br><span class="line">group::r-x</span><br><span class="line">other::r-x</span><br><span class="line">default:user::rwx</span><br><span class="line">default:user:student:rwx</span><br><span class="line">default:group::r-x</span><br><span class="line">default:mask::rwx</span><br><span class="line">default:other::r-x</span><br><span class="line">[root@rhel7 tmp]# ll dabao -d</span><br><span class="line">drwxr-xr-x+ 2 root root 6 Jun 22 15:09 dabao</span><br><span class="line">[root@rhel7 tmp]# touch dabao/kk</span><br><span class="line">[root@rhel7 tmp]# ll dabao</span><br><span class="line">total 4</span><br><span class="line">-rw-rw-r--+ 1 root root 0 Jun 22 15:10 kk</span><br><span class="line">[root@rhel7 tmp]# getfacl dabao/kk</span><br><span class="line"> file: dabao/kk</span><br><span class="line"> owner: root</span><br><span class="line"> group: root</span><br><span class="line">user::rw-</span><br><span class="line">user:student:rwx</span><br><span class="line">effective:rw-</span><br><span class="line">group::r-x</span><br><span class="line">effective:r--</span><br><span class="line">mask::rw-</span><br><span class="line">other::r--</span><br><span class="line"> åˆ‡æ¢ä¸º student ç”¨æˆ·</span><br><span class="line">[student@rhel7 tmp]$ cd dabao</span><br><span class="line">[student@rhel7 dabao]$ ll</span><br><span class="line">total 4</span><br><span class="line">-rw-rw-r--+ 1 root root 0 Jun 22 15:10 kk</span><br><span class="line">[student@rhel7 dabao]$ cat kk</span><br></pre></td></tr></table></figure>

<h2 id="æ–‡ä»¶å­˜å‚¨ç»“æ„"><a href="#æ–‡ä»¶å­˜å‚¨ç»“æ„" class="headerlink" title="æ–‡ä»¶å­˜å‚¨ç»“æ„"></a>æ–‡ä»¶å­˜å‚¨ç»“æ„</h2><p>Linux æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶æƒé™ (rwx) ä¸æ–‡ä»¶å±æ€§ ( æ‹¥æœ‰è€…ã€ç¾¤ç»„ã€ æ—¶é—´å‚æ•°ç­‰ ) , æ–‡ä»¶ç³»ç»Ÿä¼šå°†è¿™ä¸¤éƒ¨åˆ†<br>çš„æ•°æ®åˆ†åˆ«å­˜æ”¾åœ¨ä¸åŒçš„åŒºå— , æƒé™ä¸å±æ€§æ”¾ç½®åˆ° inode ä¸­ , å®é™…æ•°æ®åˆ™æ”¾ç½®åˆ° data block åŒºå—ä¸­ã€‚<br>å¦å¤– , è¿˜æœ‰ä¸€ä¸ªè¶…çº§åŒºå— (superblock) ä¼šè®°å½•æ•´ä¸ª æ–‡ä»¶ç³»ç»Ÿçš„æ•´ä½“ä¿¡æ¯ , åŒ…æ‹¬ inode å’Œ block<br>çš„æ€»é‡ã€ä½¿ç”¨é‡ã€å‰©ä½™é‡ç­‰ã€‚</p>
<p><img src="pic/07.png" alt="07"></p>
<ul>
<li>æ–‡ä»¶çš„å±æ€§å’Œæƒé™æ•°æ® â€“&gt; æ”¾ç½®åˆ° inode 4 å·</li>
<li>æ–‡ä»¶æ•°æ®çš„å®é™…æ”¾ç½®ç‚¹ä¸º 2, 7, 13, 15 è¿™å››ä¸ª block å·ç </li>
</ul>
<p>å¯¹äºç›®å½•: inode è®°å½•è¯¥ç›®å½•çš„ç›¸å…³æƒé™ä¸å±æ€§ , å¹¶è®°å½•åˆ†é…åˆ°çš„é‚£å— block å·ç  ; è€Œ block åˆ™<br>æ˜¯è®°å½•åœ¨è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶æˆ–ç›®å½•çš„æ–‡ä»¶åå’Œå¯¹åº”çš„ inode å·çš„æ•°æ®ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º:</p>
<p><img src="pic/08.png" alt="08"></p>
<h2 id="è½¯ç¡¬æ–¹å¼é“¾æ¥"><a href="#è½¯ç¡¬æ–¹å¼é“¾æ¥" class="headerlink" title="è½¯ç¡¬æ–¹å¼é“¾æ¥"></a>è½¯ç¡¬æ–¹å¼é“¾æ¥</h2><p>åœ¨ Linux ç³»ç»Ÿä¸­çš„ ln å‘½ä»¤èƒ½å¤Ÿè®©ç”¨æˆ·åˆ›å»ºå‡ºä¸¤ç§ä¸åŒç±»å‹çš„æ–‡ä»¶å¿«æ·æ–¹å¼,ä¸€å®šè¦æ³¨æ„åŒºåˆ†:</p>
<p>ç¡¬é“¾æ¥ (hard link) å¯ä»¥è¢«ç†è§£ä¸ºä¸€ä¸ª â€œ æŒ‡å‘åŸå§‹æ–‡ä»¶ inode çš„æŒ‡é’ˆ â€ ,ç³»ç»Ÿä¸ä¸ºå®ƒåˆ†é…ç‹¬ç«‹çš„ inode<br>ä¸æ–‡ä»¶,æ‰€ä»¥å®é™…ä¸Šæ¥è®²ç¡¬é“¾æ¥æ–‡ä»¶ä¸åŸå§‹æ–‡ä»¶å…¶å®æ˜¯åŒä¸€ä¸ªæ–‡ä»¶,åªæ˜¯åå­—ä¸åŒã€‚äºæ˜¯æ¯æ·»åŠ ä¸€ä¸ªç¡¬é“¾æ¥,<br>è¯¥æ–‡ä»¶çš„ inode è¿æ¥æ•°å°±ä¼šå¢åŠ  1 ,ç›´åˆ°è¯¥æ–‡ä»¶çš„ inode è¿æ¥æ•°å½’ 0 æ‰æ˜¯å½»åº•åˆ é™¤ã€‚æ¦‚æ‹¬æ¥è¯´å› ä¸ºç¡¬é“¾<br>æ¥å®é™…å°±æ˜¯æŒ‡å‘åŸæ–‡ä»¶ inode çš„æŒ‡é’ˆ,å³ä¾¿åŸå§‹æ–‡ä»¶è¢«åˆ é™¤ä¾ç„¶å¯ä»¥é€šè¿‡é“¾æ¥æ–‡ä»¶è®¿é—®,ä½†æ˜¯ä¸èƒ½è·¨æ–‡ä»¶<br>ç³»ç»Ÿä¹Ÿä¸èƒ½é“¾æ¥ç›®å½•æ–‡ä»¶ã€‚</p>
<p>è½¯é“¾æ¥ä¹Ÿç§°ä¸ºç¬¦å·é“¾æ¥( symbolic link )å³ â€œ ä»…ä»…åŒ…å«å®ƒç´¢è¦é“¾æ¥æ–‡ä»¶çš„è·¯å¾„å â€ å› æ­¤èƒ½åšç›®å½•é“¾æ¥ä¹Ÿ<br>å¯ä»¥è·¨è¶Šæ–‡ä»¶ç³»ç»Ÿ,ä½†åŸå§‹æ–‡ä»¶è¢«åˆ é™¤åé“¾æ¥æ–‡ä»¶ä¹Ÿå°†å¤±æ•ˆ,å¦‚åŒ WinodwTM ä¸­çš„ â€œ å¿«æ·æ–¹å¼ â€ ã€‚</p>
<p>ln å‘½ä»¤ç”¨äºåˆ›å»ºé“¾æ¥æ–‡ä»¶,æ ¼å¼ä¸º: â€œ ln [ é€‰é¡¹ ] ç›®æ ‡ â€ ã€‚</p>
<ul>
<li>åˆ›å»ºç¡¬é“¾æ¥ :â€œln æ–‡ä»¶å é“¾æ¥å â€</li>
<li>åˆ›å»ºè½¯é“¾æ¥ :â€œln -s æ–‡ä»¶å è¿æ¥å â€</li>
</ul>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-s</td>
<td align="left">åˆ›å»ºâ€ç¬¦å·é“¾æ¥â€(é»˜è®¤æ˜¯ç¡¬é“¾æ¥)</td>
</tr>
<tr>
<td align="left">-f</td>
<td align="left">å¼ºåˆ¶åˆ›å»ºæ–‡ä»¶æˆ–ç›®å½•çš„é“¾æ¥</td>
</tr>
<tr>
<td align="left">-i</td>
<td align="left">è¦†ç›–å‰å…ˆè¯¢é—®</td>
</tr>
<tr>
<td align="left">-v</td>
<td align="left">æ˜¾ç¤ºåˆ›å»ºé“¾æ¥çš„è¿‡ç¨‹</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 tmp]# echo this is a &gt; file</span><br><span class="line">[root@rhel7 tmp]# cat file</span><br><span class="line">this is a</span><br><span class="line">[root@rhel7 tmp]# ll file</span><br><span class="line">-rw-r--r--. 1 root root 10 Jun 22 16:02 file</span><br><span class="line">[root@rhel7 tmp]# ln file fileh</span><br><span class="line">[root@rhel7 tmp]# ll file fileh</span><br><span class="line">[root@rhel7 tmp]# ll file fileh files -i</span><br><span class="line">52973928 -rw-r--r--. 2 root root 10 Jun 22 16:02 file</span><br><span class="line">52973928 -rw-r--r--. 2 root root 10 Jun 22 16:02 fileh</span><br><span class="line">52973930 lrwxrwxrwx. 1 root root 4 Jun 22 16:03 files -&gt; filefile</span><br></pre></td></tr></table></figure>

<p><img src="pic/09.png" alt="09"></p>
<h2 id="æŒ‡ä»¤å’Œæ–‡ä»¶çš„æœç´¢"><a href="#æŒ‡ä»¤å’Œæ–‡ä»¶çš„æœç´¢" class="headerlink" title="æŒ‡ä»¤å’Œæ–‡ä»¶çš„æœç´¢"></a>æŒ‡ä»¤å’Œæ–‡ä»¶çš„æœç´¢</h2><p>which     whereis         locate     find </p>
<h3 id="è‚‰çœ¼æŸ¥æ‰¾-ls-R"><a href="#è‚‰çœ¼æŸ¥æ‰¾-ls-R" class="headerlink" title="è‚‰çœ¼æŸ¥æ‰¾ : ls -R"></a>è‚‰çœ¼æŸ¥æ‰¾ : ls -R</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[ root@www ~]# ls -R /tmp</span><br><span class="line">/tmp:</span><br><span class="line">dabao</span><br><span class="line">dabao1</span><br><span class="line">/tmp/dabao1:</span><br><span class="line">1</span><br><span class="line">/tmp/dabao1/1:</span><br><span class="line">2</span><br><span class="line">/tmp/dabao1/1/2:</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## æŒ‡ä»¤çš„æœå¯» :which</span></span></span><br><span class="line"></span><br><span class="line">which [ -a] command</span><br><span class="line"></span><br><span class="line">é€‰é¡¹ä¸å‚æ•° :</span><br><span class="line"></span><br><span class="line">-a</span><br><span class="line">- : å°†æ‰€æœ‰ç”± PATH ç›®å½•ä¸­å¯ä»¥æ‰¾åˆ°çš„æŒ‡ä»¤å‡åˆ—å‡º</span><br><span class="line">- : åªæ˜¾ç¤ºç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„</span><br><span class="line"></span><br><span class="line">æ³¨æ„ :</span><br><span class="line">1. ç³»ç»Ÿå†…å»ºå‘½ä»¤æ‰¾ä¸åˆ° , type æŸ¥çœ‹</span><br><span class="line">2. alias å‘½ä»¤åˆ«å</span><br><span class="line"></span><br><span class="line">â€‹```shell</span><br><span class="line">[ root@www ~]# which cat</span><br><span class="line">/bin/cat</span><br><span class="line">[ root@www ~]# which postfix</span><br><span class="line">/usr/sbin/postfix</span><br></pre></td></tr></table></figure>

<h3 id="æ–‡ä»¶åçš„æœå¯»-whereis-locate-find"><a href="#æ–‡ä»¶åçš„æœå¯»-whereis-locate-find" class="headerlink" title="æ–‡ä»¶åçš„æœå¯» :whereis, locate, find"></a>æ–‡ä»¶åçš„æœå¯» :whereis, locate, find</h3><h4 id="whereis"><a href="#whereis" class="headerlink" title="whereis"></a>whereis</h4><p>whereis [ -bmsu] [ -BMS directoryâ€¦-f] filename..</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-b</td>
<td align="left">åªå¯»æ‰¾ binary äºŒè¿›åˆ¶ æ ¼å¼çš„æ–‡ä»¶</td>
</tr>
<tr>
<td align="left">-m</td>
<td align="left">åªå¯»æ‰¾åœ¨ è¯´æ˜æ–‡ä»¶ manual è·¯å¾„ä¸‹çš„æ–‡ä»¶</td>
</tr>
<tr>
<td align="left">-s</td>
<td align="left">åªå¯»æ‰¾ source æ¥æºçš„æ–‡ä»¶</td>
</tr>
<tr>
<td align="left">-u</td>
<td align="left">æœå¯»ä¸åœ¨ä¸Šè¿°ä¸‰ä¸ªé¡¹ç›®å½“ä¸­çš„å…¶ä»–ç‰¹æ®Šæ–‡ä»¶</td>
</tr>
<tr>
<td align="left">-l</td>
<td align="left">æŸ¥çœ‹ whereis å¯æœå¯»çš„è·¯å¾„</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[ root@www ~]# whereis /etc/passwd</span><br><span class="line">passwd: /usr/bin/passwd /etc/passwd.OLD /etc/passwd /usr/share/man/man1/passwd.1.gz</span><br><span class="line">/usr/share/man/man5/passwd.5.gz</span><br><span class="line">[ root@www ~]# whereis man</span><br><span class="line">man: /usr/bin/man /etc/man.config /usr/share/man /usr/share/man/man7/man.7.gz</span><br><span class="line">/usr/share/man/man1p/man.1p.gz /usr/share/man/man1/man.1.gz</span><br></pre></td></tr></table></figure>

<h4 id="locate"><a href="#locate" class="headerlink" title="locate"></a>locate</h4><p>locate [ -ir] keyword</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-i</td>
<td align="left">å¿½ç•¥å¤§å°å†™çš„å·®å¼‚ ;</td>
</tr>
<tr>
<td align="left">-r</td>
<td align="left">åé¢å¯æ¥æ­£è§„è¡¨ç¤ºæ³•çš„æ˜¾ç¤ºæ–¹å¼</td>
</tr>
</tbody></table>
<ul>
<li>å®‰è£…è½¯ä»¶ <code>mlocate</code> ä¹‹åæ‰ä¼šæœ‰ <code>updatedb</code> å‘½ä»¤å’Œ <code>locate</code> å‘½ä»¤,æœ€å°åŒ–å®‰è£…çš„ rhel ç³»ç»Ÿé»˜è®¤ä¸å®‰è£…ã€‚</li>
<li><code>locate</code> å¯»æ‰¾çš„æ•°æ®æ˜¯ç”±ã€å·²å»ºç«‹çš„æ•°æ®åº“ <code>/var/lib/mlocate/mlocate.db</code> é‡Œé¢çš„æ•°æ®æ‰€æœ<br>å¯»åˆ° , æ‰€ä»¥ä¸ç”¨ç›´æ¥åœ¨å»ç¡¬ç›˜ä¸­å­˜å–æ•°æ® , é€Ÿåº¦å¿«</li>
<li><code>updatedb</code>: æ ¹æ® <code>/etc/updatedb.conf</code> çš„è®¾å®šå»æœå¯»ç³»ç»Ÿç¡¬ç›˜å†…çš„æ–‡ä»¶å , å¹¶æ›´æ–°<code>/var/lib/mlocate.mlocate.db</code></li>
<li><code>PRUNEPATHS = &quot;/afs /media /net /sfs /tmp /udev /var/cache/ccache /var/spool/cups /var/spool/squid /var/tmp&quot;</code> &lt;== è®¾å®šäº†ä¸æœå¯»çš„ç›®å½•</li>
</ul>
<h4 id="find"><a href="#find" class="headerlink" title="find"></a>find</h4><p>find [ PATH] [ option] [ action]</p>
<p>é€‰é¡¹ä¸å‚æ•° :</p>
<ol>
<li>ä¸æ—¶é—´æœ‰å…³ :-atime, -ctime ,-mtime , ä»¥ -mtime è¯´æ˜</li>
</ol>
<ul>
<li>-mtime n</li>
<li>-mtime +n</li>
<li>-mtime -n</li>
<li>-newer file : åˆ—å‡ºæ¯” file è¿˜è¦æ–°çš„æ¡£æ¡ˆ</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">if n= 2 now= 2015/12/24</span><br><span class="line">then</span><br><span class="line">-mtime 2:  2015/12/22 å½“å¤©å†…å®¹æ”¹è¿‡çš„æ–‡ä»¶</span><br><span class="line">-mtime +2: 2 å¤©ä¹‹å‰ , 2015/12/22 ä¹‹å‰è¢«å®¹è¢«æ”¹è¿‡çš„æ–‡ä»¶ , åŠ 21\20\19...</span><br><span class="line">-mtime -2: 2 å¤©ä»¥å†… , 2015/12/24 å’Œ 2015/12/23 å·ä¿®æ”¹è¿‡çš„æ–‡ä»¶</span><br><span class="line">&lt;--|--|--|--|--|--|--|--|--|--|--|2-|--|--|</span><br><span class="line">&lt;----------------------------+2-&gt;|--|--|--|</span><br><span class="line">&lt;--|--|--|--|--|--|--|--|--|--|--|--|&lt;-2-&gt;|</span><br><span class="line">11 12 13 14 15 16 17 18 19 20 21 22 23 24 ç°åœ¨</span><br></pre></td></tr></table></figure>

<ol>
<li>ä¸ç”¨æˆ·å’Œç»„æœ‰å…³</li>
</ol>
<ul>
<li>-uid n</li>
<li>-gid n</li>
<li>-user name</li>
<li>-group name</li>
<li>-nouser</li>
<li>-nogroup</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[ root@www ~]# find /tmp -user dabao</span><br><span class="line">/tmp/dabao</span><br><span class="line">/tmp/dabao1</span><br><span class="line">/tmp/dabao1/1</span><br><span class="line">/tmp/dabao1/1/2</span><br></pre></td></tr></table></figure>

<ol>
<li>ä¸æ¡£æ¡ˆçš„æƒé™åŠåç§°æœ‰å…³</li>
</ol>
<ul>
<li>-name filename: æœå¯»æ–‡ä»¶åä¸º filename çš„æ–‡ä»¶ ;</li>
<li>-size [ +-]SIZE: SIZE çš„è§„æ ¼æœ‰</li>
<li>c: ä»£è¡¨ byte</li>
<li>k: ä»£è¡¨ 1024bytes w: å­—æ•° , å ä¸¤ä¸ªå­—ç¬¦ M\G</li>
<li>-type TYPE:f æ™®é€šæ–‡ä»¶ d ç›®å½• l é“¾æ¥æ–‡ä»¶</li>
<li>-perm mode : æ–‡ä»¶æƒé™ã€åˆšå¥½ç­‰äºã€ mode çš„æ¡£æ¡ˆ mode èŒƒå›´ : 7777 ~ 0000</li>
<li>-perm -mode: æ–‡ä»¶æƒé™ã€å¿…é¡»è¦å…¨éƒ¨å›Šæ‹¬ mode æƒé™ã€</li>
<li>-perm +mode: æ–‡ä»¶æƒé™ã€åŒ…å« mode æƒé™ã€çš„æ–‡ä»¶</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[ root@www ~]# find /tmp -name "*da*"</span><br><span class="line">/tmp/dabao</span><br><span class="line">/tmp/orbit-root/linc-bd3-0-5dc8fa181da</span><br><span class="line">/tmp/orbit-root/linc-da1-0-76ab0a1c521dd</span><br><span class="line">/tmp/orbit-root/linc-cc4-0-c0fda335ced5</span><br><span class="line">/tmp/dabao1</span><br><span class="line">[ root@www ~]# find /tmp -type f</span><br><span class="line">/tmp/pulse-BzLrQ7uHulwz/pid</span><br><span class="line">/tmp/.X0-lock</span><br><span class="line">/tmp/dabao</span><br><span class="line">/tmp/orbit-root/bonobo-activation-server-23d28d39cfff8983f6cac2ca00000055-ior</span><br><span class="line">/tmp/orbit-root/bonobo-activation-register-23d28d39cfff8983f6cac2ca00000055.lock</span><br><span class="line">/tmp/lurakm9.tmp/luraktg.tmp</span><br><span class="line">/tmp/lurakm9.tmp/lurakt2.tmp</span><br><span class="line">/tmp/lurakm9.tmp/lurakvs.tmp</span><br></pre></td></tr></table></figure>

<ol>
<li>é¢å¤–åŠ¨ä½œ</li>
</ol>
<p>-exec [ å‘½ä»¤ ] : åé¢å¯å†æ¥é¢å¤–çš„å‘½ä»¤æ¥å¤„ç†æœå¯»åˆ°çš„ç»“æœ</p>
<p><code>find / -perm +7000 -exec ls -l {} \;</code><br>&lt;= = å›ºå®šæ ¼å¼ : <code>find [ è·¯å¾„ å‚æ•° ] -exec [ å‘½ä»¤ ] {} \;</code></p>
<p>-ok        æ ¼å¼åŒ-execï¼ŒåŒºåˆ«okä¼šå¸¦æç¤ºï¼ˆäº¤äº’å¼çš„æ‰¾åˆ°åæ˜¯å¦æ‰§è¡Œè¯¥å‘½ä»¤ï¼‰</p>
<p>-print: å°†ç»“æœè¾“å‡ºå±å¹•ä¸Š , é¢„è®¾åŠ¨ä½œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[ root@www ~]# find /tmp -name "dabao*" -exec ls -l &#123;&#125; \;</span><br><span class="line">-rwxrwxrwx+ 1 dabao dabao 0 Mar 21 06:09 /tmp/dabao</span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x. 3 dabao dabao 4096 Mar 21 06:11 1</span><br></pre></td></tr></table></figure>

<h2 id="Linux-æ–‡ä»¶å’Œç›®å½•ä½œä¸š"><a href="#Linux-æ–‡ä»¶å’Œç›®å½•ä½œä¸š" class="headerlink" title="Linux æ–‡ä»¶å’Œç›®å½•ä½œä¸š"></a>Linux æ–‡ä»¶å’Œç›®å½•ä½œä¸š</h2><h3 id="UGO-æƒé™ä½œä¸š"><a href="#UGO-æƒé™ä½œä¸š" class="headerlink" title="UGO æƒé™ä½œä¸š"></a>UGO æƒé™ä½œä¸š</h3><ol>
<li>æŸ¥çœ‹ /var/spool/mail ä¸‹æ‰€æœ‰æ–‡ä»¶ , å¹¶æŒ‡å‡ºå…¶æ‹¥æœ‰è€…å’Œæ‰€å±ç»„åˆ† åˆ«æ˜¯è° , å…¶æ‹¥æœ‰è€…å’Œæ‰€å±ç»„å¯¹åº”çš„<br>æƒé™åˆ†åˆ«æ˜¯ä»€ä¹ˆ ?</li>
<li>åœ¨ /tmp/ ç›®å½•ä¸‹åˆ›å»º 7 ä¸ªç›®å½• , ç›®å½•ååˆ†åˆ«ä¸º test1 åˆ° test7</li>
</ol>
<ul>
<li>1) å°†è¯¥ 7 ä¸ªç›®å½•çš„æ‹¥æœ‰è€…æ”¹ä¸º student ç”¨æˆ·ã€‚</li>
<li>2) åœ¨è¿™ 7 ä¸ªç›®å½•ä¸‹åˆ†åˆ«åˆ›å»º file1 å’Œ file2</li>
<li>3) é’ˆå¯¹è¿™ 7 ä¸ªç›®å½•çš„ student ç”¨æˆ·åˆ†åˆ«è®¾ç½®æ•°å­—ä¸º 1 åˆ° 7 çš„æƒé™ã€‚</li>
<li>4) åˆ†åˆ«å¯¹è¿™ä¸ª 7 ä¸ªç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ :<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ls file1</span><br><span class="line">ls -l file1</span><br><span class="line">cd testx</span><br><span class="line">touch file3</span><br><span class="line">rm file2</span><br><span class="line">chmod 777 file1</span><br></pre></td></tr></table></figure>
å¹¶æ€»ç»“ç»“è®ºã€‚</li>
</ul>
<ol>
<li>æ–°å»ºä¸€ä¸ªç»„ , ç»„åä¸º group, è¦æ±‚å°† test1 ç›®å½•çš„æ‰€å±ç»„æ”¹ä¸º group ç»„ , å¹¶å°† test1 ç›®å½•ä¸‹çš„<br>æ‰€æœ‰æ–‡ä»¶çš„æ‰€å±ç»„éƒ½æ”¹ä¸º group ç»„ã€‚</li>
</ol>
<h3 id="ç‰¹æ®Šæƒé™ä½œä¸š"><a href="#ç‰¹æ®Šæƒé™ä½œä¸š" class="headerlink" title="ç‰¹æ®Šæƒé™ä½œä¸š"></a>ç‰¹æ®Šæƒé™ä½œä¸š</h3><ol>
<li>åœ¨ /tmp/ ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª testdir ç›®å½• , è¦æ±‚ä»»ä½•äººåœ¨è¯¥ç›®å½•ä¸‹ åˆ›å»ºçš„æ–‡ä»¶éƒ½åªèƒ½ç”±è‡ªå·±æˆ–è€…ç›®å½•<br>æ‹¥æœ‰è€…å»åˆ é™¤ , å…¶ä½™äººä¸èƒ½å¤Ÿ å»åˆ é™¤ã€‚</li>
<li>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ , è®©ä»»ä½•äººæ‰§è¡Œè¿™ä¸ªæ–‡ä»¶æ—¶å€™ , ä¸´æ—¶æ‹¥æœ‰æ–‡ä»¶æ‹¥ æœ‰è€…çš„æƒé™ã€‚</li>
</ol>
<h3 id="ATTR-æƒé™ä½œä¸š"><a href="#ATTR-æƒé™ä½œä¸š" class="headerlink" title="ATTR æƒé™ä½œä¸š"></a>ATTR æƒé™ä½œä¸š</h3><ol>
<li>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ , æ–‡ä»¶åä»»æ„ , è¦æ±‚ , è¯¥æ–‡ä»¶çš„è®¿é—®æ—¶é—´ä¸è¢« ä¿®æ”¹ , åŒæ—¶ , è¯¥æ–‡ä»¶åªèƒ½è¢«è¿½åŠ å†…å®¹ , ä¸å…è®¸è¢«<br>ä¿®æ”¹å’Œåˆ é™¤ã€‚ å–æ¶ˆè¯¥æ–‡ä»¶çš„ Attr æƒé™ã€‚</li>
</ol>
<h3 id="ACL-æƒé™ä½œä¸š"><a href="#ACL-æƒé™ä½œä¸š" class="headerlink" title="ACL æƒé™ä½œä¸š"></a>ACL æƒé™ä½œä¸š</h3><ol>
<li>åœ¨ /tmp ä¸‹åˆ›å»ºä¸€ä¸ª file æ–‡ä»¶ , è¦æ±‚ student ç”¨æˆ·å¯¹ file æœ‰å®Œæ•´ çš„æƒé™ ,kevin ç”¨æˆ·å¯¹<br>file æœ‰ rw- çš„æƒé™ ,carol ç”¨æˆ·å¯¹ file æœ‰ -wx çš„æƒé™ ,natasha ç”¨æˆ·å¯¹è¯¥æ–‡ä»¶æœ‰ râ€“ çš„æƒé™ã€‚</li>
<li>æ¸…ç©º file çš„ attr æƒé™ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯åŸ¹è®­</category>
        <category>Linuxç³»ç»ŸåŸºç¡€åŸ¹è®­</category>
      </categories>
      <tags>
        <tag>åŸ¹è®­</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux å‹ç¼©æ‰“åŒ…</title>
    <url>/2016/12/22/booboo_linux_base/04-Linux%E5%8E%8B%E7%BC%A9%E6%89%93%E5%8C%85/</url>
    <content><![CDATA[<h2 id="å‹ç¼©çš„æ„ä¹‰å’ŒåŸç†"><a href="#å‹ç¼©çš„æ„ä¹‰å’ŒåŸç†" class="headerlink" title="å‹ç¼©çš„æ„ä¹‰å’ŒåŸç†"></a>å‹ç¼©çš„æ„ä¹‰å’ŒåŸç†</h2><h3 id="å‹ç¼©çš„æ„ä¹‰"><a href="#å‹ç¼©çš„æ„ä¹‰" class="headerlink" title="å‹ç¼©çš„æ„ä¹‰"></a>å‹ç¼©çš„æ„ä¹‰</h3><p>ä½ æ˜¯å¦é‡åˆ°è¿‡ä»¥ä¸‹æƒ…å†µï¼š</p>
<ul>
<li>æ–‡ä»¶å¤ªå¤§, ä¸€ä¸ª u ç›˜æ— æ³•å…¨éƒ¨å¤åˆ¶? </li>
<li>å¤‡ä»½æŸäº›é‡è¦æ•°æ® , ååè¿™äº›æ•°æ®é‡å¤ªå¤§äº† , è€—æ‰äº†ä½ å¤ªå¤šçš„ç£ç›˜ç©ºé—´? </li>
</ul>
<p>è¿™ä¸ªæ—¶å€™ï¼Œâ€œæ–‡ä»¶å‹ç¼©â€æŠ€æœ¯å¯ å°±æ´¾ä¸Šç”¨åœºäº† !</p>
<p>å› ä¸ºè¿™äº›æ¯”è¾ƒå¤§å‹çš„æ–‡ä»¶é€è¿‡æ‰€è°“çš„æ–‡ä»¶å‹ç¼©æŠ€æœ¯å , å¯ä»¥å°†ä»–çš„ç£ç›˜ä½¿ç”¨é‡é™ä½ , å¯ä»¥è¾¾åˆ°å‡ä½æ–‡ä»¶å®¹é‡çš„æ•ˆæœ , æ­¤å¤– , æœ‰çš„å‹ç¼©ç¨‹åºè¿˜å¯ä»¥è¿›è¡Œå®¹é‡é™åˆ¶ , ä½¿ä¸€ä¸ªå¤§å‹æ–‡ä»¶å¯ä»¥åˆ†å‰²æˆä¸ºæ•°ä¸ªå°å‹æ–‡ä»¶ , ä»¥æ–¹ä¾¿ Uç›˜æºå¸¦å‘¢ !</p>
<h3 id="å‹ç¼©çš„åŸç†"><a href="#å‹ç¼©çš„åŸç†" class="headerlink" title="å‹ç¼©çš„åŸç†"></a>å‹ç¼©çš„åŸç†</h3><p>ç›®å‰æˆ‘ä»¬ä½¿ç”¨çš„è®¡ç®—æœºç³»ç»Ÿä¸­éƒ½æ˜¯ä½¿ bytes(å­—èŠ‚)å•ä½æ¥è®¡é‡çš„! äº‹å®ä¸Š , è®¡ç®—æœºæœ€å°çš„è®¡é‡å•ä½åº”è¯¥æ˜¯ bits (æ¯”ç‰¹)ã€‚</p>
<p>1 byte = 8 bits ã€‚</p>
<p>å¦‚æœè®©è®¡ç®—æœºè®°å½• 1 è¿™ä¸ªæ•°å­—ä»–ä¼šå¦‚ä½•è®°å½• ?</p>
<p>å‡è®¾ä¸€ä¸ª byte å¯ä»¥çœ‹æˆä¸‹é¢çš„æ ·å­ :</p>
<p>â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡</p>
<p>Tips:</p>
<p>1 byte = 8 bits , æ‰€ä»¥æ¯ä¸ª byte å½“ä¸­ä¼šæœ‰ 8 ä¸ªç©ºæ ¼ , è€Œæ¯ä¸ªç©ºæ ¼å¯ä»¥æ˜¯ 0, æˆ–è€… 1 , è¿™é‡Œä»…æ˜¯åšä¸ºä¸€ä¸ªç²—ç•¥çš„ä»‹ç»ã€‚ç”±äºæˆ‘ä»¬è®°å½•æ•°å­—æ˜¯ 1 , è¡¨ç¤ºæˆäºŒè¿›åˆ¶å°±æ˜¯ 00000001 , 1 ä¼šåœ¨æœ€å³è¾¹å æ® 1 ä¸ª bit , è€Œå…¶ä»– çš„ 7 ä¸ªbits å°†ä¼šè¢«å¡«ä¸Š 0 ! æœ‰ä¸€ç§å‹ç¼©æŠ€æœ¯ç¤ºè¿™ä¹ˆåšçš„,ä»–æ˜¯å°†é‡å¤çš„æ•°æ®è¿›è¡Œç»Ÿè®¡è®°å½•çš„ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­è¯´ , å¦‚æœä½ çš„æ•°æ®ã€ 111â€¦. ã€å…±æœ‰ 100 ä¸ª 1 </p>
<p>é‚£ä¹ˆå‹ç¼©æŠ€æœ¯ä¼šè®°å½•ä¸ºã€ 100 ä¸ª 1 ã€è€Œä¸æ˜¯çœŸçš„æœ‰ 100 ä¸ª 1 çš„ä½å­˜åœ¨ ! </p>
<p>ç®€å•çš„è¯´ , ä½ å¯ä»¥å°†ä»–æƒ³æˆ , å…¶å®æ–‡ä»¶é‡Œé¢æœ‰ç›¸å½“å¤šçš„ã€ç©ºé—´ã€å­˜åœ¨ , å¹¶ä¸æ˜¯å®Œå…¨å¡«æ»¡çš„ </p>
<ul>
<li>ã€å‹ç¼©ã€ æŠ€æœ¯å°±æ˜¯å°†è¿™äº›ã€ç©ºé—´ã€å¡«æ»¡ , ä»¥è®©æ•´ä¸ªæ–‡ä»¶å ç”¨çš„å®¹é‡ä¸‹é™ ! </li>
<li>ã€å‹ç¼©è¿‡çš„æ¡£æ¡ˆã€å¹¶æ— æ³•ç›´æ¥è¢«æˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿæ‰€ä½¿ç”¨ , å› æ­¤ , è‹¥è¦ä½¿ç”¨è¿™äº›è¢«å‹ç¼©è¿‡çš„æ–‡ä»¶æ•°æ® , åˆ™å¿…é¡¹å°†ä»–ã€è¿˜åŸã€å›åˆ° æœªå‹ç¼©å‰çš„æ¨¡æ · ,é‚£å°±æ˜¯æ‰€è°“çš„ã€è§£å‹ç¼©ã€å•° ! </li>
<li>è‡³äºå‹ç¼©å‰ä¸å‹ç¼©åçš„æ¡£æ¡ˆæ‰€å ç”¨çš„ç£ç›˜ç©ºé—´å¤§å° , å°±å¯ä»¥è¢«ç§°ä¸ºæ˜¯ã€å‹ç¼©æ¯”ã€ã€‚</li>
</ul>
<h3 id="å‹ç¼©ä¸è§£å‹ç¼©çš„å¥½å¤„"><a href="#å‹ç¼©ä¸è§£å‹ç¼©çš„å¥½å¤„" class="headerlink" title="å‹ç¼©ä¸è§£å‹ç¼©çš„å¥½å¤„"></a>å‹ç¼©ä¸è§£å‹ç¼©çš„å¥½å¤„</h3><p>æœ€å¤§çš„å¥½å¤„å°±æ˜¯å‹ç¼©è¿‡çš„æ–‡ä»¶å®¹é‡å˜å°äº† , æ‰€ä»¥ä½ çš„ ç¡¬ç›˜å®¹é‡æ— å½¢å½“ä¸­å°±å¯ä»¥å®¹çº³æ›´å¤šçš„èµ„æ–™ã€‚æ­¤å¤– , åœ¨ä¸€äº›ç½‘ç»œæ•°æ®çš„ä¼ è¾“ä¸­ , ä¹Ÿä¼šç”±äºæ•°æ®é‡çš„é™ä½ , å¥½è®©ç½‘ç»œå¸¦å®½å¯ä»¥ç”¨æ¥ä½œæ›´å¤šçš„å·¥ä½œ ! è€Œå¹¶æ˜¯è€æ˜¯å¡åœ¨ä¸€äº›å¤§å‹çš„æ–‡ä»¶ä¼ è¾“ä¸Šé¢å‘¢ ! ç›®å‰å¾ˆå¤šçš„ WWW ç½‘ç«™ä¹Ÿæ˜¯åˆ©ç”¨æ–‡ä»¶å‹ç¼©çš„æŠ€æœ¯æ¥è¿›è¡Œæ•°æ®çš„ä¼ é€ , å¥½è®©ç½‘ç«™å¸¦å®½çš„å¯åˆ©ç”¨ç‡ä¸Šå‡ã€‚</p>
<h2 id="å‹ç¼©æ‰“åŒ…å‘½ä»¤"><a href="#å‹ç¼©æ‰“åŒ…å‘½ä»¤" class="headerlink" title="å‹ç¼©æ‰“åŒ…å‘½ä»¤"></a>å‹ç¼©æ‰“åŒ…å‘½ä»¤</h2><p>å‘½ä»¤æ¦‚è§ˆ</p>
<ul>
<li><p>compress æ˜¯ä¸€ä¸ªç›¸å½“å¤è€çš„ unix æ¡£æ¡ˆå‹ç¼©æŒ‡ä»¤ã€‚</p>
</li>
<li><p>gzip æ˜¯ GNUzip çš„ç¼©å†™,å®ƒæ˜¯ä¸€ä¸ª GNU( å…¨ç§°æ˜¯ GNUâ€™s Not Unix ) è‡ªç”±è½¯ä»¶çš„æ–‡ä»¶å‹ç¼©ç¨‹åº ; ç”±äº gzip å¯ä»¥äº§ç”Ÿæ›´ç†æƒ³çš„å‹ç¼©æ¯”ä¾‹,ä¸€èˆ¬äººå¤šå·²æ”¹ç”¨ gzip ä¸ºæ¡£æ¡ˆå‹ç¼©å·¥å…·ã€‚</p>
</li>
<li><p>bzip2 æ˜¯ä¸€ä¸ªåŸºäº Burrows-Wheeler å˜æ¢çš„æ— æŸå‹ç¼©è½¯ä»¶,å‹ç¼©æ•ˆæœæ¯”ä¼ ç»Ÿçš„ LZ77/LZ78 å‹ç¼©ç®—æ³•æ¥å¾—å¥½ ; è‹¥è¯´ gzip æ˜¯ä¸ºäº†å–ä»£ compress å¹¶æä¾›æ›´å¥½çš„å‹ç¼©æ¯”è€Œæˆç«‹çš„,é‚£ä¹ˆ bzip2 åˆ™æ˜¯ä¸ºäº†å–ä»£ gzip å¹¶æä¾›æ›´ä½³çš„å‹ç¼©æ¯”è€Œæ¥çš„ã€‚ bzip2 è¿™ç©æ„çš„å‹ç¼©æ¯”ç«Ÿç„¶æ¯” gzip è¿˜è¦å¥½ã€‚</p>
</li>
<li><p>tar å‘½ä»¤æœ€åˆçš„è®¾è®¡ç›®çš„æ˜¯å°†æ–‡ä»¶å¤‡ä»½åˆ°ç£å¸¦ä¸Š (tape archive) ,å› è€Œå¾—å tar ã€‚</p>
</li>
</ul>
<p><img src="pic/01.png" alt="01"></p>
<h3 id="zip"><a href="#zip" class="headerlink" title=".zip"></a>.zip</h3><p>.zip æ‰©å±•åè¡¨ç¤ºæ–‡ä»¶æ˜¯ä½¿ç”¨è®¸å¤š zip å½’æ¡£ç¨‹åºå’Œå‹ç¼©ç¨‹åºä¹‹ä¸€(ä½†ä¸æ˜¯ gzip )åˆ›å»ºçš„ã€‚å› ä¸ºè¿™æ˜¯ä¸€ç§éå¸¸æµè¡Œçš„å‹ç¼©æ ¼å¼,ç®—æ³•çš„è¯¦ç»†æè¿°ä¹Ÿæœ‰å¾ˆå¤š,æ‰€ä»¥å¯ä»¥æ‰¾åˆ°ç”¨äºæ‰€æœ‰æ“ä½œç³»ç»Ÿçš„æœ‰ç”¨çš„ç§»æ¤å½¢å¼ã€‚è¿™åŒ…æ‹¬åˆ›å»ºå’Œæ‰©å±•å¸¦æœ‰ .zip æ–‡ä»¶æ‰©å±•åçš„æ¡£æ¡ˆçš„å‹ç¼©å’Œè§£å‹ç¼©å®ç”¨ç¨‹åºã€‚åœ¨ Linux ä¸Šæœ‰ä¸¤ç§è¿™æ ·çš„å·¥å…·:</p>
<p>å…è´¹çš„ Info-ZIP å’Œä»¥èµ¢åˆ©ä¸ºç›®çš„çš„ PKZIP for Linux ã€‚</p>
<p>å¦‚æœæ‚¨åªæ˜¯å¶å°”éœ€è¦åˆ›å»ºæˆ–æ‰“å¼€ zip æ–‡ä»¶,ä½¿ç”¨ Info-ZIP ã€‚å¦‚æœå¸Œæœ›ä½¿ç”¨åœ¨ MS-DOS æˆ–å…¶å®ƒç³»ç»Ÿä¸Šä½¿ç”¨çš„ç›¸åŒå·¥å…·,è¯·é€‰æ‹©PKZIP ( PKZIP å¯ç”¨äºè®¸å¤šæ“ä½œç³»ç»Ÿ)ã€‚ç”¨äºå¾®è½¯ Windows çš„ WinZIP å’Œç”¨äº Mac OS çš„Stufflt è¿™ä¸¤ç§å®ç”¨ç¨‹åºå¯ä»¥åˆ›å»ºå’Œæ‰“å¼€ç›¸äº’ä¹‹é—´å…¼å®¹çš„æ¡£æ¡ˆã€‚</p>
<p>Info-ZIP åœ¨æ— æ³•ä½¿ç”¨ gzip æˆ– tar çš„æƒ…å†µä¸‹å¯ä»¥æä¾›å‹ç¼©å’Œè§£å‹ç¼©çš„ä¸€ä¸ªä¸é”™çš„é€‰æ‹©,è¿™æˆ–è®¸æ˜¯åœ¨Linux ã€å¾®è½¯ Windows å’Œ Mac OS ç”¨æˆ·ä¹‹é—´äº¤æ¢å‹ç¼©æ–‡ä»¶çš„ä¸€ç§æœ€å¥½çš„å½¢å¼ã€‚æœ‰è®¸å¤šä¸é”™çš„ zip ç¨‹åº(æœ‰å¼€æ”¾æºç çš„,ä¹Ÿæœ‰å•†ä¸šçš„)å¯ç”¨äºè¿™äº›æ“ä½œç³»ç»Ÿ,å®ƒä»¬åº”è¯¥èƒ½ç¡®ä¿æ–‡ä»¶çš„é¡ºåˆ©äº¤æ¢(å½“ç„¶,åªè¦æ˜¯åœ¨ç‰¹å®šäºæŸä¸ªç‰¹å®šå·¥å…·çš„ç‰¹æ®ŠåŠŸèƒ½å…³é—­çš„æƒ…å†µä¸‹)ã€‚</p>
<p>rhel7 é»˜è®¤å¸¦æœ‰ info-zip è½¯ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@mastera0 zip-3.0]# which zip</span><br><span class="line">/usr/bin/zip</span><br><span class="line">[root@mastera0 zip-3.0]# rpm -qf /usr/bin/zip</span><br><span class="line">zip-3.0-10.el7.x86_64</span><br><span class="line">[root@mastera0 zip-3.0]# head -n 18 /usr/share/doc/zip-3.0/README</span><br><span class="line">Zip 3.0 is the first Zip update adding large file support. For now Zip 2.3x</span><br><span class="line">remains available and supported, but users should switch to this new release.</span><br><span class="line">Testing for Zip 3.0 has focused mainly on Unix, VMS, Max OS X, and Win32,</span><br><span class="line">and some other ports may not be fully supported yet. If you find your</span><br><span class="line">favorite port is broke, send us the details or, better, send bug fixes. It's</span><br><span class="line">possible that support for some older ports may be dropped in the future.</span><br><span class="line">Copyright (c) 1990-2008 Info-ZIP. All rights reserved.</span><br><span class="line">See the accompanying file LICENSE (the contents of which are also included</span><br><span class="line">in unzip.h, zip.h and wiz.h) for terms of use. If, for some reason, all</span><br><span class="line">of these files are missing, the Info-ZIP license also may be found at:</span><br><span class="line">ftp://ftp.info-zip.org/pub/infozip/license.html and</span><br><span class="line">http://www.info-zip.org/pub/infozip/license.html.</span><br><span class="line">[root@mastera0 ~]# rpm -qi zip</span><br><span class="line">Name</span><br><span class="line">: zip</span><br><span class="line">Version : 3.0</span><br><span class="line">Release : 10.el7</span><br><span class="line">Architecture: x86_64</span><br><span class="line">Install Date: Thu 23 Jun 2016 01:50:41 PM CST</span><br><span class="line">Group</span><br><span class="line">: Applications/Archiving</span><br><span class="line">Size</span><br><span class="line">: 815045License : BSD</span><br><span class="line">Signature : RSA/SHA256, Thu 03 Apr 2014 06:52:17 AM CST, Key ID 199e2f91fd431d51</span><br><span class="line">Source RPM : zip-3.0-10.el7.src.rpm</span><br><span class="line">Build Date : Tue 28 Jan 2014 06:35:49 AM CST</span><br><span class="line">Build Host : x86-019.build.eng.bos.redhat.com</span><br><span class="line">Relocations : (not relocatable)</span><br><span class="line">Packager : Red Hat, Inc. &lt;http://bugzilla.redhat.com/bugzilla&gt;</span><br><span class="line">Vendor</span><br><span class="line">: Red Hat, Inc.</span><br><span class="line">URL</span><br><span class="line">: http://www.info-zip.org/Zip.html</span><br><span class="line">Summary : A file compression and packaging utility compatible with PKZIP</span><br><span class="line">Description :</span><br><span class="line">The zip program is a compression and file packaging utility. Zip is</span><br><span class="line">analogous to a combination of the UNIX tar and compress commands and</span><br><span class="line">is compatible with PKZIP (a compression and file packaging utility for</span><br><span class="line">MS-DOS systems).</span><br><span class="line">Install the zip package if you need to compress files using the zip</span><br><span class="line">program.</span><br></pre></td></tr></table></figure>

<h4 id="zip-å‘½ä»¤ç”¨æ³•"><a href="#zip-å‘½ä»¤ç”¨æ³•" class="headerlink" title="zip å‘½ä»¤ç”¨æ³•"></a>zip å‘½ä»¤ç”¨æ³•</h4><p>zip å‘½ä»¤å¯ä»¥ç”¨æ¥è§£å‹ç¼©æ–‡ä»¶,æˆ–è€…å¯¹æ–‡ä»¶è¿›è¡Œæ‰“åŒ…æ“ä½œã€‚ zip æ˜¯ä¸ªä½¿ç”¨å¹¿æ³›çš„å‹ç¼©ç¨‹åº,æ–‡ä»¶ç»å®ƒå‹ç¼©åä¼šå¦å¤–äº§ç”Ÿå…·æœ‰ â€œ .zipâ€ æ‰©å±•åçš„å‹ç¼©æ–‡ä»¶ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¯­æ³• zip( é€‰é¡¹ )( å‚æ•° )</span><br><span class="line"></span><br><span class="line">é€‰é¡¹</span><br><span class="line"></span><br><span class="line">-A :è°ƒæ•´å¯æ‰§è¡Œçš„è‡ªåŠ¨è§£å‹ç¼©æ–‡ä»¶;</span><br><span class="line">-b&lt; å·¥ä½œç›®å½• &gt; :æŒ‡å®šæš‚æ—¶å­˜æ”¾æ–‡ä»¶çš„ç›®å½•;</span><br><span class="line">-c :æ›¿æ¯ä¸ªè¢«å‹ç¼©çš„æ–‡ä»¶åŠ ä¸Šæ³¨é‡Š;</span><br><span class="line">-d :ä»å‹ç¼©æ–‡ä»¶å†…åˆ é™¤æŒ‡å®šçš„æ–‡ä»¶;</span><br><span class="line">-D :å‹ç¼©æ–‡ä»¶å†…ä¸å»ºç«‹ç›®å½•åç§°;</span><br><span class="line">-f :æ­¤å‚æ•°çš„æ•ˆæœå’ŒæŒ‡å®š â€œ -uâ€ å‚æ•°ç±»ä¼¼,ä½†ä¸ä»…æ›´æ–°æ—¢æœ‰æ–‡ä»¶,å¦‚æœæŸäº›æ–‡ä»¶åŸæœ¬ä¸å­˜åœ¨äºå‹ç¼©æ–‡</span><br><span class="line">ä»¶å†…,ä½¿ç”¨æœ¬å‚æ•°ä¼šä¸€å¹¶å°†å…¶åŠ å…¥å‹ç¼©æ–‡ä»¶ä¸­;</span><br><span class="line">-F :å°è¯•ä¿®å¤å·²æŸåçš„å‹ç¼©æ–‡ä»¶;</span><br><span class="line">-g :å°†æ–‡ä»¶å‹ç¼©åé™„åŠ åœ¨å·²æœ‰çš„å‹ç¼©æ–‡ä»¶ä¹‹å,è€Œéå¦è¡Œå»ºç«‹æ–°çš„å‹ç¼©æ–‡ä»¶;</span><br><span class="line">-h :åœ¨çº¿å¸®åŠ©;</span><br><span class="line">-i&lt; èŒƒæœ¬æ ·å¼ &gt; :åªå‹ç¼©ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶;</span><br><span class="line">-j :åªä¿å­˜æ–‡ä»¶åç§°åŠå…¶å†…å®¹,è€Œä¸å­˜æ”¾ä»»ä½•ç›®å½•åç§°;</span><br><span class="line">-J :åˆ é™¤å‹ç¼©æ–‡ä»¶å‰é¢ä¸å¿…è¦çš„æ•°æ®;</span><br><span class="line">-k :ä½¿ç”¨ MS-DOS å…¼å®¹æ ¼å¼çš„æ–‡ä»¶åç§°;</span><br><span class="line">-l :å‹ç¼©æ–‡ä»¶æ—¶,æŠŠ LF å­—ç¬¦ç½®æ¢æˆ LF+CR å­—ç¬¦;</span><br><span class="line">-ll :å‹ç¼©æ–‡ä»¶æ—¶,æŠŠ LF+cp å­—ç¬¦ç½®æ¢æˆ LF å­—ç¬¦;</span><br><span class="line">-L :æ˜¾ç¤ºç‰ˆæƒä¿¡æ¯;</span><br><span class="line">-m :å°†æ–‡ä»¶å‹ç¼©å¹¶åŠ å…¥å‹ç¼©æ–‡ä»¶å,åˆ é™¤åŸå§‹æ–‡ä»¶,å³æŠŠæ–‡ä»¶ç§»åˆ°å‹ç¼©æ–‡ä»¶ä¸­;</span><br><span class="line">-n&lt; å­—å°¾å­—ç¬¦ä¸² &gt; :ä¸å‹ç¼©å…·æœ‰ç‰¹å®šå­—å°¾å­—ç¬¦ä¸²çš„æ–‡ä»¶;</span><br><span class="line">-o :ä»¥å‹ç¼©æ–‡ä»¶å†…æ‹¥æœ‰æœ€æ–°æ›´æ”¹æ—¶é—´çš„æ–‡ä»¶ä¸ºå‡†,å°†å‹ç¼©æ–‡ä»¶çš„æ›´æ”¹æ—¶é—´è®¾æˆå’Œè¯¥æ–‡ä»¶ç›¸åŒ;</span><br><span class="line">-q :ä¸æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹;</span><br><span class="line">-r :é€’å½’å¤„ç†,å°†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•ä¸€å¹¶å¤„ç†;</span><br><span class="line">-S :åŒ…å«ç³»ç»Ÿå’Œéšè—æ–‡ä»¶;</span><br><span class="line">-t&lt; æ—¥æœŸæ—¶é—´ &gt; :æŠŠå‹ç¼©æ–‡ä»¶çš„æ—¥æœŸè®¾æˆæŒ‡å®šçš„æ—¥æœŸ;</span><br><span class="line">-T :æ£€æŸ¥å¤‡ä»½æ–‡ä»¶å†…çš„æ¯ä¸ªæ–‡ä»¶æ˜¯å¦æ­£ç¡®æ— è¯¯;</span><br><span class="line">-u :æ›´æ¢è¾ƒæ–°çš„æ–‡ä»¶åˆ°å‹ç¼©æ–‡ä»¶å†…;</span><br><span class="line">-v :æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹æˆ–æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯;</span><br><span class="line">-V :ä¿å­˜ VMS æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶å±æ€§;</span><br><span class="line">-w :åœ¨æ–‡ä»¶åç§°é‡Œå‡å¦‚ç‰ˆæœ¬ç¼–å·,æœ¬å‚æ•°ä»…åœ¨ VMS æ“ä½œç³»ç»Ÿä¸‹æœ‰æ•ˆ;</span><br><span class="line">-x&lt; èŒƒæœ¬æ ·å¼ &gt; :å‹ç¼©æ—¶æ’é™¤ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶;</span><br><span class="line">-X :ä¸ä¿å­˜é¢å¤–çš„æ–‡ä»¶å±æ€§;</span><br><span class="line">-y :ç›´æ¥ä¿å­˜ç¬¦å·è¿æ¥,è€Œéè¯¥é“¾æ¥æ‰€æŒ‡å‘çš„æ–‡ä»¶,æœ¬å‚æ•°ä»…åœ¨ UNIX ä¹‹ç±»çš„ç³»ç»Ÿä¸‹æœ‰æ•ˆ;</span><br><span class="line">-z :æ›¿å‹ç¼©æ–‡ä»¶åŠ ä¸Šæ³¨é‡Š;</span><br><span class="line"><span class="meta">-$</span><span class="bash"> :ä¿å­˜ç¬¬ä¸€ä¸ªè¢«å‹ç¼©æ–‡ä»¶æ‰€åœ¨ç£ç›˜çš„å·å†Œåç§°;</span></span><br><span class="line">-&lt; å‹ç¼©æ•ˆç‡ &gt; :å‹ç¼©æ•ˆç‡æ˜¯ä¸€ä¸ªä»‹äº 1~9 çš„æ•°å€¼ã€‚</span><br><span class="line">å‚æ•°</span><br><span class="line">zip å‹ç¼©åŒ…:æŒ‡å®šè¦åˆ›å»ºçš„ zip å‹ç¼©åŒ…;</span><br><span class="line">æ–‡ä»¶åˆ—è¡¨:æŒ‡å®šè¦å‹ç¼©çš„æ–‡ä»¶åˆ—è¡¨ã€‚</span><br><span class="line">å®ä¾‹</span><br><span class="line">zip -q -r html.zip /home/Blinux/html</span><br><span class="line">zip -q -r html.zip *</span><br></pre></td></tr></table></figure>

<h4 id="unzip-çš„ç”¨æ³•"><a href="#unzip-çš„ç”¨æ³•" class="headerlink" title="unzip çš„ç”¨æ³•"></a>unzip çš„ç”¨æ³•</h4><p>unzip å‘½ä»¤ç”¨äºè§£å‹ç¼©ç”± zip å‘½ä»¤å‹ç¼©çš„ â€œ .zipâ€ å‹ç¼©åŒ…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¯­æ³• unzip( é€‰é¡¹ )( å‚æ•° )</span><br><span class="line"></span><br><span class="line">é€‰é¡¹</span><br><span class="line"></span><br><span class="line">-c :å°†è§£å‹ç¼©çš„ç»“æœæ˜¾ç¤ºåˆ°å±å¹•ä¸Š,å¹¶å¯¹å­—ç¬¦åšé€‚å½“çš„è½¬æ¢;</span><br><span class="line">-f :æ›´æ–°ç°æœ‰çš„æ–‡ä»¶;</span><br><span class="line">-l :æ˜¾ç¤ºå‹ç¼©æ–‡ä»¶å†…æ‰€åŒ…å«çš„æ–‡ä»¶;</span><br><span class="line">-p :ä¸ -c å‚æ•°ç±»ä¼¼,ä¼šå°†è§£å‹ç¼©çš„ç»“æœæ˜¾ç¤ºåˆ°å±å¹•ä¸Š,ä½†ä¸ä¼šæ‰§è¡Œä»»ä½•çš„è½¬æ¢;</span><br><span class="line">-t :æ£€æŸ¥å‹ç¼©æ–‡ä»¶æ˜¯å¦æ­£ç¡®;</span><br><span class="line">-u :ä¸ -f å‚æ•°ç±»ä¼¼,ä½†æ˜¯é™¤äº†æ›´æ–°ç°æœ‰çš„æ–‡ä»¶å¤–,ä¹Ÿä¼šå°†å‹ç¼©æ–‡ä»¶ä¸­çš„å…¶ä»–æ–‡ä»¶è§£å‹ç¼©åˆ°ç›®å½•ä¸­;</span><br><span class="line">-v :æ‰§è¡Œæ—¶æ˜¾ç¤ºè¯¦ç»†çš„ä¿¡æ¯;</span><br><span class="line">-z :ä»…æ˜¾ç¤ºå‹ç¼©æ–‡ä»¶çš„å¤‡æ³¨æ–‡å­—;</span><br><span class="line">-a :å¯¹æ–‡æœ¬æ–‡ä»¶è¿›è¡Œå¿…è¦çš„å­—ç¬¦è½¬æ¢;</span><br><span class="line">-b :ä¸è¦å¯¹æ–‡æœ¬æ–‡ä»¶è¿›è¡Œå­—ç¬¦è½¬æ¢;</span><br><span class="line">-C :å‹ç¼©æ–‡ä»¶ä¸­çš„æ–‡ä»¶åç§°åŒºåˆ†å¤§å°å†™;</span><br><span class="line">-j :ä¸å¤„ç†å‹ç¼©æ–‡ä»¶ä¸­åŸæœ‰çš„ç›®å½•è·¯å¾„;</span><br><span class="line">-L :å°†å‹ç¼©æ–‡ä»¶ä¸­çš„å…¨éƒ¨æ–‡ä»¶åæ”¹ä¸ºå°å†™;</span><br><span class="line">-M :å°†è¾“å‡ºç»“æœé€åˆ° more ç¨‹åºå¤„ç†;</span><br><span class="line">-n :è§£å‹ç¼©æ—¶ä¸è¦è¦†ç›–åŸæœ‰çš„æ–‡ä»¶;</span><br><span class="line">-o :ä¸å¿…å…ˆè¯¢é—®ç”¨æˆ·, unzip æ‰§è¡Œåè¦†ç›–åŸæœ‰çš„æ–‡ä»¶;</span><br><span class="line">-P&lt; å¯†ç  &gt; :ä½¿ç”¨ zip çš„å¯†ç é€‰é¡¹;</span><br><span class="line">-q :æ‰§è¡Œæ—¶ä¸æ˜¾ç¤ºä»»ä½•ä¿¡æ¯;</span><br><span class="line">-s :å°†æ–‡ä»¶åä¸­çš„ç©ºç™½å­—ç¬¦è½¬æ¢ä¸ºåº•çº¿å­—ç¬¦;</span><br><span class="line">-V :ä¿ç•™ VMS çš„æ–‡ä»¶ç‰ˆæœ¬ä¿¡æ¯;</span><br><span class="line">-X :è§£å‹ç¼©æ—¶åŒæ—¶å›å­˜æ–‡ä»¶åŸæ¥çš„ UID/GID ;</span><br><span class="line">-d&lt; ç›®å½• &gt; :æŒ‡å®šæ–‡ä»¶è§£å‹ç¼©åæ‰€è¦å­˜å‚¨çš„ç›®å½•;</span><br><span class="line">-x&lt; æ–‡ä»¶ &gt; :æŒ‡å®šä¸è¦å¤„ç† .zip å‹ç¼©æ–‡ä»¶ä¸­çš„å“ªäº›æ–‡ä»¶;</span><br><span class="line">-Z : unzip-Z ç­‰äºæ‰§è¡Œ zipinfo æŒ‡ä»¤</span><br><span class="line"></span><br><span class="line">å‚æ•° å‹ç¼©åŒ…:æŒ‡å®šè¦è§£å‹çš„ â€œ .zipâ€ å‹ç¼©åŒ…ã€‚</span><br><span class="line"></span><br><span class="line">å®ä¾‹</span><br><span class="line"></span><br><span class="line">unzip test.zip</span><br><span class="line">unzip -v test.zip</span><br><span class="line">unzip -n test.zip -d /tmp</span><br></pre></td></tr></table></figure>

<h3 id="gz"><a href="#gz" class="headerlink" title=".gz"></a>.gz</h3><h4 id="gzip-çš„ç”¨æ³•"><a href="#gzip-çš„ç”¨æ³•" class="headerlink" title="gzip çš„ç”¨æ³•"></a>gzip çš„ç”¨æ³•</h4><p>gzip å‘½ä»¤ç”¨æ¥å‹ç¼©æ–‡ä»¶ã€‚ gzip æ˜¯ä¸ªä½¿ç”¨å¹¿æ³›çš„å‹ç¼©ç¨‹åº,æ–‡ä»¶ç»å®ƒå‹ç¼©è¿‡å,å…¶åç§°åé¢ä¼šå¤šå¤„ â€œ .gzâ€æ‰©å±•åã€‚ gzip æ˜¯åœ¨ Linux ç³»ç»Ÿä¸­ç»å¸¸ä½¿ç”¨çš„ä¸€ä¸ªå¯¹æ–‡ä»¶è¿›è¡Œå‹ç¼©å’Œè§£å‹ç¼©çš„å‘½ä»¤,æ—¢æ–¹ä¾¿åˆå¥½ç”¨ã€‚</p>
<p>gzip ä¸ä»…å¯ä»¥ç”¨æ¥å‹ç¼©å¤§çš„ã€è¾ƒå°‘ä½¿ç”¨çš„æ–‡ä»¶ä»¥èŠ‚çœç£ç›˜ç©ºé—´,è¿˜å¯ä»¥å’Œ tar å‘½ä»¤ä¸€èµ·æ„æˆ Linux æ“ä½œç³»ç»Ÿä¸­æ¯”è¾ƒæµè¡Œçš„å‹ç¼©æ–‡ä»¶æ ¼å¼ã€‚æ®ç»Ÿè®¡, gzip å‘½ä»¤å¯¹æ–‡æœ¬æ–‡ä»¶æœ‰ 60% ~ 70% çš„å‹ç¼©ç‡ã€‚å‡å°‘æ–‡ä»¶å¤§å°æœ‰ä¸¤ä¸ªæ˜æ˜¾çš„å¥½å¤„,ä¸€æ˜¯å¯ä»¥å‡å°‘å­˜å‚¨ç©ºé—´,äºŒæ˜¯é€šè¿‡ç½‘ç»œä¼ è¾“æ–‡ä»¶æ—¶,å¯ä»¥å‡å°‘ä¼ è¾“çš„æ—¶é—´ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¯­æ³• gzip( é€‰é¡¹ )( å‚æ•° )</span><br><span class="line"></span><br><span class="line">é€‰é¡¹</span><br><span class="line"></span><br><span class="line">-a æˆ– â€”â€” ascii :ä½¿ç”¨ ASCII æ–‡å­—æ¨¡å¼;</span><br><span class="line">-d æˆ– --decompress æˆ– ----uncompress :è§£å¼€å‹ç¼©æ–‡ä»¶;</span><br><span class="line">-f æˆ– â€”â€” force :å¼ºè¡Œå‹ç¼©æ–‡ä»¶ã€‚ä¸ç†ä¼šæ–‡ä»¶åç§°æˆ–ç¡¬è¿æ¥æ˜¯å¦å­˜åœ¨ä»¥åŠè¯¥æ–‡ä»¶æ˜¯å¦ä¸ºç¬¦å·è¿æ¥;</span><br><span class="line">-h æˆ– â€”â€” help :åœ¨çº¿å¸®åŠ©;</span><br><span class="line">-l æˆ– â€”â€” list :åˆ—å‡ºå‹ç¼©æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯;</span><br><span class="line">-L æˆ– â€”â€” license :æ˜¾ç¤ºç‰ˆæœ¬ä¸ç‰ˆæƒä¿¡æ¯;</span><br><span class="line">-n æˆ– --no-name :å‹ç¼©æ–‡ä»¶æ—¶,ä¸ä¿å­˜åŸæ¥çš„æ–‡ä»¶åç§°åŠæ—¶é—´æˆ³è®°;</span><br><span class="line">-N æˆ– â€”â€” name :å‹ç¼©æ–‡ä»¶æ—¶,ä¿å­˜åŸæ¥çš„æ–‡ä»¶åç§°åŠæ—¶é—´æˆ³è®°;</span><br><span class="line">-q æˆ– â€”â€” quiet :ä¸æ˜¾ç¤ºè­¦å‘Šä¿¡æ¯;</span><br><span class="line">-r æˆ– â€”â€” recursive :é€’å½’å¤„ç†,å°†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åŠå­ç›®å½•ä¸€å¹¶å¤„ç†;</span><br><span class="line">-S æˆ– &lt; å‹ç¼©å­—å°¾å­—ç¬¦ä¸² &gt; æˆ– ----suffix&lt; å‹ç¼©å­—å°¾å­—ç¬¦ä¸² &gt; :æ›´æ”¹å‹ç¼©å­—å°¾å­—ç¬¦ä¸²;</span><br><span class="line">-t æˆ– â€”â€” test :æµ‹è¯•å‹ç¼©æ–‡ä»¶æ˜¯å¦æ­£ç¡®æ— è¯¯;</span><br><span class="line">-v æˆ– â€”â€” verbose :æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹;</span><br><span class="line">-V æˆ– â€”â€” version :æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯;</span><br><span class="line">-&lt; å‹ç¼©æ•ˆç‡ &gt; :å‹ç¼©æ•ˆç‡æ˜¯ä¸€ä¸ªä»‹äº 1~9 çš„æ•°å€¼,é¢„è®¾å€¼ä¸º â€œ 6â€ ,æŒ‡å®šæ„ˆå¤§çš„æ•°å€¼,å‹ç¼©æ•ˆç‡å°±ä¼š</span><br><span class="line">æ„ˆé«˜;</span><br><span class="line">--best :æ­¤å‚æ•°çš„æ•ˆæœå’ŒæŒ‡å®š â€œ -9â€ å‚æ•°ç›¸åŒ;</span><br><span class="line">--fast :æ­¤å‚æ•°çš„æ•ˆæœå’ŒæŒ‡å®š â€œ -1â€ å‚æ•°ç›¸åŒã€‚</span><br><span class="line"></span><br><span class="line">å‚æ•° æ–‡ä»¶åˆ—è¡¨:æŒ‡å®šè¦å‹ç¼©çš„æ–‡ä»¶æˆ–æŒ‡å®šè¦è§£å‹çš„æ–‡ä»¶ã€‚ã€‚</span><br><span class="line"></span><br><span class="line">å®ä¾‹</span><br><span class="line"></span><br><span class="line">gzip * å°†å½“å‰ç›®å½•ä¸‹çš„æ¯ä¸ªæ–‡ä»¶éƒ½å‹ç¼©æˆ .gz æ–‡ä»¶</span><br><span class="line">gzip test å°† test æ–‡ä»¶å‹ç¼©æˆ test.gz æ–‡ä»¶å¹¶åˆ é™¤æºæ–‡ä»¶</span><br><span class="line">gzip -rv /tmp ç¬¬å½’å‹ç¼©ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶,å‹ç¼©æˆ .gz ç»“å°¾çš„æ–‡ä»¶,å¹¶æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹</span><br><span class="line">gizp -dr /tmp ç¬¬å½’è§£å‹ /tmp ç›®å½•ä¸‹çš„ .gz ç»“å°¾çš„æ–‡ä»¶</span><br></pre></td></tr></table></figure>

<h4 id="gunzip-çš„ç”¨æ³•"><a href="#gunzip-çš„ç”¨æ³•" class="headerlink" title="gunzip çš„ç”¨æ³•"></a>gunzip çš„ç”¨æ³•</h4><p>gunzip å‘½ä»¤ç”¨æ¥è§£å‹ç¼©æ–‡ä»¶ã€‚ gunzip æ˜¯ä¸ªä½¿ç”¨å¹¿æ³›çš„è§£å‹ç¼©ç¨‹åº,å®ƒç”¨äºè§£å¼€è¢« gzip å‹ç¼©è¿‡çš„æ–‡ä»¶,è¿™äº›å‹ç¼©æ–‡ä»¶é¢„è®¾æœ€åçš„æ‰©å±•åä¸º .gz ã€‚å…¶å®å‹ç¼©æˆ–è§£å‹ç¼©,éƒ½å¯é€šè¿‡ gzip æŒ‡ä»¤å•ç‹¬å®Œæˆã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¯­æ³• gunzip( é€‰é¡¹ )( å‚æ•° )</span><br><span class="line"></span><br><span class="line">é€‰é¡¹</span><br><span class="line"></span><br><span class="line">-a æˆ– â€”â€” ascii :ä½¿ç”¨ ASCII æ–‡å­—æ¨¡å¼;</span><br><span class="line">-c æˆ– --stdout æˆ– --to-stdout :æŠŠè§£å‹åçš„æ–‡ä»¶è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡;</span><br><span class="line">-f æˆ– -force :å¼ºè¡Œè§£å¼€å‹ç¼©æ–‡ä»¶,ä¸ç†ä¼šæ–‡ä»¶åç§°æˆ–ç¡¬è¿æ¥æ˜¯å¦å­˜åœ¨ä»¥åŠè¯¥æ–‡ä»¶æ˜¯å¦ä¸ºç¬¦å·è¿æ¥;</span><br><span class="line">-h æˆ– â€”â€” help :åœ¨çº¿å¸®åŠ©;</span><br><span class="line">-l æˆ– â€”â€” list :åˆ—å‡ºå‹ç¼©æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯;</span><br><span class="line">-L æˆ– â€”â€” license :æ˜¾ç¤ºç‰ˆæœ¬ä¸ç‰ˆæƒä¿¡æ¯;</span><br><span class="line">-n æˆ– --no-name :è§£å‹ç¼©æ—¶,è‹¥å‹ç¼©æ–‡ä»¶å†…å«æœ‰åŸæ¥çš„æ–‡ä»¶åç§°åŠæ—¶é—´æˆ³è®°,åˆ™å°†å…¶å¿½ç•¥ä¸äºˆå¤„ç†;</span><br><span class="line">-N æˆ– â€”â€” name :è§£å‹ç¼©æ—¶,è‹¥å‹ç¼©æ–‡ä»¶å†…å«æœ‰åŸæ¥çš„æ–‡ä»¶åç§°åŠæ—¶é—´æˆ³è®°,åˆ™å°†å…¶å›å­˜åˆ°è§£å¼€</span><br><span class="line">çš„æ–‡ä»¶ä¸Š;</span><br><span class="line">-q æˆ– â€”â€” quiet :ä¸æ˜¾ç¤ºè­¦å‘Šä¿¡æ¯;</span><br><span class="line">-r æˆ– â€”â€” recursive :é€’å½’å¤„ç†,å°†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åŠå­ç›®å½•ä¸€å¹¶å¤„ç†;</span><br><span class="line">-S æˆ– &lt; å‹ç¼©å­—å°¾å­—ç¬¦ä¸² &gt; æˆ– ----suffix&lt; å‹ç¼©å­—å°¾å­—ç¬¦ä¸² &gt; :æ›´æ”¹å‹ç¼©å­—å°¾å­—ç¬¦ä¸²;</span><br><span class="line">-t æˆ– â€”â€” test :æµ‹è¯•å‹ç¼©æ–‡ä»¶æ˜¯å¦æ­£ç¡®æ— è¯¯;</span><br><span class="line">-v æˆ– â€”â€” verbose :æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹;</span><br><span class="line">-V æˆ– â€”â€” version :æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯;</span><br><span class="line"></span><br><span class="line">å‚æ•° æ–‡ä»¶åˆ—è¡¨:æŒ‡å®šè¦è§£å‹çš„å‹ç¼©åŒ…ã€‚</span><br><span class="line"></span><br><span class="line">å®ä¾‹</span><br><span class="line">gzip -d test.gz</span><br><span class="line">gunzip test.gz</span><br><span class="line">æ•ˆæœä¸€æ ·</span><br></pre></td></tr></table></figure>

<h3 id="bz2"><a href="#bz2" class="headerlink" title=".bz2"></a>.bz2</h3><h4 id="bzip2-çš„ç”¨æ³•"><a href="#bzip2-çš„ç”¨æ³•" class="headerlink" title="bzip2 çš„ç”¨æ³•"></a>bzip2 çš„ç”¨æ³•</h4><p>bzip2 å‘½ä»¤ç”¨äºåˆ›å»ºå’Œç®¡ç†(åŒ…æ‹¬è§£å‹ç¼©) â€œ .bz2â€ æ ¼å¼çš„å‹ç¼©åŒ…ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¯­æ³• bzip2( é€‰é¡¹ )( å‚æ•° )</span><br><span class="line"></span><br><span class="line">é€‰é¡¹</span><br><span class="line"></span><br><span class="line">-c æˆ– â€”â€” stdout :å°†å‹ç¼©ä¸è§£å‹ç¼©çš„ç»“æœé€åˆ°æ ‡å‡†è¾“å‡º;</span><br><span class="line">-d æˆ– â€”â€” decompress :æ‰§è¡Œè§£å‹ç¼©;</span><br><span class="line">-f æˆ– -force : bzip2 åœ¨å‹ç¼©æˆ–è§£å‹ç¼©æ—¶,è‹¥è¾“å‡ºæ–‡ä»¶ä¸ç°æœ‰æ–‡ä»¶åŒå,é¢„è®¾ä¸ä¼šè¦†ç›–ç°æœ‰æ–‡ä»¶ã€‚è‹¥</span><br><span class="line">è¦è¦†ç›–ã€‚è¯·ä½¿ç”¨æ­¤å‚æ•°;</span><br><span class="line">-h æˆ– â€”â€” help :åœ¨çº¿å¸®åŠ©;</span><br><span class="line">-k æˆ– â€”â€” keep : bzip2 åœ¨å‹ç¼©æˆ–è§£å‹ç¼©å,ä¼šåˆ é™¤åŸå§‹æ–‡ä»¶ã€‚è‹¥è¦ä¿ç•™åŸå§‹æ–‡ä»¶,è¯·ä½¿ç”¨æ­¤å‚æ•°;</span><br><span class="line">-s æˆ– â€”â€” small :é™ä½ç¨‹åºæ‰§è¡Œæ—¶å†…å­˜çš„ä½¿ç”¨é‡;</span><br><span class="line">-t æˆ– â€”â€” test :æµ‹è¯• .bz2 å‹ç¼©æ–‡ä»¶çš„å®Œæ•´æ€§;</span><br><span class="line">-v æˆ– â€”â€” verbose :å‹ç¼©æˆ–è§£å‹ç¼©æ–‡ä»¶æ—¶,æ˜¾ç¤ºè¯¦ç»†çš„ä¿¡æ¯;</span><br><span class="line">-z æˆ– â€”â€” compress :å¼ºåˆ¶æ‰§è¡Œå‹ç¼©;</span><br><span class="line">-V æˆ– â€”â€” version :æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯;</span><br><span class="line">--repetitive-best :è‹¥æ–‡ä»¶ä¸­æœ‰é‡å¤å‡ºç°çš„èµ„æ–™æ—¶,å¯åˆ©ç”¨æ­¤å‚æ•°æé«˜å‹ç¼©æ•ˆæœ;</span><br><span class="line">--repetitive-fast :è‹¥æ–‡ä»¶ä¸­æœ‰é‡å¤å‡ºç°çš„èµ„æ–™æ—¶,å¯åˆ©ç”¨æ­¤å‚æ•°åŠ å¿«æ‰§è¡Œæ•ˆæœã€‚</span><br><span class="line"></span><br><span class="line">å‚æ•° æ–‡ä»¶åˆ—è¡¨:æŒ‡å®šè¦å‹ç¼©çš„æ–‡ä»¶æˆ–æŒ‡å®šè¦è§£å‹çš„æ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">å®ä¾‹</span><br><span class="line"></span><br><span class="line">bzip2 test å‹ç¼© test æ–‡ä»¶,ç”Ÿæˆå‹ç¼©æ–‡ä»¶ test.bz2 ,å¹¶åˆ é™¤æºæ–‡ä»¶</span><br><span class="line">bzip2 -k test å‹ç¼© test æ–‡ä»¶,ç”Ÿæˆå‹ç¼©æ–‡ä»¶ test.bz2 ,å¹¶ä¿ç•™æºæ–‡ä»¶</span><br><span class="line">bzip2 -d test.bz2 è§£å‹æ–‡ä»¶</span><br><span class="line">bunzip2 test.bz2 è§£å‹æ–‡ä»¶</span><br></pre></td></tr></table></figure>

<h4 id="bunzip2-çš„ç”¨æ³•"><a href="#bunzip2-çš„ç”¨æ³•" class="headerlink" title="bunzip2 çš„ç”¨æ³•"></a>bunzip2 çš„ç”¨æ³•</h4><p>bunzip2 å‘½ä»¤è§£å‹ç¼©ç”± bzip2 æŒ‡ä»¤åˆ›å»ºçš„ â€ .bz2â€ å‹ç¼©åŒ…ã€‚å¯¹æ–‡ä»¶è¿›è¡Œå‹ç¼©ä¸è§£å‹ç¼©ã€‚æ­¤å‘½ä»¤ç±»ä¼¼äºâ€œ gzip/gunzipâ€ å‘½ä»¤,åªèƒ½å¯¹æ–‡ä»¶è¿›è¡Œå‹ç¼©ã€‚å¯¹äºç›®å½•åªèƒ½å‹ç¼©ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶,å‹ç¼©å®Œæˆå,åœ¨ç›®å½•ä¸‹ç”Ÿæˆä»¥ â€œ .bz2â€ ä¸ºåç¼€çš„å‹ç¼©åŒ…ã€‚ bunzip2 å…¶å®æ˜¯ bzip2 çš„ç¬¦å·é“¾æ¥,å³è½¯é“¾æ¥,å› æ­¤å‹ç¼©è§£å‹éƒ½å¯ä»¥é€šè¿‡ bzip2 å®ç°ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@mastera0 ~]# which bzip2</span><br><span class="line">/usr/bin/bzip2</span><br><span class="line">[root@mastera0 ~]# which bunzip2</span><br><span class="line">/usr/bin/bunzip2</span><br><span class="line">[root@mastera0 ~]# ll -i /usr/bin/bzip2</span><br><span class="line">33853111 -rwxr-xr-x. 1 root root 36752 Jul 31 2014 /usr/bin/bzip2</span><br><span class="line">[root@mastera0 ~]# ll -i /usr/bin/bunzip2</span><br><span class="line">34293684 lrwxrwxrwx. 1 root root 5 Jun 23 13:50 /usr/bin/bunzip2 -&gt; bzip2</span><br><span class="line"></span><br><span class="line">bunzip2 [ -fkvsVL ] [ filenames ... ]</span><br><span class="line"></span><br><span class="line">-f æˆ– --force :è§£å‹ç¼©æ—¶,è‹¥è¾“å‡ºçš„æ–‡ä»¶ä¸ç°æœ‰æ–‡ä»¶åŒåæ—¶,é¢„è®¾ä¸ä¼šè¦†ç›–ç°æœ‰çš„æ–‡ä»¶;</span><br><span class="line">-k æˆ– --keep :åœ¨è§£å‹ç¼©å,é¢„è®¾ä¼šåˆ é™¤åŸæ¥çš„å‹ç¼©æ–‡ä»¶ã€‚è‹¥è¦ä¿ç•™å‹ç¼©æ–‡ä»¶,è¯·ä½¿ç”¨æ­¤å‚æ•°;</span><br><span class="line">-s æˆ– --small :é™ä½ç¨‹åºæ‰§è¡Œæ—¶,å†…å­˜çš„ä½¿ç”¨é‡;</span><br><span class="line">-v æˆ– --verbose :è§£å‹ç¼©æ–‡ä»¶æ—¶,æ˜¾ç¤ºè¯¦ç»†çš„ä¿¡æ¯;</span><br><span class="line">-l , --license , -V æˆ– â€”â€” version :æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚</span><br></pre></td></tr></table></figure>


<h3 id="xz"><a href="#xz" class="headerlink" title=".xz"></a>.xz</h3><p>XZ Utils æ˜¯ä¸º POSIX å¹³å°å¼€å‘å…·æœ‰é«˜å‹ç¼©ç‡çš„å·¥å…·ã€‚å®ƒä½¿ç”¨ LZMA2 å‹ç¼©ç®—æ³•,ç”Ÿæˆçš„å‹ç¼©æ–‡ä»¶æ¯”POSIX å¹³å°ä¼ ç»Ÿä½¿ç”¨çš„ gzipã€bzip2 ç”Ÿæˆçš„å‹ç¼©æ–‡ä»¶æ›´å°,è€Œä¸”è§£å‹ç¼©é€Ÿåº¦ä¹Ÿå¾ˆå¿«ã€‚æœ€åˆ XZ Utilsçš„æ˜¯åŸºäº LZMA-SDK å¼€å‘,ä½†æ˜¯ LZMA-SDK åŒ…å«äº†ä¸€äº› WINDOWS å¹³å°çš„ç‰¹æ€§,æ‰€ä»¥ XZ Utils ä¸ºä»¥é€‚åº” POSIX å¹³å°ä½œäº†å¤§å¹…çš„ä¿®æ”¹ã€‚XZ Utils çš„å‡ºç°ä¹Ÿæ˜¯ä¸ºäº†å–ä»£ POSIX ç³»ç»Ÿä¸­æ—§çš„ LZMA Utilsã€‚XZ Utils ä¸»è¦åŒ…å«äº†ä¸‹åˆ—éƒ¨åˆ†:</p>
<ul>
<li>å‘½ä»¤è¡Œç¨‹åº xz ,ç”¨æ¥ç”Ÿæˆå’Œè§£å‹ç¼© .xz å‹ç¼©æ–‡ä»¶ã€‚</li>
<li>ä¸€ç»„å®ç”¨çš„è„šæœ¬å·¥å…· (xzcat, xdiff, xzgrep ç­‰)æä¾›æµè§ˆ,æŸ¥æ‰¾ä»¥åŠæ¯”è¾ƒ .xz æ–‡ä»¶å†…<br>å®¹ç­‰åŠŸèƒ½ã€‚</li>
<li>liblzma å‹ç¼©åº“,æä¾›ç®—æ³•çš„å®ç°å’Œè¿‘ä¼¼äº ZLIB çš„ç¼–ç¨‹æ¥å£ã€‚</li>
<li>æä¾›å¯¹ LZMA Utils çš„ä¸€äº›å…¼å®¹</li>
</ul>
<p>xz æ–‡ä»¶æ ¼å¼</p>
<p>XZ Utils å·¥å…·ç”Ÿæˆçš„å‹ç¼©æ–‡ä»¶æ‰©å±•åä¸º .xz (MIME ç±»å‹ä¸ºâ€application/x-xzâ€)ã€‚</p>
<p>.xz æ–‡ä»¶æ ¼å¼å…·æœ‰ä¸‹åˆ—ç‰¹ç‚¹:</p>
<ul>
<li>åŸºäºæ•°æ®æµ: æ˜“äºé€šè¿‡ç®¡é“ (pipe) ç”Ÿæˆå‹ç¼©æ–‡ä»¶æˆ–è§£å‹ç¼©æ–‡ä»¶ã€‚.xz æ–‡ä»¶æ ¼å¼ä¸ .gz/.bz2 æ–‡ä»¶ä¸€æ ·,ä¸å…·å¤‡å¯¹å¤šä¸ªæ–‡ä»¶è¿›è¡Œå½’æ¡£æ‰“åŒ…çš„èƒ½åŠ›ã€‚è‹¥è¦å¤„ç†å¤šä¸ªæ–‡ä»¶,å¯ä»¥å’Œå½’æ¡£å·¥å…· tar ç»“åˆä½¿ç”¨,ç”Ÿæˆæ‰©å±•åä¸º .tar.xz æˆ– .txz çš„å‹ç¼©æ–‡ä»¶ã€‚</li>
<li>éšæœºè¯»å–: å­˜å‚¨çš„æ•°æ®è¢«åˆ’åˆ†ä¸ºç‹¬ç«‹çš„å‹ç¼©å—,å¹¶å¯¹æ¯ä¸ªå‹ç¼©å—è¿›è¡Œç´¢å¼•,å½“æ¯ä¸ªå‹ç¼©å—æ¯”è¾ƒå°æ—¶,ä¾¿èƒ½å¤Ÿè¿›è¡Œæœ‰é™çš„éšæœºè¯»å–å‹ç¼©æ•°æ®ã€‚</li>
<li>å®Œæ•´æ€§éªŒè¯: å¯ä»¥ä½¿ç”¨ CRC32ã€CRC64ã€SHA-256 æ¥è¿›è¡Œæ•°æ®çš„å®Œæ•´æ€§éªŒè¯,ä¹Ÿå¯ä»¥å¢åŠ è‡ªå®šä¹‰éªŒè¯æ–¹æ³•ã€‚</li>
<li>å¯è¿æ¥(concatenation): ç±»ä¼¼äº .gz/.bz2 æ–‡ä»¶,å¯ä»¥æŠŠå¤šä¸ªå‹ç¼©æ•°æ®æµè¿æ¥åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚è§£å‹ç¼©æ—¶,å°±åƒè§£å‹ä¸€ä¸ªæ­£å¸¸å•å‹ç¼©æµæ–‡ä»¶ä¸€æ ·ã€‚</li>
<li>æ”¯æŒå¤š filter å’Œ filter é“¾: æä¾›è‡ªå®šä¹‰ filter çš„èƒ½åŠ›,ä¹Ÿèƒ½å¤Ÿå°†å¤šä¸ª filter ç»„æˆfilter é“¾,å¯¹æ•°æ®è¿›è¡Œå¤„ç†ã€‚è¿™ç‚¹ä¸ Unix å‘½ä»¤é—´ä½¿ç”¨çš„ç®¡é“ (pipe) ç±»ä¼¼ã€‚</li>
<li>å¯å¡«å……(padding): å¯ä»¥åœ¨ .xz æ–‡ä»¶æœ«å°¾å¡«å……äºŒè¿›åˆ¶â€™0â€™ä»¥å……æ»¡ç‰¹å®šå¤§å°çš„ç©ºé—´,æ¯”å¦‚å¤‡ä»½ç£å¸¦ä¸Šçš„ä¸€ä¸ªå— (block)ã€‚</li>
</ul>
<p>XZ Utils å…·æœ‰é«˜å‹ç¼©ç‡,è§£å‹é€Ÿåº¦å¿«çš„ç‰¹ç‚¹ã€‚èƒ½å¤Ÿç”Ÿæˆæ›´å°æ–‡ä»¶çš„åŒæ—¶,ä¹Ÿèƒ½æä¾›ç¨³å®šå¿«é€Ÿçš„è§£å‹,åœ¨å¯¹æ•°æ®å¤§å°æ¯”è¾ƒæ•æ„Ÿçš„åœºåˆ,æ¯”å¦‚è¯´å¤§æ•°æ®çš„ç½‘ç»œä¼ è¾“,æ–‡ä»¶çš„å¤‡ä»½,å¤„ç†èƒ½åŠ›æœ‰é™çš„åµŒå…¥ç³»ç»Ÿç­‰åœºåˆ,æœ‰ç€ååˆ†å¹¿æ³›çš„ç”¨é€”ã€‚</p>
<h4 id="xz-å‘½ä»¤ç”¨æ³•"><a href="#xz-å‘½ä»¤ç”¨æ³•" class="headerlink" title="xz å‘½ä»¤ç”¨æ³•"></a>xz å‘½ä»¤ç”¨æ³•</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¯­æ³• xz ( é€‰é¡¹ )( å‚æ•° )</span><br><span class="line"></span><br><span class="line">é€‰é¡¹</span><br><span class="line"></span><br><span class="line">-z, --compress</span><br><span class="line">force compression å¼ºåˆ¶å‹ç¼©</span><br><span class="line">-d, --decompress, --uncompress</span><br><span class="line">force decompression è§£å¼€å‹ç¼©æ–‡ä»¶</span><br><span class="line">-t, --test test compressed file integrity æµ‹è¯•å‹ç¼©æ–‡ä»¶æ˜¯å¦æ­£ç¡®æ— è¯¯</span><br><span class="line">-l, --list list information about .xz files åˆ—å‡ºå‹ç¼©æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯</span><br><span class="line">-k, --keep keep (don't delete) input files ä¸åˆ é™¤æºæ–‡ä»¶</span><br><span class="line">-f, --force force overwrite of output file and (de)compress links å¼ºåˆ¶å‹ç¼©,è¦†ç›–è¾“å‡ºæ–‡ä»¶åŒåçš„æ–‡ä»¶</span><br><span class="line">-c, --stdout, --to-stdout write to standard output and don't delete input files å†™å…¥æ ‡å‡†è¾“å‡º,ä¸è¦åˆ é™¤è¾“å…¥æ–‡ä»¶</span><br><span class="line">-0 ... -9 compression preset; default is 6; take compressor *and* decompressor memory usage into account before using 7-9! å‹ç¼©æ•ˆç‡æ˜¯ä¸€ä¸ªä»‹äº</span><br><span class="line">1~9 çš„æ•°å€¼,é¢„è®¾å€¼ä¸º â€œ 6â€ ,æŒ‡å®šæ„ˆå¤§çš„æ•°å€¼,å‹ç¼©æ•ˆç‡å°±ä¼šæ„ˆé«˜;è§£å‹ç”±å¿è€ƒè™‘ä½¿ç”¨ 7-9</span><br><span class="line">-e, --extreme try to improve compression ratio by using more CPU time; does not affect decompressor memory requirements é€šè¿‡ä½¿ç”¨æ›´å¤šçš„å¤„ç†å™¨æ—¶é—´</span><br><span class="line">æ¥æé«˜å‹ç¼©æ¯”;ä¸å½±å“è§£å‹æ—¶çš„å†…å­˜éœ€æ±‚</span><br><span class="line">-T, --threads=NUM use at most NUM threads; the default is 1; set to 0 to use the number of processor cores æœ€å¤šä½¿ç”¨çš„çº¿ç¨‹æ•°é‡,é»˜è®¤ä¸º 1 ,å¦‚æœè®¾ç½®ä¸º</span><br><span class="line">0 å»ä½¿ç”¨å¤„ç†å™¨å†…æ ¸çš„æ•°é‡</span><br><span class="line">-q, --quiet suppress warnings; specify twice to suppress errors too æŠ‘åˆ¶è­¦å‘Š;æŒ‡å®šä¸¤æ¬¡</span><br><span class="line">ä»¥æŠ‘åˆ¶é”™è¯¯</span><br><span class="line">-v, --verbose be verbose; specify twice for even more verbose</span><br><span class="line">-h, --help display this short help and exit</span><br><span class="line">-H, --long-help display the long help (lists also the advanced options)</span><br><span class="line">-V, --version display the version number and exit</span><br><span class="line"></span><br><span class="line">å‚æ•° æ–‡ä»¶åˆ—è¡¨:æŒ‡å®šè¦å‹ç¼©çš„æ–‡ä»¶åˆ—è¡¨ã€‚</span><br><span class="line"></span><br><span class="line">å®ä¾‹</span><br><span class="line">xz test å‹ç¼©ä¸€ä¸ªæ–‡ä»¶ test ,å‹ç¼©æˆåŠŸååˆ é™¤æºæ–‡ä»¶</span><br><span class="line">xz -d -k test.xz è§£å‹ test.xz æ–‡ä»¶, -k å‚æ•°ä¿è¯æºæ–‡ä»¶ä¸è¢«åˆ é™¤</span><br><span class="line">xz -l test.xz æŸ¥çœ‹åŸºæœ¬ä¿¡æ¯,åŒ…æ‹¬å‹ç¼©ç‡ç­‰</span><br><span class="line">xz -k7 test ä½¿ç”¨å‚æ•° -0, -1, -2, ... -6, ... -9 æˆ–å‚æ•° --fast, --best è®¾å®šå‹ç¼©ç‡ã€‚ xz å‘½ä»¤çš„é»˜è®¤ä¸º-6 ã€‚</span><br><span class="line">å€ŸåŠ© xargs å‘½ä»¤å¹¶è¡Œå‹ç¼©å¤šæ–‡ä»¶ã€‚ä¸‹é¢çš„å‘½ä»¤è¡Œå¯ä»¥å°† /var/log ç›®å½•ä¸‹æ‰€æœ‰çš„æ‰©å±•åä¸º .log çš„æ–‡ä»¶å‹ç¼©ã€‚é€šè¿‡ xargs å‘½ä»¤åŒæ—¶è¿è¡Œå¤šä¸ª xz è¿›è¡Œå‹ç¼©ã€‚</span><br><span class="line">find /var/log -type f -iname "*.log" -print0 | xargs -P4 -n16 xz -T1</span><br><span class="line">æ³¨æ„:è¿è¡Œæ­¤å‘½ä»¤é¡»æœ‰ root æƒé™ã€‚</span><br></pre></td></tr></table></figure>


<h3 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h3><p>tar å‘½ä»¤å¯ä»¥ä¸º linux çš„æ–‡ä»¶å’Œç›®å½•åˆ›å»ºæ¡£æ¡ˆã€‚åˆ©ç”¨ tar ,å¯ä»¥ä¸ºæŸä¸€ç‰¹å®šæ–‡ä»¶åˆ›å»ºæ¡£æ¡ˆ(å¤‡ä»½æ–‡ä»¶),ä¹Ÿå¯ä»¥åœ¨æ¡£æ¡ˆä¸­æ”¹å˜æ–‡ä»¶,æˆ–è€…å‘æ¡£æ¡ˆä¸­åŠ å…¥æ–°çš„æ–‡ä»¶ã€‚ tar æœ€åˆè¢«ç”¨æ¥åœ¨ç£å¸¦ä¸Šåˆ›å»ºæ¡£æ¡ˆ,ç°åœ¨,ç”¨æˆ·å¯ä»¥åœ¨ä»»ä½•è®¾å¤‡ä¸Šåˆ›å»ºæ¡£æ¡ˆã€‚åˆ©ç”¨ tar å‘½ä»¤,å¯ä»¥æŠŠä¸€å¤§å †çš„æ–‡ä»¶å’Œç›®å½•å…¨éƒ¨æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶,è¿™å¯¹äºå¤‡ä»½æ–‡ä»¶æˆ–å°†å‡ ä¸ªæ–‡ä»¶ç»„åˆæˆä¸ºä¸€ä¸ªæ–‡ä»¶ä»¥ä¾¿äºç½‘ç»œä¼ è¾“æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p>
<p>é¦–å…ˆè¦å¼„æ¸…ä¸¤ä¸ªæ¦‚å¿µ:æ‰“åŒ…å’Œå‹ç¼©ã€‚</p>
<ul>
<li>æ‰“åŒ…æ˜¯æŒ‡å°†ä¸€å¤§å †æ–‡ä»¶æˆ–ç›®å½•å˜æˆä¸€ä¸ªæ€»çš„æ–‡ä»¶;</li>
<li>å‹ç¼©åˆ™æ˜¯å°†ä¸€ä¸ªå¤§çš„æ–‡ä»¶é€šè¿‡ä¸€äº›å‹ç¼©ç®—æ³•å˜æˆä¸€ä¸ªå°æ–‡ä»¶ã€‚</li>
</ul>
<p>ä¸ºä»€ä¹ˆè¦åŒºåˆ†è¿™ä¸¤ä¸ªæ¦‚å¿µå‘¢?</p>
<p>è¿™æºäº Linux ä¸­å¾ˆå¤šå‹ç¼©ç¨‹åºåªèƒ½é’ˆå¯¹ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œå‹ç¼©,è¿™æ ·å½“ä½ æƒ³è¦å‹ç¼©ä¸€å¤§å †æ–‡ä»¶æ—¶,ä½ å¾—å…ˆå°†è¿™ä¸€å¤§å †æ–‡ä»¶å…ˆæ‰“æˆä¸€ä¸ªåŒ…( tar å‘½ä»¤),ç„¶åå†ç”¨å‹ç¼©ç¨‹åºè¿›è¡Œå‹ç¼©( gzip bzip2 å‘½ä»¤)ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¯­æ³• tar ( é€‰é¡¹ )( å‚æ•° )</span><br><span class="line"></span><br><span class="line">é€‰é¡¹</span><br><span class="line">-A æˆ– --catenate :æ–°å¢æ–‡ä»¶åˆ°ä»¥å­˜åœ¨çš„å¤‡ä»½æ–‡ä»¶;</span><br><span class="line">-B :è®¾ç½®åŒºå—å¤§å°;</span><br><span class="line">-c æˆ– --create :å»ºç«‹æ–°çš„å¤‡ä»½æ–‡ä»¶;</span><br><span class="line">-C &lt; ç›®å½• &gt; :è¿™ä¸ªé€‰é¡¹ç”¨åœ¨è§£å‹ç¼©,è‹¥è¦åœ¨ç‰¹å®šç›®å½•è§£å‹ç¼©,å¯ä»¥ä½¿ç”¨è¿™ä¸ªé€‰é¡¹ã€‚</span><br><span class="line">-d :è®°å½•æ–‡ä»¶çš„å·®åˆ«;</span><br><span class="line">-x æˆ– --extract æˆ– --get :ä»å¤‡ä»½æ–‡ä»¶ä¸­è¿˜åŸæ–‡ä»¶;</span><br><span class="line">-t æˆ– --list :åˆ—å‡ºå¤‡ä»½æ–‡ä»¶çš„å†…å®¹;</span><br><span class="line">-z æˆ– --gzip æˆ– --ungzip :é€šè¿‡ gzip æŒ‡ä»¤å¤„ç†å¤‡ä»½æ–‡ä»¶;</span><br><span class="line">-Z æˆ– --compress æˆ– --uncompress :é€šè¿‡ compress æŒ‡ä»¤å¤„ç†å¤‡ä»½æ–‡ä»¶;</span><br><span class="line">-f&lt; å¤‡ä»½æ–‡ä»¶ &gt; æˆ– --file=&lt; å¤‡ä»½æ–‡ä»¶ &gt; :æŒ‡å®šå¤‡ä»½æ–‡ä»¶;</span><br><span class="line">-v æˆ– --verbose :æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹;</span><br><span class="line">-r :æ·»åŠ æ–‡ä»¶åˆ°å·²ç»å‹ç¼©çš„æ–‡ä»¶;</span><br><span class="line">-u :æ·»åŠ æ”¹å˜äº†å’Œç°æœ‰çš„æ–‡ä»¶åˆ°å·²ç»å­˜åœ¨çš„å‹ç¼©æ–‡ä»¶;</span><br><span class="line">-j :æ”¯æŒ bzip2 è§£å‹æ–‡ä»¶;</span><br><span class="line">-J :æ”¯æŒ xz è§£å‹æ–‡ä»¶;</span><br><span class="line">-v :æ˜¾ç¤ºæ“ä½œè¿‡ç¨‹;</span><br><span class="line">-l :æ–‡ä»¶ç³»ç»Ÿè¾¹ç•Œè®¾ç½®;</span><br><span class="line">-k :ä¿ç•™åŸæœ‰æ–‡ä»¶ä¸è¦†ç›–;</span><br><span class="line">-m :ä¿ç•™æ–‡ä»¶ä¸è¢«è¦†ç›–;</span><br><span class="line">-w :ç¡®è®¤å‹ç¼©æ–‡ä»¶çš„æ­£ç¡®æ€§;</span><br><span class="line">-p æˆ– --same-permissions :ç”¨åŸæ¥çš„æ–‡ä»¶æƒé™è¿˜åŸæ–‡ä»¶;</span><br><span class="line">-P æˆ– --absolute-names :æ–‡ä»¶åä½¿ç”¨ç»å¯¹åç§°,ä¸ç§»é™¤æ–‡ä»¶åç§°å‰çš„ â€œ /â€ å·;</span><br><span class="line">-N &lt; æ—¥æœŸæ ¼å¼ &gt; æˆ– --newer=&lt; æ—¥æœŸæ—¶é—´ &gt; :åªå°†è¾ƒæŒ‡å®šæ—¥æœŸæ›´æ–°çš„æ–‡ä»¶ä¿å­˜åˆ°å¤‡ä»½æ–‡ä»¶é‡Œ;</span><br><span class="line">--exclude=&lt; èŒƒæœ¬æ ·å¼ &gt; :æ’é™¤ç¬¦åˆèŒƒæœ¬æ ·å¼çš„æ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">å‚æ•° æ–‡ä»¶åˆ—è¡¨:æŒ‡å®šè¦æ‰“åŒ…çš„æ–‡ä»¶æˆ–ç›®å½•åˆ—è¡¨ã€‚</span><br><span class="line"></span><br><span class="line">å®ä¾‹</span><br><span class="line">tar -cvf log.tar log2012.log ä»…æ‰“åŒ…,ä¸å‹ç¼©! tar -xf è§£å‹</span><br><span class="line">tar -zcvf log.tar.gz log2012.log æ‰“åŒ…å,ä»¥ gzip å‹ç¼© tar -zxf è§£å‹</span><br><span class="line">tar -jcvf log.tar.bz2 log2012.log æ‰“åŒ…å,ä»¥ bzip2 å‹ç¼© tar -jxf è§£å‹</span><br><span class="line">tar -Jcvf log.tar.xz log2012.log æ‰“åŒ…å,ä»¥ xz å‹ç¼© tar -Jxf è§£å‹</span><br><span class="line">tar -tf log.tar æŸ¥çœ‹æ‰“åŒ…æ–‡ä»¶</span><br><span class="line">æ³¨æ„ -f å‚æ•°åé¢å¿…é¡»æ¥æ–‡ä»¶å</span><br></pre></td></tr></table></figure>

<h2 id="04-Linuxå‹ç¼©æ‰“åŒ…è¯¾åä¹ é¢˜"><a href="#04-Linuxå‹ç¼©æ‰“åŒ…è¯¾åä¹ é¢˜" class="headerlink" title="04-Linuxå‹ç¼©æ‰“åŒ…è¯¾åä¹ é¢˜"></a>04-Linuxå‹ç¼©æ‰“åŒ…è¯¾åä¹ é¢˜</h2><ol>
<li>é€šè¿‡ddåˆ›å»º4ä¸ª5Mçš„æ–‡ä»¶,åˆ†åˆ«ä¸ºafile;bfile;cfile;dfile,å¹¶å°†è¿™4ä¸ªæ–‡ä»¶æ”¾åœ¨/tmp/testç›®å½•ä¸­ä¿å­˜</li>
<li>å¯¹è¿™4ä¸ªç›¸åŒå¤§å°çš„æ–‡ä»¶è¿›è¡Œå‹ç¼©,åˆ†åˆ«ä½¿ç”¨zip;bzip2;gzip;xz,å¹¶è§‚å¯Ÿ</li>
<li>åœ¨å°†å‹ç¼©æ–‡ä»¶è¿›è¡Œè§£å‹,å¹¶è§‚å¯Ÿ</li>
<li>å°†/tmp/testç›®å½•è¿›è¡Œæ‰“åŒ…,åˆ†åˆ«ä½¿ç”¨gzipå’Œbzip2å‹ç¼©</li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯åŸ¹è®­</category>
        <category>Linuxç³»ç»ŸåŸºç¡€åŸ¹è®­</category>
      </categories>
      <tags>
        <tag>åŸ¹è®­</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux Bashç®€ä»‹</title>
    <url>/2016/12/22/booboo_linux_base/07-Bash%E7%AE%80%E4%BB%8B/</url>
    <content><![CDATA[<h2 id="SHELL"><a href="#SHELL" class="headerlink" title="SHELL"></a>SHELL</h2><h3 id="shell-ç®€ä»‹"><a href="#shell-ç®€ä»‹" class="headerlink" title="shell ç®€ä»‹"></a>shell ç®€ä»‹</h3><p>Shell æ˜¯ä¸€ä¸ªå‘½ä»¤è§£é‡Šå™¨, æ˜¯äººä¸æ“ä½œç³»ç»Ÿä¹‹é—´çš„æ¡¥æ¢ã€‚ æˆ‘ä»¬å¹³æ—¶æ— è®ºä»»ä½•æ“ä½œ,æœ€ç»ˆéƒ½è¦æ“ä½œç¡¬ä»¶,æ¯”å¦‚è¾“å…¥ä¸€ä¸ªå­—ç¬¦ â€œ a â€, é‚£ä¹ˆä¿¡å· é¦–å…ˆä¼šä»é”®ç›˜ä¼ é€’åˆ°ä¸»æ¿,é€šè¿‡ä¸»æ¿æ€»çº¿ä¼ é€’åˆ°å†…å­˜,CPU,æ˜¾å¡ç­‰,æœ€ç»ˆç»è¿‡æ˜¾å¡çš„è¿ ç®—å®Œæˆååœ¨å±å¹•çš„æŸä¸ªä½ç½®, æ˜¾ç¤ºä¸€ä¸ªç‰¹å®šå­—ä½“çš„å­—ç¬¦ â€œ a â€, è¿™ä¸€æ•´ä¸ªè¿‡ç¨‹å¯ä»¥è¯´æ˜¯ ä¸æ–­çš„å’Œç¡¬ä»¶æ‰“äº¤é“äº†,ä½†æ˜¯å¦‚æœè®©äººå»å‘é€è¿™äº›ç¡¬ä»¶æ“ä½œç æ˜¾ç„¶ä¸é€‚åˆ, å› ä¸ºè¿™ä¸æ˜¯äººå¹² çš„äº‹,æ‰€ä»¥æˆ‘ä»¬æœ‰äº†æ“ä½œç³»ç»Ÿ,æ“ä½œç³»ç»Ÿé€šè¿‡åŠ è½½ä¸€å®šçš„ç¡¬ä»¶é©±åŠ¨,ä»è€Œæ§åˆ¶ç¡¬ä»¶,æ“ä½œç¡¬ä»¶,é‚£å‰©ä¸‹çš„äº‹å°±æ˜¯å¦‚ä½•å’Œæ“ä½œç³»ç»Ÿé€šä¿¡äº†,å¯¹äºæ™®é€šçš„ç³»ç»Ÿç®¡ç†å‘˜æ¥è¯´,è¿™ä¹Ÿæ˜¯ä¸€ä»¶éå¸¸å›°éš¾çš„äº‹,ä¸ºäº†æ–¹ä¾¿äººå’Œæ“ä½œç³»ç»Ÿæ²Ÿé€š, æˆ‘ä»¬å¼€å‘äº† shell ã€‚</p>
<p>Shell å¯ä»¥å°†æˆ‘ä»¬å¹³æ—¶è¿è¡Œçš„ä¸€äº›æŒ‡ä»¤è§£é‡Šç»™æ“ä½œç³»ç»Ÿæ‰§è¡Œ, æ–¹ä¾¿ç®¡ç†å‘˜æ“ä½œç³»ç»Ÿã€‚è€Œ Shell çš„è„šæœ¬å…¶å®æ˜¯ä¸€ç§å‘½ä»¤çš„å †ç§¯,æˆ‘ä»¬å°†æ‰€æœ‰éœ€è¦æ‰§è¡Œçš„å‘½ä»¤, ä»¥ä»ä¸Šè‡³ä¸‹çš„æ–¹ å¼å†™åœ¨ä¸€ä¸ªæ–‡ä»¶å½“ä¸­, äº¤ç»™ shell å»è‡ªåŠ¨è§£é‡Šæ‰§è¡Œã€‚</p>
<h3 id="shell-å†å²"><a href="#shell-å†å²" class="headerlink" title="shell å†å²"></a>shell å†å²</h3><p>åœ¨ AT&amp;T çš„ Dennis Ritchie å’Œ Ken Thompson è®¾è®¡ UNIXTM çš„æ—¶å€™, ä»–ä»¬æƒ³è¦ä¸º ç”¨æˆ·åˆ›å»ºä¸€ç§ä¸ä»–ä»¬çš„æ–°ç³»ç»Ÿäº¤æµçš„æ–¹æ³•ã€‚é‚£æ—¶çš„æ“ä½œç³»ç»Ÿå¸¦æœ‰å‘½ä»¤è§£é‡Šå™¨ã€‚å‘½ä»¤è§£é‡Šå™¨æ¥å—ç”¨æˆ·çš„å‘½ä»¤,ç„¶åè§£é‡Šå®ƒä»¬,å› è€Œè®¡ç®—æœºå¯ä»¥ä½¿ç”¨è¿™äº›å‘½ä»¤ã€‚ ä½†æ˜¯ Ritchie å’Œ Thompson æƒ³è¦çš„ä¸åªæ˜¯è¿™äº›åŠŸèƒ½,ä»–ä»¬æƒ³æä¾›æ¯”å½“æ—¶çš„å‘½ä»¤è§£é‡Šå™¨ å…·å¤‡æ›´ä¼˜å¼‚åŠŸèƒ½çš„å·¥å…·ã€‚è¿™å¯¼è‡´äº† Bourne shell ( é€šç§°ä¸º sh )çš„å¼€å‘, ç”± S.R. Bourne åˆ›å»ºã€‚è‡ªä» Bourne shell çš„åˆ›å»º, å…¶å®ƒ shell ä¹Ÿè¢«ä¸€ä¸€å¼€å‘, å¦‚ C shell ( csh ) å’Œ Korn shell (ksh ) ã€‚</p>
<p>å½“è‡ªç”±è½¯ä»¶åŸºé‡‘ä¼šæƒ³å¯»æ±‚ä¸€ç§å…è´¹çš„ shell , å¼€å‘è€…ä»¬å¼€å§‹è‡´åŠ›äº Bourne shell ä»¥åŠå½“ æ—¶å…¶å®ƒ shellä¸­æŸäº›å¾ˆå—æ¬¢è¿çš„åŠŸèƒ½èƒŒåçš„è¯­è¨€ã€‚ è¿™ä¸ªå¼€å‘ç»“æœæ˜¯ Bourne Again Shell , æˆ–ç§° bash ã€‚è™½ç„¶ä½ çš„Red Hat Linux åŒ…æ‹¬å‡  ç§ä¸åŒçš„ shell , bash æ˜¯ä¸ºäº’åŠ¨ç”¨æˆ·æä¾›çš„é»˜è®¤ shell ã€‚</p>
<h3 id="å¸¸è§çš„-shell"><a href="#å¸¸è§çš„-shell" class="headerlink" title="å¸¸è§çš„ shell"></a>å¸¸è§çš„ shell</h3><ul>
<li>Bourne shell å³ sh : AT&amp;T è´å°”å®éªŒå®¤ç¼–å†™çš„ä¸€ä¸ªäº¤æ¢å¼çš„å‘½ä»¤è§£é‡Šå™¨ã€‚</li>
<li>C Shell : Bill Joy äº 20 ä¸–çºª 80 å¹´ä»£æ—©æœŸå¼€å‘ã€‚ä¸ºäº†è®©ç”¨æˆ·æ›´å®¹æ˜“çš„ä½¿ç”¨, ä»–æŠŠè¯­æ³•ç»“æ„å˜æˆäº† Cè¯­è¨€é£æ ¼ã€‚å®ƒæ–°å¢äº†å‘½ä»¤å†å²ã€åˆ«åã€æ–‡ä»¶åæ›¿æ¢ã€ä½œä¸šæ§åˆ¶ç­‰åŠŸèƒ½ã€‚</li>
<li>korn shell (ksh) æ˜¯ä¸€ä¸ª Unix shell ã€‚å®ƒç”±è´å°”å®éªŒå®¤çš„ David Korn åœ¨äºŒåä¸–çºªå…«å å¹´ä»£æ—©æœŸç¼–å†™ã€‚å®ƒå®Œå…¨å‘ä¸Šå…¼å®¹ Bourne shell å¹¶åŒ…å«äº† C shell çš„å¾ˆå¤šç‰¹æ€§ã€‚</li>
<li>Bourne-Again SHell : bash æ˜¯ä¸€ä¸ªä¸º GNU é¡¹ç›®ç¼–å†™çš„ Unix shell ã€‚å®ƒçš„åå­—æ˜¯ä¸€ ç³»åˆ—ç¼©å†™:Bourne-Again SHell â€” è¿™æ˜¯å…³äº Bourne shell ( sh )çš„ä¸€ä¸ªåŒå…³è¯­( Bourne again / bornagain ) ã€‚ Bourne shell æ˜¯ä¸€ä¸ªæ—©æœŸçš„é‡è¦ shell , ç”± Stephen Bourne åœ¨ 1978 å¹´å‰åç¼–å†™,å¹¶åŒ Version 7 Unix ä¸€èµ·å‘å¸ƒã€‚ bash åˆ™åœ¨ 1987 å¹´ç”± Brian Fox åˆ›é€ ã€‚ åœ¨ 1990 å¹´, ChetRamey æˆä¸ºäº†ä¸»è¦çš„ç»´æŠ¤è€…ã€‚ bash æ˜¯å¤§å¤šæ•° Linux ç³»ç»Ÿä»¥åŠ Mac OS X v10.4 é»˜è®¤çš„ shell ,å®ƒèƒ½è¿è¡Œäºå¤§å¤šæ•° Unix é£æ ¼çš„æ“ä½œç³»ç»Ÿä¹‹ä¸Š, ç”šè‡³è¢«ç§»æ¤åˆ°äº† Microsoft Windows ä¸Šçš„ Cygwin å’ŒMSYS ç³»ç»Ÿä¸­, ä»¥å®ç° windows çš„ POSIX è™šæ‹Ÿæ¥å£ã€‚æ­¤å¤–, å®ƒä¹Ÿè¢« DJGPP é¡¹ç›®ç§»æ¤åˆ°äº† MS- DOS ä¸Šã€‚</li>
<li>POSIX shell : POSIX shell ä¸ Korn shell éå¸¸çš„ç›¸ä¼¼, å½“å‰æä¾› POSIX shell çš„æœ€å¤§å–ä¸»æ˜¯Hewlett-Packard ã€‚</li>
</ul>
<h3 id="ä¸ºä»€ä¹ˆ-Shell"><a href="#ä¸ºä»€ä¹ˆ-Shell" class="headerlink" title="ä¸ºä»€ä¹ˆ Shell"></a>ä¸ºä»€ä¹ˆ Shell</h3><ul>
<li>è§£å†³é‡å¤æ“ä½œçš„ä½œä¸šã€‚</li>
<li>èŠ‚çº¦æ—¶é—´ , æé«˜å·¥ä½œæ•ˆç‡ã€‚</li>
<li>åŠŸèƒ½å¼ºå¤§,ä½¿ç”¨ç®€å•</li>
</ul>
<h3 id="etc-shells"><a href="#etc-shells" class="headerlink" title="/etc/shells"></a>/etc/shells</h3><p><code>/etc/shells</code> æ–‡ä»¶è®°å½•äº†ç›®å‰ç³»ç»Ÿä¸­æ³¨å†Œè¿‡çš„ shell,æ¯ä¸€ä¸ªç”¨æˆ·å¯ä»¥ä½¿ç”¨ä¸€ç§ shell,å¯ä»¥é€šè¿‡<code>usermod -s</code> æ¥ä¿®æ”¹ç”¨æˆ· shell,ä¹Ÿå¯ä»¥é€šè¿‡<code>chsh</code> æ¥æ›´æ”¹ shell</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@redhat6 tmp]# chsh carol</span><br><span class="line">Changing shell for carol.</span><br><span class="line">New shell [/bin/csh]: /bin/sh</span><br><span class="line">Shell changed.</span><br><span class="line">[root@redhat6 tmp]# su - carol</span><br><span class="line">-sh-4.1$ tail /etc/passwd -n1</span><br><span class="line">carol:x:60000:60000:carol:/home/carol:/bin/sh</span><br><span class="line">-sh-4.1$</span><br></pre></td></tr></table></figure>

<h2 id="bash-åŠŸèƒ½"><a href="#bash-åŠŸèƒ½" class="headerlink" title="bash åŠŸèƒ½"></a>bash åŠŸèƒ½</h2><h3 id="history-åŠŸèƒ½"><a href="#history-åŠŸèƒ½" class="headerlink" title="history åŠŸèƒ½"></a>history åŠŸèƒ½</h3><p>history å‘½ä»¤ç”¨äºæ˜¾ç¤ºæŒ‡å®šæ•°ç›®çš„æŒ‡ä»¤å‘½ä»¤,è¯»å–å†å²å‘½ä»¤æ–‡ä»¶ä¸­çš„ç›®å½•åˆ°å†å²å‘½ä»¤ç¼“å†²åŒºå’Œå°†å†å²å‘½ä»¤ç¼“å†²åŒºä¸­çš„ç›®å½•å†™å…¥å‘½ä»¤æ–‡ä»¶ã€‚ è¯¥å‘½ä»¤å•ç‹¬ä½¿ç”¨æ—¶,ä»…æ˜¾ç¤ºå†å²å‘½ä»¤,åœ¨å‘½ä»¤è¡Œä¸­,å¯ä»¥ä½¿ç”¨ç¬¦å·!æ‰§è¡ŒæŒ‡å®šåºå·çš„å†å²å‘½ä»¤ã€‚</p>
<p>ä¾‹å¦‚,è¦æ‰§è¡Œç¬¬ 2 ä¸ªå†å²å‘½ä»¤,åˆ™è¾“å…¥<code>!2</code>ã€‚</p>
<p>å†å²å‘½ä»¤æ˜¯è¢«ä¿å­˜åœ¨å†…å­˜ä¸­çš„,å½“é€€å‡ºæˆ–è€…ç™»å½• shell æ—¶,ä¼šè‡ªåŠ¨ä¿å­˜æˆ–è¯»å–ã€‚åœ¨å†…å­˜ä¸­,å†å²å‘½ä»¤ä»…èƒ½å¤Ÿå­˜å‚¨ 1000 æ¡å†å²å‘½ä»¤,è¯¥æ•°é‡æ˜¯ç”±ç¯å¢ƒå˜é‡ <code>HISTSIZE</code> è¿›è¡Œæ§åˆ¶ã€‚</p>
<p>HISTSIZE å˜é‡ â€“å˜é‡:åå¤è°ƒç”¨çš„å€¼,ä»¥$ç¬¦å·å¼•ç”¨</p>
<p>å®šä¹‰æ–¹å¼:histsize æ•°å­— ä¸´æ—¶ç”Ÿæ•ˆ</p>
<p>/etc/profile é‡Œæ°¸ä¹…å®šä¹‰</p>
<p>ä¿å­˜ä½ç½®:~/.bash_history</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¯­æ³• history(é€‰é¡¹)(å‚æ•°)</span><br><span class="line"></span><br><span class="line">é€‰é¡¹ -c :æ¸…ç©ºå½“å‰å†å²å‘½ä»¤;</span><br><span class="line">-a :å°†å†å²å‘½ä»¤ç¼“å†²åŒºä¸­å‘½ä»¤å†™å…¥å†å²å‘½ä»¤æ–‡ä»¶ä¸­;</span><br><span class="line">-r :å°†å†å²å‘½ä»¤æ–‡ä»¶ä¸­çš„å‘½ä»¤è¯»å…¥å½“å‰å†å²å‘½ä»¤ç¼“å†²åŒº;</span><br><span class="line">-w:å°†å½“å‰å†å²å‘½ä»¤ç¼“å†²åŒºå‘½ä»¤å†™å…¥å†å²å‘½ä»¤æ–‡ä»¶ä¸­ã€‚</span><br><span class="line"></span><br><span class="line">å‚æ•° æ‰“å°æœ€è¿‘çš„ n æ¡å†å²å‘½ä»¤</span><br><span class="line"></span><br><span class="line">å®ä¾‹</span><br><span class="line"></span><br><span class="line">!8 ä½¿ç”¨ç¬¬å…«ä¸ªå‘½ä»¤</span><br><span class="line">!Ser ä½¿ç”¨è¯¥å­—ç¬¦ä¸²å¼€å¤´çš„æœ€è¿‘çš„å‘½ä»¤</span><br><span class="line">!!è°ƒç”¨ä¸Šä¸€æ¡å‘½ä»¤</span><br><span class="line">!$ è°ƒç”¨ä¸Šä¸€ä¸ªå‘½ä»¤çš„å‚æ•° = alt+.</span><br><span class="line">Ctrl+R æœç´¢æœ€è¿‘åŒ…å«å­—ç¬¦ä¸²çš„å‘½ä»¤</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">history</span><br><span class="line">	å‘½ä»¤ç”¨æ³•</span><br><span class="line">	history</span><br><span class="line">		-c	æ¸…ç©ºç¼“å­˜</span><br><span class="line">		-r  	å°†~/.bash_historyå†å²å‘½ä»¤è¯»å…¥ç¼“å­˜</span><br><span class="line"></span><br><span class="line">		æ–¹ä¾¿çš„è°ƒç”¨	ï¼num</span><br><span class="line">				!! è°ƒç”¨æœ€è¿‘ä¸€æ¬¡çš„å‘½ä»¤</span><br><span class="line">				!å…³é”®å­— 		</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	å®æˆ˜	1.ä½ æ˜¯é»‘å®¢ï¼Œçªƒå–åˆ«äººçš„å†å²å‘½ä»¤</span><br><span class="line">		~/.bash_history</span><br><span class="line">		2.ä¸ºäº†é˜²æ­¢é»‘å®¢ï¼Œä½ æ€ä¹ˆé˜²æ­¢ä¸€äº›å…³é”®å‘½ä»¤è¢«çªƒå–ï¼Œæ¯”å¦‚é…ç½®ç”¨æˆ·å¯†ç ï¼Œæˆ–è€…æ•°æ®åº“å¯†ç ç­‰</span><br><span class="line">	[root@rhel7 ~]# echo "uplooking123"|passwd --stdin superman</span><br><span class="line">	Changing password for user superman.</span><br><span class="line">	passwd: all authentication tokens updated successfully.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		1ï¼‰æ¸…ç¼“å†²</span><br><span class="line">		2ï¼‰åˆ é™¤æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">		[root@rhel7 ~]# export HISTCONTROL=ignorespace</span><br><span class="line">		[root@rhel7 ~]# echo 1</span><br><span class="line">		1</span><br><span class="line">		[root@rhel7 ~]# echo 2</span><br><span class="line">		2</span><br><span class="line">		[root@rhel7 ~]#  echo 3</span><br><span class="line">		3</span><br><span class="line">		[root@rhel7 ~]# history</span><br><span class="line">		1  HISTCONTROL=ignorespace</span><br><span class="line">		2  exprot HISTCONTROL=ignorespace</span><br><span class="line">		3  export HISTCONTROL=ignorespace</span><br><span class="line">		4  echo 1</span><br><span class="line">		5  echo 2</span><br><span class="line">		6  history</span><br></pre></td></tr></table></figure>

<h3 id="åˆ«å-alias"><a href="#åˆ«å-alias" class="headerlink" title="åˆ«å alias"></a>åˆ«å alias</h3><p>alias å‘½ä»¤ç”¨æ¥è®¾ç½®æŒ‡ä»¤çš„åˆ«åã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥å‘½ä»¤å¯ä»¥å°†ä¸€äº›è¾ƒé•¿çš„å‘½ä»¤è¿›è¡Œç®€åŒ–ã€‚ä½¿ç”¨ alias æ—¶,ç”¨æˆ·å¿…é¡»ä½¿ç”¨å•å¼•å·â€™â€™ å°†åŸæ¥çš„å‘½ä»¤å¼•èµ·æ¥,é˜²æ­¢ç‰¹æ®Šå­—ç¬¦å¯¼è‡´é”™è¯¯ã€‚ alias å‘½ä»¤çš„ä½œç”¨åªå±€é™äºè¯¥æ¬¡ç™»å…¥çš„æ“ä½œã€‚è‹¥è¦æ¯æ¬¡ç™»å…¥éƒ½èƒ½å¤Ÿä½¿ç”¨è¿™äº›å‘½ä»¤åˆ«å,åˆ™å¯å°†ç›¸åº”çš„ alias å‘½ä»¤å­˜æ”¾åˆ° bash çš„åˆå§‹åŒ–æ–‡ä»¶/etc/bashrc ä¸­ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¯­æ³• alias(é€‰é¡¹)(å‚æ•°)</span><br><span class="line"></span><br><span class="line">é€‰é¡¹</span><br><span class="line">-p :æ‰“å°å·²ç»è®¾ç½®çš„å‘½ä»¤åˆ«åã€‚</span><br><span class="line"></span><br><span class="line">å‚æ•° å‘½ä»¤åˆ«åè®¾ç½®:å®šä¹‰å‘½ä»¤åˆ«å,æ ¼å¼ä¸º â€œ å‘½ä»¤åˆ«å=â€˜ å®é™…å‘½ä»¤ â€™â€ ã€‚</span><br><span class="line"></span><br><span class="line">å®ä¾‹ alias æ–°çš„å‘½ä»¤=' åŸå‘½ä»¤ -é€‰é¡¹/å‚æ•°'</span><br><span class="line">alias grep=â€™grep --color=autoâ€™</span><br></pre></td></tr></table></figure>

<ul>
<li>~/.bashrc é’ˆå¯¹å•ä¸ªç”¨æˆ·ç”Ÿæ•ˆ</li>
<li>/etc/bashrc é’ˆå¯¹å…¨å±€ç”Ÿæ•ˆ</li>
</ul>
<p>å®æˆ˜</p>
<ol>
<li>æˆ‘çš„å·¥ä½œè·¯å¾„åœ¨/tmp/justice/superman/dir1/ï¼Œæ¯å¤©ç™»é™†çš„æœåŠ¡å™¨éƒ½å¾ˆç´¯ï¼Œå› ä¸ºè¦å¤©å¤©è¾“å…¥cd /tmp/justice/superman/dir1/,æœ‰ä»€ä¹ˆåŠæ³•èƒ½å¤Ÿè½»æ¾ä¸€ç‚¹å‘¢ï¼Ÿè®©æˆ‘å°‘è¾“å…¥ä¸€ç‚¹å‘½ä»¤å‘¢ï¼Ÿ</li>
<li>å–æ¶ˆæˆ‘åˆšåˆšè®¾ç½®çš„åˆ«åunalias</li>
</ol>
<h3 id="tab-é”®è¡¥å…¨åŠŸèƒ½"><a href="#tab-é”®è¡¥å…¨åŠŸèƒ½" class="headerlink" title="tab é”®è¡¥å…¨åŠŸèƒ½"></a>tab é”®è¡¥å…¨åŠŸèƒ½</h3><p>å•å‡»è¡¥å…¨å‘½ä»¤,å¦‚æœæ²¡åŠæ³•è¡¥å…¨,åŒå‡»å¯ä»¥æ˜¾ç¤ºä»¥è¯¥å­—ç¬¦ä¸²å¼€å§‹çš„æ–‡ä»¶åéƒ½æœ‰å“ªäº›ã€‚(æˆ–è€…å‘½ä»¤éƒ½æœ‰å“ªäº›)</p>
<h3 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h3><ul>
<li>Ctrl +A è·³è¡Œé¦–</li>
<li>Ctrl +L æ¸…å±</li>
<li>Ctrl +e è·³è¡Œå°¾</li>
<li>Ctrl +c ä¸­æ–­</li>
<li>Ctrl +R æœç´¢</li>
<li>ctrl +d logout</li>
</ul>
<h2 id="ç”¨æˆ·ç™»å½•æµç¨‹"><a href="#ç”¨æˆ·ç™»å½•æµç¨‹" class="headerlink" title="ç”¨æˆ·ç™»å½•æµç¨‹"></a>ç”¨æˆ·ç™»å½•æµç¨‹</h2><p>å­¦ä¹ ç”¨æˆ·ç™»å½•æµç¨‹çš„æ„ä¹‰:</p>
<p>æˆ‘ä»¬ä¹‹å‰æœ‰æåˆ°è¿‡å‡ ä¸ªå˜é‡,æ¯”å¦‚ histsizeã€æ¯”å¦‚ umask ç­‰ã€‚è¿™äº›åŠŸèƒ½éƒ½å¯ä»¥æ˜¯é’ˆå¯¹äºæŸä¸€ä¸ªç”¨æˆ·å»è®¾ç½®çš„ã€‚é‚£ä¹ˆæˆ‘ä»¬æ˜¯æ€ä¹ˆçŸ¥é“å…·ä½“è¦æŠŠè¿™äº›ç›¸å…³é…ç½®ä¿¡æ¯å†™å…¥å“ªä¸€ä¸ªæ–‡ä»¶å‘¢?å“ªä¸€ä¸ªæ–‡ä»¶æ˜¯ç”¨äºå…¨å±€çš„å˜é‡çš„è®¾ç½®çš„,å“ªä¸€ä¸ªæ–‡ä»¶é’ˆå¯¹å•ä¸ªç”¨æˆ·ç”Ÿæ•ˆ,å“ªä¸€ä¸ªæ–‡ä»¶é‡Œé¢çš„é…ç½®å­—æ®µä¼šè¦†ç›–ä¹‹å‰çš„é…ç½®å­—æ®µå‘¢?è¿™å°±è¦ç”¨åˆ°æˆ‘ä»¬çš„ç”¨æˆ·ç™»å½•æµç¨‹äº†ã€‚</p>
<p>äº”ä¸ªé…ç½®æ–‡ä»¶çš„é¡ºåº:</p>
<p>æˆ‘ä»¬ç”¨æˆ·åœ¨ç™»å½•çš„æ—¶å€™,ä¼šè°ƒç”¨ä¸€ç³»åˆ—çš„æ–‡ä»¶,è¿™äº›æ–‡ä»¶åŒ…æ‹¬</p>
<ul>
<li>/etc/profile</li>
<li>/etc/profile.d ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</li>
<li>/.bash_profile</li>
<li>~/.bashrc</li>
<li>/etc/bashrc</li>
</ul>
<p>è¿™æ˜¯æˆ‘ä»¬ç³»ç»Ÿç™»å½•è¿‡ç¨‹ä¸­ç”¨åˆ°çš„äº”ä¸ªæ–‡ä»¶,æˆ‘ä»¬ä¸€ä¸€æ¥æŸ¥çœ‹ã€‚</p>
<p>/etc/profile</p>
<p>/etc/profile é‡Œé¢åŒ…å«äº†é…ç½®å­—æ®µ include /etc/profile.d ã€‚è¿™ä¸ª include ä»£è¡¨æ‰©å±•é…ç½®æ–‡ä»¶,å½“è¯»å–è¯¥æ–‡ä»¶çš„æ—¶å€™,ä¼šè¯»å–ç›¸åº”çš„ä¸€äº›æ‰©å±•é…ç½®æ–‡ä»¶ã€‚</p>
<p>æˆ‘ä»¬é€šå¸¸ä¸ä¼šæŠŠæ‰€æœ‰çš„ä¸œè¥¿éƒ½å¾€ä¸€ä¸ªæ–‡ä»¶é‡Œé¢å»å†™,ä¸€æ–¹é¢æ˜¯ç”±äºå…¨å¾€ä¸€ä¸ªæ–‡ä»¶é‡Œé¢å»å†™ä¼šå¯¼è‡´æ–‡ä»¶ç‰¹åˆ«å¤§,å¦ä¸€æ–¹é¢,ä¸æ–¹ä¾¿æˆ‘ä»¬çš„ä¿®æ”¹æ–‡ä»¶çš„çµæ´»åº¦ã€‚æˆ‘ä»¬è¦ä»ä¸€ä¸ªå¤§ç¯‡å¹…çš„é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°æŸä¸€è¡Œ,éå¸¸çš„ç´¯,é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å°†é…ç½®æ–‡ä»¶ä¹Ÿåˆ†é—¨åˆ«ç±»çš„å»å†™ã€‚æ¯”å¦‚è¯´æˆ‘åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç¨‹åº,è¿™ä¸ªç¨‹åºéœ€è¦ä¸€äº›å˜é‡çš„è®¾ç½®,æˆ‘å°±å¯ä»¥å°†è¿™äº›å˜é‡å†™æˆä¸€ä¸ªæ–°çš„æ–‡ä»¶,æ”¾åœ¨/etc/profile.d ç›®å½•ä¸‹,é‚£ä¹ˆå½“æˆ‘è¯»å– profile çš„æ—¶å€™ä¸€æ ·èƒ½å¤Ÿè¯»åˆ°è¯¥æ–‡ä»¶,å½“æˆ‘ä¸éœ€è¦é‚£ä¸ªç¨‹åºäº†,æˆ‘ä¹Ÿä¸ç”¨å»æ‰¾è¿™ä¸ªé…ç½®å­—æ®µäº†,ç›´æ¥æŠŠå¯¹åº”çš„é…ç½®æ–‡ä»¶åˆ é™¤å°±å¯ä»¥äº†å§ã€‚</p>
<p>~/.bash_profile</p>
<p>æ¥ä¸‹æ¥å›å»è¯»<del>/.bash_profile æ–‡ä»¶,ç”±äºæ˜¯å®¶ç›®å½•ä¸‹çš„,è¿™æ˜¯å±äºç”¨æˆ·ä¸ªäººæœ¬èº«çš„é…ç½®æ–‡ä»¶,ä¹Ÿå°±æ˜¯è¯´,å†™åœ¨è¿™ä¸ªé…ç½®æ–‡ä»¶å½“ä¸­çš„å˜é‡,åªé’ˆå¯¹å¯¹åº”çš„ç”¨æˆ·ç”Ÿæ•ˆã€‚è¯¥æ–‡ä»¶é‡Œå†™çš„å†…å®¹ä¸€éƒ¨åˆ†æ˜¯å»è¯»å–</del>/.bashrc æ–‡ä»¶,ä¸€éƒ¨åˆ†å†™äº† path å˜é‡çš„ç›¸å…³å†…å®¹ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> .bash_profile</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Get the aliases and <span class="built_in">functions</span></span></span><br><span class="line">if [ -f ~/.bashrc ]; then</span><br><span class="line">. ~/.bashrc</span><br><span class="line">fi</span><br><span class="line"><span class="meta">#</span><span class="bash"> User specific environment and startup programs</span></span><br><span class="line">PATH=$PATH:$HOME/bin</span><br><span class="line">export PATH</span><br></pre></td></tr></table></figure>

<h3 id="PATH-å˜é‡"><a href="#PATH-å˜é‡" class="headerlink" title="PATH å˜é‡"></a>PATH å˜é‡</h3><p>PATH å˜é‡æ˜¯æˆ‘ä»¬ç³»ç»Ÿä¸­çš„ç›¸å…³å‘½ä»¤çš„è·¯å¾„ã€‚PATH çš„ä½œç”¨,ç®€åŒ–æˆ‘ä»¬çš„å‘½ä»¤å†™æ³•ã€‚</p>
<p>æˆ‘ä»¬æ‰§è¡Œçš„å‘½ä»¤ä¸€èˆ¬éƒ½åœ¨ PATH æŒ‡å®šçš„è·¯å¾„ä¸­,æ¯”å¦‚è¯´æˆ‘ä»¬çš„ useradd å‘½ä»¤,å®é™…ä¸Šæ‰§è¡Œçš„æ˜¯/usr/sbin/useradd ,å†æ¯”å¦‚è¯´ touch å‘½ä»¤,å®é™…ä¸Šæ‰§è¡Œçš„æ˜¯/bin/touch å‘½ä»¤ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@mastera0 ~]# echo $PATH</span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span><br><span class="line">[root@mastera0 ~]# which useradd</span><br><span class="line">/usr/sbin/useradd</span><br><span class="line">[root@mastera0 ~]# which touch</span><br><span class="line">/usr/bin/touch</span><br><span class="line">[root@mastera0 ~]# vim pathtest</span><br><span class="line">[root@mastera0 ~]# ll pathtest</span><br><span class="line">-rw-r--r--. 1 root root 26 Jun 24 16:58 pathtest</span><br><span class="line">[root@mastera0 ~]# chmod +x pathtest</span><br><span class="line">[root@mastera0 ~]# ll pathtest</span><br><span class="line">-rwxr-xr-x. 1 root root 26 Jun 24 16:58 pathtest</span><br><span class="line">[root@mastera0 ~]# pathtest</span><br><span class="line">-bash: pathtest: command not found</span><br><span class="line">[root@mastera0 ~]# ./pathtest</span><br><span class="line">this is a PATH-test!</span><br><span class="line">[root@mastera0 ~]# cp pathtest /usr/local/bin</span><br><span class="line">[root@mastera0 ~]# pathtest</span><br><span class="line">this is a PATH-test!</span><br><span class="line">[root@mastera0 ~]# which pathtest</span><br><span class="line">/usr/local/bin/pathtest</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆ PATH ä¹Ÿæœ‰ä¸€ä¸ªè¯»å–é¡ºåº,ä¼˜å…ˆä¼šä»ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹æ‰¾,æ¯”å¦‚è¯´æˆ‘ä»¬å»/usr/local/sbin ä¸‹é¢åˆ›å»ºä¸€ä¸ªåŒåçš„å¯æ‰§è¡Œæ–‡ä»¶ pathtest,å†…å®¹å¦‚ä¸‹:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@mastera0 ~]# vim pathtest</span><br><span class="line">[root@mastera0 ~]# cp pathtest /usr/local/sbin</span><br><span class="line">[root@mastera0 ~]# pathtest</span><br><span class="line">this is a PATH-test!</span><br><span class="line">[root@mastera0 ~]# ./pathtest</span><br><span class="line">New! I am /usr/local/sbin this is a PATH-test!</span><br><span class="line">[root@mastera0 ~]# pathtest</span><br><span class="line">this is a PATH-test!</span><br><span class="line">[root@mastera0 ~]# export PATH</span><br><span class="line">[root@mastera0 ~]# pathtest</span><br><span class="line">New! I am /usr/local/sbin this is a PATH-test!</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªå°±æ˜¯ PATH çš„è¯»å–é¡ºåº,ç”±äºç¬¬äºŒä¸ª pathtest å‘½ä»¤çš„è·¯å¾„/usr/local/sbin ä¼˜å…ˆäºç¬¬ä¸€ä¸ª</p>
<p>pathtest å‘½ä»¤çš„è·¯å¾„/usr/local/bin,æ‰€ä»¥æ‰§è¡Œäº†ç¬¬äºŒä¸ª pathtestå³/usr/local/sbin/pathtestã€‚ç„¶åæˆ‘ä»¬æŠŠç¬¬äºŒä¸ª pathtest åˆ é™¤ <code>rm -rf /usr/local/sbin/pathtest</code>,é‡æ–° export ä¸€ä¸‹PATH,export æ˜¯è®¾ç½®ç¯å¢ƒå˜é‡çš„æ„æ€ã€‚ä¹‹åæˆ‘ä»¬è®²åˆ°è„šæœ¬ä¼šå»è¯´</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@mastera0 ~]# rm -rf /usr/local/sbin/pathtest</span><br><span class="line">[root@mastera0 ~]# export PATH</span><br><span class="line">[root@mastera0 ~]# pathtest</span><br><span class="line">this is a PATH-test!</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆè¿™æ—¶å€™å†æ¥çœ‹ä¸€ä¸‹æ‰§è¡Œç»“æœæ˜¯ä¸æ˜¯åˆå›æ¥äº†ã€‚</p>
<p>æœ€å,è¯»å®Œè¿™ä¸¤ä¸ª<del>/.bash_profile å’Œ</del>/.bashrc ä»¥å,ç³»ç»Ÿæœ€åå†å»è¯»/etc/bashrcã€‚</p>
<p>è¿™æ˜¯æˆ‘ä»¬æ•´ä¸ªçš„æµç¨‹ã€‚å…ˆåè¯»å–é¡ºåºåˆ†åˆ«æ˜¯</p>
<ol>
<li>/etc/profile</li>
<li>/etc/profile.d/*</li>
<li>~/.bash_profile</li>
<li>~/.bashrc</li>
<li>/etc/bashrc</li>
</ol>
<p>è®°ä½,åé¢å†™çš„å˜é‡ä¼šè¦†ç›–ä¹‹å‰çš„å˜é‡å€¼,æ‰€ä»¥æˆ‘ä»¬æƒ³è®©å“ªäº›å˜é‡ç”Ÿæ•ˆ,å°±ä¸€å®šè¦æ¸…æ¥šå†™åœ¨ä»€ä¹ˆä½ç½®ã€‚</p>
<p>æ¯”å¦‚è¯´,æˆ‘å¸Œæœ›åªèƒ½å¤Ÿç»™ student ç”¨æˆ·ä½¿ç”¨çš„åˆ«ååº”è¯¥å†™åˆ°~/.bashrc ç›®å½•ä¸‹</p>
<p>æˆ‘å¸Œæœ›è®©å…¨å±€ç”Ÿæ•ˆçš„å‚æ•°å¯ä»¥æ”¾ç½®åœ¨/etc/profile ç›®å½•ä¸‹ã€‚</p>
<p><code>Su</code> å’Œ <code>su -</code>çš„åŒºåˆ«:è¿™å°±æ˜¯ç”¨æˆ·ç™»å½•æµç¨‹è¦æ³¨æ„çš„äº‹æƒ…,ç³»ç»Ÿé‡Œé¢æœ‰ä¸ªå¾ˆå…¸å‹çš„ä¾‹å­,å°±æ˜¯ su</p>
<p><code>Su</code> ä»£è¡¨åˆ‡æ¢ç”¨æˆ·ã€‚ç”¨æ³•æ˜¯ <code>su - ç”¨æˆ·å</code>,æˆ–è€…<code>su</code> ç›´æ¥è·Ÿä¸Šç”¨æˆ·åã€‚å‰è€…å«æ ‡å‡†åˆ‡æ¢,åè€…å«éæ ‡å‡†åˆ‡æ¢ã€‚</p>
<p>éæ ‡å‡†åˆ‡æ¢æœ‰äº›å˜é‡æ˜¯æ‹¿ä¸åˆ°çš„ã€‚æ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ° su ä¹‹å,æˆ‘ä»¬çš„ä½ç½®è¿˜åœ¨åˆ‡æ¢ä¹‹å‰çš„ä½ç½®,è€Œæˆ‘ä»¬ <code>su -</code> çš„ä½ç½®å·²ç»åˆ‡æ¢åˆ°ç”¨æˆ·çš„å®¶ç›®å½•äº†ã€‚</p>
<p>é‚£ä¹ˆæ˜¯å“ªäº›å˜é‡æ²¡æ‹¿åˆ°å‘¢?</p>
<p>æˆ‘ä»¬æ¥åšä¸ªå°å®éªŒã€‚</p>
<p>æ¼”ç¤º ç»™ 5 ä¸ªé…ç½®æ–‡ä»¶çš„å¤´éƒ¨åˆ†åˆ«å†™ä¸Š <code>echo &quot;xxx (é…ç½®æ–‡ä»¶å) start&quot;</code>,å°¾éƒ¨å†™ä¸Š <code>echo &quot;xxxx(é…ç½®æ–‡ä»¶å) stop&quot;</code></p>
<p> <code>Man bash</code> å¯ä»¥å‘Šè¯‰ä½ ç™»å½•æµç¨‹çš„ç›¸å…³å†…å®¹ã€‚</p>
<h3 id="PS1-å˜é‡"><a href="#PS1-å˜é‡" class="headerlink" title="PS1 å˜é‡"></a>PS1 å˜é‡</h3><p>/etc/bashrc ä¸­æœ‰ä¸€ä¸ªå˜é‡ PS1,æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹ä»–çš„ä½œç”¨ã€‚</p>
<p><code>man bash</code> åæœç´¢ ps1 å…³é”®è¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">\d :ä»£è¡¨æ—¥æœŸ,æ ¼å¼ä¸º weekday month date,ä¾‹å¦‚:"Mon Aug 1"</span><br><span class="line">\H :å®Œæ•´çš„ä¸»æœºåç§°ã€‚ä¾‹å¦‚:æˆ‘çš„æœºå™¨åç§°ä¸º:fc4.linux,åˆ™è¿™ä¸ªåç§°å°±æ˜¯ fc4.linux</span><br><span class="line">\h :ä»…å–ä¸»æœºçš„ç¬¬ä¸€ä¸ªåå­—,å¦‚ä¸Šä¾‹,åˆ™ä¸º fc4,.linux åˆ™è¢«çœç•¥</span><br><span class="line">\t :æ˜¾ç¤ºæ—¶é—´ä¸º 24 å°æ—¶æ ¼å¼,å¦‚:HH:MM:SS</span><br><span class="line">\T :æ˜¾ç¤ºæ—¶é—´ä¸º 12 å°æ—¶æ ¼å¼</span><br><span class="line">\A :æ˜¾ç¤ºæ—¶é—´ä¸º 24 å°æ—¶æ ¼å¼:HH:MM</span><br><span class="line">\u :å½“å‰ç”¨æˆ·çš„è´¦å·åç§°</span><br><span class="line">\v :BASH çš„ç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line">\w :å®Œæ•´çš„å·¥ä½œç›®å½•åç§°ã€‚å®¶ç›®å½•ä¼šä»¥ ~ä»£æ›¿</span><br><span class="line">\W :åˆ©ç”¨ basename å–å¾—å·¥ä½œç›®å½•åç§°,æ‰€ä»¥åªä¼šåˆ—å‡ºæœ€åä¸€ä¸ªç›®å½•</span><br><span class="line"> :ä¸‹è¾¾çš„ç¬¬å‡ ä¸ªå‘½ä»¤</span><br><span class="line">\$ :æç¤ºå­—ç¬¦,å¦‚æœæ˜¯ root æ—¶,æç¤ºç¬¦ä¸º:# ,æ™®é€šç”¨æˆ·åˆ™ä¸º:$</span><br></pre></td></tr></table></figure>

<p>theåœ¨ PS1 ä¸­è®¾ç½®å­—ç¬¦åºåˆ—é¢œè‰²çš„æ ¼å¼ä¸º:[\e[F;Bm]</p>
<ul>
<li><p>Fä¸ºå­—ä½“é¢œè‰²,ç¼–å· 30~37;</p>
</li>
<li><p>Bä¸ºèƒŒæ™¯è‰²,ç¼–å· 40~47 ã€‚</p>
</li>
<li><p>å–æ¶ˆè®¾ç½®:[\e[m]</p>
</li>
</ul>
<p>é¢œè‰²è¡¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">å‰æ™¯ èƒŒæ™¯ é¢œè‰²</span><br><span class="line">30 40 é»‘è‰²</span><br><span class="line">31 41 çº¢è‰²</span><br><span class="line">32 42 ç»¿è‰²</span><br><span class="line">33 43 é»„è‰²</span><br><span class="line">34 44 è“è‰²</span><br><span class="line">35 45 ç´«çº¢è‰²</span><br><span class="line">36 46 é’è“è‰²</span><br><span class="line">37 47 ç™½è‰²</span><br><span class="line"></span><br><span class="line">ä»£ç </span><br><span class="line">æ„ä¹‰</span><br><span class="line">0 OFF</span><br><span class="line">1 é«˜äº®æ˜¾ç¤º</span><br><span class="line">4 underline</span><br><span class="line">7 åç™½æ˜¾ç¤º</span><br><span class="line">8 ä¸å¯è§</span><br></pre></td></tr></table></figure>

<p>ä¸¾ä¾‹:</p>
<p>PS1=â€™[[\e[32m]###[\e[31m]\u@[\e[36m]\h \w]$[\e[m]â€˜</p>
<ul>
<li><p>[\e[32m] è®¾ç½®ä¸ºç»¿è‰²</p>
</li>
<li><p>### æ˜¾ç¤ºç°åœ¨è¿è¡Œçš„æ˜¯ç¬¬å‡ æ¡å‘½ä»¤</p>
</li>
<li><p>[\e[31m] è®¾ç½®ä¸ºçº¢è‰²</p>
</li>
<li><p>\u@ å½“å‰ç”¨æˆ·çš„è´¦å·åç§°@</p>
</li>
<li><p>[\e[36m] é’è“è‰²</p>
</li>
<li><p>\h \w</p>
</li>
<li><p>\h ä»…å–ä¸»æœºçš„ç¬¬ä¸€ä¸ªåå­—,\w æ˜¯è¯´:æ˜¾ç¤ºå®Œæ•´çš„è·¯å¾„,ä½†æ˜¯ä¸çŸ¥åˆ°ä¸ºä»€ä¹ˆå®¶ä»–æ˜¾ç¤º~è€Œä¸æ˜¯ç»å¯¹è·¯å¾„ã€‚</p>
</li>
<li><p>[\e[m] ä½¿ç”¨æ¥å…³é—­é¢œè‰²è®¾ç½®çš„ã€‚</p>
</li>
</ul>
<p>è¦æ˜¯ä½ æ²¡æœ‰è¿™ä¸ªçš„è¯;é‚£ä¹ˆ,ä½ çš„å‘½ä»¤æç¤ºç¬¦,åŒ…æ‹¬ä½ é€šè¿‡å‘½ä»¤æç¤ºç¬¦è¾“å‡ºçš„ä¸œè¥¿éƒ½æ˜¯å’Œæœ€åä¸€æ¬¡çš„é¢œè‰²è®¾ç½®ç›¸åŒ( é™¤äº†ä¸€äº›æœ‰ç‰¹æ®Šæ„ä¹‰çš„æ–‡ä»¶ )ã€‚</p>
<p>è¿™ä¸ªé…ç½®å†™åˆ°å“ªé‡Œå‘¢???</p>
<p>å¦‚æœåªæƒ³è®©å½“å‰ç”¨æˆ·ç”Ÿæ•ˆ,é‚£ä¹ˆåº”è¯¥åœ¨ç”¨æˆ·çš„æ ¹ç›®å½•ä¸‹çš„ â€œ.bashrcâ€,åœ¨é‡Œå¤´çš„æœ€åä¸€è¡ŒåŠ ä¸Š,ç„¶åä¿å­˜ã€‚ç„¶å source .bashrc æˆ–è€… â€œ. .bashrcâ€ æˆ–è€…æ³¨é”€ä¸€ä¸‹ã€‚å¦‚æœæƒ³è®©æ‰€æœ‰ç”¨æˆ·ç”Ÿæ•ˆ,è¯¥æ”¾å“ªé‡Œ?æ€è€ƒé¢˜</p>
<h2 id="Bashç®€ä»‹è¯¾åä½œä¸š"><a href="#Bashç®€ä»‹è¯¾åä½œä¸š" class="headerlink" title="Bashç®€ä»‹è¯¾åä½œä¸š"></a>Bashç®€ä»‹è¯¾åä½œä¸š</h2><ol>
<li>è¦æ±‚ student ç”¨æˆ·ç™»å½•çš„æ—¶å€™è·å– umask å€¼ä¸º 044, å¹¶ä¸”è¯¥ å€¼æ°¸ä¹…ç”Ÿæ•ˆã€‚</li>
<li>è¦æ±‚æ‰€æœ‰æ™®é€šç”¨æˆ·ç™»å½•æ—¶, æœ€åè·å–åˆ°çš„ HISTSIZE å€¼ä¸º 500, è€Œ root ç”¨æˆ·è·å–åˆ°çš„ HISTSIZE çš„å€¼ä¸º 1000 ã€‚</li>
<li>æ¢³ç†ä¸€ä¸‹äº”ä¸ªæ–‡ä»¶çš„ç™»å½•é¡ºåºã€‚</li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯åŸ¹è®­</category>
        <category>Linuxç³»ç»ŸåŸºç¡€åŸ¹è®­</category>
      </categories>
      <tags>
        <tag>åŸ¹è®­</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux è½¯ä»¶å®‰è£…</title>
    <url>/2016/12/22/booboo_linux_base/05-Linux%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<h2 id="æºä»£ç å®‰è£…"><a href="#æºä»£ç å®‰è£…" class="headerlink" title="æºä»£ç å®‰è£…"></a>æºä»£ç å®‰è£…</h2><ul>
<li>ä¼˜åŠ¿ : å¯å®šåˆ¶ï¼Œç´§è·Ÿå‘å¸ƒï¼ŒåŠæ—¶ä¿®æ­£Bug</li>
<li>ç¼ºç‚¹ : æ“ä½œå¤æ‚ , ç¼–è¯‘æ—¶é—´é•¿ , ææ˜“å‡ºç°é”™è¯¯ï¼Œå¤§é¢ç§¯éƒ¨ç½²å¤æ‚ä¸”ä½æ•ˆï¼Œå®‰å…¨æ€§éšæ‚£å¤§</li>
</ul>
<h3 id="æºä»£ç å®‰è£…æ­¥éª¤"><a href="#æºä»£ç å®‰è£…æ­¥éª¤" class="headerlink" title="æºä»£ç å®‰è£…æ­¥éª¤"></a>æºä»£ç å®‰è£…æ­¥éª¤</h3><ul>
<li>ä¸‹è½½è§£å‹,é˜…è¯»è½¯ä»¶åŒ…é™„å¸¦çš„ install æ–‡ä»¶å’Œ readme æ–‡ä»¶,è·å–è½¯ä»¶çš„ç›¸å…³ä¿¡æ¯ã€‚</li>
<li>è¿›å…¥è§£åŒ…ä¹‹åçš„ç›®å½•,æ‰§è¡Œ â€œ ./configureâ€ å‘½ä»¤ï¼Œä½¿ç”¨å‚æ•°è®¾ç½®ç¼–è¯‘ç¯å¢ƒå’Œç¼–è¯‘æ¨¡å—ï¼Œä¾‹å¦‚<code>--prefix</code>ä¸ºç¼–è¯‘åšå¥½å…³äºæœ¬åœ°ç¯å¢ƒçš„é…ç½®ã€‚</li>
<li>é…ç½®æˆåŠŸå,æ‰§è¡Œ â€œ makeâ€ å‘½ä»¤è¿›è¡Œè½¯ä»¶ç¼–è¯‘ã€‚</li>
<li>ç¼–è¯‘æˆåŠŸå,æ‰§è¡Œ â€œ make installâ€ å‘½ä»¤å®Œæˆå®‰è£…ã€‚</li>
<li>æœ€å,æ‰§è¡Œ â€œ make cleanâ€ å‘½ä»¤åˆ é™¤å®‰è£…æ—¶äº§ç”Ÿçš„ä¸´æ—¶æ–‡ä»¶</li>
</ul>
<h3 id="å¸è½½æ­¥éª¤"><a href="#å¸è½½æ­¥éª¤" class="headerlink" title="å¸è½½æ­¥éª¤"></a>å¸è½½æ­¥éª¤</h3><ul>
<li>å…ˆè¿›å…¥è½¯ä»¶çš„å®‰è£…ç›®å½•,ç„¶åæ‰§è¡Œå¸è½½å‘½ä»¤å³å¯:<code>make uninstall</code></li>
<li>å¦‚æœæœ‰çš„è½¯ä»¶åŒ…ä¸æä¾› uninstall åŠŸèƒ½,åˆ™å¿…é¡»è¿›è¡Œæ‰‹åŠ¨åˆ é™¤ã€‚å› æ­¤ä½ éœ€è¦é˜…è¯»å®‰è£…ç›®å½•é‡Œé¢çš„readme æ–‡ä»¶,æˆ–è€…åœ¨å®‰è£…çš„è¿‡ç¨‹ä¸­æŒ‡å®šå®‰è£…ç›®å½•,å³åœ¨ ./configure å‘½ä»¤åé¢æ·»åŠ å‚æ•° â€“prefix ,ä¾‹å¦‚:<code>./configure --prefix=/usr/local/dir</code></li>
<li>è¯¥å‘½ä»¤å°†æŠŠè½¯ä»¶å®‰è£…åœ¨ /usr/local/ è·¯å¾„çš„ dir ç›®å½•é‡Œã€‚é€šå¸¸æƒ…å†µä¸‹,å¤§å¤šæ•°è½¯ä»¶éƒ½é»˜è®¤å®‰è£…åœ¨ /usr/local ç›®å½•é‡Œã€‚</li>
</ul>
<h3 id="MPlayeræºç å®‰è£…å®éªŒ"><a href="#MPlayeræºç å®‰è£…å®éªŒ" class="headerlink" title="MPlayeræºç å®‰è£…å®éªŒ"></a>MPlayeræºç å®‰è£…å®éªŒ</h3><blockquote>
<p>ä¸‹è½½è½¯ä»¶åŒ…åˆ°ç³»ç»ŸæŸä¸ªç›®å½•ä¸‹ï¼Œæœ¬æ¬¡æ¼”ç¤ºä¸­ä½¿ç”¨/tmp/mplayer/ç›®å½•ï¼Œè½¯ä»¶åŒ…åŒ…æ‹¬ä¸»ç¨‹åºã€åº“å‡½æ•°ã€çš®è‚¤</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget ....</span><br><span class="line">all-20071007.tar.bz2	åº“å‡½æ•°</span><br><span class="line">Blue-1.7.tar.bz2	çš®è‚¤</span><br><span class="line">MPlayer-1.0rc2.tar.bz2	ä¸»ç¨‹åº</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å°†å‹ç¼©åŒ…è§£å‹</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -jxf</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åˆ›å»ºç›®å½•ç”¨æ¥å­˜æ”¾åº“å‡½æ•°</p>
</blockquote>
<p><code>mkdir  /usr/local/lib/codes</code></p>
<blockquote>
<p>å°†/tmp/mplayer/all/ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°/usr/local/lib/codes</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cp all-20071007/* /usr/local/lib/codes</span><br><span class="line">ll /usr/local/lib/codes</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å®‰è£…ä¾èµ–åŒ…</p>
</blockquote>
<p><code>yum install -y kernel-devel gcc  zlib-devel  gtk2-devel</code></p>
<blockquote>
<p>æ£€æŸ¥å®‰è£…ç¯å¢ƒ</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /tmp/mplayer/MPlayer-1.0rc2</span><br><span class="line">./configure --enable-gui --codecsdir=/usr/local/lib/codes --enable-x11  --enable-xshape  --language=zh_CN --disable-ivtv --disable-png</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç¼–è¯‘make</p>
</blockquote>
<p><code>make</code></p>
<blockquote>
<p>å®‰è£…</p>
</blockquote>
<p><code>make install</code></p>
<blockquote>
<p>è£…çš®è‚¤</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¿™éƒ¨åˆ†ä¸æ˜¯ä»£ç ï¼Œè€Œæ˜¯ç¨‹åºè£…åœ¨äº†å“ªé‡Œ</span><br><span class="line">  Install prefix: /usr/local</span><br><span class="line">  Data directory: /usr/local/share/mplayer</span><br><span class="line">  Config direct.: /usr/local/etc/mplayer</span><br></pre></td></tr></table></figure>

<ul>
<li>åˆ›å»ºç›®å½•<code>mkdir /usr/local/share/mplayer/skins/default/</code></li>
<li>å°†çš®è‚¤æ–‡ä»¶å¤åˆ¶åˆ°/usr/local/share/mplayer/default/ç›®å½•ä¸­<br><code>cp /tmp/mplayer/Blue/* /usr/local/share/mplayer/skins/default/</code></li>
</ul>
<blockquote>
<p>ä»çœŸæœºæ¡Œé¢ç”¨é¼ æ ‡åŒå‡»æ‰“å¼€å›¾å½¢åŒ–ç•Œé¢çš„rhel6ï¼Œå»æµ‹è¯•ï¼Œæ˜¯å¦å®‰è£…æˆåŠŸã€‚</p>
</blockquote>
<p><code>applications---&gt;sound&amp;video----&gt;mplayer</code></p>
<hr>
<h2 id="äºŒè¿›åˆ¶å®‰è£…"><a href="#äºŒè¿›åˆ¶å®‰è£…" class="headerlink" title="äºŒè¿›åˆ¶å®‰è£…"></a>äºŒè¿›åˆ¶å®‰è£…</h2><p>ç›´æ¥è§£å‹ç¼©å³å¯ä½¿ç”¨</p>
<p>ä¾‹å¦‚ mycat æ•°æ®åº“ä»£ç†æœåŠ¡å™¨<br>å®‰è£… mycat ,ç›´æ¥è§£å‹ç¼©å³å¯ä½¿ç”¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar xf Mycat-server-1.5.1-RELEASE-20160328130228-linux.tar.gz -C /usr/local</span><br><span class="line">cd /usr/local;ls</span><br><span class="line">cd mycat;ll</span><br><span class="line">chmod 755 * -R</span><br><span class="line">vim conf/schema.xml</span><br><span class="line">vim conf/server.xml</span><br><span class="line">bin/mycat start</span><br></pre></td></tr></table></figure>

<h2 id="RPM"><a href="#RPM" class="headerlink" title="RPM"></a>RPM</h2><p>RPM : redhat package management</p>
<p>rpm å‘½ä»¤æ˜¯ RPM è½¯ä»¶åŒ…çš„ç®¡ç†å·¥å…·ã€‚ rpm åŸæœ¬æ˜¯ Red Hat Linux å‘è¡Œç‰ˆä¸“é—¨ç”¨æ¥ç®¡ç† Linux å„é¡¹å¥—ä»¶çš„ç¨‹åº,ç”±äºå®ƒéµå¾ª GPL è§„åˆ™ä¸”åŠŸèƒ½å¼ºå¤§æ–¹ä¾¿,å› è€Œå¹¿å—æ¬¢è¿ã€‚é€æ¸å—åˆ°å…¶ä»–å‘è¡Œç‰ˆçš„é‡‡ç”¨ã€‚ RPM å¥—ä»¶ç®¡ç†æ–¹å¼çš„å‡ºç°,è®© Linux æ˜“äºå®‰è£…,å‡çº§,é—´æ¥æå‡äº† Linux çš„é€‚ç”¨åº¦ã€‚</p>
<p>rpm çš„å‘½åè§„èŒƒ : è½¯ä»¶å - ç‰ˆæœ¬å· - æ“ä½œç³»ç»Ÿå¹³å°</p>
<p>libreoffice4.1-calc-4.1.6.2-1.x86_64.rpm</p>
<p>zlib-1.2.3-29.el6.x86_64.rpm</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¯­æ³• rpm ( é€‰é¡¹ )( å‚æ•° )</span><br><span class="line"></span><br><span class="line">é€‰é¡¹</span><br><span class="line"></span><br><span class="line">-a :æŸ¥è¯¢æ‰€æœ‰å¥—ä»¶;</span><br><span class="line">-b&lt; å®Œæˆé˜¶æ®µ &gt;&lt; å¥—ä»¶æ¡£ &gt;+ æˆ– -t &lt; å®Œæˆé˜¶æ®µ &gt;&lt; å¥—ä»¶æ¡£ &gt;+ :è®¾ç½®åŒ…è£…å¥—ä»¶çš„å®Œæˆé˜¶æ®µ,å¹¶æŒ‡å®šå¥—ä»¶æ¡£çš„æ–‡ä»¶åç§°;</span><br><span class="line">-c :åªåˆ—å‡ºç»„æ€é…ç½®æ–‡ä»¶,æœ¬å‚æ•°éœ€é…åˆ "-l" å‚æ•°ä½¿ç”¨;</span><br><span class="line">-d :åªåˆ—å‡ºæ–‡æœ¬æ–‡ä»¶,æœ¬å‚æ•°éœ€é…åˆ "-l" å‚æ•°ä½¿ç”¨;</span><br><span class="line">-e&lt; å¥—ä»¶æ¡£ &gt; æˆ– --erase&lt; å¥—ä»¶æ¡£ &gt; :åˆ é™¤æŒ‡å®šçš„å¥—ä»¶;</span><br><span class="line">-f&lt; æ–‡ä»¶ &gt;+ :æŸ¥è¯¢æ‹¥æœ‰æŒ‡å®šæ–‡ä»¶çš„å¥—ä»¶;</span><br><span class="line">-h æˆ– --hash :å¥—ä»¶å®‰è£…æ—¶åˆ—å‡ºæ ‡è®°;</span><br><span class="line">-i :æ˜¾ç¤ºå¥—ä»¶çš„ç›¸å…³ä¿¡æ¯;</span><br><span class="line">-i&lt; å¥—ä»¶æ¡£ &gt; æˆ– --install&lt; å¥—ä»¶æ¡£ &gt; :å®‰è£…æŒ‡å®šçš„å¥—ä»¶æ¡£;</span><br><span class="line">-l :æ˜¾ç¤ºå¥—ä»¶çš„æ–‡ä»¶åˆ—è¡¨;</span><br><span class="line">-p&lt; å¥—ä»¶æ¡£ &gt;+ :æŸ¥è¯¢æŒ‡å®šçš„ RPM å¥—ä»¶æ¡£;</span><br><span class="line">-q :ä½¿ç”¨è¯¢é—®æ¨¡å¼,å½“é‡åˆ°ä»»ä½•é—®é¢˜æ—¶, rpm æŒ‡ä»¤ä¼šå…ˆè¯¢é—®ç”¨æˆ·;</span><br><span class="line">-R :æ˜¾ç¤ºå¥—ä»¶çš„å…³è”æ€§ä¿¡æ¯;</span><br><span class="line">-s :æ˜¾ç¤ºæ–‡ä»¶çŠ¶æ€,æœ¬å‚æ•°éœ€é…åˆ "-l" å‚æ•°ä½¿ç”¨;</span><br><span class="line">-U&lt; å¥—ä»¶æ¡£ &gt; æˆ– --upgrade&lt; å¥—ä»¶æ¡£ &gt; :å‡çº§æŒ‡å®šçš„å¥—ä»¶æ¡£;</span><br><span class="line">-v :æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹;</span><br><span class="line">-vv :è¯¦ç»†æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹,ä¾¿äºæ’é”™ã€‚</span><br><span class="line"></span><br><span class="line">å‚æ•° è½¯ä»¶åŒ…:æŒ‡å®šè¦æ“çºµçš„ rpm è½¯ä»¶åŒ…ã€‚</span><br><span class="line"></span><br><span class="line">å®ä¾‹</span><br><span class="line">install å®‰è£…</span><br><span class="line">1)rpm -ivh [x.rpm] å®‰è£… v\h æ˜¾ç¤ºå®‰è£…è¿‡ç¨‹ä¸­çš„è¿›åº¦æ¡ verbose\hash</span><br><span class="line">query æŸ¥è¯¢</span><br><span class="line">2)rpm -q [ è½¯ä»¶åç§° ] æŸ¥çœ‹è½¯ä»¶æ˜¯å¦å®‰è£…</span><br><span class="line">3)rpm -qi [ è½¯ä»¶åç§° ] æŸ¥çœ‹è½¯ä»¶çš„è¯¦ç»†ä¿¡æ¯</span><br><span class="line">4)rpm -ql [ è½¯ä»¶åç§° ] æŸ¥çœ‹è½¯ä»¶åœ¨ç³»ç»Ÿä¸­å®‰è£…è¿‡çš„æ–‡ä»¶</span><br><span class="line">5)rpm -qf [ æ–‡ä»¶åç§° ] æŸ¥çœ‹æ–‡ä»¶æ˜¯ç”±å“ªä¸ªè½¯ä»¶åŒ…å®‰è£…å‡ºæ¥çš„</span><br><span class="line">6)rpm -qa æŸ¥çœ‹ç³»ç»Ÿé‡Œæ‰€æœ‰å·²ç»å®‰è£…è¿‡çš„è½¯ä»¶åŒ…</span><br><span class="line">å¸è½½ remove</span><br><span class="line">6)rpm -e [ è½¯ä»¶åç§° ] å¸è½½è½¯ä»¶</span><br><span class="line">rpm -e --nodeps ä¸å¸è½½ä¾èµ–å…³ç³»</span><br><span class="line">update å‡çº§</span><br><span class="line">7)rpm -U [ è½¯ä»¶åç§° ] å‡çº§ , è‹¥æ²¡æœ‰è¯¥è½¯ä»¶åˆ™å®‰è£…</span><br><span class="line">8)rpm -F [ è½¯ä»¶åç§° ] å‡çº§ , è‹¥æ²¡æœ‰è¯¥è½¯ä»¶åˆ™ä¸å®‰è£…</span><br></pre></td></tr></table></figure>


<h2 id="YUM"><a href="#YUM" class="headerlink" title="YUM"></a>YUM</h2><h3 id="yum-çš„ä½œç”¨"><a href="#yum-çš„ä½œç”¨" class="headerlink" title="yum çš„ä½œç”¨"></a>yum çš„ä½œç”¨</h3><p>ä½œç”¨ : ä¸ºäº†è§£å†³åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»è€Œå­˜åœ¨çš„ä¸€ç§ç®¡ç†æœºåˆ¶ , åŸºäº rpm ä¸ºå‰ç«¯çš„åŒ…ç®¡ç†æœºåˆ¶ .<br>ä¸ºäº†è§£å†³ä¾èµ–å…³ç³» , å¼•å…¥äº†ä¸€ç§ä»“åº“çš„æœºåˆ¶ .</p>
<h3 id="yum-ä»“åº“"><a href="#yum-ä»“åº“" class="headerlink" title="yum ä»“åº“"></a>yum ä»“åº“</h3><p>ä»“åº“ : ç”¨æ¥å­˜æ”¾è½¯ä»¶å’Œè½¯ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³» , å½“æˆ‘ä»¬éœ€è¦å®‰è£…è½¯ä»¶çš„æ—¶å€™ , å°±å¯ä»¥é€šè¿‡è¯¥ä¾èµ–å…³ç³» , æ¥å°†ç›¸åº”çš„ä¾èµ–åŒ…éƒ½è£…ä¸Š .repodata ç›®å½•å°±æ˜¯ yum çš„ä»“åº“ , å­˜æ”¾è½¯ä»¶å’Œè½¯ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»æ•°æ® .</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel6 dvd]# ll repodata/ -d</span><br><span class="line">dr-xr-xr-x. 2 root root 4096 Nov 12</span><br><span class="line">[root@rhel6 dvd]#pwd</span><br><span class="line">/mnt/rhel6.5/x86_64/dvd</span><br></pre></td></tr></table></figure>

<h3 id="ä¾èµ–å…³ç³»"><a href="#ä¾èµ–å…³ç³»" class="headerlink" title="ä¾èµ–å…³ç³»"></a>ä¾èµ–å…³ç³»</h3><p>å®‰è£…ç³»ç»Ÿçš„å…‰ç›˜ä¸­å·²ç»æœ‰å»ºå·çš„ä¾èµ–å…³ç³»äº†,å³ repodata/ ç›®å½•,å¦‚æœè¦è‡ªå·±æ‰‹åŠ¨åˆ¶ä½œ rpm åŒ…ä¾èµ–å…³ç³»ç›®å½•,è¯¥æ€ä¹ˆåšå‘¢?</p>
<h4 id="å®‰è£…è½¯ä»¶-createrepo"><a href="#å®‰è£…è½¯ä»¶-createrepo" class="headerlink" title="å®‰è£…è½¯ä»¶ createrepo"></a>å®‰è£…è½¯ä»¶ createrepo</h4><p>rhel7 é»˜è®¤å·²ç»å®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# yum install -y createrepo</span><br><span class="line">Loaded plugins: langpacks, product-id, subscription-manager</span><br><span class="line">This system is not registered to Red Hat Subscription Management. You can use subscription-manager</span><br><span class="line">to register.</span><br><span class="line">server</span><br><span class="line">| 4.1 kB 00:00:00</span><br><span class="line">(1/2): server/group_gz</span><br><span class="line">| 134 kB 00:00:00</span><br><span class="line">(2/2): server/primary_db</span><br><span class="line">| 3.4 MB 00:00:00</span><br><span class="line">Package createrepo-0.9.9-23.el7.noarch already installed and latest version</span><br><span class="line">Nothing to do</span><br></pre></td></tr></table></figure>
<p>rhel6 è¦è‡ªå·±å®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel6 rc.d]# yum install -y createrepo</span><br><span class="line">Loaded plugins: product-id, refresh-packagekit, security, subscription-manager</span><br><span class="line">This system is not registered to Red Hat Subscription Management. You can use subscription-manager</span><br><span class="line">to register.</span><br><span class="line">server</span><br><span class="line">Running Transaction</span><br><span class="line">Installing : deltarpm-3.5-0.5.20090913git.el6.x86_64</span><br><span class="line">1/3</span><br><span class="line">Installing : python-deltarpm-3.5-0.5.20090913git.el6.x86_64</span><br><span class="line">2/3</span><br><span class="line">Installing : createrepo-0.9.9-18.el6.noarch</span><br><span class="line">3/3</span><br><span class="line">Verifying : createrepo-0.9.9-18.el6.noarch</span><br><span class="line">1/3</span><br><span class="line">Verifying : python-deltarpm-3.5-0.5.20090913git.el6.x86_64</span><br><span class="line">2/3</span><br><span class="line">Verifying : deltarpm-3.5-0.5.20090913git.el6.x86_64</span><br><span class="line">3/3</span><br><span class="line">Installed:</span><br><span class="line">createrepo.noarch 0:0.9.9-18.el6</span><br><span class="line">Dependency Installed:</span><br><span class="line">deltarpm.x86_64 0:3.5-0.5.20090913git.el6</span><br><span class="line">Complete!</span><br><span class="line">python-deltarpm.x86_64 0:3.5-0.5.20090913git.el64.3.2 åˆ¶ä½œ rpm åŒ…ä¾èµ–å…³ç³»ç›®å½•</span><br></pre></td></tr></table></figure>

<p>ä»¥ rhel7 ä¸ºä¾‹ä»å­¦æ ¡æœåŠ¡å™¨ä¸Šæ‹·è´ä¸€äº›è½¯ä»¶åˆ° /tmp/dvd7.1/ ç›®å½•ä¸‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 tmp]# cp /mnt/rhel7.1/x86_64/dvd/Packages/* /tmp/dvd7.1</span><br><span class="line">[root@rhel7 tmp]# cd /tmp/dvd7.1</span><br></pre></td></tr></table></figure>

<p>åˆ¶ä½œ rpm åŒ…ä¾èµ–å…³ç³»</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 dvd7.1]# createrepo /tmp/dvd7.1/</span><br><span class="line">Spawning worker 0 with 4371 pkgs</span><br><span class="line">Workers Finished</span><br><span class="line">Saving Primary metadata</span><br><span class="line">Saving file lists metadata</span><br><span class="line">Saving other metadata</span><br><span class="line">Generating sqlite DBs</span><br><span class="line">Sqlite DBs complete</span><br></pre></td></tr></table></figure>

<p>å·²ç»æˆåŠŸåˆ›å»º</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 tmp]# ll dvd7.1/ |grep repodata</span><br><span class="line">drwxr-xr-x. 2 root root 4096 Mar 18 07:42 repodata</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®ä»“åº“"><a href="#é…ç½®ä»“åº“" class="headerlink" title="é…ç½®ä»“åº“"></a>é…ç½®ä»“åº“</h3><p>ä¸ºæ­¤ , æˆ‘ä»¬éœ€è¦ä¼˜å…ˆå»é…ç½®ä¸€ä¸ªä»“åº“æŒ‡å‘æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶çš„ä½ç½®åœ¨ /etc/yum.repos.d/ ç›®å½•ä¸‹ , ä»¥ .repo ç»“å°¾</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 tmp]# cd /etc/yum.repos.d/</span><br><span class="line">[root@rhel7 yum.repos.d]# ls</span><br><span class="line">server.repo</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[ ä»“åº“å ]</span><br><span class="line">name = è¯´æ˜ä¿¡æ¯</span><br><span class="line">baseurl = æŒ‡å‘ repodata ç›®å½•çš„ä¸Šä¸€çº§ .</span><br><span class="line">enable = æ˜¯å¦å¯ç”¨è¯¥ä»“åº“ 0 ä»£è¡¨ä¸å¯ç”¨ ,1 ä»£è¡¨å¯ç”¨</span><br><span class="line">gpgcheck = æ˜¯å¦éœ€è¦æ£€æµ‹</span><br><span class="line">å…¶ä¸­ baseurl</span><br><span class="line">1. æœ¬åœ°è·¯å¾„ file:///content/rhel6.5..... ä»¥ä¸‹çœç•¥ ç¬¬ä¸‰ä¸ª / ä»£è¡¨çš„æ˜¯æ ¹ .</span><br><span class="line">2. è¿œç¨‹è·¯å¾„ åè®® :// ä½ç½®</span><br><span class="line">      ä¾‹:   http://</span><br><span class="line">       		ftp://</span><br><span class="line">       		nfs://</span><br><span class="line">       		</span><br><span class="line">[server]</span><br><span class="line">name = rhel7.1 repos</span><br><span class="line">baseurl = http://classroom.example.com/content/rhel6.5/x86_64/dvd/</span><br><span class="line">enable=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">[test]</span><br><span class="line">name = info</span><br><span class="line">baseurl=file:///tmp/dvd7.1/</span><br><span class="line">enable=1</span><br><span class="line">gpgcheck=0</span><br></pre></td></tr></table></figure>

<p>é…ç½®å®Œä»“åº“å , éœ€è¦ä½¿ç”¨</p>
<ul>
<li>yum clean all æ¥æ¸…ç†ç¼“å­˜</li>
<li>yum makecache æ¥é‡æ–°ç”Ÿæˆç¼“å­˜ .4.5 yum å®‰è£…</li>
</ul>
<p>å®‰è£…</p>
<ul>
<li>yum install è½¯ä»¶å å®‰è£…æŒ‡å®šè½¯ä»¶</li>
<li>yum groupinstall ç»„å ç”¨æ¥å®‰è£…ä¸€ç³»åˆ—çš„è½¯ä»¶åŒ… ,</li>
<li>yum reinstall è½¯ä»¶å é‡æ–°å®‰è£…æŒ‡å®šè½¯ä»¶</li>
</ul>
<p>-y é€‰é¡¹ , å¿½ç•¥å®‰è£…è¿‡ç¨‹å‡ºç°çš„ is this okçš„äº¤äº’ä¿¡æ¯</p>
<ul>
<li>yum localinstall è½¯ä»¶å æœ¬åœ°å®‰è£…æŒ‡å®šè½¯ä»¶</li>
</ul>
<p>æŸ¥è¯¢</p>
<ul>
<li>yum list ç”¨æ¥æŸ¥è¯¢æ‰€æœ‰çš„è½¯ä»¶åŒ…</li>
<li>yum list installed ç”¨æ¥æŸ¥çœ‹å·²ç»å®‰è£…è¿‡çš„è½¯ä»¶åŒ…</li>
<li>yum search å­—ç¬¦ä¸² èƒ½å¤Ÿå°†è¯´æ˜ä¿¡æ¯é‡Œå«è¯¥å­—ç¬¦ä¸²çš„ç›¸å…³è½¯ä»¶åŒ…ç½—åˆ—å‡ºæ¥</li>
<li>yum info è½¯ä»¶åŒ…å ç”¨æ¥æŸ¥çœ‹è½¯ä»¶åŒ…çš„è¯¦ç»†ä¿¡æ¯</li>
<li>yum grouplist ç»„å ç”¨æ¥æŸ¥è¯¢ç³»ç»Ÿé‡Œæ‰€æœ‰çš„ç»„åŒ…</li>
<li>yum groupinfo ç»„å ç”¨æ¥æŸ¥è¯¢æŒ‡å®šç»„çš„ç›¸å…³ä¿¡æ¯</li>
</ul>
<p>å‡çº§</p>
<ul>
<li>yum update è½¯ä»¶å</li>
<li>yum upgrade è½¯ä»¶å</li>
</ul>
<p>ä¸¤ç§å†™æ³•æ‰§è¡Œæ•ˆæœæ²¡æœ‰åŒºåˆ«</p>
<p>å¸è½½</p>
<ul>
<li>yum remove è½¯ä»¶å</li>
</ul>
<p>ä¸è¦ä½¿ç”¨ yum å»å¸è½½ , ä¼šå°†è½¯ä»¶çš„ä¾èµ–å…³ç³»ä¸€å¹¶å¸è½½æ‰ .</p>
<h2 id="Linux-è½¯ä»¶å®‰è£…è¯¾åä½œä¸š"><a href="#Linux-è½¯ä»¶å®‰è£…è¯¾åä½œä¸š" class="headerlink" title="Linux è½¯ä»¶å®‰è£…è¯¾åä½œä¸š"></a>Linux è½¯ä»¶å®‰è£…è¯¾åä½œä¸š</h2><ol>
<li>é…ç½®ä¸€ä¸ª yum ä»“åº“ã€‚ç†Ÿæ‚‰ä¸€ä¸‹é…ç½®çš„å‡ ä¸ªå­—æ®µå†…å®¹ã€‚</li>
<li>å®‰è£… vsftpd è½¯ä»¶ã€‚</li>
<li>æŸ¥çœ‹ vsftpd è½¯ä»¶çš„å®‰è£…æ–‡ä»¶æœ‰å“ªäº›</li>
<li>æŸ¥çœ‹ä¸€ä¸‹ touch å‘½ä»¤æ˜¯ç”±å“ªä¸ªè½¯ä»¶åŒ…å®‰è£…å‡ºæ¥çš„</li>
<li>æœç´¢ä¸€ä¸‹å« bind å­—ç¬¦ä¸²çš„è½¯ä»¶åŒ…ã€‚</li>
<li>æŸ¥è¯¢ä¸€ä¸‹ httpd è½¯ä»¶æœ‰æ²¡æœ‰å®‰è£… , æ²¡æœ‰åˆ™å°†è¯¥è½¯ä»¶è£…ä¸Šã€‚</li>
<li>æŸ¥çœ‹ä¸€ä¸‹ httpd è½¯ä»¶çš„ç‰ˆæœ¬å·åŠè¯•ç”¨å¹³å°ã€‚</li>
<li>å¸è½½ vsftpd è½¯ä»¶ã€‚</li>
<li>å¸è½½ httpd è½¯ä»¶ , ä¸è¦å¸è½½ä¸å…¶æœ‰ä¾èµ–å…³ç³»çš„è½¯ä»¶åŒ…</li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯åŸ¹è®­</category>
        <category>Linuxç³»ç»ŸåŸºç¡€åŸ¹è®­</category>
      </categories>
      <tags>
        <tag>åŸ¹è®­</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux Vim ç¼–è¾‘å™¨</title>
    <url>/2016/12/22/booboo_linux_base/06-Vim%E7%BC%96%E8%BE%91%E5%99%A8/</url>
    <content><![CDATA[<h2 id="Vim-ç®€ä»‹"><a href="#Vim-ç®€ä»‹" class="headerlink" title="Vim ç®€ä»‹"></a>Vim ç®€ä»‹</h2><p><img src="pic/10.png" alt="10.png"></p>
<p>Vim æ˜¯ Linux ç³»ç»Ÿä¸Šçš„æœ€è‘—åçš„æ–‡æœ¬/ ä»£ç ç¼–è¾‘å™¨,ä¹Ÿæ˜¯æ—©å¹´çš„ Viç¼–è¾‘å™¨çš„åŠ å¼ºç‰ˆï¼Œè€Œ gVim åˆ™æ˜¯å…¶ Windows ç‰ˆã€‚å®ƒçš„æœ€å¤§ç‰¹è‰²æ˜¯å®Œå…¨ä½¿ç”¨é”®ç›˜å‘½ä»¤è¿›è¡Œç¼–è¾‘ï¼Œè„±ç¦»äº†é¼ æ ‡æ“ä½œè™½ç„¶ä½¿å¾—å…¥é—¨å˜å¾—å›°éš¾,ä½†ä¸Šæ‰‹ä¹‹åé”®ç›˜æµçš„å„ç§å·§å¦™ç»„åˆæ“ä½œå´èƒ½å¸¦æ¥æä¸ºå¤§å¹…çš„æ•ˆç‡æå‡ã€‚</p>
<p>å› æ­¤ Vim å’Œç°ä»£çš„ç¼–è¾‘å™¨(å¦‚ Sublime Text)æœ‰ç€éå¸¸å·¨å¤§çš„å·®å¼‚,è€Œä¸”å…¥é—¨å­¦ä¹ æ›²çº¿é™¡å³­,éœ€è¦è®°ä½å¾ˆå¤šæŒ‰é”®ç»„åˆå’Œå‘½ä»¤,å¦‚ä»Šè¢«çœ‹ä½œæ˜¯é«˜æ‰‹ã€Geek ä»¬ä¸“ç”¨çš„ç¼–è¾‘å™¨ã€‚å°½ç®¡ Vim å·²ç»æ˜¯å¤è‘£çº§çš„è½¯ä»¶,ä½†è¿˜æ˜¯æœ‰æ— æ•°æ–°äººè¿ç€å›°éš¾å»å­¦ä¹ ä½¿ç”¨,å¯è§å…¶ç»å…¸ä¸å—æ¬¢è¿ç¨‹åº¦ã€‚</p>
<p>å¦å¤–,ç”±äº Vim çš„å¯é…ç½®æ€§éå¸¸å¼º,å„ç§æ’ä»¶ã€è¯­æ³•é«˜äº®é…è‰²æ–¹æ¡ˆç­‰å¤šä¸èƒœæ•°,æ— è®ºä½œä¸ºä»£ç ç¼–è¾‘å™¨æˆ–æ˜¯æ–‡ç¨¿æ’°å†™å·¥å…·éƒ½éå¸¸ç»™åŠ›ï¼</p>
<p>åœ¨ Linux ç³»ç»Ÿä¸­é…ç½®åº”ç”¨æœåŠ¡,å®é™…ä¸Šå°±æ˜¯åœ¨ä¿®æ”¹å®ƒçš„é…ç½®æ–‡ä»¶(é…ç½®æ–‡ä»¶å¯èƒ½æœ‰å¤šä¸ª,å…¶ä¸­åŒ…å«ä¸åŒçš„å‚æ•°), è€Œä¸”æ—¥å¸¸å·¥ä½œä¸­ä¹Ÿä¸€å®šå…ä¸äº†ç¼–å†™æ–‡æ¡£çš„äº‹æƒ…å§, è¿™äº›éƒ½æ˜¯è¦é€šè¿‡æ–‡æœ¬ç¼–è¾‘å™¨æ¥å®Œæˆçš„ã€‚</p>
<p>åœ¨çƒ­é—¨ Linux æ“ä½œç³»ç»Ÿä¸­éƒ½ä¼šé»˜è®¤å®‰è£…vimã€‚</p>
<h3 id="Vim-éš¾ä»¥é©¾é©­çš„ç¥å™¨"><a href="#Vim-éš¾ä»¥é©¾é©­çš„ç¥å™¨" class="headerlink" title="Vim - éš¾ä»¥é©¾é©­çš„ç¥å™¨"></a>Vim - éš¾ä»¥é©¾é©­çš„ç¥å™¨</h3><p>ç¥å™¨æ€»æ˜¯å¾ˆéš¾é©¾é©­çš„,ä¸»è§’æ€»å¾—ä»˜å‡ºä¸€äº›åŠªåŠ›æ‰èƒ½æ”¶è·åˆ°æ›´åŠ å¼ºå¤§çš„åŠ›é‡,å¯¹äº Vim è¿™ç§ä¸Šå¤ç¥å™¨æ¥è¯´æ›´æ˜¯å¦‚æ­¤ã€‚ç”±äºå®ƒå…¨ç¨‹ä½¿ç”¨é”®ç›˜æ“ä½œ,ä½ å¿…é¡»è®°ä½ä¸€å †å¿«æ·é”®ã€æŒ‰é”®ç»„åˆä»¥åŠå„ç§å‘½ä»¤æ‰èƒ½å¼€å§‹ä½¿ç”¨,å¾ˆå¤šé¦–æ¬¡æ¥è§¦ Vim çš„äººä¼šè§‰å¾—è¶Šå­¦è¶Šå¤æ‚è€Œä¸­é€”æ”¾å¼ƒã€‚ç„¶è€Œ,åšæŒä¸‹æ¥çš„æœ‹å‹å°±ä¼šæ¸æ¸åœ°å‘ç°è¿™ç§é”®ç›˜æµæ“ä½œçš„è®¾è®¡ç»å¦™ä¹‹å¤„!</p>
<p>å¦‚æœä½ æ˜¯ä¸€ä½ IT ç•Œäººå£«,éœ€è¦æˆ–å°†è¦ä¸ Linux ç³»ç»Ÿæ‰“äº¤é“,é‚£ä¹ˆå­¦ä¹ å¥½ Vim çš„æ“ä½œç»å¯¹èƒ½è®©ä½ çš„å·¥ä½œè½»æ¾ç™¾å€!!</p>
<p>å› ä¸ºå¾ˆå¤šæ—¶å€™, Linux ä½œä¸ºæœåŠ¡å™¨æ˜¯ä¸ä¼šå¼€å¯å›¾å½¢ç•Œé¢,å½“éœ€è¦è¿œç¨‹æ“ä½œæ—¶,ä½ åªèƒ½åˆ©ç”¨SSHâ€œ å‘½ä»¤å­—ç¬¦å¼ â€ çš„ Shell ç•Œé¢å¯¹å…¶è¿›è¡Œæ“ä½œ,è¿™æ—¶å¦‚æœä½ éœ€è¦ä¿®æ”¹æœåŠ¡å™¨ä¸Šçš„ç½‘é¡µä»£ç æˆ–é…ç½®æ–‡ä»¶,VIæˆ– VIM å‘½ä»¤å°±æ˜¯ä½ æœ€ä½³æœ€æ–¹ä¾¿ä¹Ÿæ˜¯æœ€å¼ºå¤§çš„ä¼™ä¼´äº†!ç›¸ä¿¡æˆ‘,å­¦å¥½ æ•°ç†åŒ– VIM ,èµ°éå¤©ä¸‹ä¹Ÿä¸æ€•ï¼</p>
<h3 id="Vim-å…¥é—¨å¸®åŠ©"><a href="#Vim-å…¥é—¨å¸®åŠ©" class="headerlink" title="Vim å…¥é—¨å¸®åŠ©"></a>Vim å…¥é—¨å¸®åŠ©</h3><p><img src="pic/11.png" alt="11.png"></p>
<p>ä¸‹é¢é¦–å…ˆå¯¹ Vim åšä¸€ä¸‹æœ€åŸºæœ¬çš„ä»‹ç»,å¹¶ç»™å‡ºä¸€äº›å‚è€ƒä¿¡æ¯,ä»¥æ–¹ä¾¿å¯¹ Vim ä¸ç†Ÿæ‚‰çš„è¯»è€…ä¹Ÿèƒ½å¤Ÿç†è§£å¹¶è‡ª<br>å·±æŸ¥é˜…è¿›ä¸€æ­¥ä¿¡æ¯ã€‚</p>
<p>Vim å¸¦æœ‰å®Œæ•´çš„å¸®åŠ©æ–‡æ¡£ã€‚</p>
<ol>
<li>è¿›å…¥ Vim åè¾“å…¥ â€œ :helpâ€å³å¯è®¿é—®</li>
<li>æ–°æ‰‹åœ¨æ“ä½œç³»ç»Ÿçš„å‘½ä»¤è¡Œä¸Šè¾“å…¥ vimtutor å‘½ä»¤å³å¯å¼€å§‹å­¦ä¹ ä¸€ä¸ªç®€å•çš„ 30 åˆ†é’Ÿçš„ Vim æ•™ç¨‹2 Vim å‘½ä»¤</li>
</ol>
<h3 id="Vim-æ¨¡å¼ä»‹ç»"><a href="#Vim-æ¨¡å¼ä»‹ç»" class="headerlink" title="Vim æ¨¡å¼ä»‹ç»"></a>Vim æ¨¡å¼ä»‹ç»</h3><p><img src="pic/12.png" alt="12.png"></p>
<p>ä¸å¤§éƒ¨åˆ†å…¶å®ƒç¼–è¾‘å™¨ä¸åŒ,è¿›å…¥ Vim å,ç¼ºçœçŠ¶æ€ä¸‹é”®å…¥çš„å­—ç¬¦å¹¶ä¸ä¼šæ’å…¥åˆ°æ‰€ç¼–è¾‘çš„æ–‡ä»¶ä¹‹ä¸­ã€‚Vim çš„<br>æ¨¡å¼(mode ,å¯ä»¥ç®€å•åœ°ç†è§£ä¸º â€œ çŠ¶æ€ â€ )æ¦‚å¿µéå¸¸é‡è¦ã€‚éœ€è¦çŸ¥é“,Vim æœ‰ä»¥ä¸‹å‡ ä¸ªæ¨¡å¼:</p>
<ul>
<li>æ­£å¸¸(normal)æ¨¡å¼,ç¼ºçœçš„ç¼–è¾‘æ¨¡å¼;ä¸‹é¢å¦‚æœä¸åŠ ç‰¹æ®Šè¯´æ˜,æåˆ°çš„å‘½ä»¤éƒ½ç›´æ¥åœ¨æ­£å¸¸æ¨¡å¼ä¸‹<br>è¾“å…¥;ä»»ä½•å…¶å®ƒæ¨¡å¼ä¸­éƒ½å¯ä»¥é€šè¿‡é”®ç›˜ä¸Šçš„ Esc é”®å›åˆ°æ­£å¸¸æ¨¡å¼ã€‚</li>
<li>å‘½ä»¤(command)æ¨¡å¼ ,ç”¨äºæ‰§è¡Œè¾ƒé•¿ã€è¾ƒå¤æ‚çš„å‘½ä»¤;åœ¨æ­£å¸¸æ¨¡å¼ä¸‹è¾“å…¥ â€œ :â€ (ä¸€èˆ¬å‘½ä»¤)ã€ â€œ /â€<br>(æ­£å‘æœç´¢)æˆ– â€œ ?â€(åå‘æœç´¢)å³å¯è¿›å…¥è¯¥æ¨¡å¼;å‘½ä»¤æ¨¡å¼ä¸‹çš„å‘½ä»¤è¦è¾“å…¥å›è½¦é”®(Enter)æ‰ç®—å®Œæˆã€‚</li>
<li>æ’å…¥(insert)æ¨¡å¼ ,è¾“å…¥æ–‡æœ¬æ—¶ä½¿ç”¨;åœ¨æ­£å¸¸æ¨¡å¼ä¸‹é”®å…¥ â€œ iâ€(insert )æˆ– â€œ aâ€(append)å³å¯<br>è¿›å…¥æ’å…¥æ¨¡å¼(ä¹Ÿæœ‰å¦å¤–ä¸€äº›å‘½ä»¤,å¦‚ â€œ câ€,ä¹Ÿå¯ä»¥è¿›å…¥æ’å…¥æ¨¡å¼,ä½†è¿™äº›å‘½ä»¤æœ‰å…¶å®ƒçš„ä½œç”¨)ã€‚</li>
<li>å¯è§†(visual)æ¨¡å¼ ,ç”¨äºé€‰å®šæ–‡æœ¬å—;å¯ä»¥åœ¨æ­£å¸¸æ¨¡å¼ä¸‹è¾“å…¥ â€œ vâ€(å°å†™)æ¥æŒ‰å­—ç¬¦é€‰å®š,è¾“å…¥<br>â€œVâ€ (å¤§å†™)æ¥æŒ‰è¡Œé€‰å®š,æˆ–è¾“å…¥ â€œ Ctrl-Vâ€æ¥æŒ‰æ–¹å—é€‰å®šã€‚</li>
<li>é€‰æ‹©(select)æ¨¡å¼ ,ä¸æ™®é€šçš„ Windows ç¼–è¾‘å™¨è¾ƒä¸ºæ¥è¿‘çš„é€‰æ‹©æ–‡æœ¬å—çš„æ–¹å¼;åœ¨ä»¥å¯è§†æ¨¡å¼å’Œ<br>é€‰æ‹©æ¨¡å¼ä¹‹ä¸€é€‰å®šæ–‡æœ¬å—ä¹‹å,å¯ä»¥ä½¿ç”¨ â€œ Ctrl-Gâ€ åˆ‡æ¢åˆ°å¦ä¸€æ¨¡å¼ â€”â€” è¯¥æ¨¡å¼å¾ˆå°‘åœ¨ Linux ä¸Šä½¿ç”¨,æœ¬<br>æ–‡ä¸­å°±ä¸å†ä»‹ç»äº†ã€‚</li>
</ul>
<h3 id="æ­£å¸¸æ¨¡å¼"><a href="#æ­£å¸¸æ¨¡å¼" class="headerlink" title="æ­£å¸¸æ¨¡å¼"></a>æ­£å¸¸æ¨¡å¼</h3><p><img src="pic/13.png" alt="13.png"></p>
<h3 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h3><p><img src="pic/14.png" alt="14.png"></p>
<h3 id="æ’å…¥æ¨¡å¼"><a href="#æ’å…¥æ¨¡å¼" class="headerlink" title="æ’å…¥æ¨¡å¼"></a>æ’å…¥æ¨¡å¼</h3><ul>
<li>i å…‰æ ‡æ‰€åœ¨ä½ç½®æ’å…¥</li>
<li>I å…‰æ ‡æ‰€åœ¨ä½ç½®è¡Œé¦–æ’å…¥</li>
<li>o å…‰æ ‡æ‰€åœ¨ä½ç½®ä¸‹æ–¹æ–°å¼€ä¸€è¡Œæ’å…¥</li>
<li>O å…‰æ ‡æ‰€åœ¨ä½ç½®ä¸Šæ–¹æ–°å¼€ä¸€è¡Œæ’å…¥</li>
<li>a å…‰æ ‡æ‰€åœ¨ä½ç½®ä¸‹ä¸€ä¸ªå­—ç¬¦çš„ä½ç½®æ’å…¥</li>
<li>A å…‰æ ‡æ‰€åœ¨ä½ç½®è¡Œè¡Œå°¾æ’å…¥</li>
</ul>
<h2 id="Vim-å®ä¾‹"><a href="#Vim-å®ä¾‹" class="headerlink" title="Vim å®ä¾‹"></a>Vim å®ä¾‹</h2><p>æœ¬å®ä¾‹ä½œä¸ºåŸºç¡€æ•™ç¨‹,æ‹“å±•éƒ¨åˆ†è§é™„å½•ã€ŠVim ç”¨æˆ·æ‰‹å†Œä¸­æ–‡ç‰ˆ 7.2ã€‹</p>
<p><img src="pic/15.png" alt="15.png"></p>
<h3 id="Vim-ç¬¬ä¸€æ­¥"><a href="#Vim-ç¬¬ä¸€æ­¥" class="headerlink" title="Vim ç¬¬ä¸€æ­¥"></a>Vim ç¬¬ä¸€æ­¥</h3><h4 id="é¦–æ¬¡è¿è¡Œ-Vim"><a href="#é¦–æ¬¡è¿è¡Œ-Vim" class="headerlink" title="é¦–æ¬¡è¿è¡Œ Vim"></a>é¦–æ¬¡è¿è¡Œ Vim</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@mastera0 ~]# ll file1</span><br><span class="line">-rw-r--r--. 1 root root 274 Jun 24 12:19 file1</span><br><span class="line">[root@mastera0 ~]# vim file1</span><br></pre></td></tr></table></figure>

<p>ä½¿ Vim å¼€å§‹ç¼–è¾‘ä¸€ä¸ªåä¸º file1 çš„æ–‡ä»¶ã€‚å±å¹•ä¸Šçœ‹èµ·æ¥å¤§è‡´æ˜¯è¿™æ ·:</p>
<ul>
<li>â€œé»‘è‰²å—â€ ä»£è¡¨å½“å‰å…‰æ ‡ä½ç½®;</li>
<li>ä¸Šæ³¢æµªçº¿(~)è¡¨ç¤ºæ‰€åœ¨è¡Œå¹¶ä¸æ˜¯æ–‡ä»¶å†…å®¹çš„ä¸€éƒ¨åˆ†ã€‚æ¢å¥è¯è¯´,Vim å°† æ–‡ä»¶ä¹‹å¤–çš„éƒ¨åˆ†æ˜¾ç¤ºä¸ºæ³¢æµªçº¿;</li>
<li>åœ¨çª—å£çš„åº•éƒ¨, ä¸€ä¸ªæ¶ˆæ¯è¡Œæ˜¾ç¤ºè¯´å½“å‰æ­£ åœ¨ç¼–è¾‘çš„æ–‡ä»¶å« file1,å®ƒæœ‰ 16 è¡Œ,274 ä¸ªå­—ç¬¦ã€‚ä½†å‰å…‰<br>æ ‡æ‰€åœ¨ä½ç½®ä¸ºç¬¬ä¸€è¡Œçš„ç¬¬ä¸€ä½</li>
</ul>
<p><img src="pic/16.png" alt="16.png"></p>
<p>å¦‚æœæ˜¯æ–°æ–‡ä»¶å‘¢?</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@mastera0 ~]# vim file</span><br></pre></td></tr></table></figure>

<p><img src="pic/17.png" alt="17.png"></p>
<p>åœ¨çª—å£çš„åº•éƒ¨, ä¸€ä¸ªæ¶ˆæ¯è¡Œæ˜¾ç¤ºè¯´å½“å‰æ­£ åœ¨ç¼–è¾‘çš„æ–‡ä»¶å« file,å¹¶ä¸”å®ƒæ˜¯ä¸€ä¸ªæ–°æ–‡ä»¶ã€‚</p>
<h4 id="æ’å…¥æ–‡æœ¬"><a href="#æ’å…¥æ–‡æœ¬" class="headerlink" title="æ’å…¥æ–‡æœ¬"></a>æ’å…¥æ–‡æœ¬</h4><p>Vim ç¼–è¾‘å™¨æ˜¯ä¸€ä¸ªæ¨¡å¼ç¼–è¾‘å™¨ã€‚è¿™æ„å‘³ç€åœ¨ä¸åŒçŠ¶æ€ä¸‹ç¼–è¾‘å™¨æœ‰ä¸åŒ çš„è¡Œä¸ºæ¨¡å¼ã€‚ä¸¤ä¸ªåŸºæœ¬çš„æ¨¡å¼ Normal<br>æ¨¡å¼å’Œ Insert æ¨¡å¼ã€‚åœ¨ Normal æ¨¡å¼ä¸‹ä½ é”®å…¥çš„æ¯ä¸€ä¸ªå­—ç¬¦éƒ½è¢«è§†ä¸ºä¸€ä¸ªå‘½ä»¤ã€‚è€Œåœ¨ Insert æ¨¡å¼ä¸‹é”®å…¥<br>çš„å­—ç¬¦ éƒ½ä½œä¸ºå®é™…è¦è¾“å…¥çš„æ–‡æœ¬å†…å®¹ã€‚ åˆšå¯åŠ¨æ—¶ Vim å·¥ä½œäº Normal æ¨¡å¼ã€‚è¦è¿›å…¥ Insert æ¨¡å¼ä½ éœ€è¦ä½¿<br>ç”¨â€iâ€ å‘½ ä»¤(i æ„ä¸º Insert)ã€‚æ¥ä¸‹æ¥å°±å¯ä»¥ç›´æ¥è¾“å…¥äº†ã€‚åˆ«æ€•å‡ºé”™, é”™äº†è¿˜å¯ä»¥ä¿® æ”¹ã€‚æ¯”å¦‚ä¸‹é¢è¿™é¦–ç¨‹åº<br>å‘˜çš„æ‰“æ²¹è¯—:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">A very intelligent turtle</span><br><span class="line">Found programming UNIX a hurdle</span><br></pre></td></tr></table></figure>
<p>â€œturtleâ€ ä¹‹åä½ æŒ‰ä¸‹å›è½¦é”®å¦èµ·ä¸€è¡Œã€‚æœ€åæŒ‰ä¸‹ <Esc> é”®é€€å‡º Insert æ¨¡å¼ ,å›åˆ° Normal æ¨¡å¼ã€‚ç°åœ¨ä½ çš„Vim çª—å£ä¸­æœ‰äº†è¿™æ ·çš„ä¸¤è¡Œå†…å®¹ :</p>
<p><img src="pic/18.png" alt="18.png"></p>
<p>ç°åœ¨æ˜¯ä»€ä¹ˆæ¨¡å¼?</p>
<p>è¦çŸ¥é“ä½ ç°åœ¨æ‰€å¤„çš„å·¥ä½œæ¨¡å¼æ˜¯ä»€ä¹ˆ,æ‰“å¼€æ˜¾ç¤ºæ¨¡å¼çš„å¼€å…³:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">:set showmode</span><br><span class="line">:set noshowmode å…³é—­æ˜¾ç¤ºæ¨¡å¼</span><br></pre></td></tr></table></figure>

<p><img src="pic/19.png" alt="19.png"></p>
<p>ä½ ä¼šçœ‹åˆ°æŒ‰ä¸‹å†’å·é”®ä¹‹åå½“å‰å…‰æ ‡è·‘åˆ°çª—å£çš„æœ€åä¸€è¡Œå»äº†ã€‚é‚£æ˜¯ä½¿ç”¨å†’ å·å‘½ä»¤çš„åœ°æ–¹(é¡¾åæ€ä¹‰,å†’å·å‘½<br>ä»¤å°±æ˜¯æ€»æ˜¯ä»¥å†’å·æ‰“å¤´çš„å‘½ä»¤) ã€‚æœ€åæŒ‰ ä¸‹å›è½¦é”®ç»“æŸæ•´ä¸ªå‘½ä»¤(æ‰€æœ‰çš„å†’å·å‘½ä»¤éƒ½ä»¥è¿™ç§æ–¹å¼è¡¨æ˜å‘½ä»¤çš„<br>ç»“æŸ).</p>
<p>ç°åœ¨,å¦‚æœä½ é”®å…¥äº†â€iâ€å‘½ä»¤ Vim å°±ä¼šåœ¨çª—å£åº•éƒ¨æ˜¾ç¤ºâ€“INSERTâ€“ ã€‚è¿™ è¡¨æ˜ä½ ç›®å‰å¤„äº Insert æ¨¡å¼ã€‚<br>å¦‚ æœ æŒ‰ ä¸‹<Esc> é”® è¿” å› åˆ° Normal æ¨¡ å¼ åˆš æ‰ æ˜¾ ç¤º å‡º æ¥ çš„ æ¨¡ å¼â€â€“INSERTâ€“ å°±ä¼šæ¶ˆå¤± ;Normalæ¨¡å¼å¹¶ä¸ä¼šæ˜¾ç¤º â€” NORMALâ€“,ä½œä¸ºé»˜è®¤çš„å·¥ä½œæ¨¡å¼å®ƒä¸æ˜¾ç¤ºä»»ä½•å­—ä¸²ã€‚</p>
<p>Vim æ–°æ‰‹æœ€å¤´ç—›çš„é—®é¢˜å°±æ˜¯æ¨¡å¼â€”ç»å¸¸å¿˜è®°è‡ªå·±ç½®èº«äºä½•ç§æ¨¡å¼, æˆ–è€…ä¸ç»æ„æ•²äº†å“ªä¸ªå­—ç¬¦å°±åˆ‡æ¢åˆ°åˆ«çš„<br>æ¨¡å¼å»äº†ã€‚</p>
<p>ä¸ç®¡ä½ å½“å‰æ‰€å¤„çš„æ¨¡ å¼æ˜¯ä»€ä¹ˆ,æŒ‰ä¸‹<Esc>éƒ½ä¼šè®©ä½ å›åˆ° Normal æ¨¡å¼(å³ä½¿å·²ç»åœ¨ Normal æ¨¡å¼ ä¸‹)ã€‚æœ‰æ—¶<br>éœ€è¦æŒ‰ä¸¤æ¬¡<Esc>,å¦‚æœ Vim ä»¥ä¸€å£°èœ‚é¸£å›ç­”ä½ , é‚£è¯´æ˜ä½ å·²ç» æ˜¯åœ¨ Normal æ¨¡å¼äº†ã€‚</p>
<h4 id="ç§»åŠ¨å…‰æ ‡"><a href="#ç§»åŠ¨å…‰æ ‡" class="headerlink" title="ç§»åŠ¨å…‰æ ‡"></a>ç§»åŠ¨å…‰æ ‡</h4><p>å›åˆ° Normal æ¨¡å¼å , ä½ å°±å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥ç§»åŠ¨å…‰æ ‡ :</p>
<ul>
<li>h å·¦</li>
<li>j ä¸‹</li>
<li>k ä¸Š</li>
<li>l å³</li>
</ul>
<p>äººä»¬ä¸€å¼€å§‹ä¼šè®¤ä¸ºè¿™äº›å­—ç¬¦æ˜¯éšæ„é€‰å–çš„ã€‚æ¯•ç«Ÿæœ‰è° l æ¥ä»£ è¡¨ right å‘¢ ? ä½†äº‹å®ä¸Š , è¿™äº›å­—ç¬¦éƒ½æ˜¯ç²¾å¿ƒæŒ‘é€‰çš„ :</p>
<p>åœ¨ç¼–è¾‘å™¨ä¸­ç§»åŠ¨å…‰ æ ‡æ˜¯ååˆ†å¸¸ç”¨çš„æ“ä½œ , è¿™äº›å­—ç¬¦åœ¨é”®ç›˜ä¸Šéƒ½åˆ†å¸ƒåœ¨ä½ å³æ‰‹å‘¨å›´ã€‚è¿™æ ·çš„å®‰ æ’å¯ä»¥ä½¿ä½ æœ€å¿«<br>æœ€æ–¹ä¾¿åœ°ä½¿ç”¨å®ƒä»¬ ( å°¤å…¶æ˜¯å¯¹é‚£äº›ç”¨åä¸ªæ‰‹æŒ‡è€Œä¸æ˜¯äºŒæŒ‡ ç¦…ç”¨æˆ·è€Œè¨€ ) ã€‚</p>
<p>å¤‡æ³¨ : åŒæ—¶ä½ è¿˜å¯ä»¥ç”¨ç®­å¤´é”®æ¥ç§»åŠ¨å…‰æ ‡ã€‚ä¸è¿‡è¿™æ ·åšå® é™…ä¸Šä¼šå¤§å¤§é™ä½ä½ çš„æ•ˆç‡ã€‚å› ä¸ºç”¨è¿™äº›é”®ä½ éœ€è¦ä¸<br>åœåœ°åœ¨ å­—æ¯åŒºå’Œç®­å¤´é”®ä¹‹é—´é¢‘ç¹è½¬æ¢ã€‚æƒ³è±¡ä¸€ä¸‹è¦æ˜¯ä½ åœ¨ä¸€å°æ—¶ å†…è¿™æ ·åšä¸€ç™¾æ¬¡ä¼šå ç”¨ä½ å¤šå°‘æ—¶é—´ ? å¦å¤– , å¹¶<br>ä¸æ˜¯æ¯ä¸ªé”® ç›˜ä¸Šéƒ½å®‰æ’æœ‰ç®­å¤´é”® , æˆ–è€…éƒ½æŠŠå®ƒä»¬æ”¾åœ¨æœ€å¸¸è§çš„ä½ç½® ; æ‰€ä»¥ä½¿ç”¨ hjkl è¿˜æ˜¯å¤§æœ‰å¥½å¤„ã€‚</p>
<p>ç»ƒä¹ æ–‡ä»¶åä½ hjkl ,æ”¾åœ¨å…±äº«å½“ä¸­ã€‚å¦‚æœè¿›å…¥äº†æ’å…¥æ¨¡å¼ä¸è¦å¿˜äº†è¦ç”¨ <Esc> å›åˆ° Normal æ¨¡ å¼ã€‚ |<br>vimtutor| ä¹Ÿæ˜¯å­¦ä¹ è¿™äº›å‘½ä»¤çš„ä¸€ä¸ªå¥½å»å¤„ã€‚</p>
<p>è®°ä½:å­¦ä¹ è¿™äº›å‘½ä»¤çš„æœ€å¥½åŠæ³•ä¸æ˜¯ä½¿ç”¨ä»€ä¹ˆè®°å¿†æ³• , è€Œæ˜¯ç»ƒä¹ ã€‚</p>
<h4 id="åˆ é™¤å­—ç¬¦"><a href="#åˆ é™¤å­—ç¬¦" class="headerlink" title="åˆ é™¤å­—ç¬¦"></a>åˆ é™¤å­—ç¬¦</h4><p>è¦åˆ é™¤ä¸€ä¸ªå­—ç¬¦,åªéœ€è¦å°†å…‰æ ‡ç§»åˆ°è¯¥å­—ç¬¦ä¸ŠæŒ‰ä¸‹â€xâ€. ( è¿™æ˜¯åœ¨è¿½ å¿†å¤è€çš„æ‰“å­—æœºæ—¶ä»£,åœ¨æ‰“å­—æœºä¸Šåˆ é™¤å­—<br>ç¬¦å°±æ˜¯ç”¨ xxxx æ¥è¦†ç›–å®ƒ) æŠŠå…‰æ ‡ ç§»åˆ°ä¸Šé¢ä¾‹å­ä¸­çš„ç¬¬ä¸€è¡Œ,é”®å…¥ xxxxxxx(7 ä¸ª x) æ¥åˆ é™¤â€A very â€œã€‚</p>
<p>è¾“å…¥å…¶å®ƒå†…å®¹<br>æ¯”å¦‚:é¦–å…ˆé”®å…¥çš„å‘½ä»¤æ˜¯ i( è¿› å…¥ Insert æ¨¡ å¼), æ¥ç€æ’å…¥â€A youngâ€, ç„¶å é€€ å‡º Insert æ¨¡å¼(æœ€åçš„<Esc>)ã€‚</p>
<p>åˆ é™¤ä¸€è¡Œ</p>
<p>åˆ é™¤ä¸€æ•´è¡Œå†…å®¹ä½¿ç”¨â€ddâ€å‘½ä»¤ã€‚åˆ é™¤åä¸‹é¢çš„è¡Œä¼šç§»ä¸Šæ¥å¡«è¡¥ç©ºç¼º:2.1.5 æ’¤æ¶ˆä¸é‡åš</p>
<p>æ’¤é”€ä¸€æ¬¡æ“ä½œ</p>
<p>å¦‚æœä½ è¯¯åˆ äº†è¿‡å¤šçš„å†…å®¹ã€‚æ˜¾ç„¶ä½ å¯ä»¥å†è¾“å…¥ä¸€é,ä½†æ˜¯å‘½ä»¤â€uâ€ æ›´ ç®€ä¾¿, å®ƒå¯ä»¥æ’¤æ¶ˆä¸Šä¸€æ¬¡çš„æ“ä½œ 1 ã€‚<br>å®é™…çœ‹ä¸€ä¸‹å®ƒçš„æ•ˆæœ,ç”¨â€ddâ€ å‘½ä»¤æ¥ åˆ é™¤å‰é¢ä¾‹å­ä¸­çš„ç¬¬ä¸€è¡Œå†…å®¹,â€uâ€å‘½ä»¤ä¼šæŠŠå®ƒæ‰¾å›æ¥ã€‚</p>
<p>é‡åš<br>å¦‚æœä½ æ’¤æ¶ˆäº†å¤šæ¬¡,ä½ è¿˜å¯ä»¥ç”¨ CTRL-R(é‡åš) æ¥åè½¬æ’¤æ¶ˆçš„åŠ¨ä½œã€‚æ¢ å¥è¯è¯´,å®ƒæ˜¯å¯¹æ’¤æ¶ˆçš„æ’¤æ¶ˆã€‚</p>
<p>æ’¤é”€ä¸€è¡Œæ“ä½œ</p>
<p>æ’¤æ¶ˆå‘½ä»¤è¿˜æœ‰å¦ä¸€ç§å½¢å¼,â€Uâ€å‘½ä»¤, å®ƒä¸€æ¬¡æ’¤æ¶ˆå¯¹ä¸€è¡Œçš„å…¨éƒ¨æ“ä½œã€‚ç¬¬ äºŒæ¬¡ä½¿ç”¨è¯¥å‘½ä»¤åˆ™ä¼šæ’¤æ¶ˆå‰ä¸€<br>ä¸ªâ€Uâ€çš„æ“ä½œã€‚</p>
<ul>
<li>åˆ é™¤ very</li>
<li>åˆ é™¤ turtle</li>
<li>ç”¨â€uâ€æ’¤æ¶ˆâ€Uâ€</li>
<li>ç”¨â€Uâ€ æ¢å¤è¯¥è¡Œ</li>
</ul>
<p>â€œUâ€å‘½ä»¤æœ¬èº«ä¹Ÿé€ æˆäº†ä¸€æ¬¡æ”¹å˜,è¿™ç§æ”¹å˜åŒæ ·å¯ä»¥ç”¨â€uâ€ å‘½ä»¤ å’Œ CTRL-R æ¥æ’¤æ¶ˆå’Œé‡åšã€‚çœ‹èµ·æ¥è¿™å¾ˆå®¹æ˜“<br>æŠŠäººæç³Šæ¶‚,ä¸è¿‡åˆ«æ‹…å¿ƒ, ç”¨â€uâ€å’Œ CTRL-R ä½ å¯ä»¥æ‰¾å›ä»»ä½•ä¸€ä¸ªæ“ä½œçŠ¶æ€ã€‚</p>
<h4 id="å…¶å®ƒç¼–è¾‘å‘½ä»¤"><a href="#å…¶å®ƒç¼–è¾‘å‘½ä»¤" class="headerlink" title="å…¶å®ƒç¼–è¾‘å‘½ä»¤"></a>å…¶å®ƒç¼–è¾‘å‘½ä»¤</h4><p>Vim æœ‰ä¸€å¤§å †å‘½ä»¤æ¥æ”¹å˜æ–‡æœ¬ã€‚è¿™é‡Œä»…åˆ— å‡ºä¸€äº›æœ€å¸¸ç”¨çš„ã€‚</p>
<p>è¿½åŠ  a</p>
<p>â€œiâ€ å‘½ä»¤å¯ä»¥åœ¨å½“å‰å…‰æ ‡ä¹‹å‰æ’å…¥æ–‡æœ¬ã€‚ä½†å¦‚æœä½ æƒ³åœ¨å½“å‰è¡Œçš„æœ«å°¾ æ·»åŠ ä¸€äº›å†…å®¹æ—¶æ€ä¹ˆåŠå‘¢?ä½ å¿…éœ€åœ¨å…‰<br>æ ‡ä¹‹åæ’å…¥æ–‡æœ¬ã€‚ç­”æ¡ˆæ˜¯ç”¨â€aâ€ å‘½ ä»¤æ¥ä»£æ›¿â€iâ€ã€‚</p>
<p>å¦èµ·ä¸€è¡Œ o\O</p>
<ol>
<li>â€œoâ€å‘½ä»¤å¯ä»¥åœ¨å½“å‰è¡Œçš„ä¸‹é¢å¦èµ·ä¸€è¡Œ,å¹¶ä½¿å½“å‰æ¨¡å¼è½¬ä¸º Insert æ¨¡ å¼ã€‚è¿™æ ·ä½ å¯ä»¥åœ¨è¯¥å‘½ä»¤ä¹‹åç›´æ¥è¾“<br>å…¥å†…å®¹ã€‚å‡è®¾å…‰æ ‡ä½äºä¸‹é¢ä¸¤è¡Œä¸­ç¬¬ ä¸€è¡Œçš„æŸå¤„:</li>
<li>â€œOâ€å‘½ä»¤(æ³¨æ„æ˜¯å¤§å†™çš„å­—æ¯ O)å°†åœ¨å½“å‰è¡Œçš„ä¸Šé¢å¦èµ·ä¸€è¡Œã€‚</li>
</ol>
<p>ä½¿ç”¨å‘½ä»¤è®¡æ•°</p>
<p>å‡è®¾ä½ è¦å‘ä¸Šç§»åŠ¨ 9 è¡Œã€‚è¿™å¯ä»¥ç”¨â€kkkkkkkkkâ€æˆ–â€9kâ€ æ¥å®Œæˆã€‚äº‹å® ä¸Š,å¾ˆå¤šå‘½ä»¤éƒ½å¯ä»¥æ¥å—ä¸€ä¸ªæ•°å­—ä½œ<br>ä¸ºé‡å¤æ‰§è¡ŒåŒä¸€å‘½ä»¤çš„æ¬¡æ•°ã€‚æ¯”å¦‚åˆš æ‰çš„ä¾‹å­,è¦åœ¨è¡Œå°¾è¿½åŠ ä¸‰ä¸ªæ„Ÿå¹å·,å½“æ—¶ç”¨çš„å‘½ä»¤æ˜¯â€a!!!<Esc>â€œã€‚<br>å¦ ä¸€ä¸ªåŠæ³•æ˜¯ç”¨â€3a!<Esc>â€œå‘½ä»¤ã€‚</p>
<p>3 è¯´æ˜è¯¥å‘½ä»¤å°†è¢«é‡å¤æ‰§è¡Œ 3 æ¬¡ã€‚åŒæ ·, åˆ  é™¤ 3 ä¸ªå­—ç¬¦å¯ä»¥ç”¨â€3xâ€ã€‚æŒ‡<br>å®šçš„æ•°å­—è¦ç´§æŒ¨åœ¨å®ƒæ‰€è¦ä¿®é¥°çš„å‘½ä»¤å‰é¢ã€‚</p>
<h4 id="é€€å‡º"><a href="#é€€å‡º" class="headerlink" title="é€€å‡º"></a>é€€å‡º</h4><p>è¦é€€å‡º Vim,ç”¨å‘½ä»¤â€ZZâ€ã€‚è¯¥å‘½ä»¤ä¿å­˜å½“å‰æ–‡ä»¶å¹¶é€€å‡º Vim.</p>
<p>æ”¾å¼ƒç¼–è¾‘ :q!</p>
<p>æœ‰æ—¶ä½ ä¼šåœ¨åšäº†ä¸€è¿ä¸²ä¿®æ”¹ä¹‹åçªç„¶æ„è¯†åˆ°æœ€å¥½æ˜¯æ”¾å¼ƒæ‰€æœ‰çš„ä¿®æ”¹é‡ æ–°æ¥è¿‡ã€‚åˆ«æ‹…å¿ƒã€‚Vim ä¸­æœ‰ä¸€ä¸ªå‘½ä»¤å¯<br>ä»¥ä¸¢å¼ƒæ‰€æœ‰çš„ä¿®æ”¹å¹¶é€€å‡º:<br>:q!<br>åˆ«å¿˜äº†åœ¨å‘½ä»¤ä¹‹ååŠ å›è½¦ã€‚</p>
<p>æ”¾å¼ƒç¼–è¾‘å¹¶é‡æ–°è½½å…¥ :e!</p>
<p>å¦‚æœä½ åœ¨æ”¾å¼ƒæ‰€æœ‰ä¿®æ”¹åè¿˜æƒ³ä»¥è¯¥æ–‡ä»¶çš„åˆå§‹å†…å®¹ä½œä¸ºå¼€å§‹ç»§ç»­ç¼– è¾‘,è¿˜å¯ä»¥ç”¨â€:e!â€å‘½ä»¤æ”¾å¼ƒæ‰€æœ‰ä¿®æ”¹å¹¶<br>é‡æ–°è½½å…¥è¯¥æ–‡ä»¶çš„åŸå§‹å†…å®¹ã€‚</p>
<p>ä¿å­˜å¹¶é€€å‡º:wq :wq!</p>
<p>ä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯éœ€è¦ä¿å­˜å¹¶é€€å‡ºçš„,æœ‰ä¸€äº›æ–‡ä»¶ä¿å­˜çš„æ—¶å€™éœ€è¦å¼ºåˆ¶ä¿å­˜é€€å‡º,è¿™æ—¶åŠ ä¸Š!å³å¯ã€‚æ¯”<br>å¦‚/etc/shadow2.1.8 æ±‚åŠ©</p>
<p>ä½ æƒ³åšçš„ä»»ä½•æ“ä½œéƒ½å¯ä»¥åœ¨ Vim çš„å¸®åŠ©æ–‡ä»¶é‡Œæ‰¾åˆ°ç­”æ¡ˆ, åˆ«æ€•é—®é—® é¢˜!<br>:help</p>
<p>ä¼šå¸¦ä½ åˆ°å¸®åŠ©æ–‡ä»¶çš„èµ·å§‹ç‚¹ã€‚</p>
<p>å¦‚æœä½ æ²¡æœ‰æŒ‡å®šä¸€ä¸ªå…·ä½“çš„å¸®åŠ©ä¸»é¢˜,â€:helpâ€ å‘½ä»¤ä¼šæ˜¾ç¤ºä¸Šé¢æåˆ° çš„å¸®åŠ©æ–‡ä»¶çš„èµ·ç‚¹ã€‚Vim çš„ä½œè€…èªæ˜åœ°<br>(ä¹Ÿè®¸æ˜¯æ‡’æƒ°åœ°) è®¾è®¡äº†å®ƒçš„å¸®åŠ©ç³» ç»Ÿ: å¸®åŠ©çª—å£ä¹Ÿæ˜¯ä¸€ä¸ªæ™®é€šçš„ç¼–è¾‘çª—å£ã€‚ä½ å¯ä»¥ä½¿ç”¨è·Ÿç¼–è¾‘å…¶å®ƒæ–‡ä»¶æ—¶ä¸€<br>æ ·çš„å‘½ä»¤æ¥æ“ä½œå¸®åŠ©æ–‡ä»¶ã€‚æ¯”å¦‚ç”¨ hljk ç§»åŠ¨å…‰æ ‡ã€‚</p>
<p>é€€å‡ºå¸®åŠ©çª—å£ä¹Ÿè·Ÿé€€å‡ºå…¶å®ƒæ–‡ä»¶ç¼–è¾‘çª—å£ä¸€æ ·,ä½¿ç”¨â€ZZâ€ å³å¯ã€‚è¿™åª ä¼šå…³é—­å¸®åŠ©çª—å£,è€Œä¸æ˜¯é€€å‡º Vim.<br>æµè§ˆå¸®åŠ©æ–‡ä»¶æ—¶,ä½ ä¼šæ³¨æ„åˆ°æœ‰ä¸€äº›å†…å®¹ç”¨ä¸¤ä¸ªå°æ …æ å›´äº†èµ·æ¥( æ¯” å¦‚|help|)ã€‚è¿™è¡¨æ˜æ­¤å¤„æ˜¯ä¸€ä¸ªè¶…é“¾æ¥ã€‚<br>å¦‚æœä½ æŠŠå…‰æ ‡ç½®äºä¸¤ä¸ªå°æ …æ ä¹‹é—´çš„ä»»ä½•ä½ç½®ç„¶åæŒ‰ä¸‹ CTRL-](è·³è½¬åˆ°ä¸€ä¸ªæ ‡ç­¾çš„å‘½ä»¤),å¸®åŠ©ç³»ç»Ÿå°±ä¼šå¸¦<br>ä½  åˆ°é‚£ä¸ªæŒ‡å®šçš„ä¸»é¢˜ã€‚(å› ä¸ºä¸€äº›æ­¤å¤„ä¸ä¾¿è®¨è®ºçš„åŸå› ,åœ¨ Vim çš„æœ¯è¯­ä¸­è¿™ç§ è¶…é“¾æ¥å«æ ‡ç­¾ã€‚æ‰€ä»¥ CTRL-]<br>å¯ä»¥è·³è½¬åˆ°å½“å‰å…‰æ ‡ä¹‹ä¸‹çš„é‚£ä¸ª word æ‰€å¯¹åº”çš„ é“¾æ¥ä¸­ 1 ã€‚</p>
<p>å‡ æ¬¡è·³è½¬ä¹‹å,ä½ å¯èƒ½æƒ³å›åˆ°åŸæ¥çš„æŸä¸ªåœ°æ–¹,CTRL-T(å¼¹å‡ºæ ‡ç­¾) å¯ ä»¥å›åˆ°å‰ä¸€ä¸ªä½ç½®ã€‚ç”¨å‘½ä»¤ CTRL-<br>O(è·³è½¬åˆ°è¾ƒæ—©çš„ä½ç½®) ä¹Ÿå¯ä»¥ã€‚ å¸®åŠ©çª—å£çš„å¼€å§‹æœ‰ä¸€ä¸ªå…³äº<em>help.txt*çš„è¯´æ˜ã€‚åœ¨æ˜Ÿå·â€</em>â€œ ä¹‹é—´çš„å­— ç¬¦è¢«<br>å¸®åŠ©ç³»ç»Ÿå®šä¹‰ä¸ºä¸€ä¸ªæ ‡ç­¾çš„ç›®çš„åœ°(è¶…é“¾æ¥çš„ç›®çš„åœ°).</p>
<p>è¦æŸ¥çœ‹å…³äºæŸä¸ªç‰¹æ®Šä¸»é¢˜çš„å¸®åŠ©,ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å½¢å¼:<br><code>:help {subject}</code></p>
<p>ä¾‹å¦‚,æŸ¥çœ‹å…³äº showmode çš„å¸®åŠ©<br><code>:help showmode3.2 æ”¹åŠ¨</code></p>
<h4 id="å…‰æ ‡çš„æŒ‡å®šç§»åŠ¨"><a href="#å…‰æ ‡çš„æŒ‡å®šç§»åŠ¨" class="headerlink" title="å…‰æ ‡çš„æŒ‡å®šç§»åŠ¨"></a>å…‰æ ‡çš„æŒ‡å®šç§»åŠ¨</h4><p>â€œGâ€å‘½ä»¤ æŒ‡å®šä¸€ ä¸ªå‘½ä»¤è®¡æ•°, è¿™ä¸ªå‘½ä»¤å°±ä¼šæŠŠå…‰æ ‡å®šä½åˆ°ç”±å‘½ä»¤è®¡æ•°æŒ‡å®šçš„è¡Œä¸Šã€‚æ¯” å¦‚â€33Gâ€å°±ä¼šæŠŠå…‰æ ‡<br>ç½®äºç¬¬ 33 è¡Œä¸Šã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@mastera0 ~]# cp /var/log/messages messages</span><br><span class="line">[root@mastera0 ~]# vim messages</span><br></pre></td></tr></table></figure>

<p>æ²¡æœ‰æŒ‡å®šå‘½ä»¤è®¡æ•°ä½œä¸ºå‚æ•°çš„è¯ :</p>
<ul>
<li>â€œGâ€ ä¼š æŠŠ å…‰ æ ‡ å®š ä½ åˆ° æœ€ å ä¸€ è¡Œ ä¸Š</li>
<li>â€œggâ€å‘½ä»¤æ˜¯è·³è½¬åˆ°ç¬¬ä¸€è¡Œçš„å¿«æ·çš„æ–¹æ³•ã€‚â€1Gâ€æ•ˆæœä¹Ÿæ˜¯ä¸€æ ·, ä½†æ˜¯æ•² èµ·æ¥å°±æ²¡é‚£ä¹ˆé¡ºæ‰‹äº†ã€‚</li>
<li>â€œ%â€å‘½ä»¤ å¦ä¸€ä¸ªç§»åŠ¨åˆ°æŸè¡Œçš„æ–¹æ³•æ˜¯åœ¨å‘½ä»¤â€%â€ ä¹‹å‰æŒ‡å®šä¸€ä¸ªå‘½ä»¤è®¡æ•° ã€‚ å¦‚â€50%â€å°†ä¼šæŠŠå…‰æ ‡å®šä½åœ¨æ–‡ä»¶çš„ä¸­é—´;æ¯”â€90%â€ è·³åˆ°æ¥æ–‡ä»¶å°¾çš„åœ° æ–¹ ã€‚</li>
</ul>
<h4 id="ç®€å•æœç´¢"><a href="#ç®€å•æœç´¢" class="headerlink" title="ç®€å•æœç´¢"></a>ç®€å•æœç´¢</h4><p>â€œ/stringâ€å‘½ä»¤</p>
<p>â€œ/stringâ€å‘½ä»¤å¯ç”¨äºæœç´¢ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚æ¯”å¦‚è¦æ‰¾åˆ°å•è¯â€mysqlâ€, ä½¿ç”¨å‘½ä»¤:<br><code>/mysql</code></p>
<p>è¦æŸ¥æ‰¾ä¸Šæ¬¡æŸ¥æ‰¾çš„å­—ç¬¦ä¸²çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚ä½¿ç”¨â€nâ€ å‘½ä»¤ã€‚å¦‚æœä½ çŸ¥ é“ä½ è¦æ‰¾çš„ç¡®åˆ‡ä½ç½®æ˜¯ç›®æ ‡å­—ç¬¦ä¸²çš„ç¬¬å‡ <br>æ¬¡å‡ºç°,è¿˜å¯ä»¥åœ¨â€nâ€ ä¹‹å‰æ”¾ç½® ä¸€ä¸ªå‘½ä»¤è®¡æ•°ã€‚â€3nâ€ä¼šå»æŸ¥æ‰¾ç›®æ ‡å­—ç¬¦ä¸²çš„ç¬¬ 3 æ¬¡å‡ºç°ã€‚å‘å…‰æ ‡æ‰€åœ¨ä½ç½®ä»¥<br>ä¸ŠæŸ¥æ‰¾ç”¨â€Nâ€ã€‚</p>
<p>â€œ?stringâ€å‘½ä»¤</p>
<p>â€œ?â€å‘½ä»¤ä¸â€/â€œçš„å·¥ä½œç›¸åŒ,åªæ˜¯æœç´¢æ–¹å‘ç›¸åã€‚æ¯”å¦‚è¦æ‰¾åˆ°å•è¯â€mysqlâ€, ä½¿ç”¨å‘½ä»¤:<br><code>?mysqlå¿½ç•¥å¤§å°å†™</code></p>
<p>é€šå¸¸æƒ…å†µä¸‹ä½ è¦å‡†ç¡®åœ°é”®å…¥ä½ è¦æŸ¥æ‰¾çš„ä¸œè¥¿ã€‚å¦‚æœä½ å¹¶ä¸å…³å¿ƒç›®æ ‡å­— ç¬¦ä¸­å­—æ¯çš„å¤§å°å†™,å¯ä»¥é€šè¿‡è®¾<br>ç½®â€™ignorecaseâ€™é€‰é¡¹:<br><code>:set ignorecase</code></p>
<p>å–æ¶ˆåˆ™è®¾ç½®â€™noignorecaseâ€™é€‰é¡¹:<br><code>:set noignorecase</code></p>
<p>å¦‚æœä½ åœ¨ç¼–è¾‘ä¸€æ®µæºç¨‹åºæ—¶çœ‹åˆ°äº†ä¸€ä¸ªå«â€nrâ€ çš„å˜é‡ã€‚ä½ æƒ³æŸ¥çœ‹ä¸€ ä¸‹è¿™ä¸ªå˜é‡å°±è¢«ç”¨åœ¨äº†å“ªäº›åœ°æ–¹ã€‚ç®€å•<br>çš„åŠæ³•æ˜¯æŠŠå…‰æ ‡ç§»åˆ°â€nrâ€ ä¸Šç„¶å ç”¨â€*â€ å‘½ä»¤å’Œâ€nâ€ å‘½ä»¤ä¸€ä¸ªä¸€ä¸ªåœ°æŸ¥æ‰¾æ‰€æœ‰çš„åŒ¹é…ã€‚<br>ä¸è¿‡è¿˜æœ‰æ›´å¥½çš„åŠæ³•ã€‚ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤:<br><code>:set hlsearch</code></p>
<p>ç°åœ¨ä½ è¦å†æŸ¥æ‰¾â€nrâ€, Vim å°±ä¼šä»¥æŸç§å½¢å¼é«˜äº®æ˜¾ç¤ºæ‰€æœ‰ç¬¦åˆçš„åŒ¹é…ã€‚å¯¹ äºæƒ³æŸ¥çœ‹ä¸€ä¸ªå˜é‡è¢«ç”¨åœ¨å“ªäº›åœ°<br>æ–¹,è¿™ä¸ªåŠæ³•å¤ªæ£’äº†, ä¸éœ€ä»»ä½•å…¶å®ƒçš„å‘½ ä»¤ çœ‹å¾—çœ¼èŠ±çš„æ—¶å€™è¿˜å¯ä»¥å…³é—­è¿™ä¸€åŠŸèƒ½:<br><code>:set nohlsearch</code></p>
<p>ä¸è¿‡ä½ è¦åœ¨ä¸‹æ¬¡æœç´¢æ—¶å†æ¬¡ä½¿ç”¨è¿™ä¸€åŠŸèƒ½å°±åˆå¾—æ‰“å¼€å®ƒã€‚å¦‚æœä½ åªæ˜¯æƒ³å» æ‰å½“å‰çš„é«˜äº®æ˜¾ç¤º,å¯ä»¥ä½¿ç”¨ä¸‹é¢<br>çš„å‘½ä»¤ :<br><code>:nohlsearch</code></p>
<h4 id="å¤åˆ¶ç²˜è´´"><a href="#å¤åˆ¶ç²˜è´´" class="headerlink" title="å¤åˆ¶ç²˜è´´"></a>å¤åˆ¶ç²˜è´´</h4><p>è¦æŠŠæ–‡æœ¬å†…å®¹ä»ä¸€å¤„å¤åˆ¶åˆ°å¦ä¸€å¤„</p>
<ol>
<li>å…ˆåˆ é™¤ dd å†ç²˜è´´ p</li>
<li>â€œyâ€ æ“ä½œç¬¦å‘½ä»¤ä¼šæŠŠæ–‡æœ¬å¤åˆ¶åˆ°ä¸€ä¸ªå¯„å­˜å™¨ ä¸­ã€‚ç„¶åå¯ä»¥ç”¨â€pâ€å‘½ä»¤æŠŠå®ƒå–å›ã€‚</li>
</ol>
<p>â€œyâ€å‘½ä»¤</p>
<ul>
<li>â€œywâ€æ¥å¤åˆ¶ä¸€ä¸ª word;</li>
<li>â€œy2wâ€å‘½ä»¤å¤åˆ¶ä¸¤ä¸ª word;</li>
<li>â€œyyâ€å¤åˆ¶ä¸€è¡Œ;</li>
<li>â€œ3yyâ€å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œå’Œå‘ä¸‹çš„è¡Œ,ä¸€å…±ä¸‰è¡Œ;</li>
</ul>
<p>ä¾‹å¦‚:</p>
<ol>
<li>å¤åˆ¶ file æ–‡ä»¶ä¸­çš„ turtle å¹¶ç²˜è´´åˆ°è¯¥è¡Œçš„æœ€å;</li>
<li>å¤åˆ¶ file æ–‡ä»¶ä¸­çš„ intelligent turtle å¹¶ç²˜è´´åˆ°è¯¥è¡Œçš„æœ€å;</li>
<li>å¤åˆ¶ file æ–‡ä»¶ä¸­çš„ç¬¬äºŒè¡Œå¹¶ç²˜è´´åˆ°ç¬¬å››è¡Œ;</li>
<li>å¤åˆ¶ file æ–‡ä»¶ä¸­çš„ç¬¬ä¸€è¡Œç¬¬äºŒè¡Œç¬¬ä¸‰è¡Œ,å¹¶ç²˜è´´åˆ°ç¬¬äº”è¡Œç¬¬å…­è¡Œç¬¬ä¸ƒè¡Œã€‚</li>
</ol>
<h4 id="æ›¿æ¢å­—ç¬¦"><a href="#æ›¿æ¢å­—ç¬¦" class="headerlink" title="æ›¿æ¢å­—ç¬¦"></a>æ›¿æ¢å­—ç¬¦</h4><ul>
<li>:s/UNIX/linux å¯¹å…‰æ ‡æ‰€åœ¨è¡Œç¬¬ä¸€ä¸ªå‡ºç°çš„ UNIX æ›¿æ¢æˆ linux</li>
<li>:s/UNIX/linux /g å¯¹å…‰æ ‡æ‰€åœ¨è¡Œæ‰€æœ‰ UNIX éƒ½æ›¿æ¢æˆ linux , g è¡¨ç¤ºå…¨è¡Œæ›¿æ¢</li>
<li>:% s/UNIX/linux /g å°†å…¨æ–‡ä¸­çš„ carol éƒ½æ›¿æ¢ä½ natasha , â€œ%â€ æŒ‡å®šè¯¥å‘½ä»¤å°†ä½œç”¨äºæ‰€æœ‰è¡Œä¸Š</li>
</ul>
<h3 id="Vim-çš„ä¿æŠ¤æœºåˆ¶"><a href="#Vim-çš„ä¿æŠ¤æœºåˆ¶" class="headerlink" title="Vim çš„ä¿æŠ¤æœºåˆ¶"></a>Vim çš„ä¿æŠ¤æœºåˆ¶</h3><p>å¦‚æœæˆ‘ä»¬æ²¡æœ‰é€šè¿‡ q é€€å‡º,è€Œæ˜¯é€šè¿‡å…¶ä»–æ–¹å¼å¼ºè¡Œé€€å‡º,æ¯”å¦‚è¯´ç›´æ¥å…³ç»ˆç«¯,ä¼šå¯¼è‡´ vim çš„ä¸€ä¸ªæŠ¥é”™,å½“æˆ‘<br>ä»¬ä¸‹æ¬¡æ‰“å¼€è¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™,ä¼šæç¤º<br><code>Found a swap file by the name &quot;.file.swp&quot;</code></p>
<p>è¿™æ˜¯å› ä¸º vim ä»–ä¸æ˜¯å®æ—¶å†™å…¥çš„æœºåˆ¶,ä»–ä¼šå…ˆæŠŠæ–‡ä»¶å†™åˆ°å†…å­˜,ç­‰æˆ‘ä»¬æ‰§è¡Œ w æ“ä½œä»¥å,å†å†™å›åˆ°åŸæ–‡ä»¶ã€‚<br>é‚£ä¹ˆåœ¨å†™å›åŸæ–‡ä»¶,æˆ–è€…æ‰§è¡Œ q çš„æ”¾å¼ƒæ“ä½œä¹‹å‰,ä¼šç”Ÿæˆä¸€ä¸ªä¸´æ—¶çš„æ–‡ä»¶,ä»¥ . å¼€å¤´, swp ç»“å°¾ã€‚å½“æˆ‘ä»¬çœ‹<br>åˆ°è¿™ç§æƒ…å†µ,å°±è¯´æ˜è¿™ä¸ªæ–‡ä»¶æ˜¯åœ¨å˜ç¼–è¾‘çš„è¿‡ç¨‹ä¸­å¼ºåˆ¶é€€å‡ºçš„,æˆ–è€…æ˜¯æ­£åœ¨è¢«äººç¼–è¾‘ã€‚</p>
<p>æ‰€ä»¥è¿™ä¸ªæ–‡ä»¶çš„ä½œç”¨å°±æ˜¯é˜²æ­¢å¼ºåˆ¶é€€å‡ºé€ æˆçš„æ•°æ®å®‰å…¨éšæ‚£,å’Œé˜²æ­¢æ–‡ä»¶åŒæ—¶è¢«å¤šæ¬¡ä¿®æ”¹ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Swap file ".file.swp" already exists!</span><br><span class="line">[O]pen Read-Only, (E)dit anyway, (R)ecover, (D)elete it, (Q)uit, (A)bort:</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥æ ¹æ®ä»–çš„æç¤ºæ‰§è¡Œç›¸åº”çš„æ“ä½œ,æ¯”å¦‚è¯´ Q ,é€€å‡ºã€‚å¦‚æœæƒ³è¦é¡ºåˆ©ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶çš„è¯,ä¸€æ–¹é¢å¯ä»¥ä½¿<br>ç”¨ E ,æ— è®ºå¦‚ä½•ä¹Ÿè¦ç¼–è¾‘,æˆ–è€…å…ˆé€€å‡º,æŠŠ swp æ–‡ä»¶åˆ é™¤äº†ä»¥åå†ç¼–è¾‘,ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<p>æ³¨æ„:è¦ä½¿ç”¨ vim éœ€è¦æ³¨æ„ä¸€ä¸‹æƒé™é—®é¢˜,å¿…é¡»è¦æœ‰è¯»å†™æƒé™æ‰èƒ½ä½¿ç”¨ vim ã€‚</p>
<p>å¯ä»¥çœ‹ä¸€ä¸‹æ²¡æœ‰å†™æƒé™å’Œæ²¡æœ‰è¯»æƒé™ä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ã€‚</p>
<hr>
<h2 id="Vim-ç¼–è¾‘å™¨è¯¾åä½œä¸š"><a href="#Vim-ç¼–è¾‘å™¨è¯¾åä½œä¸š" class="headerlink" title="Vim ç¼–è¾‘å™¨è¯¾åä½œä¸š"></a>Vim ç¼–è¾‘å™¨è¯¾åä½œä¸š</h2><ol>
<li>å¤åˆ¶<code>/etc/sysconfig/network-scripts/ifcfg-eth0</code>çš„é…ç½®æ–‡ä»¶ä½/tmp/test</li>
<li>ä½¿ç”¨vimç¼–è¾‘è¯¥æ–‡ä»¶ï¼Œç»ƒä¹ ä¸åŒæ¨¡å¼çš„åˆ‡æ¢ï¼Œå°¤å…¶æ˜¯æ­£å¸¸å˜æ’å…¥æ¨¡å¼çš„å‡ ç§ç”¨æ³•</li>
<li>ç»ƒä¹ ä¿å­˜çš„å‡ ç§å‘½ä»¤ï¼ŒåŒ…æ‹¬ä¿å­˜é€€å‡ºï¼Œä¸ä¿å­˜é€€å‡ºã€‚</li>
<li>vimç»ƒä¹ æ¸¸æˆ<br> vimå¤§å†’é™©å®˜ç½‘    vim-adventures.com</li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯åŸ¹è®­</category>
        <category>Linuxç³»ç»ŸåŸºç¡€åŸ¹è®­</category>
      </categories>
      <tags>
        <tag>åŸ¹è®­</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux æ–‡ä»¶ç³»ç»Ÿå’Œç£ç›˜ç®¡ç†</title>
    <url>/2016/12/22/booboo_linux_base/09-Linux%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%92%8C%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<h2 id="æ–‡ä»¶ç³»ç»Ÿ"><a href="#æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿ"></a>æ–‡ä»¶ç³»ç»Ÿ</h2><h3 id="èµ„æºè™šæ‹ŸåŒ–"><a href="#èµ„æºè™šæ‹ŸåŒ–" class="headerlink" title="èµ„æºè™šæ‹ŸåŒ–"></a>èµ„æºè™šæ‹ŸåŒ–</h3><p><img src="pic/20.png" alt="20"></p>
<p>Linuxæ“ä½œç³»ç»Ÿå†…æ ¸ç”±6ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li>è¿›ç¨‹è°ƒåº¦ä¸ç®¡ç†</li>
<li>ä¸»å­˜ç®¡ç†å’Œè™šå­˜ç®¡ç†</li>
<li>VFSå’Œæ–‡ä»¶ç®¡ç†</li>
<li>è®¾å¤‡ç®¡ç†</li>
<li>ç½‘ç»œæ¥å£å’Œé€šä¿¡</li>
<li>ç”¨æ¥å®ç°èµ„æºæŠ½è±¡</li>
<li>èµ„æºåˆ†é…å’Œèµ„æºå…±äº«ç­‰åŠŸèƒ½ã€‚</li>
</ul>
<h3 id="æ–‡ä»¶ç³»ç»Ÿçš„æ¦‚å¿µ"><a href="#æ–‡ä»¶ç³»ç»Ÿçš„æ¦‚å¿µ" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿçš„æ¦‚å¿µ"></a>æ–‡ä»¶ç³»ç»Ÿçš„æ¦‚å¿µ</h3><p>æ“ä½œç³»ç»Ÿä¸­è´Ÿè´£ç®¡ç†å’Œå­˜å‚¨æ–‡ä»¶ä¿¡æ¯çš„è½¯ä»¶æœºæ„ç§°ä¸ºæ–‡ä»¶ç®¡ç†ç³»ç»Ÿï¼Œç®€ç§°æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<p>ä»ç³»ç»Ÿè§’åº¦æ¥çœ‹ï¼Œæ–‡ä»¶ç³»ç»Ÿæ˜¯å¯¹æ–‡ä»¶å­˜å‚¨è®¾å¤‡çš„ç©ºé—´è¿›è¡Œç»„ç»‡å’Œåˆ†é…ï¼Œè´Ÿè´£æ–‡ä»¶å­˜å‚¨å¹¶å¯¹å­˜å…¥çš„æ–‡ä»¶è¿›è¡Œä¿æŠ¤å’Œæ£€ç´¢çš„ç³»ç»Ÿã€‚</p>
<p>å…·ä½“åœ°è¯´ï¼Œå®ƒè´Ÿè´£ä¸ºç”¨æˆ·å»ºç«‹æ–‡ä»¶ï¼Œå­˜å…¥ã€è¯»å‡ºã€ä¿®æ”¹ã€è½¬å‚¨æ–‡ä»¶ï¼Œæ§åˆ¶æ–‡ä»¶çš„å­˜å–ï¼Œå½“ç”¨æˆ·ä¸å†ä½¿ç”¨æ—¶æ’¤é”€æ–‡ä»¶ç­‰ã€‚</p>
<h3 id="æ–‡ä»¶ç³»ç»Ÿçš„ç±»å‹"><a href="#æ–‡ä»¶ç³»ç»Ÿçš„ç±»å‹" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿçš„ç±»å‹"></a>æ–‡ä»¶ç³»ç»Ÿçš„ç±»å‹</h3><p>æŸ¥çœ‹ç³»ç»Ÿæ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿ<br><code>ls /lib/modules/$(uname -r)/kernel/fs</code></p>
<p>ç³»ç»Ÿç›®å‰å·²åŠ è½½åˆ°å†…å­˜ä¸­æ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿ<br><code>more /proc/filesystems</code></p>
<h3 id="æ–‡ä»¶ç³»ç»Ÿçš„ç»“æ„"><a href="#æ–‡ä»¶ç³»ç»Ÿçš„ç»“æ„" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿçš„ç»“æ„"></a>æ–‡ä»¶ç³»ç»Ÿçš„ç»“æ„</h3><p>ç´¢å¼•å¼æ–‡ä»¶ç³»ç»Ÿ(indexed allocation)</p>
<p><img src="pic/21.png" alt="21"></p>
<p>æ–‡ä»¶ç³»ç»Ÿå†…çš„ä¿¡æ¯ä¸»è¦æœ‰:</p>
<ul>
<li>superblock:è®°å½•filesystemçš„æ•´ä½“ä¿¡æ¯,åŒ…æ‹¬ inode/blockçš„æ€»é‡ã€ä½¿ç”¨é‡ã€å‰©ä½™é‡, ä»¥åŠæ–‡ä»¶ç³»ç»Ÿçš„æ ¼å¼ç­‰;</li>
<li>inode:è®°å½•æ–‡ä»¶å±æ€§,ä¸€ä¸ªæ–‡ä»¶å ä¸€ä¸ªinode,åŒæ—¶è®°å½•è¯¥æ–‡ä»¶æ•°æ®æ‰€åœ¨çš„block å·ç ;</li>
<li>block:å®é™…è®°å½•æ–‡ä»¶çš„å†…å®¹,è‹¥æ¡£æ¡ˆå¤ªå¤§æ—¶,ä¼šå ç”¨å¤šä¸ª block</li>
</ul>
<h3 id="æ–‡ä»¶ç³»ç»Ÿçš„åŒºåˆ«"><a href="#æ–‡ä»¶ç³»ç»Ÿçš„åŒºåˆ«" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿçš„åŒºåˆ«"></a>æ–‡ä»¶ç³»ç»Ÿçš„åŒºåˆ«</h3><p>rhel6</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel6 ~]# mkfs</span><br><span class="line">mkfs          mkfs.ext2     mkfs.ext4     mkfs.msdos    </span><br><span class="line">mkfs.cramfs   mkfs.ext3     mkfs.ext4dev  mkfs.vfat</span><br></pre></td></tr></table></figure>
<p>rhel7</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# mkfs</span><br><span class="line">mkfs         mkfs.cramfs  mkfs.ext3    mkfs.fat     mkfs.msdos   mkfs.xfs     </span><br><span class="line">mkfs.btrfs   mkfs.ext2    mkfs.ext4    mkfs.minix   mkfs.vfat</span><br></pre></td></tr></table></figure>

<p>EXT4 Linux kernel è‡ª 2.6.28 å¼€å§‹æ­£å¼æ”¯æŒæ–°çš„æ–‡ä»¶ç³»ç»Ÿ Ext4ã€‚Ext4 æ˜¯ Ext3 çš„æ”¹è¿›ç‰ˆï¼Œä¿®æ”¹äº† Ext3 ä¸­éƒ¨åˆ†é‡è¦çš„æ•°æ®ç»“æ„ï¼Œè€Œä¸ä»…ä»…åƒ Ext3 å¯¹ Ext2 é‚£æ ·ï¼Œåªæ˜¯å¢åŠ äº†ä¸€ä¸ªæ—¥å¿—åŠŸèƒ½è€Œå·²ã€‚Ext4 å¯ä»¥æä¾›æ›´ä½³çš„æ€§èƒ½å’Œå¯é æ€§ï¼Œè¿˜æœ‰æ›´ä¸ºä¸°å¯Œçš„åŠŸèƒ½ï¼Œä¸å‘ä¸‹å…¼å®¹ext3ã€‚</p>
<p>XFS é’ˆå¯¹æµ·é‡å°æ–‡ä»¶çš„å­˜å‚¨åŠè¶…å¤§æ–‡ä»¶çš„å­˜å‚¨æœ‰ä¸€äº›æœ‰æ—¶,ä½† EXT ç³»ç»Ÿç›¸å¯¹ç¨³å®šã€‚XFS æ˜¯ Silicon Graphicsï¼ŒInc. äº 90 å¹´ä»£åˆå¼€å‘çš„æ–‡ä»¶ç³»ç»Ÿã€‚å®ƒè‡³ä»Šä»ä½œä¸º SGI åŸºäº IRIX çš„äº§å“ï¼ˆä»å·¥ä½œç«™åˆ°è¶…çº§è®¡ç®—æœºï¼‰çš„åº•å±‚æ–‡ä»¶ç³»ç»Ÿæ¥ä½¿ç”¨ã€‚ç°åœ¨ï¼ŒXFS ä¹Ÿå¯ä»¥ç”¨äº Linuxã€‚XFS çš„ Linux ç‰ˆçš„åˆ°æ¥æ˜¯æ¿€åŠ¨äººå¿ƒçš„ï¼Œé¦–å…ˆå› ä¸ºå®ƒä¸º Linux ç¤¾åŒºæä¾›äº†ä¸€ç§å¥å£®çš„ã€ä¼˜ç§€çš„ä»¥åŠåŠŸèƒ½ä¸°å¯Œçš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶ä¸”è¿™ç§æ–‡ä»¶ç³»ç»Ÿæ‰€å…·æœ‰çš„å¯ä¼¸ç¼©æ€§èƒ½å¤Ÿæ»¡è¶³æœ€è‹›åˆ»çš„å­˜å‚¨éœ€æ±‚ã€‚</p>
<h3 id="æ–‡ä»¶ç³»ç»Ÿçš„ç®€å•æ“ä½œ"><a href="#æ–‡ä»¶ç³»ç»Ÿçš„ç®€å•æ“ä½œ" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿçš„ç®€å•æ“ä½œ"></a>æ–‡ä»¶ç³»ç»Ÿçš„ç®€å•æ“ä½œ</h3><p><img src="pic/22.png" alt="22"></p>
<h4 id="df"><a href="#df" class="headerlink" title="df"></a>df</h4><p><img src="pic/23.png" alt="23"></p>
<p>å®ä¾‹ï¼š</p>
<ol>
<li>ä½¿ç”¨-hé€‰é¡¹ä»¥KBä»¥ä¸Šçš„å•ä½æ¥æ˜¾ç¤ºï¼Œå¯è¯»æ€§é«˜<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[#</span><span class="bash">3<span class="comment">#root@rhel6 ~]#df -h</span></span></span><br><span class="line">Filesystem                     Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/vg_rhel6-LogVol01   17G  3.0G   13G  19% /</span><br><span class="line">tmpfs                          499M   72K  499M   1% /dev/shm</span><br><span class="line">/dev/vda1                      477M   58M  390M  13% /boot</span><br><span class="line">/dev/mapper/vg_rhel6-LogVol00  380M  2.3M  354M   1% /home</span><br></pre></td></tr></table></figure></li>
<li>æŸ¥çœ‹å…¨éƒ¨æ–‡ä»¶ç³»ç»Ÿï¼š<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[#</span><span class="bash">4<span class="comment">#root@rhel6 ~]#df -a</span></span></span><br><span class="line">Filesystem                    1K-blocks    Used Available Use% Mounted on</span><br><span class="line">/dev/mapper/vg_rhel6-LogVol01  17535796 3127044  13494936  19% /</span><br><span class="line">proc                                  0       0         0    - /proc</span><br><span class="line">sysfs                                 0       0         0    - /sys</span><br><span class="line">devpts                                0       0         0    - /dev/pts</span><br><span class="line">tmpfs                            510368      72    510296   1% /dev/shm</span><br><span class="line">/dev/vda1                        487652   58631    399325  13% /boot</span><br><span class="line">/dev/mapper/vg_rhel6-LogVol00    388480    2335    361569   1% /home</span><br><span class="line">none                                  0       0         0    - /proc/sys/fs/binfmt_misc</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="du"><a href="#du" class="headerlink" title="du"></a>du</h4><p><img src="pic/24.png" alt="24"></p>
<p>å®ä¾‹ï¼š</p>
<ol>
<li>æŸ¥çœ‹æŒ‡å®šç›®å½•æ‰€å ç©ºé—´<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[#</span><span class="bash">9<span class="comment">#root@rhel6 ~]#du -s /var/</span></span></span><br><span class="line">140252	/var/</span><br><span class="line"><span class="meta">[#</span><span class="bash">10<span class="comment">#root@rhel6 ~]#du -sh /var/</span></span></span><br><span class="line">137M	/var/</span><br></pre></td></tr></table></figure></li>
<li>æŸ¥çœ‹æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[#</span><span class="bash">16<span class="comment">#root@rhel6 ~]#du -h /tmp</span></span></span><br><span class="line">8.0K	/tmp/pulse-oCBy0hGD1JT6</span><br><span class="line">4.0K	/tmp/.X11-unix</span><br><span class="line">4.0K	/tmp/.esd-0</span><br><span class="line">4.0K	/tmp/virtual-root.JyC7Qb</span><br><span class="line">8.0K	/tmp/orbit-gdm</span><br><span class="line">4.0K	/tmp/.ICE-unix</span><br><span class="line">8.0K	/tmp/pulse-q5sECpImz7Ju</span><br><span class="line">48K	/tmp</span><br><span class="line"><span class="meta">[#</span><span class="bash">15<span class="comment">#root@rhel6 ~]#du -ha /tmp</span></span></span><br><span class="line">4.0K	/tmp/pulse-oCBy0hGD1JT6/pid</span><br><span class="line">0	/tmp/pulse-oCBy0hGD1JT6/native</span><br><span class="line">8.0K	/tmp/pulse-oCBy0hGD1JT6</span><br><span class="line">0	/tmp/.X11-unix/X0</span><br><span class="line">4.0K	/tmp/.X11-unix</span><br><span class="line">0	/tmp/.esd-0/socket</span><br><span class="line">4.0K	/tmp/.esd-0</span><br><span class="line">4.0K	/tmp/virtual-root.JyC7Qb</span><br><span class="line">4.0K	/tmp/.X0-lock</span><br><span class="line">0	/tmp/orbit-gdm/linc-6c2-0-7846478690c68</span><br><span class="line">0	/tmp/orbit-gdm/bonobo-activation-register-75c59b1ecf3edd6ad04cfcfd00000056.lock</span><br><span class="line">4.0K	/tmp/orbit-gdm/bonobo-activation-server-75c59b1ecf3edd6ad04cfcfd00000056-ior</span><br><span class="line">0	/tmp/orbit-gdm/linc-6e5-0-3bda60586d2f0</span><br><span class="line">0	/tmp/orbit-gdm/linc-6bb-0-2bf2fd0bb015c</span><br><span class="line">0	/tmp/orbit-gdm/linc-6e1-0-44f3459db98f9</span><br><span class="line">0	/tmp/orbit-gdm/linc-6d9-0-26db8cdee8dec</span><br><span class="line">0	/tmp/orbit-gdm/linc-6e0-0-7f7b8d4664593</span><br><span class="line">0	/tmp/orbit-gdm/linc-6e4-0-540f978681aee</span><br><span class="line">0	/tmp/orbit-gdm/linc-6d4-0-3a04cbe9566</span><br><span class="line">0	/tmp/orbit-gdm/linc-6d5-0-75caf0f81ab48</span><br><span class="line">8.0K	/tmp/orbit-gdm</span><br><span class="line">0	/tmp/.ICE-unix/1723</span><br><span class="line">4.0K	/tmp/.ICE-unix</span><br><span class="line">4.0K	/tmp/pulse-q5sECpImz7Ju/pid</span><br><span class="line">0	/tmp/pulse-q5sECpImz7Ju/native</span><br><span class="line">8.0K	/tmp/pulse-q5sECpImz7Ju</span><br><span class="line">48K	/tmp</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="ç£ç›˜çš„åˆ†å‰²ã€æ ¼å¼åŒ–ä¸æŒ‚è½½"><a href="#ç£ç›˜çš„åˆ†å‰²ã€æ ¼å¼åŒ–ä¸æŒ‚è½½" class="headerlink" title="ç£ç›˜çš„åˆ†å‰²ã€æ ¼å¼åŒ–ä¸æŒ‚è½½"></a>ç£ç›˜çš„åˆ†å‰²ã€æ ¼å¼åŒ–ä¸æŒ‚è½½</h2><p>æ–°å¢ä¸€é¢—ç¡¬ç›˜æ—¶ , è¯¥æ€ä¹ˆåš :</p>
<ol>
<li>å¯¹ç£ç›˜è¿›è¡Œåˆ†å‰² , ä»¥å»ºç«‹å¯ç”¨çš„åˆ†åŒº partition ; <fdisk></li>
<li>å¯¹è¯¥ partition è¿›è¡Œæ ¼å¼åŒ– ( format ), ä»¥å»ºç«‹ç³»ç»Ÿå¯ç”¨çš„æ–‡ä»¶ç³»ç»Ÿ filesystem;<mkfs></li>
<li>è‹¥æƒ³è¦ä»”ç»†ä¸€ç‚¹ , åˆ™å¯å¯¹åˆšåˆšå»ºç«‹å¥½çš„ filesystem è¿›è¡Œæ£€éªŒ ;&lt;fsck, badblocks&gt;</li>
<li>åœ¨ Linux ç³»ç»Ÿä¸Š , éœ€è¦å»ºç«‹æŒ‚è½½ç‚¹ ( ç›®å½• ), å¹¶å°†ä»–æŒ‚è½½ä¸Šæ¥ã€‚ <mount></li>
<li>å¦‚æœ ll /dev/ æ–°å»ºçš„åˆ†åŒºä¸å­˜åœ¨,åˆ™ä½¿ç”¨ partx -a /dev/vdb è®©æ–°å»ºçš„åˆ†åŒºè¢«è¯»å–ç”Ÿæ•ˆ,æˆ–è€…é‡å¯ç”µè„‘</li>
</ol>
<h3 id="åˆ†å‰²-fdisk"><a href="#åˆ†å‰²-fdisk" class="headerlink" title="åˆ†å‰² fdisk"></a>åˆ†å‰² fdisk</h3><p>fdiskå‘½ä»¤ç”¨äºè§‚å¯Ÿç¡¬ç›˜å®ä½“ä½¿ç”¨æƒ…å†µï¼Œä¹Ÿå¯å¯¹ç¡¬ç›˜åˆ†åŒºã€‚å®ƒé‡‡ç”¨ä¼ ç»Ÿçš„é—®ç­”å¼ç•Œé¢ã€‚</p>
<p>è¯­æ³• fdisk(é€‰é¡¹)(å‚æ•°)</p>
<p>é€‰é¡¹</p>
<ul>
<li>-b&lt;åˆ†åŒºå¤§å°&gt;ï¼šæŒ‡å®šæ¯ä¸ªåˆ†åŒºçš„å¤§å°ï¼›</li>
<li>-lï¼šåˆ—å‡ºæŒ‡å®šçš„å¤–å›´è®¾å¤‡çš„åˆ†åŒºè¡¨çŠ¶å†µï¼›</li>
<li>-s&lt;åˆ†åŒºç¼–å·&gt;ï¼šå°†æŒ‡å®šçš„åˆ†åŒºå¤§å°è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºä¸Šï¼Œå•ä½ä¸ºåŒºå—ï¼›</li>
<li>-uï¼šæ­é…â€-lâ€å‚æ•°åˆ—è¡¨ï¼Œä¼šç”¨åˆ†åŒºæ•°ç›®å–ä»£æŸ±é¢æ•°ç›®ï¼Œæ¥è¡¨ç¤ºæ¯ä¸ªåˆ†åŒºçš„èµ·å§‹åœ°å€ï¼›</li>
<li>-vï¼šæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚</li>
</ul>
<p>å‚æ•° è®¾å¤‡æ–‡ä»¶ï¼šæŒ‡å®šè¦è¿›è¡Œåˆ†åŒºæˆ–è€…æ˜¾ç¤ºåˆ†åŒºçš„ç¡¬ç›˜è®¾å¤‡æ–‡ä»¶ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[#</span><span class="bash">20<span class="comment">#root@rhel6 ~]#fdisk -l</span></span></span><br><span class="line"></span><br><span class="line">Disk /dev/vda: 21.5 GB, 21474836480 bytes</span><br><span class="line">16 heads, 63 sectors/track, 41610 cylinders</span><br><span class="line">Units = cylinders of 1008 * 512 = 516096 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk identifier: 0x000d166b</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/vda1   *           3        1018      512000   83  Linux</span><br><span class="line">Partition 1 does not end on cylinder boundary.</span><br><span class="line">/dev/vda2            1018        5179     2097152   82  Linux swap / Solaris</span><br><span class="line">Partition 2 does not end on cylinder boundary.</span><br><span class="line">/dev/vda3            5179       41611    18361344   8e  Linux LVM</span><br><span class="line">Partition 3 does not end on cylinder boundary.</span><br><span class="line"></span><br><span class="line">Disk /dev/vdb: 10.7 GB, 10737418240 bytes</span><br><span class="line">16 heads, 63 sectors/track, 20805 cylinders</span><br><span class="line">Units = cylinders of 1008 * 512 = 516096 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk identifier: 0x00000000</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/mapper/vg_rhel6-LogVol01: 18.4 GB, 18379440128 bytes</span><br><span class="line">255 heads, 63 sectors/track, 2234 cylinders</span><br><span class="line">Units = cylinders of 16065 * 512 = 8225280 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk identifier: 0x00000000</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/mapper/vg_rhel6-LogVol00: 419 MB, 419430400 bytes</span><br><span class="line">255 heads, 63 sectors/track, 50 cylinders</span><br><span class="line">Units = cylinders of 16065 * 512 = 8225280 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk identifier: 0x00000000</span><br><span class="line"><span class="meta">[#</span><span class="bash">21<span class="comment">#root@rhel6 ~]#fdisk /dev/vdb</span></span></span><br><span class="line">Device contains neither a valid DOS partition table, nor Sun, SGI or OSF disklabel</span><br><span class="line">Building a new DOS disklabel with disk identifier 0x23c41712.</span><br><span class="line">Changes will remain in memory only, until you decide to write them.</span><br><span class="line">After that, of course, the previous content won't be recoverable.</span><br><span class="line"></span><br><span class="line">Warning: invalid flag 0x0000 of partition table 4 will be corrected by w(rite)</span><br><span class="line"></span><br><span class="line">WARNING: DOS-compatible mode is deprecated. It's strongly recommended to</span><br><span class="line">         switch off the mode (command 'c') and change display units to</span><br><span class="line">         sectors (command 'u').</span><br><span class="line"></span><br><span class="line">Command (m for help): m &lt;== è¾“å…¥ m å , å°±ä¼šçœ‹åˆ°åº•ä¸‹è¿™äº›æŒ‡ä»¤ä»‹ç»</span><br><span class="line">Command action</span><br><span class="line">a toggle a bootable flag</span><br><span class="line">b edit bsd disklabel</span><br><span class="line">c toggle the dos compatibility flag</span><br><span class="line">d delete a partition &lt;== åˆ é™¤ä¸€ä¸ªåˆ†åŒº</span><br><span class="line">l list known partition types</span><br><span class="line">m print this menu</span><br><span class="line">n add a new partition &lt;== æ–°å¢ä¸€ä¸ªåˆ†åŒº</span><br><span class="line">o create a new empty DOS partition table</span><br><span class="line">p print the partition table== åœ¨å±å¹•ä¸Šæ˜¾ç¤ºåˆ†å‰²è¡¨</span><br><span class="line">q quit without saving changes&lt;== ä¸å‚¨å­˜ç¦»å¼€ fdisk ç¨‹åº</span><br><span class="line">s create a new empty Sun disklabel</span><br><span class="line">t change a partition's system id</span><br><span class="line">u change display/entry units</span><br><span class="line">v verify the partition table</span><br><span class="line">w write table to disk and exit&lt;== å°†åˆšåˆšçš„åŠ¨ä½œå†™å…¥åˆ†å‰²è¡¨</span><br><span class="line">x extra functionality (experts only)</span><br><span class="line">Command (m for help): p</span><br><span class="line"></span><br><span class="line">Disk /dev/vdb: 10.7 GB, 10737418240 bytes</span><br><span class="line">16 heads, 63 sectors/track, 20805 cylinders</span><br><span class="line">Units = cylinders of 1008 * 512 = 516096 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk identifier: 0x23c41712</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line"></span><br><span class="line">Command (m for help): n</span><br><span class="line">Command action</span><br><span class="line">   e   extended</span><br><span class="line">   p   primary partition (1-4)</span><br><span class="line">p</span><br><span class="line">Partition number (1-4): 1</span><br><span class="line">First cylinder (1-20805, default 1):</span><br><span class="line">Using default value 1</span><br><span class="line">Last cylinder, +cylinders or +size&#123;K,M,G&#125; (1-20805, default 20805):</span><br><span class="line">Using default value 20805</span><br><span class="line"></span><br><span class="line">Command (m for help): p</span><br><span class="line"></span><br><span class="line">Disk /dev/vdb: 10.7 GB, 10737418240 bytes</span><br><span class="line">16 heads, 63 sectors/track, 20805 cylinders</span><br><span class="line">Units = cylinders of 1008 * 512 = 516096 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk identifier: 0x23c41712</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/vdb1               1       20805    10485688+  83  Linux</span><br><span class="line"></span><br><span class="line">Command (m for help): w</span><br><span class="line">The partition table has been altered!</span><br><span class="line"></span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">Syncing disks.</span><br><span class="line"><span class="meta">[#</span><span class="bash">22<span class="comment">#root@rhel6 ~]#ls /dev|grep vdb</span></span></span><br><span class="line">vdb</span><br><span class="line">vdb1</span><br><span class="line">[root@rhel7 ~]# fdisk /dev/vdb</span><br><span class="line">Welcome to fdisk (util-linux 2.23.2).</span><br><span class="line"></span><br><span class="line">Changes will remain in memory only, until you decide to write them.</span><br><span class="line">Be careful before using the write command.</span><br><span class="line"></span><br><span class="line">Device does not contain a recognized partition table</span><br><span class="line">Building a new DOS disklabel with disk identifier 0x8366bb08.</span><br><span class="line"></span><br><span class="line">Command (m for help): p</span><br><span class="line"></span><br><span class="line">Disk /dev/vdb: 10.7 GB, 10737418240 bytes, 20971520 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x8366bb08</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line"></span><br><span class="line">Command (m for help): n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): p</span><br><span class="line">Partition number (1-4, default 1): 1</span><br><span class="line">First sector (2048-20971519, default 2048):</span><br><span class="line">Using default value 2048</span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G&#125; (2048-20971519, default 20971519):</span><br><span class="line">Using default value 20971519</span><br><span class="line">Partition 1 of type Linux and of size 10 GiB is set</span><br><span class="line"></span><br><span class="line">Command (m for help): p</span><br><span class="line"></span><br><span class="line">Disk /dev/vdb: 10.7 GB, 10737418240 bytes, 20971520 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x8366bb08</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/vdb1            2048    20971519    10484736   83  Linux</span><br><span class="line"></span><br><span class="line">Command (m for help): w</span><br><span class="line">The partition table has been altered!</span><br><span class="line"></span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">Syncing disks.</span><br></pre></td></tr></table></figure>

<h3 id="ç£ç›˜æ ¼å¼åŒ–-mkfs"><a href="#ç£ç›˜æ ¼å¼åŒ–-mkfs" class="headerlink" title="ç£ç›˜æ ¼å¼åŒ– mkfs"></a>ç£ç›˜æ ¼å¼åŒ– mkfs</h3><p><img src="pic/25.png" alt="25"></p>
<ol>
<li><p>rhel6å®ä¾‹ï¼šæŸ¥çœ‹æ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿï¼›å°†/dev/vdb1æ ¼å¼åŒ–æˆext4æ–‡ä»¶ç³»ç»Ÿ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[#</span><span class="bash">23<span class="comment">#root@rhel6 ~]#mkfs</span></span></span><br><span class="line">mkfs          mkfs.cramfs   mkfs.ext2     mkfs.ext3     mkfs.ext4     mkfs.ext4dev  mkfs.msdos    mkfs.vfat</span><br><span class="line"><span class="meta">[#</span><span class="bash">24<span class="comment">#root@rhel6 ~]#mkfs.ext4 /dev/vdb1</span></span></span><br><span class="line">mke2fs 1.41.12 (17-May-2010)</span><br><span class="line">Filesystem label=</span><br><span class="line">OS type: Linux</span><br><span class="line">Block size=4096 (log=2)</span><br><span class="line">Fragment size=4096 (log=2)</span><br><span class="line">Stride=0 blocks, Stripe width=0 blocks</span><br><span class="line">655360 inodes, 2621422 blocks</span><br><span class="line">131071 blocks (5.00%) reserved for the super user</span><br><span class="line">First data block=0</span><br><span class="line">Maximum filesystem blocks=2684354560</span><br><span class="line">80 block groups</span><br><span class="line">32768 blocks per group, 32768 fragments per group</span><br><span class="line">8192 inodes per group</span><br><span class="line">Superblock backups stored on blocks:</span><br><span class="line">	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632</span><br><span class="line">Writing inode tables: done                            </span><br><span class="line">Creating journal (32768 blocks): done</span><br><span class="line">Writing superblocks and filesystem accounting information: done</span><br><span class="line">This filesystem will be automatically checked every 38 mounts or</span><br><span class="line">180 days, whichever comes first.  Use tune2fs -c or -i to override.</span><br></pre></td></tr></table></figure>
</li>
<li><p>rhel7å®ä¾‹ï¼šæŸ¥çœ‹æ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿï¼›å°†/dev/vdb1æ ¼å¼åŒ–æˆxfsæ–‡ä»¶ç³»ç»Ÿ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# mkfs</span><br><span class="line">mkfs         mkfs.cramfs  mkfs.ext3    mkfs.fat     mkfs.msdos   mkfs.xfs     </span><br><span class="line">mkfs.btrfs   mkfs.ext2    mkfs.ext4    mkfs.minix   mkfs.vfat    </span><br><span class="line">[root@rhel7 ~]# mkfs.xfs /dev/vdb1</span><br><span class="line">meta-data=/dev/vdb1              isize=256    agcount=4, agsize=655296 blks</span><br><span class="line">         =                       sectsz=512   attr=2, projid32bit=1</span><br><span class="line">         =                       crc=0</span><br><span class="line">data     =                       bsize=4096   blocks=2621184, imaxpct=25</span><br><span class="line">         =                       sunit=0      swidth=0 blks</span><br><span class="line">naming   =version 2              bsize=4096   ascii-ci=0 ftype=0</span><br><span class="line">log      =internal log           bsize=4096   blocks=2560, version=2</span><br><span class="line">         =                       sectsz=512   sunit=0 blks, lazy-count=1</span><br><span class="line">realtime =none                   extsz=4096   blocks=0, rtextents=0</span><br></pre></td></tr></table></figure>


</li>
</ol>
<h3 id="æŒ‚è½½"><a href="#æŒ‚è½½" class="headerlink" title="æŒ‚è½½"></a>æŒ‚è½½</h3><p>/etc/fstab</p>
<p>/etc/filesystems: ç³»ç»ŸæŒ‡å®šçš„æµ‹è¯•æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿç±»å‹ ;</p>
<p>/proc/filesystems:Linux ç³»ç»Ÿå·²ç»åŠ è½½çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ã€‚</p>
<h4 id="mount-çš„ç”¨æ³•"><a href="#mount-çš„ç”¨æ³•" class="headerlink" title="mount çš„ç”¨æ³•"></a>mount çš„ç”¨æ³•</h4><p>1) æ ‡å‡†ç”¨æ³• <code>mount -t ext4 /dev/vdb1 /mnt/vdb1</code></p>
<p>2) è¿œç¨‹æŒ‚è½½ <code>mount ip:/xx /xx</code></p>
<pre><code>`mount 172.25.254.250 : /content /mnt` &lt;== è¿œç¨‹æŒ‚è½½æ¡ˆä¾‹</code></pre><p>3) å…¶ä»–é€‰é¡¹:</p>
<p>A.-o loop æŒ‚è½½é•œåƒæ–‡ä»¶</p>
<ul>
<li>ç”¨æ³•: mount -o loop è¢«æŒ‚è½½çš„æ–‡ä»¶ æŒ‚è½½ç‚¹</li>
<li>ä¾‹å¦‚: mount -o loop rhel-server-6.5-x86_64-dvd.iso /test</li>
</ul>
<p>B.-o ro ä»¥åªè¯»æ–¹å¼æŒ‚è½½</p>
<ul>
<li>ç”¨æ³•: mount -o ro è¢«æŒ‚åœ¨çš„è®¾å¤‡ æŒ‚è½½ç‚¹</li>
<li>ä¾‹å¦‚: mount -o ro /dev/vdb1 /test</li>
</ul>
<p>C.-o remount é‡æ–°æŒ‚è½½</p>
<ul>
<li><p>ç”¨æ³•: mount -o remount è¢«æŒ‚è½½çš„è®¾å¤‡ æŒ‚è½½ç‚¹</p>
</li>
<li><p>ä¾‹å¦‚: mount -o remount,rw,auto / &lt;== é‡æ–°æŒ‚è½½æ ¹ç›®å½•</p>
<p>mount -o remount,ro newdir &lt;== é‡æ–°æŒ‚è½½ä¸ºåªè¯»</p>
</li>
</ul>
<p>D.-t iso9660 æŒ‚è½½CD/DVD</p>
<ul>
<li>ç”¨æ³•: mount -t iso9660 è¢«æŒ‚è½½çš„è®¾å¤‡ æŒ‚è½½ç‚¹</li>
<li>ä¾‹å¦‚: mount -t iso9660 /dev/dvdrom /media/dvdrom</li>
</ul>
<h4 id="mount-çš„æŸ¥çœ‹"><a href="#mount-çš„æŸ¥çœ‹" class="headerlink" title="mount çš„æŸ¥çœ‹"></a>mount çš„æŸ¥çœ‹</h4><p>df -h</p>
<p>mount &lt;== æŸ¥çœ‹è®¾å¤‡å’Œç›®å½•æŒ‚è½½ç‚¹çš„å…³ç³»</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[#</span><span class="bash">27<span class="comment">#root@rhel6 ~]#mount</span></span></span><br><span class="line">/dev/mapper/vg_rhel6-LogVol01 on / type ext4 (rw)</span><br><span class="line">proc on /proc type proc (rw)</span><br><span class="line">sysfs on /sys type sysfs (rw)</span><br><span class="line">devpts on /dev/pts type devpts (rw,gid=5,mode=620)</span><br><span class="line">tmpfs on /dev/shm type tmpfs (rw,rootcontext="system_u:object_r:tmpfs_t:s0")</span><br><span class="line">/dev/vda1 on /boot type ext4 (rw)</span><br><span class="line">/dev/mapper/vg_rhel6-LogVol00 on /home type ext4 (rw)</span><br><span class="line">none on /proc/sys/fs/binfmt_misc type binfmt_misc (rw)</span><br></pre></td></tr></table></figure>

<h4 id="umount"><a href="#umount" class="headerlink" title="umount"></a>umount</h4><p>umount [-fn] è®¾å¤‡æ–‡ä»¶åä¸æŒ‚è½½ç‚¹</p>
<p>umount /mnt</p>
<p>æ³¨æ„äº‹é¡¹:</p>
<ol>
<li>å¯¹æŸä¸ªæŒ‚è½½ç‚¹ä½¿ç”¨å¤šæ¬¡ mount ,ä¼šæŠŠä¹‹å‰çš„å†…å®¹éšè—èµ·æ¥,åªèƒ½çœ‹åˆ°æœ€åä¸€æ¬¡æŒ‚è½½çš„è®¾å¤‡æ–‡ä»¶é‡Œçš„å†…å®¹</li>
<li>ä¸è¦åœ¨æŒ‚è½½ç‚¹é‡Œé¢æ‰§è¡Œ umount å‘½ä»¤,ä¼šæŠ¥é”™</li>
<li>å°½é‡ä¸è¦åœ¨æŒ‚è½½ç‚¹é‡Œæ‰§è¡Œ mount æŒ‚è½½å‘½ä»¤</li>
<li>mount å‘½ä»¤ä¸ºä¸´æ—¶ç”Ÿæ•ˆ</li>
</ol>
<h3 id="etc-fstab-å°†æ°¸ä¹…ç”Ÿæ•ˆ"><a href="#etc-fstab-å°†æ°¸ä¹…ç”Ÿæ•ˆ" class="headerlink" title="/etc/fstab å°†æ°¸ä¹…ç”Ÿæ•ˆ"></a>/etc/fstab å°†æ°¸ä¹…ç”Ÿæ•ˆ</h3><p><img src="pic/26.png" alt="26"></p>
<p>æ˜¯å¦éœ€è¦æ£€æµ‹:é 0 ä»£è¡¨æ£€æµ‹,æ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜</p>
<p>ä¿®æ”¹åä¿å­˜,é€šè¿‡ <code>mount -a</code>è®©é…ç½®ç”Ÿæ•ˆ</p>
<h2 id="ç£ç›˜é…é¢-Quota"><a href="#ç£ç›˜é…é¢-Quota" class="headerlink" title="ç£ç›˜é…é¢ Quota"></a>ç£ç›˜é…é¢ Quota</h2><p>å¦‚å‰é¢ä»‹ç»ç« èŠ‚è®²åˆ°çš„ç±» Unix ç³»ç»Ÿæœ€åˆè®¾è®¡ç†å¿µå°±è®©è®¸å¤šäººä¸€èµ·ä½¿ç”¨,å¤šä»»åŠ¡çš„æ“ä½œç³»ç»Ÿ,ä½†æ˜¯ç¡¬ä»¶çš„èµ„æºæ˜¯å›ºå®šæœ‰é™ çš„,å¦‚æœå‡ºç°ä¸ªå°ç ´åä»½å­ä¸æ–­çš„åˆ›å»ºæ–‡ä»¶æˆ–ä¸‹è½½ç”µå½±,é‚£ä¹ˆç¡¬ç›˜ç©ºé—´æ€»æœ‰ä¸€å¤©ä¼šè¢«å æ»¡çš„å§,è¿™æ—¶å°±éœ€è¦ quotaæœåŠ¡ å¸®åŠ©æˆ‘ä»¬ä¸ºæ¯ä¸ªç”¨æˆ·é™åˆ¶å¯ä»¥ä½¿ç”¨çš„ç¡¬ç›˜ç©ºé—´,ä¸€æ—¦è¶…å‡ºé¢„ç®—å°±ä¸å†å…è®¸ä»–ä»¬ä½¿ç”¨ã€‚</p>
<h3 id="ä½œç”¨å’Œåˆ†ç±»"><a href="#ä½œç”¨å’Œåˆ†ç±»" class="headerlink" title="ä½œç”¨å’Œåˆ†ç±»"></a>ä½œç”¨å’Œåˆ†ç±»</h3><p>quota çš„ç£ç›˜é…é¢å¯ä»¥é™åˆ¶ç”¨æˆ·çš„ç¡¬ç›˜å¯ç”¨ç©ºé—´æˆ–æœ€å¤§åˆ›å»ºæ–‡ä»¶æ•°é‡,å¹¶ä¸”è¿˜æœ‰è½¯/ç¡¬é™åˆ¶çš„åŒºåˆ«:</p>
<ul>
<li>è½¯é™åˆ¶:å½“è¾¾åˆ°è½¯é™åˆ¶æ—¶ä¼šæç¤ºç”¨æˆ·,ä½†å…è®¸ç”¨æˆ·åœ¨è§„å®šæœŸé™å†…ç»§ç»­ä½¿ç”¨ã€‚</li>
<li>ç¡¬é™åˆ¶:å½“è¾¾åˆ°ç¡¬é™åˆ¶æ—¶ä¼šæç¤ºç”¨æˆ·,ä¸”å¼ºåˆ¶ç»ˆæ­¢ç”¨æˆ·çš„æ“ä½œã€‚</li>
</ul>
<h3 id="ç›¸å…³å‘½ä»¤"><a href="#ç›¸å…³å‘½ä»¤" class="headerlink" title="ç›¸å…³å‘½ä»¤"></a>ç›¸å…³å‘½ä»¤</h3><h4 id="quotacheck"><a href="#quotacheck" class="headerlink" title="quotacheck"></a>quotacheck</h4><p>quotacheckå‘½ä»¤é€šè¿‡æ‰«ææŒ‡å®šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œè·å–ç£ç›˜çš„ä½¿ç”¨æƒ…å†µï¼Œåˆ›å»ºã€æ£€æŸ¥å’Œä¿®å¤ç£ç›˜é…é¢ï¼ˆquotaï¼‰æ–‡ä»¶ã€‚æ‰§è¡ŒquotacheckæŒ‡ä»¤ï¼Œæ‰«ææŒ‚å…¥ç³»ç»Ÿçš„åˆ†åŒºï¼Œå¹¶åœ¨å„åˆ†åŒºçš„æ–‡ä»¶ç³»ç»Ÿæ ¹ç›®å½•ä¸‹äº§ç”Ÿquota.userå’Œquota.groupæ–‡ä»¶ï¼Œè®¾ç½®ç”¨æˆ·å’Œç¾¤ç»„çš„ç£ç›˜ç©ºé—´é™åˆ¶ã€‚</p>
<p>è¯­æ³• quotacheck(é€‰é¡¹)(å‚æ•°)</p>
<p>é€‰é¡¹</p>
<ul>
<li>-aï¼šæ‰«æåœ¨/etc/fstabæ–‡ä»¶é‡Œï¼Œæœ‰åŠ å…¥quotaè®¾ç½®çš„åˆ†åŒºï¼›</li>
<li>-dï¼šè¯¦ç»†æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ï¼Œä¾¿äºæ’é”™æˆ–äº†è§£ç¨‹åºæ‰§è¡Œçš„æƒ…å½¢ï¼›</li>
<li>-gï¼šæ‰«æç£ç›˜ç©ºé—´æ—¶ï¼Œè®¡ç®—æ¯ä¸ªç¾¤ç»„è¯†åˆ«ç æ‰€å ç”¨çš„ç›®å½•å’Œæ–‡ä»¶æ•°ç›®ï¼›</li>
<li>-Rï¼šæ’é™¤æ ¹ç›®å½•æ‰€åœ¨çš„åˆ†åŒºï¼›</li>
<li>-uï¼šæ‰«æç£ç›˜ç©ºé—´æ—¶ï¼Œè®¡ç®—æ¯ä¸ªç”¨æˆ·è¯†åˆ«ç æ‰€å ç”¨çš„ç›®å½•å’Œæ–‡ä»¶æ•°ç›®ï¼›</li>
<li>-vï¼šæ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ã€‚</li>
</ul>
<p>å‚æ•° æ–‡ä»¶ç³»ç»Ÿï¼šæŒ‡å®šè¦æ‰«æçš„æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<h4 id="quota"><a href="#quota" class="headerlink" title="quota"></a>quota</h4><p>quotaå‘½ä»¤ç”¨äºæ˜¾ç¤ºç”¨æˆ·æˆ–è€…å·¥ä½œç»„çš„ç£ç›˜é…é¢ä¿¡æ¯ã€‚è¾“å‡ºä¿¡æ¯åŒ…æ‹¬ç£ç›˜ä½¿ç”¨å’Œé…é¢é™åˆ¶ã€‚</p>
<p>è¯­æ³• quota(é€‰é¡¹)(å‚æ•°)</p>
<p>é€‰é¡¹</p>
<ul>
<li>-gï¼šåˆ—å‡ºç¾¤ç»„çš„ç£ç›˜ç©ºé—´é™åˆ¶ï¼›</li>
<li>-qï¼šç®€æ˜åˆ—è¡¨ï¼Œåªåˆ—å‡ºè¶…è¿‡é™åˆ¶çš„éƒ¨åˆ†ï¼›</li>
<li>-uï¼šåˆ—å‡ºç”¨æˆ·çš„ç£ç›˜ç©ºé—´é™åˆ¶ï¼›</li>
<li>-vï¼šæ˜¾ç¤ºè¯¥ç”¨æˆ·æˆ–ç¾¤ç»„ï¼Œåœ¨æ‰€æœ‰æŒ‚å…¥ç³»ç»Ÿçš„å­˜å‚¨è®¾å¤‡çš„ç©ºé—´é™åˆ¶ï¼›</li>
<li>-Vï¼šæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚</li>
</ul>
<p>å‚æ•° ç”¨æˆ·æˆ–è€…å·¥ä½œç»„ï¼šæŒ‡å®šè¦æ˜¾ç¤ºçš„ç”¨æˆ·æˆ–è€…å·¥ä½œç»„ã€‚</p>
<h4 id="quotaon"><a href="#quotaon" class="headerlink" title="quotaon"></a>quotaon</h4><p>quotaonå‘½ä»¤ç”¨äºæ¿€æ´»Linuxå†…æ ¸ä¸­æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜é…é¢åŠŸèƒ½ã€‚</p>
<p>è¯­æ³• quotaon(é€‰é¡¹)(å‚æ•°)</p>
<p>é€‰é¡¹</p>
<ul>
<li>-aï¼šå¼€å¯åœ¨/ect/fstabæ–‡ä»¶é‡Œï¼Œæœ‰åŠ å…¥quotaè®¾ç½®çš„åˆ†åŒºçš„ç©ºé—´é™åˆ¶ï¼›</li>
<li>-gï¼šå¼€å¯ç¾¤ç»„çš„ç£ç›˜ç©ºé—´é™åˆ¶ï¼›</li>
<li>-uï¼šå¼€å¯ç”¨æˆ·çš„ç£ç›˜ç©ºé—´é™åˆ¶ï¼›</li>
<li>-vï¼šæ˜¾ç¤ºæŒ‡ä»¤æŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ã€‚</li>
</ul>
<p>å‚æ•° æ–‡ä»¶ç³»ç»Ÿï¼šæŒ‡å®šè¦æ¿€æ´»ç£ç›˜é…é¢åŠŸèƒ½çš„æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<h4 id="repquota"><a href="#repquota" class="headerlink" title="repquota"></a>repquota</h4><p>repquotaå‘½ä»¤ä»¥æŠ¥è¡¨çš„æ ¼å¼è¾“å‡ºæŒ‡å®šåˆ†åŒºï¼Œæˆ–è€…æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜é…é¢ä¿¡æ¯ã€‚</p>
<p>è¯­æ³• repquota(é€‰é¡¹)(å‚æ•°)</p>
<p>é€‰é¡¹</p>
<ul>
<li>-aï¼šåˆ—å‡ºåœ¨/etc/fstabæ–‡ä»¶é‡Œï¼Œæœ‰åŠ å…¥quotaè®¾ç½®çš„åˆ†åŒºçš„ä½¿ç”¨çŠ¶å†µï¼ŒåŒ…æ‹¬ç”¨æˆ·å’Œç¾¤ç»„ï¼›</li>
<li>-gï¼šåˆ—å‡ºæ‰€æœ‰ç¾¤ç»„çš„ç£ç›˜ç©ºé—´é™åˆ¶ï¼›</li>
<li>-uï¼šåˆ—å‡ºæ‰€æœ‰ç”¨æˆ·çš„ç£ç›˜ç©ºé—´é™åˆ¶ï¼›</li>
<li>-vï¼šæ˜¾ç¤ºè¯¥ç”¨æˆ·æˆ–ç¾¤ç»„çš„æ‰€æœ‰ç©ºé—´é™åˆ¶ã€‚</li>
</ul>
<p>å‚æ•° æ–‡ä»¶ç³»ç»Ÿï¼šè¦æ‰“å°æŠ¥è¡¨çš„æ–‡ä»¶ç³»ç»Ÿæˆ–è€…å¯¹åº”çš„è®¾å¤‡æ–‡ä»¶åã€‚</p>
<h4 id="edquota"><a href="#edquota" class="headerlink" title="edquota"></a>edquota</h4><p>edquota å‘½ä»¤ç”¨äºè¶…çº§ç”¨æˆ·ç¼–è¾‘å…¶ä»–ç”¨æˆ·çš„ quota é…é¢é™åˆ¶</p>
<p>æ ¼å¼ä¸º: â€œ edquota [å‚æ•°] [ç”¨æˆ·]â€ã€‚</p>
<p>å‚æ•° ä½œç”¨</p>
<ul>
<li>-u ç¼–è¾‘ç”¨æˆ·çš„é…é¢é™åˆ¶ã€‚</li>
<li>-g ç¼–è¾‘ç”¨æˆ·ç»„çš„é…é¢é™åˆ¶ã€‚</li>
<li>-r é€šè¿‡ RPC åè®®ç¼–è¾‘è¿œç¨‹çš„é…é¢ã€‚</li>
</ul>
<h4 id="xfs-quota"><a href="#xfs-quota" class="headerlink" title="xfs_quota"></a>xfs_quota</h4><p>xfs_quota å‘½ä»¤ç”¨äºç®¡ç† XFS æ–‡ä»¶ç³»ç»Ÿçš„ quota ç¡¬ç›˜é…é¢</p>
<p>æ ¼å¼ä¸º: â€œ quota [å‚æ•°] é…é¢ æ–‡ä»¶ç³»ç»Ÿ â€ ã€‚</p>
<p>å‚æ•° ä½œç”¨</p>
<ul>
<li>-c å‘½ä»¤ ä»¥äº¤æ¢å¼æˆ–å‚æ•°çš„å½¢å¼è®¾ç½®è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚</li>
<li>-p è®¾ç½®æç¤ºæˆ–æŠ¥é”™ä¿¡æ¯çš„ç¨‹åºåç§°,é»˜è®¤ä¸º xfs_quotaã€‚</li>
<li>-x ä¸“å®¶æ¨¡å¼,èƒ½å¤Ÿå¯¹ quota åšæ›´å¤šå¤æ‚çš„é…ç½®ã€‚</li>
</ul>
<h3 id="å®éªŒ"><a href="#å®éªŒ" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h3><h4 id="rhel6-quotaå®éªŒ"><a href="#rhel6-quotaå®éªŒ" class="headerlink" title="rhel6 quotaå®éªŒ"></a>rhel6 quotaå®éªŒ</h4><p>åˆ’åˆ†åˆ†åŒº/dev/vdb2ï¼Œæ ¼å¼åŒ–æˆext4æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶æŒ‚è½½åœ¨studentå®¶ç›®å½•ä¸‹ä½¿ç”¨ï¼Œé™åˆ¶ç£ç›˜è½¯é™åˆ¶ä¸º 3Mã€ç£ç›˜ç¡¬é™åˆ¶ä¸º 6Mã€æ–‡ä»¶è½¯é™åˆ¶ä¸º 20 ä¸ªä¸”æ–‡ä»¶ç¡¬é™åˆ¶ä¸º 30 ä¸ª</p>
<ol>
<li>æŒ‚è½½æ—¶éœ€è¦åŠ ä¸Š -o usrquota,grpquota é€‰é¡¹ ï¼šmount -o usrquota,grpquota /dev/vdb2 /home/student</li>
<li>/etc/skel éœ€è¦çš„æ–‡ä»¶éœ€è¦å¤åˆ¶åˆ°å®¶ç›®å½•ä¸‹ ï¼šcp .bash* .gnome2 .mozilla -r /home/student</li>
<li>ä¿®æ”¹å®¶ç›®å½•æƒé™ ï¼šchown student.student /home/student ;setenforce 0</li>
<li>æ£€æµ‹:quotacheck -cugm /home/student/ æ£€æµ‹ç»“æœ : aquota.group aquota.user &lt;== åªæœ‰ root ç”¨æˆ·æœ‰è¯»å†™æƒé™</li>
<li>æ¿€æ´» :quotaon /home/student</li>
<li>æ‰“å°ç£ç›˜é…é¢çš„æŠ¥å‘Š :repquota /home/student</li>
<li>ç¼–è¾‘edquota student</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel6 ~]# mount -o usrquota,grpquota /dev/vdb2 /home/student</span><br><span class="line">[root@rhel6 ~]# ll /home/student</span><br><span class="line">total 16</span><br><span class="line">drwx------. 2 root root 16384 Jul  1 15:56 lost+found</span><br><span class="line">[root@rhel6 ~]# cd /etc/skel</span><br><span class="line">[root@rhel6 skel]# cp .bash* .gnome* .moz* -r /home/student</span><br><span class="line">[root@rhel6 skel]# ll /home/student -a</span><br><span class="line">total 42</span><br><span class="line">drwxr-xr-x. 5 root root  4096 Jul  1 16:00 .</span><br><span class="line">drwxr-xr-x. 4 root root  1024 Jul  2  2015 ..</span><br><span class="line">-rw-r--r--. 1 root root    18 Jul  1 16:00 .bash_logout</span><br><span class="line">-rw-r--r--. 1 root root   176 Jul  1 16:00 .bash_profile</span><br><span class="line">-rw-r--r--. 1 root root   124 Jul  1 16:00 .bashrc</span><br><span class="line">drwxr-xr-x. 2 root root  4096 Jul  1 16:00 .gnome2</span><br><span class="line">drwx------. 2 root root 16384 Jul  1 15:56 lost+found</span><br><span class="line">drwxr-xr-x. 4 root root  4096 Jul  1 16:00 .mozilla</span><br><span class="line">[root@rhel6 skel]# chown student. /home/student -R</span><br><span class="line">[root@rhel6 skel]# setenforce 0</span><br><span class="line">[root@rhel6 skel]# quotacheck -cugm /home/student</span><br><span class="line">[root@rhel6 skel]# ll /home/student</span><br><span class="line">total 32</span><br><span class="line">-rw-------. 1 root    root     6144 Jul  1 16:03 aquota.group</span><br><span class="line">-rw-------. 1 root    root     6144 Jul  1 16:03 aquota.user</span><br><span class="line">drwx------. 2 student student 16384 Jul  1 15:56 lost+found</span><br><span class="line">[root@rhel6 skel]# quotaon /home/student</span><br><span class="line">[root@rhel6 skel]# repquota /home/student</span><br><span class="line">*** Report for user quotas on device /dev/vdb2</span><br><span class="line">Block grace time: 7days; Inode grace time: 7days</span><br><span class="line">                        Block limits                File limits</span><br><span class="line">User            used    soft    hard  grace    used  soft  hard  grace</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">student   --      48       0       0              9     0     0       </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@rhel6 skel]# edquota student</span><br><span class="line">edquota: WARNING - /dev/vdb2: cannot change current inode allocation</span><br><span class="line">[root@rhel6 skel]# edquota student</span><br><span class="line">[root@rhel6 skel]# repquota /home/student</span><br><span class="line">*** Report for user quotas on device /dev/vdb2</span><br><span class="line">Block grace time: 7days; Inode grace time: 7days</span><br><span class="line">                        Block limits                File limits</span><br><span class="line">User            used    soft    hard  grace    used  soft  hard  grace</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">student   -+      48    3072    6144              9     3     6  7days</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@rhel6 skel]# quota student</span><br><span class="line">Disk quotas for user student (uid 500):</span><br><span class="line">     Filesystem  blocks   quota   limit   grace   files   quota   limit   grace</span><br><span class="line">      /dev/vdb2      48    3072    6144               9*      3       6   7days</span><br><span class="line">[root@rhel6 skel]# su - student</span><br><span class="line">[student@rhel6 ~]$ touch file&#123;1..10&#125;</span><br><span class="line">vdb2: write failed, user file limit reached.</span><br><span class="line">touch: cannot touch `file1': Disk quota exceeded</span><br><span class="line">touch: cannot touch `file2': Disk quota exceeded</span><br><span class="line">touch: cannot touch `file3': Disk quota exceeded</span><br><span class="line">touch: cannot touch `file4': Disk quota exceeded</span><br><span class="line">touch: cannot touch `file5': Disk quota exceeded</span><br><span class="line">touch: cannot touch `file6': Disk quota exceeded</span><br><span class="line">touch: cannot touch `file7': Disk quota exceeded</span><br><span class="line">touch: cannot touch `file8': Disk quota exceeded</span><br><span class="line">touch: cannot touch `file9': Disk quota exceeded</span><br><span class="line">touch: cannot touch `file10': Disk quota exceeded</span><br></pre></td></tr></table></figure>

<h4 id="rhel7-quotaå®éªŒ"><a href="#rhel7-quotaå®éªŒ" class="headerlink" title="rhel7 quotaå®éªŒ"></a>rhel7 quotaå®éªŒ</h4><p>rootç”¨æˆ·ï¼š</p>
<ol>
<li><p>æŸ¥çœ‹å†…æ ¸æ˜¯å¦æ”¯æŒ quota åŠŸèƒ½: dmesg | grep quota</p>
</li>
<li><p>æŸ¥çœ‹ quota ç¨‹åºåŒ…æ˜¯å¦å·²ç»å®‰è£…: rpm -q quota</p>
</li>
<li><p>æŸ¥çœ‹ boot ç›®å½•æ˜¯å¦æ”¯æŒ quota åŠŸèƒ½(noquota è¡¨ç¤ºæš‚æ—¶ä¸æ”¯æŒ): mount|grep boot</p>
</li>
<li><p>è®©/boot ç›®å½•æ”¯æŒ quota åŠŸèƒ½: vim /etc/fstab å±æ€§ä¸­æ·»åŠ usrquota</p>
</li>
<li><p>é‡å¯ä¸»æœºåå³å¯ç”Ÿæ•ˆ: reboot</p>
</li>
<li><p>æŸ¥çœ‹ boot ç›®å½•æ˜¯å¦æ”¯æŒ quota åŠŸèƒ½(usrquota è¡¨ç¤ºå·²ç»æ”¯æŒ): mount|grep boot</p>
</li>
<li><p>åˆ›å»ºä¸€ä¸ªç”¨äº quota å®éªŒçš„ç”¨æˆ· tom: useradd tom &amp;&amp; echo uplooking|passwd tom</p>
</li>
<li><p>éœ€è¦å…è®¸å…¶ä»–ç”¨æˆ·å¯¹/boot ç›®å½•å†™å…¥æ–‡ä»¶æ“ä½œ: chmod -Rf o+w /boot</p>
</li>
<li><p>ä½¿ç”¨ xfs_quota å‘½ä»¤è®¾ç½®å¯¹ tom ç”¨æˆ·åœ¨/boot ç›®å½•çš„ç£ç›˜é…é¢,å…·ä½“è¦æ±‚å¦‚ä¸‹:<br>ä½¿ç”¨ quota ä¸“å®¶æ¨¡å¼é™åˆ¶ç£ç›˜è½¯é™åˆ¶ä¸º 3mã€ç£ç›˜ç¡¬é™åˆ¶ä¸º 6mã€æ–‡ä»¶è½¯é™åˆ¶ä¸º 3 ä¸ªä¸”æ–‡ä»¶ç¡¬é™åˆ¶ä¸º 6 ä¸ªã€‚ è·å–å½“å‰/boot ç›®å½•ä¸Šçš„ quota é…é¢é™åˆ¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">xfs_quota -x -c 'limit bsoft=3m bhard=6m isoft=3 ihard=6 tom' /boot</span><br><span class="line">xfs_quota -x -c report /boot</span><br></pre></td></tr></table></figure>
<p>åˆ‡æ¢è‡³ tom ç”¨æˆ·: su - tom</p>
</li>
<li><p>æ­£å¸¸åˆ›å»ºäº†ä¸€ä¸ªä¸º 5M çš„æ–‡ä»¶: dd if=/dev/zero of=/boot/tom bs=5M count=1</p>
</li>
<li><p>åˆ›å»º 8M æ–‡ä»¶æ—¶å¼ºåˆ¶ç»ˆæ­¢å¹¶æŠ¥é”™äº†: dd if=/dev/zero of=/boot/tom bs=8M count=1</p>
</li>
<li><p>æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„ quota é™åˆ¶(æ˜¾ç¤ºç¡¬ç›˜é…é¢å·²å æ»¡): quota</p>
</li>
</ol>
<p>åˆ‡æ¢è‡³rootç”¨æˆ·ï¼šexit</p>
<ol>
<li>ç¼–è¾‘ tom çš„é…é¢é™åˆ¶,å°†ç¡¬ç›˜çš„ç¡¬é™åˆ¶ä¿®æ”¹ä¸º 8m(8192k): edquota -u tom</li>
</ol>
<p>åˆ‡æ¢è‡³ tom ç”¨æˆ·: su - tom</p>
<ol>
<li>å†æ¥åˆ›å»º 8m çš„æ–‡ä»¶å°±ä¸ä¼šæœ‰é—®é¢˜äº†: dd if=/dev/zero of=/boot/tom bs=8M count=1</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# dmesg|grep quota</span><br><span class="line">[    0.836809] VFS: Disk quotas dquot_6.5.2</span><br><span class="line">[root@rhel7 ~]# rpm -q quota</span><br><span class="line">quota-4.01-11.el7.x86_64</span><br><span class="line">[root@rhel7 ~]# mount|grep boot</span><br><span class="line">/dev/vda1 on /boot type xfs (rw,relatime,seclabel,attr2,inode64,noquota)</span><br><span class="line">[root@rhel7 ~]# vim /etc/fstab</span><br><span class="line">UUID=abbadca9-0a0d-453f-b713-d3d978cd6909 /boot                   xfs     defaults,usrquota        1 2</span><br><span class="line">[root@rhel7 ~]# reboot</span><br><span class="line">[root@rhel7 ~]# mount|grep boot</span><br><span class="line">/dev/vda1 on /boot type xfs (rw,relatime,seclabel,attr2,inode64,usrquota)</span><br><span class="line">[root@rhel7 ~]# useradd tom</span><br><span class="line">[root@rhel7 ~]# passwd tom</span><br><span class="line">Changing password for user tom.</span><br><span class="line">New password:</span><br><span class="line">BAD PASSWORD: The password fails the dictionary check - it is based on a dictionary word</span><br><span class="line">Retype new password:</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line">[root@rhel7 ~]# chmod -Rf o+w /boot</span><br><span class="line">[root@rhel7 ~]# ll -d /boot</span><br><span class="line">dr-xr-xrwx. 3 root root 4096 Jun 27 03:59 /boot</span><br><span class="line">[root@rhel7 ~]# xfs_quota -x -c 'limit bsoft=3m bhard=6m isoft=3 ihard=6 tom' /boot</span><br><span class="line">[root@rhel7 ~]# xfs_quota -x -c report /boot</span><br><span class="line">User quota on /boot (/dev/vda1)</span><br><span class="line">                               Blocks                     </span><br><span class="line">User ID          Used       Soft       Hard    Warn/Grace     </span><br><span class="line">---------- --------------------------------------------------</span><br><span class="line">root           120384          0          0     00 [--------]</span><br><span class="line">tom                 0       3072       6144     00 [--------]</span><br><span class="line"></span><br><span class="line">[root@rhel7 ~]# su - tom</span><br><span class="line">Last login: Fri Jul  1 02:51:33 EDT 2016 on pts/0</span><br><span class="line">[tom@rhel7 ~]$ dd if=/dev/zero of=/boot/tom bs=5M count=1</span><br><span class="line">1+0 records in</span><br><span class="line">1+0 records out</span><br><span class="line">5242880 bytes (5.2 MB) copied, 0.0270144 s, 194 MB/s</span><br><span class="line">[tom@rhel7 ~]$ dd if=/dev/zero of=/boot/tom bs=8M count=1</span><br><span class="line">dd: error writing â€˜/boot/tomâ€™: Disk quota exceeded</span><br><span class="line">1+0 records in</span><br><span class="line">0+0 records out</span><br><span class="line">6291456 bytes (6.3 MB) copied, 0.218067 s, 28.9 MB/s</span><br><span class="line">[tom@rhel7 ~]$ quota</span><br><span class="line">Disk quotas for user tom (uid 1001):</span><br><span class="line">     Filesystem  blocks   quota   limit   grace   files   quota   limit   grace</span><br><span class="line">      /dev/vda1    6144*   3072    6144   6days       1       3       6  </span><br><span class="line">[tom@rhel7 ~]$ exit</span><br><span class="line">logout</span><br><span class="line">[root@rhel7 ~]# edquota -u tom</span><br><span class="line">Disk quotas for user tom (uid 1001):</span><br><span class="line">  Filesystem                   blocks       soft       hard     inodes     soft     hard</span><br><span class="line">  /dev/vda1                      8192       3072       8192          1        3        6</span><br><span class="line">[root@rhel7 ~]# xfs_quota -x -c report /boot</span><br><span class="line">User quota on /boot (/dev/vda1)</span><br><span class="line">                               Blocks                     </span><br><span class="line">User ID          Used       Soft       Hard    Warn/Grace     </span><br><span class="line">---------- --------------------------------------------------</span><br><span class="line">root           120384          0          0     00 [--------]</span><br><span class="line">tom              6144       3072       8192     00  [6 days]</span><br><span class="line"></span><br><span class="line">[root@rhel7 ~]# su - tom</span><br><span class="line">Last login: Fri Jul  1 02:58:22 EDT 2016 on pts/0</span><br><span class="line">[tom@rhel7 ~]$ dd if=/dev/zero of=/boot/tom bs=8M count=1</span><br><span class="line">1+0 records in</span><br><span class="line">1+0 records out</span><br><span class="line">8388608 bytes (8.4 MB) copied, 0.267325 s, 31.4 MB/s</span><br><span class="line">[tom@rhel7 ~]$ exit</span><br><span class="line">logout</span><br></pre></td></tr></table></figure>

<h2 id="é€»è¾‘å·ç®¡ç†-LVM"><a href="#é€»è¾‘å·ç®¡ç†-LVM" class="headerlink" title="é€»è¾‘å·ç®¡ç† LVM"></a>é€»è¾‘å·ç®¡ç† LVM</h2><p>é€»è¾‘å·ç®¡ç† (Logical Volume Manager)</p>
<h3 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><p>å½“ç”¨æˆ·æ ¹æ®å®é™…æƒ…å†µéœ€è¦å¯¹åˆ†åŒºå¢åŠ ã€å‡å°ç­‰è°ƒæ•´æ—¶,ç»å¸¸ä¼šå—åˆ°ç¡¬ç›˜ â€œ çµæ´»æ€§ â€ çš„é™åˆ¶,å¾ˆä¸æ–¹ä¾¿ã€‚</p>
<p>é€»è¾‘å·ç®¡ç†å™¨åˆ™æ˜¯åœ¨ç£ç›˜åˆ†åŒºä¸æ–‡ä»¶ç³»ç»Ÿä¹‹é—´æ·»åŠ çš„é€»è¾‘å±‚,æä¾›ä¸€ä¸ªæŠ½è±¡çš„å·ç»„,ä½¿å¾—ç®¡ç†è€…å¯ä»¥å¿½ç•¥åº•å±‚ç£ç›˜å¸ƒå±€, ä»è€Œå®ç°å¯¹åˆ†åŒºçš„çµæ´»åŠ¨æ€è°ƒæ•´,è¿™æ¯«ä¸å¤¸å¼ ,æ‰€ä»¥çº¢å¸½ RHEL7 ç³»ç»Ÿå·²ç»é»˜è®¤å¯ç”¨äº† LVM(Logical Volume Manager) æœºåˆ¶ã€‚</p>
<h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p><img src="pic/00.png" alt="00"></p>
<p>å°†ç‰©ç†åˆ†åŒºåšæˆ pv ï¼›å°† pv ç»„åˆæˆ vg ï¼›å†ä» vg åˆ†å‡º lv åˆ†åŒº â€“&gt;pvâ€“&gt;vgâ€“&gt;lv</p>
<ul>
<li>ç‰©ç†å·(PV,Physical Volume ): æ•´ä¸ªç¡¬ç›˜è®¾å¤‡æˆ–ä½¿ç”¨ fdisk å‘½ä»¤å»ºç«‹çš„ç¡¬ç›˜åˆ†åŒºã€‚</li>
<li>å·ç»„(VG,Volume Group ) :ç”±ä¸€ä¸ªæˆ–å¤šä¸ªç‰©ç†å·(PV)ç»„æˆçš„æ•´ä½“</li>
<li>é€»è¾‘å·(LV,Logical Volume ):ä»å·ç»„(VG)å‡ºåˆ‡å‰²å‡ºçš„ç©ºé—´æ¥ç”¨äºåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ,å¤§å°ç”± PE çš„ä¸ªæ•°å†³å®šã€‚</li>
</ul>
<h3 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><p><img src="pic/27.png" alt="27"><br><img src="pic/28.png" alt="28"><br><img src="pic/30.png" alt="30"><br><img src="pic/31.png" alt="31"></p>
<h3 id="å®éªŒ-1"><a href="#å®éªŒ-1" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h3><p>å®éªŒï¼šlinear ç›®å‰ç”¨æˆ·çš„æ˜ å°„ç›®æ ‡ä¸ºlinearå‹ï¼Œçº¿æ€§å‹ï¼Œ/dev/vdb1 pv1 100M;/dev/vdb2 pv2 100M;/dev/vdb3 pv 3 100Mâ€”â€“&gt;myvg 300Mâ€”â€“&gt;lv1-linear 20M;lv2-linear 60Mç°åœ¨lv1-linearä¸å¤Ÿç”¨äº†ï¼Œéœ€è¦æ‹“å±•60Mçš„ç©ºé—´ï¼Œlv2-linearä¹Ÿä¸å¤Ÿç”¨äº†ï¼Œéœ€è¦æ‹“å±•30Mçš„ç©ºé—´ï¼Œå¦‚ä½•åšæ‰èƒ½æé«˜è¯»å†™é€Ÿåº¦ï¼Ÿ</p>
<p><img src="pic/32.png" alt="32"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@iscsi1-f15 ~]# dmsetup table|grep my</span><br><span class="line">myvg-lv1--linear: 0 40960 linear 252:21 2048</span><br><span class="line">myvg-lv1--linear: 40960 32768 linear 252:21 165888</span><br><span class="line">myvg-lv1--linear: 73728 90112 linear 252:22 2048</span><br><span class="line">myvg-lv2--linear: 0 122880 linear 252:21 43008</span><br><span class="line">myvg-lv2--linear: 122880 65536 linear 252:22 92160</span><br><span class="line">â€“------------------------------------------------------------------------</span><br><span class="line">[root@iscsi1-f15 ~]# dmsetup table|grep myvg</span><br><span class="line">myvg-lv1--linear: 0 73728 linear 252:25 2048</span><br><span class="line">myvg-lv1--linear: 73728 90112 linear 252:25 75776</span><br><span class="line">myvg-lv2--linear: 0 122880 linear 252:25 165888</span><br><span class="line">myvg-lv2--linear: 122880 65536 linear 252:25 288768</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@iscsi1-f15 ~]# fdisk /dev/vdb ---&gt;vdb[123] 100M</span><br><span class="line">[root@iscsi1-f15 ~]# pvcreate /dev/vdb[123]</span><br><span class="line">[root@iscsi1-f15 ~]# vgcreate myvg /dev/vdb[123]</span><br><span class="line">[root@iscsi1-f15 ~]# lvcreate -L 20M myvg -n lv1-linear</span><br><span class="line">[root@iscsi1-f15 ~]# lvcreate -L 60M myvg -n lv2-linear</span><br><span class="line">[root@iscsi1-f15 ~]# mkfs.ext4 /dev/myvg/lv1-linear</span><br><span class="line">[root@iscsi1-f15 ~]# mkfs.ext4 /dev/myvg/lv2-linear</span><br><span class="line">[root@iscsi1-f15 ~]# mount /dev/myvg/lv1-linear /opt/lv1</span><br><span class="line">[root@iscsi1-f15 ~]# mount /dev/myvg/lv2-linear /opt/lv2</span><br><span class="line">[root@iscsi1-f15 ~]# lvextend -L +60M /dev/myvg/lv1-linear</span><br><span class="line">[root@iscsi1-f15 ~]# lvextend -L +30M /dev/myvg/lv2-linear</span><br><span class="line">[root@iscsi1-f15 ~]# resize2fs /dev/myvg/lv1-linear</span><br><span class="line">[root@iscsi1-f15 ~]# resize2fs /dev/myvg/lv2-linear</span><br><span class="line">[root@iscsi1-f15 ~]# dmsetup table|grep my</span><br><span class="line">myvg-lv1--linear: 0 40960 linear 252:21 2048</span><br><span class="line">myvg-lv1--linear: 40960 32768 linear 252:21 165888</span><br><span class="line">myvg-lv1--linear: 73728 90112 linear 252:22 2048</span><br><span class="line">myvg-lv2--linear: 0 122880 linear 252:21 43008</span><br><span class="line">myvg-lv2--linear: 122880 65536 linear 252:22 92160</span><br><span class="line">â€“------------------------------------------------------------------------</span><br><span class="line">[root@iscsi1-f15 ~]# fdisk /dev/vdb ---&gt;vdb4 500M vdb5 500M</span><br><span class="line">[root@iscsi1-f15 ~]# partx -a /dev/vdb</span><br><span class="line">[root@iscsi1-f15 ~]# pvcreate /dev/vdb[45]</span><br><span class="line">[root@iscsi1-f15 ~]# vgextend myvg /dev/vdb[45]</span><br><span class="line">[root@iscsi1-f15 ~]# pvmove /dev/vdb1 /dev/vdb4</span><br><span class="line">[root@iscsi1-f15 ~]# pvmove /dev/vdb2 /dev/vdb4</span><br><span class="line">[root@iscsi1-f15 ~]# pvmove /dev/vdb4 /dev/vdb5</span><br><span class="line">[root@iscsi1-f15 ~]# dmsetup table|grep myvg</span><br><span class="line">myvg-lv1--linear: 0 73728 linear 252:25 2048</span><br><span class="line">myvg-lv1--linear: 73728 90112 linear 252:25 75776</span><br><span class="line">myvg-lv2--linear: 0 122880 linear 252:25 165888</span><br><span class="line">myvg-lv2--linear: 122880 65536 linear 252:25 288768</span><br></pre></td></tr></table></figure>


<h2 id="Linuxæ–‡ä»¶ç³»ç»Ÿå’Œç£ç›˜ç®¡ç†ä½œä¸š"><a href="#Linuxæ–‡ä»¶ç³»ç»Ÿå’Œç£ç›˜ç®¡ç†ä½œä¸š" class="headerlink" title="Linuxæ–‡ä»¶ç³»ç»Ÿå’Œç£ç›˜ç®¡ç†ä½œä¸š"></a>Linuxæ–‡ä»¶ç³»ç»Ÿå’Œç£ç›˜ç®¡ç†ä½œä¸š</h2><ol>
<li>åˆ†åˆ«åœ¨rhel6å’Œrhel7ä¸Šåˆ’åˆ†/dev/vdbç£ç›˜ï¼Œè¦æ±‚ï¼Œ/dev/vdb1å¤§å°ä¸º1Gï¼Œ/dev/vdb2å¤§å°ä¸º2Gï¼›åˆ›å»ºå¯¹åº”æ“ä½œç³»ç»Ÿé»˜è®¤çš„æ–‡ä»¶ç³»ç»Ÿï¼Œrhel6é»˜è®¤ext4ï¼Œrhel7é»˜è®¤xfsã€‚</li>
<li>rhel6ä¸Šå°†/dev/vdb2æŒ‚è½½åœ¨studentå®¶ç›®å½•ä¸‹ä½¿ç”¨ï¼Œé™åˆ¶ç£ç›˜è½¯é™åˆ¶ä¸º 3Mã€ç£ç›˜ç¡¬é™åˆ¶ä¸º 6Mã€æ–‡ä»¶è½¯é™åˆ¶ä¸º 20 ä¸ªä¸”æ–‡ä»¶ç¡¬é™åˆ¶ä¸º 30 ä¸ª</li>
<li>rhel7ä¸Šå®Œæˆï¼š<br>rootç”¨æˆ·ï¼š<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"> 1. æŸ¥çœ‹å†…æ ¸æ˜¯å¦æ”¯æŒ quota åŠŸèƒ½:</span><br><span class="line"> 2. æŸ¥çœ‹ quota ç¨‹åºåŒ…æ˜¯å¦å·²ç»å®‰è£…:</span><br><span class="line"> 3. æŸ¥çœ‹ boot ç›®å½•æ˜¯å¦æ”¯æŒ quota åŠŸèƒ½(noquota è¡¨ç¤ºæš‚æ—¶ä¸æ”¯æŒ):</span><br><span class="line"> 4. è®©/boot ç›®å½•æ”¯æŒ quota åŠŸèƒ½:</span><br><span class="line"> 5. é‡å¯ä¸»æœºåå³å¯ç”Ÿæ•ˆ:</span><br><span class="line"> 6. æŸ¥çœ‹ boot ç›®å½•æ˜¯å¦æ”¯æŒ quota åŠŸèƒ½(usrquota è¡¨ç¤ºå·²ç»æ”¯æŒ):</span><br><span class="line"> 7. åˆ›å»ºä¸€ä¸ªç”¨äº quota å®éªŒçš„ç”¨æˆ· tom:</span><br><span class="line"> 8. éœ€è¦å…è®¸å…¶ä»–ç”¨æˆ·å¯¹/boot ç›®å½•å†™å…¥æ–‡ä»¶æ“ä½œ:</span><br><span class="line"> 9. ä½¿ç”¨ xfs_quota å‘½ä»¤è®¾ç½®å¯¹ tom ç”¨æˆ·åœ¨/boot ç›®å½•çš„ç£ç›˜é…é¢,å…·ä½“è¦æ±‚å¦‚ä¸‹:</span><br><span class="line">ä½¿ç”¨ quota ä¸“å®¶æ¨¡å¼é™åˆ¶ç£ç›˜è½¯é™åˆ¶ä¸º 3mã€ç£ç›˜ç¡¬é™åˆ¶ä¸º 6mã€æ–‡ä»¶è½¯é™åˆ¶ä¸º 3 ä¸ªä¸”æ–‡ä»¶ç¡¬é™åˆ¶ä¸º 6 ä¸ªã€‚ è·å–å½“å‰/boot ç›®å½•ä¸Šçš„ quota é…é¢é™åˆ¶</span><br></pre></td></tr></table></figure>
åˆ‡æ¢è‡³ tom ç”¨æˆ·:<ol>
<li>æ­£å¸¸åˆ›å»ºäº†ä¸€ä¸ªä¸º 5M çš„æ–‡ä»¶:</li>
<li>åˆ›å»º 8M æ–‡ä»¶æ—¶å¼ºåˆ¶ç»ˆæ­¢å¹¶æŠ¥é”™äº†:</li>
<li>æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„ quota é™åˆ¶(æ˜¾ç¤ºç¡¬ç›˜é…é¢å·²å æ»¡):</li>
</ol>
</li>
</ol>
<p>åˆ‡æ¢è‡³rootç”¨æˆ·ï¼š</p>
<ol>
<li>ç¼–è¾‘ tom çš„é…é¢é™åˆ¶,å°†ç¡¬ç›˜çš„ç¡¬é™åˆ¶ä¿®æ”¹ä¸º 8m(8192k):</li>
</ol>
<p>åˆ‡æ¢è‡³ tom ç”¨æˆ·:</p>
<ol>
<li>å†æ¥åˆ›å»º 8m çš„æ–‡ä»¶å°±ä¸ä¼šæœ‰é—®é¢˜äº†:</li>
</ol>
<hr>
<ol start="4">
<li>rhel6å’Œrhel7ä¸Šå®Œæˆlvmé€»è¾‘å·ç®¡ç†ï¼Œè¦æ±‚ï¼š<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1ï¼‰/dev/vdb1 100M;/dev/vdb2 100M;/dev/vdb3 100M;/dev/vdb4 100M</span><br><span class="line">2) å°†/dev/vdb[1,2,3,4]åšæˆpv</span><br><span class="line">3ï¼‰/dev/vdb1,/dev/vdb2ç»„æˆvgtest300M</span><br><span class="line">4ï¼‰ä»vgtestä¸­åˆ’åˆ†50Mçš„lvtest1</span><br><span class="line">5ï¼‰å°†lvtest1æŒ‚è½½åˆ°/mntä¸‹ä½¿ç”¨</span><br><span class="line">6ï¼‰æ‹“å±•lvtest1è‡³200M</span><br><span class="line">7ï¼‰æ‹“å±•lvtest1è‡³400M</span><br><span class="line">8ï¼‰ç¼©å°lvtest1è‡³50M</span><br></pre></td></tr></table></figure>
</li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯åŸ¹è®­</category>
        <category>Linuxç³»ç»ŸåŸºç¡€åŸ¹è®­</category>
      </categories>
      <tags>
        <tag>åŸ¹è®­</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux æ—¥å¿—å’Œè®¡åˆ’ä»»åŠ¡</title>
    <url>/2016/12/22/booboo_linux_base/08-%E6%97%A5%E5%BF%97%E5%92%8C%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/</url>
    <content><![CDATA[<h2 id="æ—¥å¿—"><a href="#æ—¥å¿—" class="headerlink" title="æ—¥å¿—"></a>æ—¥å¿—</h2><h3 id="æ—¥å¿—çš„ä½œç”¨"><a href="#æ—¥å¿—çš„ä½œç”¨" class="headerlink" title="æ—¥å¿—çš„ä½œç”¨"></a>æ—¥å¿—çš„ä½œç”¨</h3><ul>
<li>è§£å†³ç³»ç»Ÿæ–¹é¢çš„é”™è¯¯</li>
<li>è§£å†³ç½‘ç»œæœåŠ¡çš„é—®é¢˜</li>
<li>è¿‡å¾€äº‹ä»¶è®°å½•</li>
</ul>
<h3 id="å¸¸ç”¨çš„æ—¥å¿—"><a href="#å¸¸ç”¨çš„æ—¥å¿—" class="headerlink" title="å¸¸ç”¨çš„æ—¥å¿—"></a>å¸¸ç”¨çš„æ—¥å¿—</h3><table>
<thead>
<tr>
<th align="left">æ—¥å¿—</th>
<th align="left">è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td align="left">/var/log/cron</td>
<td align="left">crontab è®¡åˆ’ä»»åŠ¡</td>
</tr>
<tr>
<td align="left">/var/log/dmesg</td>
<td align="left">å¼€æœºæ ¸å¿ƒä¾¦æµ‹ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">/var/log/lastlog</td>
<td align="left">ç³»ç»Ÿæ‰€æœ‰å¸å·æœ€è¿‘ä¸€æ¬¡ç™»é™†ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">/var/log/maillog</td>
<td align="left">é‚®ä»¶å¾€æ¥ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">/var/log/messages</td>
<td align="left">ç³»ç»Ÿé”™è¯¯ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">/var/log/secure</td>
<td align="left">æ¶‰åŠè¾“å…¥å¸å·å¯†ç çš„ç¨‹åº</td>
</tr>
<tr>
<td align="left">/var/log/wtmp</td>
<td align="left">æ­£ç¡®ç™»é™†ç³»ç»Ÿçš„è´¦æˆ·ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">/var/log/btmp</td>
<td align="left">é”™è¯¯ç™»é™†ç³»ç»Ÿçš„è´¦æˆ·ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">/var/log/httpd/*</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">/var/log/samba/*</td>
<td align="left">ä¸åŒçš„ç½‘ç»œæœåŠ¡ä¼šä½¿ç”¨å®ƒä»¬è‡ªå·±çš„ç™»å½•æ–‡ä»¶æ¥è®°è½½å®ƒä»¬è‡ªå·±äº§ç”Ÿçš„å„é¡¹ä¿¡æ¯</td>
</tr>
</tbody></table>
<h3 id="æ—¥å¿—çš„ç±»å‹"><a href="#æ—¥å¿—çš„ç±»å‹" class="headerlink" title="æ—¥å¿—çš„ç±»å‹"></a>æ—¥å¿—çš„ç±»å‹</h3><p>1&gt; å¯æŸ¥çœ‹çš„ ASCII çš„æ—¥å¿—</p>
<p>â€¢ messages</p>
<p>â€¢ ä¸ç¨‹åºåŒåçš„ç›®å½•ä¸‹, ä¼šè®°å½•å’Œè¯¥ç¨‹åºç›¸å…³çš„ä¸€äº›æ—¥å¿—</p>
<p>2&gt; ä¸å¯æŸ¥çœ‹çš„ data æ—¥å¿—</p>
<p>éœ€è¦è°ƒç”¨æŸäº›å‘½ä»¤æ‰èƒ½å»æŸ¥çœ‹å¯¹åº”çš„æ—¥å¿—</p>
<p>â€¢ wtmp &lt;==last: ç³»ç»Ÿç™»é™†ç™»å‡ºä¿¡æ¯</p>
<p>â€¢ btmp &lt;==lastb: é”™è¯¯çš„ç³»ç»Ÿç™»é™†ç™»å‡ºæƒ…å†µ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[#</span><span class="bash">3<span class="comment">#root@rhel6 ~]#file /var/log/wtmp</span></span></span><br><span class="line">/var/log/wtmp: data</span><br></pre></td></tr></table></figure>

<h3 id="æ—¥å¿—éœ€è¦çš„æœåŠ¡å’Œç¨‹åº"><a href="#æ—¥å¿—éœ€è¦çš„æœåŠ¡å’Œç¨‹åº" class="headerlink" title="æ—¥å¿—éœ€è¦çš„æœåŠ¡å’Œç¨‹åº"></a>æ—¥å¿—éœ€è¦çš„æœåŠ¡å’Œç¨‹åº</h3><p>rsyslogd ä¸»è¦è´Ÿè´£è®°å½•ç³»ç»Ÿè¿ä½œä¸­ , kernel æˆ–åº”ç”¨ç¨‹åºäº§ç”Ÿçš„å„ç§è®¯æ¯ , è®¯æ¯è¢«å†™å…¥ç³»ç»Ÿæ—¥å¿—</p>
<p>logrotate ä¸»è¦åœ¨è¿›è¡Œæ—¥å¿—æ–‡ä»¶çš„è½®æ›¿åŠŸèƒ½</p>
<ul>
<li>rhel5 ç‰ˆæœ¬ä»¥å‰æ˜¯ syslogd æœåŠ¡ , rhel6 ä¹‹åæ˜¯ rsyslogd æœåŠ¡ ( reliable and extended å¯é çš„å’Œæ‹“å±•çš„<br>syslogd æœåŠ¡ )</li>
</ul>
<p>ã€ (1) ä»€ä¹ˆæœåŠ¡ (2) ä»€ä¹ˆç­‰çº§ä¿¡æ¯ (3) éœ€è¦è¢«è®°å½•åœ¨å“ªé‡Œ ( è®¾å¤‡æˆ–æ–‡ä»¶ ) ã€</p>
<h3 id="rsyslog-çš„ç›¸å…³é…ç½®æ–‡ä»¶"><a href="#rsyslog-çš„ç›¸å…³é…ç½®æ–‡ä»¶" class="headerlink" title="rsyslog çš„ç›¸å…³é…ç½®æ–‡ä»¶"></a>rsyslog çš„ç›¸å…³é…ç½®æ–‡ä»¶</h3><p>â€¢ /etc/rsyslog.conf</p>
<p>â€¢ /etc/rsyslog.d/*</p>
<h3 id="etc-rsyslog-conf"><a href="#etc-rsyslog-conf" class="headerlink" title="/etc/rsyslog.conf"></a>/etc/rsyslog.conf</h3><p>/etc/rsyslog.conf æ–‡ä»¶ä¸­çš„ä¸€é¡¹é…ç½®è®°å½•ç”± â€œ é€‰é¡¹ â€ (selector) å’Œ â€œ åŠ¨ä½œ â€ (action)ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆ,ä¸¤<br>è€…é—´ç”¨ tab åˆ¶è¡¨ç¬¦è¿›è¡Œåˆ†éš”(ä½¿ç”¨ç©ºæ ¼é—´éš”æ˜¯æ— æ•ˆçš„)ã€‚</p>
<p>â€œ é€‰é¡¹ â€ ( selector)ç”±ä¸¤éƒ¨åˆ†ç»„æˆ:</p>
<ul>
<li>è®¾æ–½ facility å’Œçº§åˆ« loglevel,ç”±ç‚¹å·.åˆ†éš”,ä¸¤éƒ¨åˆ†éƒ½æ˜¯å¤§å°å†™ä¸æ•æ„Ÿ;</li>
<li>è®¾æ–½å’Œçº§åˆ«éƒ½åœ¨ syslog(3)ä¸­æœ‰æè¿°ã€‚å„ä¿ç•™å­—æ®µé—´ç”¨åˆ†å·åˆ†éš”ã€‚</li>
<li>å¦‚ä¸‹è¡Œæ‰€ç¤º:</li>
</ul>
<p>è®¾æ–½. çº§åˆ« [;è®¾æ–½.çº§åˆ«]TAB åŠ¨ä½œ</p>
<h4 id="è®¾æ–½-facility"><a href="#è®¾æ–½-facility" class="headerlink" title="è®¾æ–½ facility"></a>è®¾æ–½ facility</h4><p>ä¿ç•™å­—æ®µä¸­çš„ â€œ è®¾æ–½ â€ (facility )ä»£è¡¨ä¿¡æ¯äº§ç”Ÿçš„æºå¤´,å¯ä»¥æ˜¯:</p>
<table>
<thead>
<tr>
<th align="left">facility</th>
<th align="left">è®¾æ–½</th>
</tr>
</thead>
<tbody><tr>
<td align="left">auth</td>
<td align="left">è®¤è¯ç³»ç»Ÿ,å³è¯¢é—®ç”¨æˆ·åå’Œå£ä»¤</td>
</tr>
<tr>
<td align="left">cron</td>
<td align="left">ç³»ç»Ÿå®šæ—¶ç³»ç»Ÿæ‰§è¡Œå®šæ—¶ä»»åŠ¡æ—¶å‘å‡ºçš„ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">daemon</td>
<td align="left">æŸäº›ç³»ç»Ÿçš„å®ˆæŠ¤ç¨‹åºçš„ syslog,å¦‚ç”± in.ftpd äº§ç”Ÿçš„ log</td>
</tr>
<tr>
<td align="left">kern</td>
<td align="left">å†…æ ¸çš„ syslog ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">lpr</td>
<td align="left">æ‰“å°æœºçš„ syslog ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">mail</td>
<td align="left">é‚®ä»¶ç³»ç»Ÿçš„ syslog ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">mark</td>
<td align="left">å®šæ—¶å‘é€æ¶ˆæ¯çš„æ—¶æ ‡ç¨‹åº</td>
</tr>
<tr>
<td align="left">news</td>
<td align="left">æ–°é—»ç³»ç»Ÿçš„ syslog ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">user</td>
<td align="left">æœ¬åœ°ç”¨æˆ·åº”ç”¨ç¨‹åºçš„ syslog ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">uucp</td>
<td align="left">uucp å­ç³»ç»Ÿçš„ syslog ä¿¡æ¯,unix to unix copy, unix ä¸»æœºä¹‹é—´ç›¸å…³çš„é€šè®¯</td>
</tr>
<tr>
<td align="left">local0-7</td>
<td align="left">ç§æœ¬åœ°ç±»å‹çš„ syslog ä¿¡æ¯,è¿™äº›ä¿¡æ¯å¯ä»¥åˆç”¨æˆ·æ¥å®šä¹‰</td>
</tr>
<tr>
<td align="left">*</td>
<td align="left">ä»£è¡¨ä»¥ä¸Šå„ç§è®¾å¤‡</td>
</tr>
</tbody></table>
<h4 id="çº§åˆ«-loglevel"><a href="#çº§åˆ«-loglevel" class="headerlink" title="çº§åˆ« loglevel"></a>çº§åˆ« loglevel</h4><p>ä¿ç•™å­—æ®µä¸­çš„ â€œ çº§åˆ« â€ ä»£è¡¨ä¿¡æ¯çš„é‡è¦æ€§,å¯ä»¥æ˜¯:</p>
<table>
<thead>
<tr>
<th align="left">num</th>
<th align="left">loglevel</th>
<th align="left">çº§åˆ«</th>
</tr>
</thead>
<tbody><tr>
<td align="left">0</td>
<td align="left">emerg</td>
<td align="left">ç´§æ€¥,å¤„äº Panic çŠ¶æ€ã€‚é€šå¸¸åº”å¹¿æ’­åˆ°æ‰€æœ‰ç”¨æˆ·;å‡ ä¹è¦å½“æœº</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">alert</td>
<td align="left">å‘Šè­¦,å½“å‰çŠ¶æ€å¿…é¡»ç«‹å³è¿›è¡Œçº æ­£ã€‚ä¾‹å¦‚,ç³»ç»Ÿæ•°æ®åº“å´©æºƒ;</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">crit</td>
<td align="left">å…³é”®çŠ¶æ€çš„è­¦å‘Šã€‚ä¾‹å¦‚,ç¡¬ä»¶æ•…éšœ;</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">err</td>
<td align="left">å…¶å®ƒé”™è¯¯;</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">warn</td>
<td align="left">è­¦å‘Š;</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left">notice</td>
<td align="left">æ³¨æ„;éé”™è¯¯çŠ¶æ€çš„æŠ¥å‘Š,ä½†åº”ç‰¹åˆ«å¤„ç†;</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left">info</td>
<td align="left">é€šæŠ¥ä¿¡æ¯;</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left">debug</td>
<td align="left">è°ƒè¯•ç¨‹åºæ—¶çš„ä¿¡æ¯;</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">none</td>
<td align="left">é€šå¸¸è°ƒè¯•ç¨‹åºæ—¶ç”¨,æŒ‡ç¤ºå¸¦æœ‰ none çº§åˆ«çš„ç±»å‹äº§ç”Ÿçš„ä¿¡æ¯æ— éœ€é€å‡ºã€‚å¦‚</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">*.debug;mail.none</td>
<td align="left">è¡¨ç¤ºè°ƒè¯•æ—¶é™¤é‚®ä»¶ä¿¡æ¯å¤–å…¶å®ƒä¿¡æ¯éƒ½é€å‡ºã€‚</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">.xxx:</td>
<td align="left">è¡¨ç¤ºå¤§äºç­‰äº xxx çº§åˆ«çš„ä¿¡æ¯</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">.=xxx:</td>
<td align="left">è¡¨ç¤ºç­‰äº xxx çº§åˆ«çš„ä¿¡æ¯</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">.!xxx:</td>
<td align="left">è¡¨ç¤ºåœ¨ xxx ä¹‹å¤–çš„ç­‰çº§çš„ä¿¡æ¯æ‹“å±•:</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[#</span><span class="bash">19<span class="comment">#root@rhel6 ~]#man syslog</span></span></span><br></pre></td></tr></table></figure>

<h4 id="åŠ¨ä½œ-action"><a href="#åŠ¨ä½œ-action" class="headerlink" title="åŠ¨ä½œ action"></a>åŠ¨ä½œ action</h4><p>â€œ åŠ¨ä½œ â€ åŸŸæŒ‡ç¤ºä¿¡æ¯å‘é€çš„ç›®çš„åœ°ã€‚å¯ä»¥æ˜¯:</p>
<table>
<thead>
<tr>
<th align="left">action</th>
<th align="left">åŠ¨ä½œ</th>
</tr>
</thead>
<tbody><tr>
<td align="left">/filename</td>
<td align="left">æ—¥å¿—æ–‡ä»¶ã€‚ç”±ç»å¯¹è·¯å¾„æŒ‡å‡ºçš„æ–‡ä»¶å,æ­¤æ–‡ä»¶å¿…é¡»äº‹å…ˆå»ºç«‹;</td>
</tr>
<tr>
<td align="left">@host</td>
<td align="left">è¿œç¨‹ä¸»æœº; @ç¬¦å·åé¢å¯ä»¥æ˜¯ ip,ä¹Ÿå¯ä»¥æ˜¯åŸŸå,é»˜è®¤åœ¨/etc/hosts æ–‡ä»¶ä¸‹ loghost è¿™ä¸ªåˆ«åå·²ç»æŒ‡å®šç»™äº†æœ¬æœºã€‚</td>
</tr>
<tr>
<td align="left">user1,user2</td>
<td align="left">æŒ‡å®šç”¨æˆ·ã€‚å¦‚æœæŒ‡å®šç”¨æˆ·å·²ç™»å½•,é‚£ä¹ˆä»–ä»¬å°†æ”¶åˆ°ä¿¡æ¯;</td>
</tr>
<tr>
<td align="left">*</td>
<td align="left">æ‰€æœ‰ç”¨æˆ·ã€‚æ‰€æœ‰å·²ç™»å½•çš„ç”¨æˆ·éƒ½å°†æ”¶åˆ°ä¿¡æ¯ã€‚</td>
</tr>
</tbody></table>
<h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><ol>
<li>è®°å½•åˆ°æ™®é€šæ–‡ä»¶æˆ–è®¾å¤‡æ–‡ä»¶<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">*.* /var/log/file.log</span><br><span class="line">*.* /dev/pts/0</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>æµ‹è¯•: logger -p local3.info â€˜KadeFor is testing the rsyslog and logger â€˜</p>
<p>logger å‘½ä»¤ç”¨äºäº§ç”Ÿæ—¥å¿—</p>
<ol start="2">
<li><p>è½¬å‘åˆ°è¿œç¨‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">*.* @192.168.0.1 # ä½¿ç”¨ UDP åè®®è½¬å‘åˆ° 192.168.0.1 çš„ 514(é»˜è®¤)ç«¯å£</span><br><span class="line">*.* @@192.168.0.1:10514 # ä½¿ç”¨ TCP åè®®è½¬å‘åˆ° 192.168.0.1 çš„ 10514(é»˜è®¤)ç«¯å£</span><br></pre></td></tr></table></figure>
</li>
<li><p>å‘é€ç»™ç”¨æˆ·(éœ€è¦åœ¨çº¿æ‰èƒ½æ”¶åˆ°)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">*.* root</span><br><span class="line">*.* root,kadefor,up01</span><br><span class="line">*.* *</span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li>ä½¿ç”¨,å·åˆ†éš”å¤šä¸ªç”¨æˆ·</li>
<li>*å·è¡¨ç¤ºæ‰€æœ‰åœ¨çº¿ç”¨æˆ·</li>
</ul>
<ol start="4">
<li>å¿½ç•¥,ä¸¢å¼ƒ<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">local3.* # å¿½ç•¥æ‰€æœ‰ local3 ç±»å‹çš„æ‰€æœ‰çº§åˆ«çš„æ—¥å¿—</span><br></pre></td></tr></table></figure></li>
<li>æ‰§è¡Œè„šæœ¬<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">local3.* ^/tmp/a.sh</span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li>^å·åè·Ÿå¯æ‰§è¡Œè„šæœ¬æˆ–ç¨‹åºçš„ç»å¯¹è·¯å¾„</li>
</ul>
<ol start="6">
<li>ä¸€ä¸ªæ ‡å‡†çš„ç®€å•çš„é…ç½®æ–‡ä»¶<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### RULES ####</span></span></span><br><span class="line">è§„åˆ™éƒ¨åˆ†</span><br><span class="line"><span class="meta">#</span><span class="bash"> Log all kernel messages to the console.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Logging much <span class="keyword">else</span> clutters up the screen.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">kern.*</span></span><br><span class="line">/dev/console</span><br><span class="line"><span class="meta">#</span><span class="bash">å…³äºå†…æ ¸çš„æ‰€æœ‰æ—¥å¿—éƒ½æ”¾åˆ°/dev/console(æ§åˆ¶å°)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Log anything (except mail) of level info or higher.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Don<span class="string">'t log private authentication messages!</span></span></span><br><span class="line">*.info;mail.none;authpriv.none;cron.none</span><br><span class="line">/var/log/messages</span><br><span class="line"><span class="meta">#</span><span class="bash"> è®°å½•æ‰€æœ‰æ—¥å¿—ç±»å‹çš„ info çº§åˆ«ä»¥åŠå¤§äº info çº§åˆ«çš„ä¿¡æ¯åˆ°/var/<span class="built_in">log</span>/messages,ä½†æ˜¯ mail</span></span><br><span class="line">é‚®ä»¶ä¿¡æ¯,authpriv éªŒè¯æ–¹é¢çš„ä¿¡æ¯å’Œ cron æ—¶é—´ä»»åŠ¡ç›¸å…³çš„ä¿¡æ¯é™¤å¤–</span><br><span class="line"><span class="meta">#</span><span class="bash"> The authpriv file has restricted access.</span></span><br><span class="line">authpriv.*</span><br><span class="line">/var/log/secure</span><br><span class="line"><span class="meta">#</span><span class="bash"> authpriv éªŒè¯ç›¸å…³çš„æ‰€æœ‰ä¿¡æ¯å­˜æ”¾åœ¨/var/<span class="built_in">log</span>/secure</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Log all the mail messages <span class="keyword">in</span> one place.</span></span><br><span class="line">mail.*</span><br><span class="line">-/var/log/maillog</span><br><span class="line"><span class="meta">#</span><span class="bash"> é‚®ä»¶çš„æ‰€æœ‰ä¿¡æ¯å­˜æ”¾åœ¨/var/<span class="built_in">log</span>/maillog; è¿™é‡Œæœ‰ä¸€ä¸ª-ç¬¦å·, è¡¨ç¤ºæ˜¯ä½¿ç”¨å¼‚æ­¥çš„æ–¹å¼è®°å½•,</span></span><br><span class="line">å› ä¸ºæ—¥å¿—ä¸€èˆ¬ä¼šæ¯”è¾ƒå¤§</span><br><span class="line"><span class="meta">#</span><span class="bash"> Log cron stuff</span></span><br><span class="line">cron.*</span><br><span class="line">/var/log/cron</span><br><span class="line"><span class="meta">#</span><span class="bash"> è®¡åˆ’ä»»åŠ¡æœ‰å…³çš„ä¿¡æ¯å­˜æ”¾åœ¨/var/<span class="built_in">log</span>/cron</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Everybody gets emergency messages</span></span><br><span class="line">*.emerg</span><br><span class="line">*</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ‰€æœ‰æ—¥å¿—ç±»å‹çš„ emerg ä¿¡æ¯å‘ç»™æ‰€æœ‰ç”¨æˆ·</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Save news errors of level crit and higher <span class="keyword">in</span> a special file.</span></span><br><span class="line">uucp,news.crit</span><br><span class="line">/var/log/spooler</span><br><span class="line"><span class="meta">#</span><span class="bash"> è®°å½• uucp,news.crit ç­‰å­˜æ”¾åœ¨/var/<span class="built_in">log</span>/spooler</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Save boot messages also to boot.log</span></span><br><span class="line">local7.*</span><br><span class="line">/var/log/boot.log</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨çš„ç›¸å…³ä¿¡æ¯å­˜æ”¾åœ¨/var/<span class="built_in">log</span>/boot.log</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="é‡å¯æœåŠ¡"><a href="#é‡å¯æœåŠ¡" class="headerlink" title="é‡å¯æœåŠ¡"></a>é‡å¯æœåŠ¡</h3><p>service rsyslog restart &lt;==rhel6</p>
<p>systermctl restart rsyslog &lt;==rhel7</p>
<p>ps : rsyslog çš„æ—¥å¿—åªè¦ã€è¢«ç¼–è¾‘è¿‡ã€å°±æ— æ³•ç»§ç»­è®°å½• ! éœ€è¦é‡å¯æ—¥å¿—æ¢å¤ã€‚</p>
<h2 id="logrotate-æ—¥å¿—è½®è¯¢"><a href="#logrotate-æ—¥å¿—è½®è¯¢" class="headerlink" title="logrotate æ—¥å¿—è½®è¯¢"></a>logrotate æ—¥å¿—è½®è¯¢</h2><p>/usr/sbin/logrotate å°†æ—§çš„æ—¥å¿—æ–‡ä»¶ç§»åŠ¨æˆæ—§æ–‡ä»¶, å¹¶é‡æ–°å»ºç«‹ä¸€ä¸ªæ–°çš„ç©ºçš„æ¡£æ¡ˆæ¥è®°å½•</p>
<p>/etc/cron.daily/logrotate è®°å½•æ¯å¤©è¦è¿›è¡Œçš„æ—¥å¿—è½®æ›¿çš„è¡Œä¸º</p>
<p>/etc/logrotate.conf</p>
<p>/etc/logrotate.d/*</p>
<p>ç¨‹åºçš„é…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[#</span><span class="bash">14<span class="comment">#root@rhel6 ~]#grep -v "^#" /etc/logrotate.conf|grep -v "^$"</span></span></span><br><span class="line">weekly</span><br><span class="line">rotate 4</span><br><span class="line">create</span><br><span class="line">dateext</span><br><span class="line">include /etc/logrotate.d</span><br><span class="line">/var/log/wtmp &#123;</span><br><span class="line">monthly</span><br><span class="line">create 0664 root utmp</span><br><span class="line">minsize 1M</span><br><span class="line">rotate 1</span><br><span class="line">&#125;</span><br><span class="line">/var/log/btmp &#123;</span><br><span class="line">missingok</span><br><span class="line">monthly</span><br><span class="line">create 0600 root utmp</span><br><span class="line">rotate 1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥é€šè¿‡ <code>man logrotate</code> æ¥æŸ¥çœ‹æ›´å¤šçš„ä¸€äº›å®šä¹‰ã€‚</p>
<h3 id="å‚æ•°å’ŒåŠŸèƒ½"><a href="#å‚æ•°å’ŒåŠŸèƒ½" class="headerlink" title="å‚æ•°å’ŒåŠŸèƒ½"></a>å‚æ•°å’ŒåŠŸèƒ½</h3><p>compress é€šè¿‡ gzip å‹ç¼©è½¬å‚¨ä»¥åçš„æ—¥å¿—</p>
<p>nocompress ä¸éœ€è¦å‹ç¼©æ—¶,ç”¨è¿™ä¸ªå‚æ•°</p>
<p>copytruncate ç”¨äºè¿˜åœ¨æ‰“å¼€ä¸­çš„æ—¥å¿—æ–‡ä»¶,æŠŠå½“å‰æ—¥å¿—å¤‡ä»½å¹¶æˆªæ–­</p>
<p>nocopytruncate å¤‡ä»½æ—¥å¿—æ–‡ä»¶ä½†æ˜¯ä¸æˆªæ–­</p>
<p>create mode owner group è½¬å‚¨æ–‡ä»¶,ä½¿ç”¨æŒ‡å®šçš„æ–‡ä»¶æ¨¡å¼åˆ›å»ºæ–°çš„æ—¥å¿—æ–‡ä»¶</p>
<p>nocreate ä¸å»ºç«‹æ–°çš„æ—¥å¿—æ–‡ä»¶</p>
<p>delaycompress å’Œ compress ä¸€èµ·ä½¿ç”¨æ—¶,è½¬å‚¨çš„æ—¥å¿—æ–‡ä»¶åˆ°ä¸‹ä¸€æ¬¡è½¬å‚¨æ—¶æ‰å‹ç¼©</p>
<p>nodelaycompress è¦†ç›– delaycompress é€‰é¡¹,è½¬å‚¨åŒæ—¶å‹ç¼©ã€‚</p>
<p>errors errors è½¬å‚¨æ—¶çš„é”™è¯¯ä¿¡æ¯å‘é€åˆ°æŒ‡å®šçš„ Email åœ°å€</p>
<p>ifempty å³ä½¿æ˜¯ç©ºæ–‡ä»¶ä¹Ÿè½¬å‚¨,è¿™ä¸ªæ˜¯ logrotate çš„ç¼ºçœé€‰é¡¹ã€‚</p>
<p>notifempty å¦‚æœæ˜¯ç©ºæ–‡ä»¶çš„è¯,ä¸è½¬å‚¨</p>
<p>mail address æŠŠè½¬å‚¨çš„æ—¥å¿—æ–‡ä»¶å‘é€åˆ°æŒ‡å®šçš„ E-mail åœ°å€</p>
<p>nomail è½¬å‚¨æ—¶ä¸å‘é€æ—¥å¿—æ–‡ä»¶</p>
<p>olddir directory è½¬å‚¨åçš„æ—¥å¿—æ–‡ä»¶æ”¾å…¥æŒ‡å®šçš„ç›®å½•,å¿…é¡»å’Œå½“å‰æ—¥å¿—æ–‡ä»¶åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ</p>
<p>noolddir è½¬å‚¨åçš„æ—¥å¿—æ–‡ä»¶å’Œå½“å‰æ—¥å¿—æ–‡ä»¶æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹</p>
<p>prerotate/endscript åœ¨è½¬å‚¨ä»¥å‰éœ€è¦æ‰§è¡Œçš„å‘½ä»¤å¯ä»¥æ”¾å…¥è¿™ä¸ªå¯¹,è¿™ä¸¤ä¸ªå…³é”®å­—å¿…é¡»å•ç‹¬æˆè¡Œ</p>
<p>postrotate/endscript åœ¨è½¬å‚¨ä»¥åéœ€è¦æ‰§è¡Œçš„å‘½ä»¤å¯ä»¥æ”¾å…¥è¿™ä¸ªå¯¹,è¿™ä¸¤ä¸ªå…³é”®å­—å¿…é¡»å•ç‹¬æˆè¡Œ</p>
<p>daily æŒ‡å®šè½¬å‚¨å‘¨æœŸä¸ºæ¯å¤©</p>
<p>weekly æŒ‡å®šè½¬å‚¨å‘¨æœŸä¸ºæ¯å‘¨</p>
<p>monthly æŒ‡å®šè½¬å‚¨å‘¨æœŸä¸ºæ¯æœˆ</p>
<p>rotate count æŒ‡å®šæ—¥å¿—æ–‡ä»¶åˆ é™¤ä¹‹å‰è½¬å‚¨çš„æ¬¡æ•°,0 æŒ‡æ²¡æœ‰å¤‡ä»½,5 æŒ‡ä¿ç•™ 5 ä¸ªå¤‡ä»½</p>
<p>tabootext [+] list è®© logrotate ä¸è½¬å‚¨æŒ‡å®šæ‰©å±•åçš„æ–‡ä»¶,ç¼ºçœçš„æ‰©å±•åæ˜¯:.rpm-orig, .rpmsave, v, å’Œ ~</p>
<p>size size å½“æ—¥å¿—æ–‡ä»¶åˆ°è¾¾æŒ‡å®šçš„å¤§å°æ—¶æ‰è½¬å‚¨,Size å¯ä»¥æŒ‡å®š bytes (ç¼ºçœ)ä»¥åŠ KB (sizek)æˆ–è€… MB (sizem).</p>
<h3 id="å®éªŒ"><a href="#å®éªŒ" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h3><p>è¦æ±‚:</p>
<ol>
<li>è®°å½•æ‰€æœ‰æ—¥å¿—ç±»å‹çš„ info çº§åˆ«ä»¥åŠå¤§äº info çº§åˆ«çš„ä¿¡æ¯,ä¿å­˜åˆ°/var/log/test,ä½†æ˜¯ mail<br>é‚®ä»¶ä¿¡æ¯,authpriv éªŒè¯æ–¹é¢çš„ä¿¡æ¯å’Œ cron æ—¶é—´ä»»åŠ¡ç›¸å…³çš„ä¿¡æ¯é™¤å¤–</li>
<li>/var/log/test æ—¥å¿—è½®è¯¢æ–¹å¼ä¸º:</li>
</ol>
<p>â€¢ æ¯å¤©è½®è¯¢ä¸€æ¬¡;</p>
<p>â€¢ ä¿ç•™ 4 ä¸ªæ–‡ä»¶;</p>
<p>â€¢ ä»¥æ—¶é—´å‘½å;</p>
<p>â€¢ åˆ›å»ºä¸åŸæ—¥å¿—åŒåçš„æ–°æ–‡ä»¶ã€‚</p>
<p>ç¬¬ä¸€æ­¥:ä¿®æ”¹ rsyslog çš„é…ç½®æ–‡ä»¶/etc/rsyslog.conf</p>
<p><code>*.info;mail.none;authpriv.none;cron.none</code></p>
<p>ç¬¬äºŒæ­¥:åˆ›å»ºç©ºæ–‡ä»¶/var/log/test</p>
<p><code>touch /var/log/test</code></p>
<p>ç¬¬ä¸‰æ­¥:é‡æ–°å¯åŠ¨æœåŠ¡</p>
<p><code>service rsyslog restart</code></p>
<p>ç¬¬å››æ­¥:ä¿®æ”¹ logrotate é…ç½®æ–‡ä»¶/etc/logrotate.conf</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/var/log/test &#123; &lt;== è½®å¾ªçš„æ—¥å¿—æ˜¯è°</span><br><span class="line">daily &lt;== è½®è¯¢å‘¨æœŸå¤šä¹…</span><br><span class="line">rotate 4 &lt;== ä¿ç•™å‡ ä¸ªå¸¦æ—¶é—´æˆ³çš„æ–‡ä»¶</span><br><span class="line">dateext &lt;== æ˜¯å¦ä»¥æ—¶é—´æˆ³ä¸ºæ–‡ä»¶æ›´åæ ¼å¼</span><br><span class="line">create &lt;== æ˜¯å¦éœ€è¦åˆ›å»ºä¸€ä¸ªä¸åŸæ—¥å¿—æ–‡ä»¶åŒåçš„æ–°æ–‡ä»¶</span><br></pre></td></tr></table></figure>
<p>ç¬¬äº”æ­¥:æµ‹è¯• <code>logrotate -vf /etc/logrotate.conf</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[#</span><span class="bash">41<span class="comment">#root@rhel6 ~]#logrotate -vf /etc/logrotate.conf</span></span></span><br><span class="line"><span class="meta">[#</span><span class="bash">42<span class="comment">#root@rhel6 ~]#ls /var/log/|grep test</span></span></span><br><span class="line">test</span><br><span class="line">test-20160630</span><br><span class="line">/var/log/test</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="è®¡åˆ’ä»»åŠ¡"><a href="#è®¡åˆ’ä»»åŠ¡" class="headerlink" title="è®¡åˆ’ä»»åŠ¡"></a>è®¡åˆ’ä»»åŠ¡</h2><p>æ¯ä¸ªäººæˆ–å¤šç«çƒ§éƒ½æœ‰ä¸€äº›çº¦ä¼šæˆ–è€…æ˜¯å·¥ä½œ,æœ‰çš„å·¥ä½œæ˜¯ä¾‹è¡Œæ€§çš„, ä¾‹å¦‚æ¯å¹´ä¸€æ¬¡çš„åŠ è–ªã€æ¯ä¸ªæœˆä¸€æ¬¡ çš„å·¥ä½œæŠ¥å‘Šã€æ¯å‘¨ä¸€æ¬¡çš„åˆé¤ä¼šæŠ¥ã€æ¯å¤©éœ€è¦çš„æ‰“å¡ç­‰ç­‰; æœ‰çš„å·¥ä½œåˆ™æ˜¯ä¸´æ—¶å‘ç”Ÿçš„, ä¾‹å¦‚åˆšå¥½æ€»å…¬ å¸æœ‰é«˜å®˜æ¥è®¿,éœ€è¦ä½ å‡†å¤‡æ¼”ç¤ºå™¨æç­‰ç­‰! ç”¨åœ¨ç”Ÿæ´»ä¸Šé¢, ä¾‹å¦‚æ¯å¹´çš„çˆ±äººçš„ç”Ÿæ—¥ã€æ¯å¤©çš„èµ·åºŠæ—¶é—´ ç­‰ç­‰ã€è¿˜æœ‰çªå‘æ€§çš„è®¡ç®—æœºå¤§é™ä»· (å•Š!çœŸå¸Œæœ›å¤©å¤©éƒ½æœ‰!) ç­‰ç­‰å•°ã€‚</p>
<p>åƒä¸Šé¢è¿™äº›ä¾‹è¡Œæ€§å·¥ä½œ,é€šå¸¸ä½ å¾—è¦è®°å½•åœ¨æ—¥å†ä¸Šé¢æ‰èƒ½é¿å…å¿˜è®°!ä¸è¿‡, ç”±äºæˆ‘ä»¬å¸¸å¸¸åœ¨è®¡ç®—æœºå‰ é¢çš„ç¼˜æ•…,å¦‚æœè®¡ç®—æœºç³»ç»Ÿèƒ½å¤Ÿä¸»åŠ¨çš„é€šçŸ¥æˆ‘ä»¬çš„è¯,é‚£ä¹ˆä¸å°±è½»æ¾å¤šäº†!å˜¿å˜¿! è¿™ä¸ªæ—¶å€™ Linux çš„ è®¡åˆ’ä»»åŠ¡å°±å¯ä»¥æ´¾ä¸Šåœºäº†! ä¾‹å¦‚: æ¯ä¸€å¤©æ—©ä¸Š 8:00 é’Ÿè¦æœåŠ¡å™¨è¿æ¥ä¸ŠéŸ³å“,å¹¶è‡ªåŠ¨æ’­æ”¾éŸ³ä¹æ¥å”¤ä½ èµ·åºŠ; è€Œä¸­åˆ 12:00 å¸Œæœ› Linux å¯ä»¥å‘ä¸€å°ä¿¡åˆ°ä½ çš„é‚®ä»¶ä¿¡ç®±,æé†’ä½ å¯ä»¥å»åƒåˆé¤äº†; å¦å¤–, åœ¨æ¯å¹´çš„ä½ çˆ±äººç”Ÿ æ—¥çš„å‰ä¸€å¤©,å…ˆå‘å°ä¿¡æé†’ä½ , ä»¥å…å¿˜è®°è¿™ä¹ˆé‡è¦çš„ä¸€å¤©ã€‚</p>
<p>é‚£ä¹ˆ Linux çš„ä¾‹è¡Œæ€§å·¥ä½œæ˜¯å¦‚ä½•è¿›è¡Œè®¡åˆ’ä»»åŠ¡çš„å‘¢? å’± ä»¬çš„ Linux æ˜¯é€è¿‡ crontab å’Œ at è¿™ä¸¤ä¸ªä¸œè¥¿!è¿™ä¸¤ä¸ªç©æ„å„¿æœ‰å•¥å¼‚åŒ?å°±è®©æˆ‘ä»¬æ¥ç§ç§å…ˆ!</p>
<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">ä¸€æ¬¡æ€§è®¡åˆ’ä»»åŠ¡</th>
<th align="left">å‘¨æœŸæ€§è®¡åˆ’ä»»åŠ¡</th>
</tr>
</thead>
<tbody><tr>
<td align="left">è½¯ä»¶</td>
<td align="left">at-3.1.10-43.el6_2.1.x86_64</td>
<td align="left">cronie-1.4.4-12.el6.x86_64</td>
</tr>
<tr>
<td align="left">æœåŠ¡</td>
<td align="left">atd</td>
<td align="left">crond</td>
</tr>
<tr>
<td align="left">å‘½ä»¤</td>
<td align="left">at</td>
<td align="left">crontab</td>
</tr>
<tr>
<td align="left">æœåŠ¡å­˜æ”¾æ–‡ä»¶</td>
<td align="left">/etc/init.d/atd</td>
<td align="left">/etc/init.d/crond</td>
</tr>
<tr>
<td align="left">ç³»ç»Ÿé…ç½®æ–‡ä»¶</td>
<td align="left">/etc/at.deny</td>
<td align="left">/etc/cron.deny /etc/cron.d/*</td>
</tr>
<tr>
<td align="left">ç¨‹åºç¼“å­˜æ–‡ä»¶</td>
<td align="left">/var/spool/at</td>
<td align="left">/var/spool/cron/* /var/log/cron</td>
</tr>
</tbody></table>
<h3 id="at"><a href="#at" class="headerlink" title="at"></a>at</h3><p>å½“æ‰§è¡Œ at ç¨‹åºå¹¶åœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤å, é¦–å…ˆç³»ç»Ÿä¼šåˆ°é…ç½®æ–‡ä»¶ä¸­å¯»æ‰¾ at ç›¸å…³çš„æ–‡æ¡£</p>
<ul>
<li>/etc/at.allow &lt;== è®°å½•äº†å…è®¸ä½¿ç”¨ at å‘½ä»¤çš„ç”¨æˆ·å</li>
<li>/etc/at.deny &lt;== è®°å½•äº†ä¸å…è®¸ä½¿ç”¨ at å‘½ä»¤çš„ç”¨æˆ·å</li>
</ul>
<p>è‹¥ä»¥ä¸Šä¸¤ä¸ªæ–‡ä»¶éƒ½æ²¡æœ‰, åˆ™ç³»ç»Ÿé»˜è®¤åªæœ‰ root å¯ä»¥ä½¿ç”¨ at</p>
<p>è¾“å…¥çš„å†…å®¹å°†è¢«ä¿å­˜åˆ°ä»¥ä¸‹ç›®å½•ä¸­ /var/spool/at/*</p>
<h4 id="æœåŠ¡çš„å¯åŠ¨å‘½ä»¤"><a href="#æœåŠ¡çš„å¯åŠ¨å‘½ä»¤" class="headerlink" title="æœåŠ¡çš„å¯åŠ¨å‘½ä»¤"></a>æœåŠ¡çš„å¯åŠ¨å‘½ä»¤</h4><p>rhel6</p>
<p>service atd start å¯åŠ¨</p>
<p>service atd restart é‡å¯</p>
<p>service atd status æŸ¥çœ‹</p>
<p>rhel7</p>
<p>systermctl start atd</p>
<p>systermctl restart atd</p>
<p>systermctl status atd</p>
<h4 id="at-å‘½ä»¤çš„ç”¨æ³•"><a href="#at-å‘½ä»¤çš„ç”¨æ³•" class="headerlink" title="at å‘½ä»¤çš„ç”¨æ³•"></a>at å‘½ä»¤çš„ç”¨æ³•</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">at [-mldv] TIME</span><br><span class="line"></span><br><span class="line">at -c å·¥ä½œå·ç </span><br><span class="line"></span><br><span class="line">é€‰é¡¹ä¸å‚æ•° :</span><br><span class="line"></span><br><span class="line">-m å½“ at å·¥ä½œå®Œæˆå , å³ä½¿æ²¡æœ‰è¾“å‡ºè®¯æ¯ , äº¦ä»¥ email é€šçŸ¥ä½¿ç”¨è€…è¯¥å·¥ä½œå·²å®Œæˆã€‚</span><br><span class="line">-l at -l =atq, åˆ—å‡ºç›®å‰ç³»ç»Ÿä¸Šé¢çš„æ‰€æœ‰è¯¥ç”¨æˆ·çš„ at è®¡åˆ’ä»»åŠ¡ ;</span><br><span class="line">-d at -d =atrm , å¯ä»¥å–æ¶ˆä¸€ä¸ªåœ¨ at è®¡åˆ’ä»»åŠ¡ä¸­çš„å·¥ä½œ ;</span><br><span class="line">-v å¯ä»¥ä½¿ç”¨è¾ƒæ˜æ˜¾çš„æ—¶é—´æ ¼å¼æ˜¾å‡º at è®¡åˆ’ä»»åŠ¡ä¸­çš„ä»»åŠ¡åˆ—è¡¨ ;</span><br><span class="line">-c å¯ä»¥åˆ—å‡ºåé¢æ¥çš„è¯¥é¡¹å·¥ä½œçš„å®é™…æŒ‡ä»¤å†…å®¹ã€‚</span><br></pre></td></tr></table></figure>

<h4 id="èŒƒä¾‹"><a href="#èŒƒä¾‹" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h4><ol>
<li>å†è¿‡äº”åˆ†é’Ÿå, å°† /root/.bashrc å¯„ç»™ root è‡ªå·±</li>
<li>æŸ¥çœ‹ at è®¡åˆ’ä»»åŠ¡ä¸­çš„å·¥ä½œ</li>
<li>æŸ¥çœ‹è¯¥è®¡åˆ’ä»»åŠ¡çš„å®é™…æŒ‡ä»¤å†…å®¹<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[#</span><span class="bash">60<span class="comment">#root@rhel6 ~]#at now + 5 minutes</span></span></span><br><span class="line"><span class="meta">at&gt;</span><span class="bash"> /bin/mail root -s <span class="string">"testing at job"</span> &lt; /root/.bashrc</span></span><br><span class="line"><span class="meta">at&gt;</span><span class="bash"> &lt;EOT&gt;</span></span><br><span class="line">job 1 at 2016-06-30 00:40</span><br><span class="line"><span class="meta">[#</span><span class="bash">61<span class="comment">#root@rhel6 ~]#at -l</span></span></span><br><span class="line">1</span><br><span class="line">2016-06-30 00:40 a root</span><br><span class="line"><span class="meta">[#</span><span class="bash">62<span class="comment">#root@rhel6 ~]#date</span></span></span><br><span class="line">Thu Jun 30 00:37:21 CST 2016</span><br><span class="line"><span class="meta">[#</span><span class="bash">63<span class="comment">#root@rhel6 ~]#at -c 1</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> atrun uid=0 gid=0</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mail root 0</span></span><br><span class="line">umask 22</span><br><span class="line">.........</span><br><span class="line">æ­¤å¤„çœç•¥</span><br><span class="line">OLDPWD=/var/log; export OLDPWD</span><br><span class="line">cd /root || &#123;</span><br><span class="line">echo 'Execution directory inaccessible' &gt;&amp;2</span><br><span class="line">exit 1</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;SHELL:-/bin/sh&#125; &lt;&lt; <span class="string">'marcinDELIMITER00a5c603'</span></span></span><br><span class="line">/bin/mail root -s "testing at job" &lt; /root/.bashrc</span><br><span class="line">marcinDELIMITER00a5c6034. 2016 å¹´ 10 æœˆ 20 æ—¥ 12:00 å¹¿æ’­ä¸€æ¡ä¿¡æ¯ â€œ Happy birthday to me!â€;å–æ¶ˆè¯¥è®¡åˆ’ä»»åŠ¡ã€‚</span><br><span class="line"><span class="meta">[#</span><span class="bash">68<span class="comment">#root@rhel6 ~]#at 12:00 2016-10-20</span></span></span><br><span class="line"><span class="meta">at&gt;</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"Happy birthday to me!"</span>|wall</span></span><br><span class="line"><span class="meta">at&gt;</span><span class="bash"> &lt;EOT&gt;</span></span><br><span class="line">job 2 at 2016-10-20 12:00</span><br><span class="line"><span class="meta">[#</span><span class="bash">69<span class="comment">#root@rhel6 ~]#atq</span></span></span><br><span class="line">2</span><br><span class="line">2016-10-20 12:00 a root</span><br><span class="line"><span class="meta">[#</span><span class="bash">70<span class="comment">#root@rhel6 ~]#at -l</span></span></span><br><span class="line">2</span><br><span class="line">2016-10-20 12:00 a root</span><br><span class="line"><span class="meta">[#</span><span class="bash">71<span class="comment">#root@rhel6 ~]#at -d 2</span></span></span><br><span class="line"><span class="meta">[#</span><span class="bash">72<span class="comment">#root@rhel6 ~]#atq</span></span></span><br></pre></td></tr></table></figure></li>
<li>ç”±äºæœºæˆ¿é¢„è®¡åˆ’ 2016/07/18 åœç”µ, æˆ‘æƒ³è¦åœ¨ 2016/07/17 23:00 å…³æœº?<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[#</span><span class="bash">73<span class="comment">#root@rhel6 ~]#at 23:00 2016-07-17</span></span></span><br><span class="line"><span class="meta">at&gt;</span><span class="bash"> shutdown -h now</span></span><br><span class="line"><span class="meta">at&gt;</span><span class="bash"> &lt;EOT&gt;</span></span><br><span class="line">job 3 at 2016-07-17 23:00</span><br><span class="line"><span class="meta">[#</span><span class="bash">74<span class="comment">#root@rhel6 ~]#atq</span></span></span><br><span class="line">3</span><br><span class="line">2016-07-17 23:00 a root</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="crontab"><a href="#crontab" class="headerlink" title="crontab"></a>crontab</h3><h4 id="crontab-æœåŠ¡çš„å¯åŠ¨å‘½ä»¤"><a href="#crontab-æœåŠ¡çš„å¯åŠ¨å‘½ä»¤" class="headerlink" title="crontab æœåŠ¡çš„å¯åŠ¨å‘½ä»¤"></a>crontab æœåŠ¡çš„å¯åŠ¨å‘½ä»¤</h4><p>rhel6</p>
<p>service crond start å¯åŠ¨</p>
<p>service crond restart é‡å¯</p>
<p>service crond status æŸ¥çœ‹</p>
<p>rhel7</p>
<p>systermctl start crond</p>
<p>systermctl restart crond</p>
<p>systermctl status crond</p>
<h4 id="crontab-å‘½ä»¤çš„ç”¨æ³•"><a href="#crontab-å‘½ä»¤çš„ç”¨æ³•" class="headerlink" title="crontab å‘½ä»¤çš„ç”¨æ³•"></a>crontab å‘½ä»¤çš„ç”¨æ³•</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">crontab [-u username] [-l|-e|-r]</span><br><span class="line"></span><br><span class="line">é€‰é¡¹ä¸å‚æ•° :</span><br><span class="line">-u åªæœ‰ root ä½¿ç”¨ , äº¦å³å¸®å…¶ä»–ä½¿ç”¨è€…å»ºç«‹ / ç§»é™¤ crontab è®¡åˆ’ä»»åŠ¡;</span><br><span class="line">-e ç¼–è¾‘ crontab å·¥ä½œå†…å®¹</span><br><span class="line">-l æŸ¥é˜… crontab å·¥ä½œå†…å®¹</span><br><span class="line">-r ç§»é™¤æ‰€æœ‰ crontab çš„å·¥ä½œå†…å®¹ , è‹¥ä»…è¦ç§»é™¤ä¸€é¡¹ , è¯·ç”¨ -e å»ç¼–è¾‘</span><br></pre></td></tr></table></figure>

<p>crontab -e ç¼–è¾‘çš„æ ¼å¼è¯´æ˜:</p>
<table>
<thead>
<tr>
<th align="left">ä»£è¡¨æ„ä¹‰</th>
<th align="left">åˆ†é’Ÿ</th>
<th align="left">å°æ—¶</th>
<th align="left">æ—¥æœŸ</th>
<th align="left">æœˆä»½</th>
<th align="left">å‘¨</th>
</tr>
</thead>
<tbody><tr>
<td align="left">æ•°å­—èŒƒå›´</td>
<td align="left">0-59</td>
<td align="left">0-23</td>
<td align="left">1-31</td>
<td align="left">1-12</td>
<td align="left">0-7</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">ç‰¹æ®Šå­—</th>
<th align="left">ä»£è¡¨æ„ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td align="left">*( æ˜Ÿå· )</td>
<td align="left">ä»£è¡¨ä»»ä½•æ—¶åˆ»</td>
</tr>
<tr>
<td align="left">,( é€—å· )</td>
<td align="left">ä»£è¡¨åˆ†éš”æ—¶æ®µ</td>
</tr>
<tr>
<td align="left">-( å‡å· )</td>
<td align="left">ä»£è¡¨ä¸€æ®µæ—¶é—´èŒƒå›´</td>
</tr>
<tr>
<td align="left">/n( æ–œçº¿ )</td>
<td align="left">n ä»£è¡¨æ•°å­— , ã€æ¯éš” n å•ä½é—´éš”ã€ , ä¾‹å¦‚æ¯äº”åˆ†é’Ÿè¿›è¡Œä¸€æ¬¡</td>
</tr>
</tbody></table>
<p><code>man 5 crontab</code> æŸ¥çœ‹å…·ä½“ç”¨æ³•å¸®åŠ©</p>
<h4 id="èŒƒä¾‹-1"><a href="#èŒƒä¾‹-1" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h4><ol>
<li><p>student æ¯å¤© 12 ç‚¹å‘å¹¿æ’­ç»™è‡ªå·±æé†’è¦åƒé¥­æ‹‰!</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br><span class="line">vi ç¼–è¾‘ç”»é¢ æ¯é¡¹å·¥ä½œéƒ½æ˜¯ä¸€è¡Œã€‚</span><br><span class="line">0 12 * * * echo â€œLunch time!!!!â€|wall</span><br><span class="line">åˆ† æ—¶ æ—¥ æœˆ å‘¨ |&lt;======= å‘½ä»¤ ===========|</span><br></pre></td></tr></table></figure></li>
<li><p>æ¯ä¸ªæœˆçš„ç¬¬ä¸€å¤©ä¸‹åˆ 2 ç‚¹ 15 åˆ†,å°†/etc ç›®å½•æ‰“åŒ…å‹ç¼©æˆ/tmp/etc.tar.bz2 æ–‡ä»¶ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">15 14 1 * * tar -jcf /tmp/etc.tar.bz2 /etc</span><br></pre></td></tr></table></figure>
</li>
<li><p>å‘¨ä¸€åˆ°å‘¨äº”çš„æ™šä¸Š 10 ç‚¹,å°†/var ç›®å½•æ‰“åŒ…å‹ç¼©æˆ/tmp/var.tar.bz2 æ–‡ä»¶ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">0 22 * * 1-5 tar -jcf /tmp/var.tar.bz2 /var</span><br></pre></td></tr></table></figure></li>
<li><p>æ¯å¤© 0 ç‚¹ 23 åˆ†,2 ç‚¹ 23 åˆ†,4 ç‚¹åˆ†â€¦22 ç‚¹ 23 åˆ†,å°±è¾“å‡º â€œ ä¼‘æ¯ä¸€ä¼š â€ åˆ°ç»ˆç«¯ä¸Šã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">23 0-23/2 * * * echo "have a rest"</span><br></pre></td></tr></table></figure></li>
<li><p>æ¯å‘¨æ—¥çš„ 4 ç‚¹ 5 åˆ†æé†’è‡ªå·±å»è·‘æ­¥ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">5 4 * * sun echo "run at 5 after 4 every sunday"</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="æ—¥å¿—å’Œè®¡åˆ’ä»»åŠ¡è¯¾åä½œä¸š"><a href="#æ—¥å¿—å’Œè®¡åˆ’ä»»åŠ¡è¯¾åä½œä¸š" class="headerlink" title="æ—¥å¿—å’Œè®¡åˆ’ä»»åŠ¡è¯¾åä½œä¸š"></a>æ—¥å¿—å’Œè®¡åˆ’ä»»åŠ¡è¯¾åä½œä¸š</h2><ol>
<li>è®°å½•æ‰€æœ‰æ—¥å¿—ç±»å‹çš„ info çº§åˆ«ä»¥åŠå¤§äº info çº§åˆ«çš„ä¿¡æ¯,ä¿å­˜åˆ°/var/log/test,ä½†æ˜¯ mail é‚®ä»¶ä¿¡æ¯,authpriv éªŒè¯æ–¹é¢çš„ä¿¡æ¯å’Œ cron æ—¶é—´ä»»åŠ¡ç›¸å…³çš„ä¿¡æ¯é™¤å¤–</li>
<li>/var/log/test æ—¥å¿—è½®è¯¢æ–¹å¼ä¸º:</li>
</ol>
<ul>
<li>æ¯å‘¨è½®è¯¢ä¸€æ¬¡;</li>
<li>ä¿ç•™ 6 ä¸ªæ–‡ä»¶;</li>
<li>ä»¥æ—¶é—´å‘½å;</li>
<li>åˆ›å»ºä¸åŸæ—¥å¿—åŒåçš„æ–°æ–‡ä»¶ã€‚</li>
</ul>
<hr>
<ol start="3">
<li>å†è¿‡ 10 åˆ†é’Ÿå, å°† /root/.bashrc å¯„ç»™ root è‡ªå·±</li>
<li>æŸ¥çœ‹ at è®¡åˆ’ä»»åŠ¡ä¸­çš„å·¥ä½œ</li>
<li>æŸ¥çœ‹è¯¥è®¡åˆ’ä»»åŠ¡çš„å®é™…æŒ‡ä»¤å†…å®¹</li>
<li>ç”±äºæœºæˆ¿é¢„è®¡åˆ’ 2016/09/18 åœç”µ, æˆ‘æƒ³è¦åœ¨ 2016/09/17 23:00 å…³ æœº?</li>
</ol>
<hr>
<ol>
<li>student æ¯å¤©ä¸Šåˆ 11:50 å‘å¹¿æ’­ç»™è‡ªå·±æé†’è¦åƒé¥­æ‹‰!</li>
<li>æ¯ä¸ªæœˆçš„ç¬¬ä¸€å¤©ä¸‹åˆ 5 ç‚¹ 30 åˆ†,å°†/etc ç›®å½•æ‰“åŒ…å‹ç¼©æˆ/tmp/etc.tar.bz2 æ–‡ä»¶ã€‚</li>
<li>å‘¨ä¸€åˆ°å‘¨å…­çš„æ™šä¸Š 9 ç‚¹,å°†/var ç›®å½•æ‰“åŒ…å‹ç¼©æˆ/tmp/var.tar.bz2 æ–‡ä»¶ã€‚</li>
<li>æ¯å¤© 1 ç‚¹ 22 åˆ†,3 ç‚¹ 22 åˆ†,5 ç‚¹ 22 åˆ†â€¦23 ç‚¹ 22 åˆ†,å°±è¾“å‡º â€œ ä¼‘æ¯ä¸€ä¼š â€ åˆ°ç»ˆç«¯ä¸Šã€‚</li>
<li>æ¯å‘¨å…­çš„ 6 ç‚¹ 20 åˆ†æé†’è‡ªå·±å»è·‘æ­¥ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯åŸ¹è®­</category>
        <category>Linuxç³»ç»ŸåŸºç¡€åŸ¹è®­</category>
      </categories>
      <tags>
        <tag>åŸ¹è®­</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux å¼€æœºå¯åŠ¨æµç¨‹</title>
    <url>/2016/12/22/booboo_linux_base/10-Linux%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/</url>
    <content><![CDATA[<h2 id="å¯åŠ¨æµç¨‹æ¦‚è§ˆ"><a href="#å¯åŠ¨æµç¨‹æ¦‚è§ˆ" class="headerlink" title="å¯åŠ¨æµç¨‹æ¦‚è§ˆ"></a>å¯åŠ¨æµç¨‹æ¦‚è§ˆ</h2><ol>
<li>åŠ è½½ BIOS çš„ç¡¬ä»¶ä¿¡æ¯å¹¶è‡ªæˆ‘æµ‹è¯• , ä¾æ®è®¾å®šå–å¾—ç¬¬ä¸€ä¸ªå¯å¼€æœºçš„è£…ç½® ;</li>
<li>è¯»å–å¹¶æ‰§è¡Œç¬¬ä¸€ä¸ªå¼€æœºè£…ç½®å†… MBR çš„ boot Loader ( grub, spfdisk ç­‰ç¨‹åº );</li>
<li>ä¾æ® boot loader çš„è®¾å®šåŠ è½½ Kernel</li>
<li>Kernel ä¼šå¼€å§‹ä¾¦æµ‹ç¡¬ä»¶å¹¶åŠ è½½é©±åŠ¨ç¨‹åº ;</li>
<li>åœ¨ç¡¬ä»¶é©±åŠ¨æˆåŠŸå ,Kernel ä¼šä¸»åŠ¨å‘¼å« init ç¨‹åº</li>
<li>init ä¼šå–å¾— run-level ä¿¡æ¯ ;</li>
<li>init æ‰§è¡Œ /etc/rc.d/rc.sysinit æ¡£æ¡ˆæ¥å‡†å¤‡è½¯ä»¶æ‰§è¡Œçš„ä½œä¸šç¯å¢ƒ ( å¦‚ç½‘ç»œã€æ—¶åŒºç­‰ );</li>
<li>init æ‰§è¡Œ run-level çš„å„ä¸ªæœåŠ¡çš„å¯åŠ¨ (script æ–¹å¼ );</li>
<li>init æ‰§è¡Œ /etc/rc.d/rc.local æ¡£æ¡ˆ ;</li>
<li>init æ‰§è¡Œç»ˆç«¯ä»¿çœŸç¨‹åº mingetty æ¥å¯åŠ¨ login ç¨‹åº ,</li>
<li>æœ€åç­‰å¾…ç”¨æˆ·ç™»å…¥</li>
</ol>
<h2 id="è¯¦ç»†è®²è§£"><a href="#è¯¦ç»†è®²è§£" class="headerlink" title="è¯¦ç»†è®²è§£"></a>è¯¦ç»†è®²è§£</h2><h3 id="å¼€æœºè½¯ä»¶-â€”â€”-BIOSã€Grub"><a href="#å¼€æœºè½¯ä»¶-â€”â€”-BIOSã€Grub" class="headerlink" title="å¼€æœºè½¯ä»¶ â€”â€” BIOSã€Grub"></a>å¼€æœºè½¯ä»¶ â€”â€” BIOSã€Grub</h3><p><img src="pic/33.png" alt="33"></p>
<h4 id="åè¯è§£é‡Š"><a href="#åè¯è§£é‡Š" class="headerlink" title="åè¯è§£é‡Š"></a>åè¯è§£é‡Š</h4><ol>
<li>BIOS ä¸€ä¸ªå†™å…¥åˆ°ä¸»æ¿ä¸Šçš„ä¸€ä¸ªè½¯ä»¶ç¨‹åº,åœ¨å¼€æœºçš„æ—¶å€™,è®¡ç®—æœºç³»ç»Ÿä¼šä¸»åŠ¨æ‰§è¡Œç¬¬ä¸€ä¸ªç¨‹åº</li>
<li>HD ç¡¬ç›˜</li>
<li>MBR ä¸»è¦å¯åŠ¨è®°å½•åŒº(Master Boot Record)è¯¥ç¡¬ç›˜é‡Œçš„ç¬¬ä¸€ä¸ªæ‰‡åŒº 512 bytes</li>
<li>boot loader å¼€æœºç®¡ç†ç¨‹åº,å¯è¯»å–æ ¸å¿ƒæ–‡ä»¶å¹¶æ‰§è¡Œ 446 bytes</li>
<li>DPT ç£ç›˜åˆ†å‰²è¡¨(disk partition table)è®°å½•æ•´é¢—ç¡¬ç›˜åˆ†å‰²çŠ¶æ€ 64 bytes</li>
<li>55AA 2 bytes</li>
</ol>
<h4 id="æµç¨‹è§£é‡Š"><a href="#æµç¨‹è§£é‡Š" class="headerlink" title="æµç¨‹è§£é‡Š"></a>æµç¨‹è§£é‡Š</h4><ul>
<li>é€šç”µå,æœåŠ¡å™¨ä¸»ç‰ˆä¸Šçš„ä¸€ä¸ªè½¯ä»¶ BIOS å¯åŠ¨,ä»–çš„ä»»åŠ¡å°±æ˜¯æ‰¾åˆ°å¸¦æœ‰å¼€æœºç¨‹åºçš„è®¾å¤‡,æ­¤å¤„ä»¥ç¡¬ç›˜ä¸ºä¾‹, BIOS çš„ä»»åŠ¡ç»“æŸ;</li>
<li>è¯¥ç¡¬ç›˜ä¸Šçš„ç¬¬ä¸€ä¸ªæ‰‡åŒºä¸­æœ‰ä¸€ä¸ªå¼€æœºç®¡ç†ç¨‹åº, rhel6 ä¸Šä¸º grub1 , rhel7 ä¸Šä¸º grub2 ,ç‰ˆæœ¬ä¸åŒ;</li>
<li>æ¥ä¸‹å»å°±æ˜¯ grub åœ¨å·¥ä½œäº†ã€‚</li>
</ul>
<h4 id="BIOS"><a href="#BIOS" class="headerlink" title="BIOS"></a>BIOS</h4><p><em>å¼€æœºæ—¶æŒ‰ä¸‹ pause break æš‚åœä¸­æ–­,å¯ä»¥çœ‹åˆ° bios çš„å¤§æ¦‚ä¿¡æ¯:</em></p>
<p><img src="pic/34.png" alt="34"></p>
<p>AMIBIOS(C)2006 American Megatrends, Inc.</p>
<p>åŸºæœ¬è¾“å…¥è¾“å‡ºç³»ç»Ÿçš„ç‰ˆæœ¬ä¸º AMIBIOS ,ä¸ºç¾å›½è¶‹åŠ¿ç§‘æŠ€</p>
<p>2006 å¹´ç”Ÿäº§</p>
<p>HP System BIOS â€“ 033 (09/01/2011)</p>
<p>æƒ æ™®ç³»ç»Ÿçš„åŸºæœ¬è¾“å…¥è¾“å‡ºç³»ç»Ÿ,æ”¯æŒåˆ° 2011/01/09 çš„ç¡¬ä»¶</p>
<p>Processor 1 Initiallized at 2.26 GHz with 8 MB cache</p>
<p>å¤„ç†å™¨ cpu ä¸€ä¸ª,é¢‘ç‡ä¸º 2.26GHz , 8M ç¼“å†²</p>
<p>16384MB Total Memory Detected</p>
<p>16G å†…å­˜</p>
<p>Asset Tag : 0111049</p>
<p>èµ„äº§ç¼–å·ä¸º 0111049</p>
<p>BMC Firmware Version 04.04(Jul/01/2009)</p>
<p>BMC SDR Version : 2.18.1.17</p>
<p>basebiard management controller åº•æ¿ç®¡ç†æ§åˆ¶å™¨çš„ç¼©å†™,æ—¶ä¸€ä¸ªåœ¨ IPMI ç»“æ„ä¸‹æä¾›æ™ºèƒ½ç®¡ç†çš„æ§åˆ¶å™¨</p>
<p>IPMI æ—¶æ™ºèƒ½å¹³å°ç®¡ç†ç•Œé¢,å³ä¸ intel ç»“æ„çš„ä¼ä¸šç³»ç»Ÿä¸­æ‰€ä½¿ç”¨å¤–å›´è®¾å¤‡é‡‡ç”¨çš„ä¸€ç§å·¥ä¸šæ ‡å‡†ã€‚</p>
<p>USB Device(s) : 1 Keyboard , 1 Mouse</p>
<p>usb è®¾å¤‡æœ‰ä¸€ä¸ªé¼ æ ‡ä¸€ä¸ªé”®ç›˜,æ­¤å¤„å¯ä»¥æŸ¥çœ‹æ˜¯å¦æœ‰äººæ¶æ„ç”¨ usb è®¾å¤‡è¦æ”»å‡»æœåŠ¡å™¨</p>
<p>Auto-Detecting AHCI PORT 1 .. IDE Hard Disk è‡ªåŠ¨æ£€æµ‹</p>
<p><em>å¼€æœºæŒ‰ä¸‹ F10 ,è¿›å…¥ BIOS ç®¡ç†ç•Œé¢</em></p>
<p><img src="pic/35.png" alt="35"></p>
<p><img src="pic/36.png" alt="36"></p>
<p><em>IPMI</em></p>
<p>HP æœåŠ¡å™¨è¿œç¨‹ç®¡ç†å¹³å°</p>
<p><img src="pic/37.png" alt="37"></p>
<p><img src="pic/38.png" alt="38"></p>
<h3 id="å¼€æœºæ–‡æ¡£-â€”â€”-menu-lstã€grub-conf"><a href="#å¼€æœºæ–‡æ¡£-â€”â€”-menu-lstã€grub-conf" class="headerlink" title="å¼€æœºæ–‡æ¡£ â€”â€” menu.lstã€grub.conf"></a>å¼€æœºæ–‡æ¡£ â€”â€” menu.lstã€grub.conf</h3><h4 id="Grub-é…ç½®æ–‡æ¡£"><a href="#Grub-é…ç½®æ–‡æ¡£" class="headerlink" title="Grub é…ç½®æ–‡æ¡£"></a>Grub é…ç½®æ–‡æ¡£</h4><ul>
<li>menu.lst</li>
<li>grub.conf</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel6 grub]# ll /boot/grub/</span><br><span class="line">total 274</span><br><span class="line">-rw-r--r--. 1 root root 63 Jul 2 2015 device.map</span><br><span class="line">-rw-r--r--. 1 root root 13380 Jul 2 2015 e2fs_stage1_5</span><br><span class="line">-rw-r--r--. 1 root root 12620 Jul 2 2015 fat_stage1_5</span><br><span class="line">-rw-r--r--. 1 root root 11748 Jul 2 2015 ffs_stage1_5</span><br><span class="line">-rw-------. 1 root root 796 Jul 2 2015 grub.conf</span><br><span class="line">-rw-r--r--. 1 root root 11756 Jul 2 2015 iso9660_stage1_5</span><br><span class="line">-rw-r--r--. 1 root root 13268 Jul 2 2015 jfs_stage1_5</span><br><span class="line">lrwxrwxrwx. 1 root root 11 Jul 2 2015 menu.lst -&gt; ./grub.conf</span><br><span class="line">-rw-r--r--. 1 root root 11956 Jul 2 2015 minix_stage1_5</span><br><span class="line">-rw-r--r--. 1 root root 14412 Jul 2 2015 reiserfs_stage1_5</span><br><span class="line">-rw-r--r--. 1 root root 1341 May 7 2010 splash.xpm.gz</span><br><span class="line">-rw-r--r--. 1 root root 512 Jul 2 2015 stage1</span><br><span class="line">-rw-r--r--. 1 root root 126100 Jul 2 2015 stage2</span><br><span class="line">-rw-r--r--. 1 root root 12024 Jul 2 2015 ufs2_stage1_5</span><br><span class="line">-rw-r--r--. 1 root root 11364 Jul 2 2015 vstafs_stage1_5</span><br><span class="line">-rw-r--r--. 1 root root 13964 Jul 2 2015 xfs_stage1_5</span><br><span class="line">[root@rhel6 grub]# vim grub.conf</span><br><span class="line">default=0		===&gt;é»˜è®¤èœå•</span><br><span class="line">timeout=5		===&gt;å¯åŠ¨èœå•è¶…æ—¶5ç§’è¿›å…¥é»˜è®¤å¯åŠ¨å†…æ ¸</span><br><span class="line">splashimage=(hd0,0)/grub/splash.xpm.gz	===&gt;èœå•çš„èƒŒæ™¯å›¾ç‰‡ä½ç½®</span><br><span class="line">hiddenmenu		===&gt;é»˜è®¤ä¸çœ‹å¯åŠ¨èœå•</span><br><span class="line">title Red Hat Enterprise Linux (2.6.32-431.el6.x86_64)</span><br><span class="line">å¼€æœºå¯åŠ¨çš„ç³»ç»Ÿåç§°(å¯ä»¥æ›´æ”¹å¯¹å…¶ä»–æ²¡æœ‰å½±å“),æŒ‡å®šå¯åŠ¨ç¡¬ç›˜ä½ç½®åœ¨ç¬¬ä¸€ä¸ªç¡¬ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒº</span><br><span class="line">root (hd0,0)</span><br><span class="line">æŒ‡å®šæ ¸å¿ƒæ–‡ä»¶çš„åç§°åŠä½ç½® /boot/ ,æŒ‡å®šè¯­è¨€ç­‰ç­‰</span><br><span class="line">kernel /vmlinuz-2.6.32-431.el6.x86_64 ro root=/dev/mapper/vg_rhel6-LogVol01 rd_NO_LUKS</span><br><span class="line">LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 KEYBOARDTYPE=pc</span><br><span class="line">KEYTABLE=us rd_LVM_LV=vg_rhel6/LogVol01 rd_NO_DM rhgb quiet</span><br><span class="line">æŒ‡å®šæ ¸å¿ƒåŠ è½½çš„æ¨¡å—æ–‡ä»¶ /boot/</span><br><span class="line">initrd /initramfs-2.6.32-431.el6.x86_64.img</span><br></pre></td></tr></table></figure>

<h4 id="æµç¨‹è§£é‡Š-1"><a href="#æµç¨‹è§£é‡Š-1" class="headerlink" title="æµç¨‹è§£é‡Š"></a>æµç¨‹è§£é‡Š</h4><ul>
<li>grub è½¯ä»¶çš„ä»»åŠ¡å°±æ˜¯æ‰¾åˆ°æ ¸å¿ƒæ–‡ä»¶,å¹¶åŠ è½½è¯¥æ–‡ä»¶</li>
<li>å†…æ ¸çš„ç¬¬ä¸€ä»»åŠ¡å°±æ˜¯é©±åŠ¨ç¡¬ä»¶</li>
<li>å†…æ ¸ç¬¬äºŒä»»åŠ¡å°±æ˜¯å‘¼å« init ç¨‹åº,æ¥ä¸‹æ¥å°±äº¤ç»™ init äº†</li>
</ul>
<h3 id="init-ç¨‹åº"><a href="#init-ç¨‹åº" class="headerlink" title="init ç¨‹åº"></a>init ç¨‹åº</h3><h4 id="æµç¨‹è§£é‡Š-2"><a href="#æµç¨‹è§£é‡Š-2" class="headerlink" title="æµç¨‹è§£é‡Š"></a>æµç¨‹è§£é‡Š</h4><ul>
<li>init ç¨‹åºæŒ‚æ¥ /etc å’Œ /lib æ‰€åœ¨çš„ç›®å½•åˆ†åŒº</li>
<li>æ‰§è¡Œ /etc/inittab æ–‡ä»¶,å–å¾— run-level ä¿¡æ¯,åˆ¤æ–­æ˜¯å¦å¼€å¯ç»ˆç«¯ã€ç½‘ç»œç­‰</li>
<li>æ‰§è¡Œ /etc/rc.d/rc.sysinit åˆå§‹åŒ–ç¯å¢ƒ ( å¦‚ç½‘ç»œã€æ—¶åŒºç­‰ )</li>
<li>æ‰§è¡Œ run-level çš„å„ä¸ªæœåŠ¡çš„å¯åŠ¨ (script æ–¹å¼ );</li>
<li>æ‰§è¡Œ /etc/rc.d/rc.local æ¡£æ¡ˆ</li>
<li>æ‰§è¡Œç»ˆç«¯ä»¿çœŸç¨‹åº mingetty æ¥å¯åŠ¨ login ç¨‹åº,æœ€åç­‰å¾…ç”¨æˆ·ç™»å…¥</li>
</ul>
<h4 id="init-æ‰§è¡Œçš„ç›¸å…³æ–‡ä»¶"><a href="#init-æ‰§è¡Œçš„ç›¸å…³æ–‡ä»¶" class="headerlink" title="init æ‰§è¡Œçš„ç›¸å…³æ–‡ä»¶"></a>init æ‰§è¡Œçš„ç›¸å…³æ–‡ä»¶</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel6 ~]# cat /etc/inittab</span><br><span class="line"><span class="meta">#</span><span class="bash"> Default runlevel. The runlevels used are:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 0 - halt (Do NOT <span class="built_in">set</span> initdefault to this)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1 - Single user mode</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2 - Multiuser, without NFS (The same as 3, <span class="keyword">if</span> you <span class="keyword">do</span> not have networking)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3 - Full multiuser mode</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4 - unused</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5 - X11</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 6 - reboot (Do NOT <span class="built_in">set</span> initdefault to this)</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line">id:5:initdefault:		===&gt;é»˜è®¤å¯åŠ¨ç­‰çº§(run-level)ä¸º5(ä¸­é—´çš„æ•°å­—ä¸ºå¯åŠ¨ç­‰çº§)</span><br><span class="line">[root@rhel6 etc]# ll /etc/rc.d	===&gt;æ ¹æ®é»˜è®¤å¯åŠ¨ç­‰çº§ï¼Œæ¥è¯»å–ç›¸åº”çš„rc0-6.dç›®å½•ä¸­çš„æ–‡ä»¶</span><br><span class="line">total 60</span><br><span class="line">drwxr-xr-x. 2 root root 4096 Jul 2 2015 init.d</span><br><span class="line">-rwxr-xr-x. 1 root root 2617 Oct 10 2013 rc</span><br><span class="line">drwxr-xr-x. 2 root root 4096 Jul 2 2015 rc0.d</span><br><span class="line">drwxr-xr-x. 2 root root 4096 Jul 2 2015 rc1.d</span><br><span class="line">drwxr-xr-x. 2 root root 4096 Jul 2 2015 rc2.d</span><br><span class="line">drwxr-xr-x. 2 root root 4096 Jul 2 2015 rc3.d</span><br><span class="line">drwxr-xr-x. 2 root root 4096 Jul 2 2015 rc4.d</span><br><span class="line">drwxr-xr-x. 2 root root 4096 Jul 2 2015 rc5.d</span><br><span class="line">drwxr-xr-x. 2 root root 4096 Jul 2 2015 rc6.d</span><br><span class="line">-rwxr-xr-x. 1 root root 220 Oct 10 2013 rc.local</span><br><span class="line">-rwxr-xr-x. 1 root root 19432 Oct 10 2013 rc.sysinit</span><br></pre></td></tr></table></figure>

<p>æ–‡ä»¶å¤¹é‡Œéƒ½æ˜¯è½¯è¿æ¥ï¼Œè½¯é“¾æ¥é“¾æ¥åˆ°/etc/rc.d/init.dç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œç›®å½•ä¸‹éƒ½æ˜¯æœåŠ¡çš„å¯åŠ¨è„šæœ¬ï¼Œç›®å½•å’Œetc/init.dä¸‹çš„å†…å®¹ä¸€æ ·ï¼Œå› ä¸ºæœ‰ä¸ªè½¯è¿æ¥åœ¨etcä¸‹é¢rcX.dä¸‹çš„æ–‡ä»¶Kå¼€å¤´è¡¨ç¤ºæœåŠ¡è¦å…³é—­çš„ï¼ŒSå¼€å¤´çš„è¡¨ç¤ºç³»ç»Ÿå¯åŠ¨æ—¶è¦å¼€å¯çš„ï¼Œï¼ˆä¾‹å¦‚rc0.dä¸‹ï¼Œå‡ ä¹éƒ½æ˜¯Kæ‰“å¤´çš„ï¼‰ï¼Œåœ¨5é‡Œåé¢çš„æ•°å­—æ ‡ç¤ºä¼˜å…ˆçº§ï¼Œæ•°å­—å°ä¼˜å…ˆçº§é«˜ï¼Œåœ¨6é‡Œè¿™äº›æ•°å­—æ— ç”¨ï¼Œå› ä¸ºæ˜¯å¹¶è¡Œçš„ï¼Œæ²¡æœ‰ä¾èµ–å…³ç³»ã€‚</p>
<p>æ— è®ºæ˜¯3è¿˜æ˜¯5çš„runlevelï¼Œæœ€åéƒ½ä¼šè¯»åˆ°S99localæ–‡ä»¶ï¼Œé“¾æ¥åˆ°/etc/rc.d/rc.localæ–‡ä»¶</p>
<p>æ–‡ä»¶è¯´æ˜ï¼šè¿™ä¸ªè„šæœ¬åœ¨æ‰€æœ‰è„šæœ¬æ‰§è¡Œå®Œä¹‹åæ‰§è¡Œï¼Œå¼€æœºè¿‡ç¨‹æ±‡æ€»æœ€åè¯»åˆ°çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯å¼€æœºè‡ªå®šä¹‰å¯åŠ¨è„šæœ¬ï¼ŒæŠŠè‡ªå·±æƒ³è¦æ‰§è¡Œçš„å‘½ä»¤å†™è¿›æ¥ã€‚ç³»ç»Ÿå¯åŠ¨å‘½ä»¤ä¹Ÿä¼šå®Œæˆã€‚</p>
<p>å¤‡æ³¨:ä»¥ä¸Šåˆ†æå‡ä¸º rhel6 æ“ä½œç³»ç»Ÿ, rhel7 å¯åŠ¨æ”¹ä¸º systemd æ¨¡å¼,ç›¸å…³æ–‡ä»¶åœ¨ <code>/usr/lib/systemd/system/*</code></p>
<h3 id="run-level-å¯åŠ¨ç­‰çº§"><a href="#run-level-å¯åŠ¨ç­‰çº§" class="headerlink" title="run-level(å¯åŠ¨ç­‰çº§)"></a>run-level(å¯åŠ¨ç­‰çº§)</h3><p>Runlevel 0 æ˜¯è®©initå…³é—­æ‰€æœ‰è¿›ç¨‹å¹¶ç»ˆæ­¢ç³»ç»Ÿã€‚</p>
<p>Runlevel 1 æ˜¯ç”¨æ¥å°†ç³»ç»Ÿè½¬åˆ°å•ç”¨æˆ·æ¨¡å¼ï¼Œå•ç”¨æˆ·æ¨¡å¼åªèƒ½æœ‰ç³»ç»Ÿç®¡ç†å‘˜è¿›å…¥ï¼Œåœ¨è¯¥æ¨¡å¼ä¸‹å¤„ç†é‚£äº›åœ¨æœ‰ç™»å½•ç”¨æˆ·çš„æƒ…å†µä¸‹ä¸èƒ½è¿›è¡Œæ›´æ”¹çš„æ–‡ä»¶ã€‚</p>
<p>Runlevel 2 æ˜¯å…è®¸ç³»ç»Ÿè¿›å…¥å¤šç”¨æˆ·çš„æ¨¡å¼ï¼Œä½†å¹¶ä¸æ”¯æŒæ–‡ä»¶å…±äº«ï¼Œè¿™ç§æ¨¡å¼å¾ˆå°‘åº”ç”¨ã€‚</p>
<p>Runlevel 3 æ˜¯æœ€å¸¸ç”¨çš„è¿è¡Œæ¨¡å¼ï¼Œä¸»è¦ç”¨æ¥æä¾›çœŸæ­£çš„å¤šç”¨æˆ·æ¨¡å¼ï¼Œä¹Ÿæ˜¯å¤šæ•°æœåŠ¡å™¨çš„ç¼ºçœæ¨¡å¼ã€‚</p>
<p>Runlevel 4 ä¸€èˆ¬ä¸è¢«ç³»ç»Ÿä½¿ç”¨ï¼Œç”¨æˆ·å¯ä»¥è®¾è®¡è‡ªå·±çš„ç³»ç»ŸçŠ¶æ€å¹¶å°†å…¶åº”ç”¨åˆ°runlevel 4é˜¶æ®µï¼Œå°½ç®¡å¾ˆå°‘ä½¿ç”¨ï¼Œä½†ä½¿ç”¨è¯¥ç³»ç»Ÿå¯ä»¥å®ç°ä¸€äº›ç‰¹å®šçš„ç™»å½•è¯·æ±‚ã€‚</p>
<p>Runlevel 5 æ˜¯å°†ç³»ç»Ÿåˆå§‹åŒ–ä¸ºä¸“ç”¨çš„X Windowç»ˆç«¯ã€‚å¯¹åŠŸèƒ½å¼ºå¤§çš„Linuxç³»ç»Ÿæ¥è¯´ï¼Œè¿™å¹¶ä¸æ˜¯å¥½çš„é€‰æ‹©ï¼Œä½†ç”¨æˆ·å¦‚æœéœ€è¦è¿™æ ·ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åœ¨runlevelå¯åŠ¨æ¥å®ç°è¯¥æ–¹æ¡ˆã€‚</p>
<p>Runlevel 6 æ˜¯å…³é—­æ‰€æœ‰è¿è¡Œçš„è¿›ç¨‹å¹¶é‡æ–°å¯åŠ¨ç³»ç»Ÿã€‚</p>
<h2 id="ç›¸å…³çš„å‘½ä»¤"><a href="#ç›¸å…³çš„å‘½ä»¤" class="headerlink" title="ç›¸å…³çš„å‘½ä»¤"></a>ç›¸å…³çš„å‘½ä»¤</h2><p>rhel6</p>
<p>chkconfig â€“list    ===&gt;æŸ¥çœ‹ä¸åŒç­‰çº§ä¸­å„é¡¹æœåŠ¡çš„å¯åŠ¨æƒ…å†µ(å¼€æœºå¯åŠ¨é¡¹)</p>
<p>chkconfig æœåŠ¡å on    ===&gt;å¼€å¯æŸä¸ªæœåŠ¡å¼€æœºè‡ªå¯åŠ¨ï¼Œoffä»£è¡¨å…³é—­</p>
<p>chkconfig â€“level 35 æœåŠ¡å off    ===&gt;åœ¨å¯åŠ¨ç­‰çº§ä¸º3å’Œ5çš„æ—¶å€™è¯¥æœåŠ¡ä¸å¼€æœºå¯åŠ¨</p>
<p>rhel7</p>
<p>å¼€æœºè‡ªå¯çš„æœåŠ¡é€šè¿‡systemctl enableå‘½ä»¤æ¥å®ç°</p>
<p>Systemctl enable httpd    ===&gt;è‡ªå¯åŠ¨httpdæœåŠ¡ï¼Œå…³é—­ä½¿ç”¨disableã€‚</p>
<p>systemctl get-default        ===&gt;æŸ¥çœ‹å½“å‰é»˜è®¤å¯åŠ¨çº§åˆ«(å¯åŠ¨çº§åˆ«çš„è¯´æ˜æŸ¥çœ‹/etc/inittab)</p>
<p>systemctl set-default multi-user.target    ===&gt;è®¾ç½®é»˜è®¤å¯åŠ¨çº§åˆ«ä¸º3(7çš„çš„å¯åŠ¨çº§åˆ«åç§°æœ‰æ‰€å˜åŒ–)</p>
<h2 id="å®éªŒ"><a href="#å®éªŒ" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h2><h3 id="rhel6-å•ç”¨æˆ·æ¨¡å¼ä¿®æ”¹å¯†ç "><a href="#rhel6-å•ç”¨æˆ·æ¨¡å¼ä¿®æ”¹å¯†ç " class="headerlink" title="rhel6 å•ç”¨æˆ·æ¨¡å¼ä¿®æ”¹å¯†ç "></a>rhel6 å•ç”¨æˆ·æ¨¡å¼ä¿®æ”¹å¯†ç </h3><ul>
<li>1&gt; è¿›å…¥åˆ°æ•°åŠæ—¶ç•Œé¢æ—¶,æŒ‰ä¸Šä¸‹é”®è¿›å…¥ä»¥ä¸‹ç•Œé¢,é€‰æ‹© kernel ä¸€è¡Œ,æŒ‰ä¸‹ e è¿›è¡Œç¼–è¾‘</li>
<li>2&gt; åœ¨æœ€åè¿½åŠ  â€œç©ºæ ¼â€å’Œ1 æˆ–è€… â€œç©ºæ ¼â€ single å,æŒ‰ä¸‹ esc</li>
<li>3&gt; å†æŒ‰ä¸‹ b ,å¯åŠ¨å,è¿›å…¥å•äººæ¨¡å¼å,è¾“å…¥ passwd è¿›è¡Œå¯†ç ä¿®æ”¹,ä¿®æ”¹å®Œæˆå, reboot å³å¯ã€‚</li>
</ul>
<p><img src="pic/39.png" alt="39"></p>
<p><img src="pic/40.png" alt="40"></p>
<p><img src="pic/41.png" alt="41"></p>
<h3 id="rhel7-å•ç”¨æˆ·æ¨¡å¼ä¿®æ”¹å¯†ç "><a href="#rhel7-å•ç”¨æˆ·æ¨¡å¼ä¿®æ”¹å¯†ç " class="headerlink" title="rhel7 å•ç”¨æˆ·æ¨¡å¼ä¿®æ”¹å¯†ç "></a>rhel7 å•ç”¨æˆ·æ¨¡å¼ä¿®æ”¹å¯†ç </h3><ul>
<li>1&gt; è¿›å…¥å¦‚ä¸‹ç•Œé¢åæŒ‰ e è¿›å…¥ç¼–è¾‘æ¨¡å¼</li>
<li>2&gt; æ‰¾åˆ° linux16 å¼€å§‹çš„é‚£ä¸€è¡Œ,åˆ é™¤æ²¡ç”¨çš„,åœ¨æœ€åè¿½åŠ  rd.break ,ç„¶åæŒ‰ Ctrl+x é‡å¯å³å¯è¿›å…¥å•äººæ¨¡å¼</li>
<li>3&gt; è¿›å…¥å•ç”¨æˆ·æ¨¡å¼å,ç”¨ mount å‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹,ä¼šå‘ç°æ ¹ç›®å½•æ—¶åªè¯»æ¨¡å¼,å› æ­¤éœ€è¦é‡æ–°æŒ‚è½½ä¸ºè¯»å†™æ¨¡å¼</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mount -o remount,rw /sysroot</span><br><span class="line">chroot /sysroot		===&gt;æé«˜æƒé™</span><br><span class="line">passwd				===&gt;ä¿®æ”¹å¯†ç çš„å‘½ä»¤</span><br><span class="line">touch /.autorelabel ===&gt;autorelabel è‡ªåŠ¨é‡æ–°æ ‡è®°, selinux</span><br><span class="line">exit</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>

<p><img src="pic/42.png" alt="42"></p>
<p><img src="pic/43.png" alt="43"></p>
<p>###rhel6 GRUBèœå•åŠ å¯†</p>
<p>grub-md5-crypt</p>
<p>è¾“å…¥å¯†ç ï¼Œç”Ÿæˆä¸€ä¸²MD5å€¼ï¼Œè¿™ä¸ªå°±æ˜¯grubå¯†ç ï¼Œå¤åˆ¶å¥½è¿™æ®µå†…å®¹ï¼Œç²˜è´´åˆ°é…ç½®æ–‡ä»¶ä¸­</p>
<p>vim /boot/grub/grub.conf   </p>
<p>titleé‚£ä¸€è¡Œçš„ä¸Šé¢åŠ ä¸Šâ€œpassword redhatâ€è¿™æ ·åšæ˜¯æ˜æ–‡å¯†ç ï¼Œä¸å®‰å…¨ï¼Œæ‰€ä»¥ä¹Ÿå¯å†™ä¸ºâ€œpassword â€“-md5 xxxxxxxxxâ€</p>
<p>è¿™ä¸€è¡Œè¦æ”¾åœ¨titleçš„ä¸Šé¢</p>
<p>æ”¾åœ¨titleçš„ä¸‹é¢æ˜¯ç³»ç»Ÿå¯åŠ¨éœ€è¦å¯†ç æ‰å¯ä»¥å¯åŠ¨</p>
<h3 id="rhel7-GRUB2èœå•åŠ å¯†"><a href="#rhel7-GRUB2èœå•åŠ å¯†" class="headerlink" title="rhel7 GRUB2èœå•åŠ å¯†"></a>rhel7 GRUB2èœå•åŠ å¯†</h3><p>vim /etc/grub.d/40_custom</p>
<p>set superusers=â€rootâ€        ===&gt;è®¾ç½®è¶…çº§ç”¨æˆ·çš„åç§°ï¼Œæ³¨æ„ï¼šåç§°ä»»æ„å¯ä»¥ä¸ç”¨æ˜¯ç³»ç»Ÿä¸­å­˜åœ¨çš„ç”¨æˆ·</p>
<p>password root redhat            ===&gt;è®¾ç½®ç”¨æˆ·åå’Œå¯†ç ï¼Œæ³¨æ„ï¼šè¯¥å¯†ç ä¸ºæ˜æ–‡ï¼Œå¦‚æœéœ€è¦å¯†æ–‡éœ€è¦ç”Ÿæˆå¯†æ–‡å¯†ç </p>
<p>ä¿å­˜é€€å‡º</p>
<p>grub2-mkconfig -o /boot/grub2/grub.cfg        ===&gt;ä½¿ç”¨è¯¥å‘½ä»¤æ¥é‡æ–°ç”Ÿæˆgrub.cfgæ–‡ä»¶æ¥ä½¿é…ç½®ç”Ÿæ•ˆ</p>
<p>grub2-mkpasswd-pbkdf2    ===&gt;è¯¥å‘½ä»¤ä¸ºç”ŸæˆåŠ å¯†å¯†ç </p>
<p>password_pbkdf2         ===&gt;å¦‚æœä½¿ç”¨åŠ å¯†çš„å¯†æ–‡éœ€è¦å®šä¹‰å¯†ç çš„åŠ å¯†æ–¹å¼ï¼Œåé¢åŒä¸Šè·Ÿä¸Šç”¨æˆ·åå’ŒåŠ å¯†åçš„å¯†ç </p>
<h2 id="Linux-å¼€æœºå¯åŠ¨æµç¨‹è¯¾åä½œä¸š"><a href="#Linux-å¼€æœºå¯åŠ¨æµç¨‹è¯¾åä½œä¸š" class="headerlink" title="Linux å¼€æœºå¯åŠ¨æµç¨‹è¯¾åä½œä¸š"></a>Linux å¼€æœºå¯åŠ¨æµç¨‹è¯¾åä½œä¸š</h2><ol>
<li>åè¯è§£é‡Š</li>
</ol>
<p>BIOS</p>
<p>MBR</p>
<p>boot loader</p>
<p>grub</p>
<p>DPT</p>
<p>55AA</p>
<ol start="2">
<li>è¯·è‡ªå·±æè¿° linux å¼€æœºå¯åŠ¨çš„æµç¨‹,å¹¶ç”»å‡ºæµç¨‹å›¾ã€‚</li>
<li>linux ç ´è§£ root å¯†ç </li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯åŸ¹è®­</category>
        <category>Linuxç³»ç»ŸåŸºç¡€åŸ¹è®­</category>
      </categories>
      <tags>
        <tag>åŸ¹è®­</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux å†…æ ¸</title>
    <url>/2016/12/22/booboo_linux_base/11-Linux%E5%86%85%E6%A0%B8/</url>
    <content><![CDATA[<h2 id="WHERE"><a href="#WHERE" class="headerlink" title="WHERE"></a>WHERE</h2><p>å†…æ ¸ä¸å†…æ ¸æ¨¡å—åœ¨å“ªé‡Œå‘¢?å†…æ ¸æ¨¡å—éƒ½æœ‰å“ªäº›å‘¢?ä¸‹é¢çš„è¡¨ä¸­éƒ½åˆ—å‡ºæ¥äº†:</p>
<ul>
<li>å†…æ ¸ /boot/vmlinuz-version</li>
<li>å†…æ ¸è§£å‹ç¼©æ‰€éœ€ RAM Disk /boot/initrd-version</li>
<li>å†…æ ¸æ¨¡å— /lib/modules/$(uname -r)/kernel</li>
</ul>
<h3 id="WHAT"><a href="#WHAT" class="headerlink" title="WHAT"></a>WHAT</h3><p>å¼€æœºæ—¶,å†…æ ¸ç¬¬ä¸€ä»»åŠ¡å°±æ˜¯é©±åŠ¨ç¡¬ä»¶,æ¿€æ´»æœºå™¨ã€‚ç›¸å…³çš„é©±åŠ¨æ¨¡å—æ”¾åœ¨ <code>/lib/modules/$(uname -r)/</code> ç›®å½•ä¸‹,ä¸‹é¢ä»¥ rhel6 ä¸ºä¾‹,çœ‹çœ‹è¯¥ç›®å½•ä¸‹éƒ½æœ‰äº›ä»€ä¹ˆ:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel6 ~]# ls /lib/modules/2.6.32-431.el6.x86_64</span><br><span class="line">build</span><br><span class="line">modules.dep</span><br><span class="line">modules.networking modules.usbmap</span><br><span class="line">extra</span><br><span class="line">modules.dep.bin</span><br><span class="line">modules.ofmap</span><br><span class="line">source</span><br><span class="line">kernel</span><br><span class="line">modules.drm</span><br><span class="line">modules.order</span><br><span class="line">updates</span><br><span class="line">modules.alias</span><br><span class="line">modules.ieee1394map modules.pcimap</span><br><span class="line">vdso</span><br><span class="line">modules.alias.bin modules.inputmap modules.seriomap weak-updates</span><br><span class="line">modules.block</span><br><span class="line">modules.isapnpmap modules.symbols</span><br><span class="line">modules.ccwmap modules.modesetting modules.symbols.bin</span><br><span class="line">[root@rhel6 ~]# ls /lib/modules/2.6.32-431.el6.x86_64/kernel/</span><br><span class="line">arch crypto drivers fs kernel lib mm net sound</span><br><span class="line">[root@rhel6 ~]# ls /lib/modules/2.6.32-431.el6.x86_64/kernel/drivers/</span><br><span class="line">acpi</span><br><span class="line">cpufreq hid</span><br><span class="line">leds</span><br><span class="line">net</span><br><span class="line">rtc</span><br><span class="line">vhost</span><br><span class="line">ata</span><br><span class="line">crypto hv</span><br><span class="line">md</span><br><span class="line">parport scsi video</span><br><span class="line">atm</span><br><span class="line">dca</span><br><span class="line">hwmon</span><br><span class="line">media pci</span><br><span class="line">serial virtio</span><br><span class="line">auxdisplay dma</span><br><span class="line">i2c</span><br><span class="line">memstick pcmcia ssb</span><br><span class="line">watchdog</span><br><span class="line">bcma</span><br><span class="line">edac idle</span><br><span class="line">message platform staging xen</span><br><span class="line">block</span><br><span class="line">firewire ieee802154 mfd</span><br><span class="line">power</span><br><span class="line">target</span><br><span class="line">bluetooth firmware infiniband misc</span><br><span class="line">pps</span><br><span class="line">uio</span><br><span class="line">cdrom</span><br><span class="line">gpio</span><br><span class="line">input</span><br><span class="line">mmc</span><br><span class="line">ptp</span><br><span class="line">usb</span><br><span class="line">char</span><br><span class="line">gpu</span><br><span class="line">isdn</span><br><span class="line">mtd</span><br><span class="line">regulator uwb</span><br><span class="line">[root@rhel6 ~]# ls /lib/modules/2.6.32-431.el6.x86_64/kernel/drivers/net</span><br><span class="line">3c59x.ko dl2k.ko</span><br><span class="line">macvtap.ko</span><br><span class="line">pppox.ko</span><br><span class="line">sunhme.ko</span><br><span class="line">8139cp.ko dnet.ko</span><br><span class="line">mdio.ko</span><br><span class="line">ppp_synctty.ko tehuti.ko</span><br></pre></td></tr></table></figure>

<p>/lib/modules/2.6.32-431.el6.x86_64/kernel/ è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶è§£é‡Š</p>
<ul>
<li>arch    ä¸ç¡¬ä»¶å¹³å°æœ‰å…³çš„é¡¹ç›® , ä¾‹å¦‚ CPU çš„ç­‰çº§ç­‰ç­‰ ;</li>
<li>crypto å†…æ ¸æ‰€æ”¯æŒçš„åŠ å¯†çš„æŠ€æœ¯ , ä¾‹å¦‚ md5 ã€ des ç­‰ç­‰ ;</li>
<li>drivers ç¡¬ä»¶çš„é©±åŠ¨ç¨‹åº , ä¾‹å¦‚æ˜¾ç¤ºé€‚é…å™¨ã€ç½‘ç»œå¡ã€ PCI ç›¸å…³ç¡¬ä»¶</li>
<li>fs å†…æ ¸æ‰€æ”¯æŒçš„ filesystems , ä¾‹å¦‚ ext4, vfat, reiserfs, nfs ç­‰ç­‰ ;</li>
<li>kernel å†…æ ¸çš„ç¨‹åºã€å†…æ ¸çŠ¶æ€ã€çº¿ç¨‹ã€ç¨‹åºçš„æ’ç¨‹ (schedule) ã€ç¨‹åºçš„ signle ç­‰</li>
<li>lib å‡½å¼åº“</li>
<li>mm å†…å­˜å•å…ƒæœ‰å…³çš„å„é¡¹æ•°æ®</li>
<li>net ä¸ç½‘ç»œæœ‰å…³çš„å„é¡¹åè®®æ•°æ®,è¿˜æœ‰é˜²ç«å¢™æ¨¡å—</li>
<li>sound éŸ³æ•ˆæœ‰å…³çš„å„é¡¹æ¨¡å—2 å†…æ ¸æ¨¡å—çš„ç›¸ä¾æ€§: depmod</li>
</ul>
<h3 id="moudules-dep-æ–‡ä»¶"><a href="#moudules-dep-æ–‡ä»¶" class="headerlink" title="moudules.dep æ–‡ä»¶"></a>moudules.dep æ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel6 etc]# head /lib/modules/$(uname -r)/modules.dep</span><br><span class="line">kernel/arch/x86/kernel/cpu/mcheck/mce-inject.ko:</span><br><span class="line">kernel/arch/x86/kernel/cpu/cpufreq/powernow-k8.ko: kernel/drivers/cpufreq/freq_table.ko</span><br><span class="line">kernel/arch/x86/kernel/cpu/cpufreq/mperf.ko</span><br><span class="line">kernel/arch/x86/kernel/cpu/cpufreq/mperf.ko:</span><br><span class="line">kernel/arch/x86/kernel/cpu/cpufreq/acpi-cpufreq.ko: kernel/drivers/cpufreq/freq_table.ko</span><br><span class="line">kernel/arch/x86/kernel/cpu/cpufreq/mperf.ko</span><br><span class="line">kernel/arch/x86/kernel/cpu/cpufreq/pcc-cpufreq.ko:</span><br><span class="line">kernel/arch/x86/kernel/cpu/cpufreq/speedstep-lib.ko:</span><br><span class="line">kernel/arch/x86/kernel/cpu/cpufreq/p4-clockmod.ko: kernel/drivers/cpufreq/freq_table.ko</span><br><span class="line">kernel/arch/x86/kernel/cpu/cpufreq/speedstep-lib.ko</span><br><span class="line">kernel/arch/x86/kernel/cpu/cpufreq/intel_pstate.ko:</span><br><span class="line">kernel/arch/x86/kernel/test_nx.ko:</span><br><span class="line">kernel/arch/x86/kernel/microcode.ko:</span><br></pre></td></tr></table></figure>

<h3 id="depmod-å‘½ä»¤"><a href="#depmod-å‘½ä»¤" class="headerlink" title="depmod å‘½ä»¤"></a>depmod å‘½ä»¤</h3><p>depmod [-Ane]</p>
<p>é€‰é¡¹ä¸å‚æ•° :</p>
<ul>
<li>-A : ä¸åŠ ä»»ä½•å‚æ•°æ—¶ , depmod ä¼šä¸»åŠ¨çš„å»åˆ†æç›®å‰å†…æ ¸çš„æ¨¡å— , å¹¶ä¸”é‡æ–°å†™å…¥<code>/lib/modules/$(uname -r)/modules.dep</code> å½“ä¸­æ›´æ–°ã€‚è‹¥åŠ å…¥ -A å‚æ•°æ—¶ , åˆ™ depmod ä¼šå»æœå¯»æ¯” modules.dep å†…è¿˜è¦æ–°çš„æ¨¡å—,è‹¥æ‰¾åˆ°æ–°æ¨¡å—åˆ™</li>
<li>-n : ä¸å†™å…¥ modules.dep , è€Œæ˜¯å°†ç»“æœè¾“å‡ºåˆ°å±å¹•ä¸Š (standard out);</li>
<li>-e : æ˜¾ç¤ºå‡ºç›®å‰å·²åŠ è½½çš„ä¸å¯æ‰§è¡Œçš„æ¨¡å—åç§°</li>
</ul>
<h3 id="depmod-å®éªŒ"><a href="#depmod-å®éªŒ" class="headerlink" title="depmod å®éªŒ"></a>depmod å®éªŒ</h3><p>å‡è®¾å·²ç»åšå¥½ä¸€ä¸ªç½‘å¡é©±åŠ¨ç¨‹åº , æ¡£åä¸º a.ko, è¯·æ›´æ–°å†…æ ¸çš„ç›¸ä¾æ€§ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel6 ~]# cp a.ko /lib/modules/2.6.32-</span><br><span class="line">431.el6.x86_64/kernel/drivers/net</span><br><span class="line">[root@rhel6 ~]# depmod3 å†…æ ¸æ¨¡å—çš„è§‚å¯Ÿ: lsmod, modinfo</span><br></pre></td></tr></table></figure>

<h3 id="lsmod-å‘½ä»¤"><a href="#lsmod-å‘½ä»¤" class="headerlink" title="lsmod å‘½ä»¤"></a>lsmod å‘½ä»¤</h3><p>ä½œç”¨:æ˜¾ç¤ºå‡ºç›®å‰å·²ç»å­˜åœ¨äºå†…æ ¸å½“ä¸­çš„æ¨¡å— , æ˜¾ç¤ºçš„å†…å®¹åŒ…æ‹¬ :</p>
<ol>
<li>æ¨¡å—åç§° (Module);</li>
<li>æ¨¡å—çš„å¤§å° (size);</li>
<li>æ­¤æ¨¡å—æ˜¯å¦è¢«å…¶ä»–æ¨¡å—æ‰€ä½¿ç”¨ (Used by) ã€‚</li>
</ol>
<h3 id="modinfo-å‘½ä»¤"><a href="#modinfo-å‘½ä»¤" class="headerlink" title="modinfo å‘½ä»¤"></a>modinfo å‘½ä»¤</h3><p>ç”¨æ³•:</p>
<p>modinfo [-adln] [module_name|filename]</p>
<p>é€‰é¡¹ä¸å‚æ•° :</p>
<ul>
<li>-a : ä»…åˆ—å‡ºä½œè€…åç§° ;</li>
<li>-d : ä»…åˆ—å‡ºè¯¥ modules çš„è¯´æ˜ (description);</li>
<li>-l : ä»…åˆ—å‡ºæˆæƒ (license);</li>
<li>-n : ä»…åˆ—å‡ºè¯¥æ¨¡å—çš„è¯¦ç»†è·¯å¾„ã€‚</li>
</ul>
<h3 id="å†…æ ¸æ¨¡å—çš„è§‚å¯Ÿå®éªŒ"><a href="#å†…æ ¸æ¨¡å—çš„è§‚å¯Ÿå®éªŒ" class="headerlink" title="å†…æ ¸æ¨¡å—çš„è§‚å¯Ÿå®éªŒ"></a>å†…æ ¸æ¨¡å—çš„è§‚å¯Ÿå®éªŒ</h3><p>é¦–å…ˆæŸ¥çœ‹ç›®å‰å·²å­˜åœ¨äºå†…æ ¸ä¸­çš„æ¨¡å—,éšä¾¿é€‰æ‹©ä¸€ä¸ªæ¨¡å—å¹¶æŸ¥çœ‹è¯¥æ¨¡å—çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel6 ~]# [root@rhel6 ~]# lsmod</span><br><span class="line">Module</span><br><span class="line">Size</span><br><span class="line">Used by</span><br><span class="line">autofs4 26513 3</span><br><span class="line">8021q 25349 0</span><br><span class="line">garp</span><br><span class="line">7152</span><br><span class="line">1 8021q</span><br><span class="line">[root@rhel6 ~]# modinfo autofs4</span><br><span class="line">filename:</span><br><span class="line">/lib/modules/2.6.32-</span><br><span class="line">431.el6.x86_64/kernel/fs/autofs4/autofs4.ko</span><br><span class="line">license: GPL</span><br><span class="line">srcversion: 948FC9C8D4043379272927C</span><br><span class="line">depends:</span><br><span class="line">vermagic:</span><br><span class="line">2.6.32-431.el6.x86_64 SMP mod_unload modversions</span><br></pre></td></tr></table></figure>

<h2 id="å†…æ ¸æ¨¡å—çš„åŠ è½½ä¸ç§»é™¤-insmod-modprobe-rmmod"><a href="#å†…æ ¸æ¨¡å—çš„åŠ è½½ä¸ç§»é™¤-insmod-modprobe-rmmod" class="headerlink" title="å†…æ ¸æ¨¡å—çš„åŠ è½½ä¸ç§»é™¤:insmod, modprobe, rmmod"></a>å†…æ ¸æ¨¡å—çš„åŠ è½½ä¸ç§»é™¤:insmod, modprobe, rmmod</h2><p>modprobe åŠ è½½æ¨¡å—ä¼šä¸»åŠ¨å»æœå¯» modules.dep çš„å†…å®¹ , å…ˆè§£å†³æ¨¡å—çš„ç›¸ä¾æ€§å , å†å†³å®šéœ€è¦åŠ è½½çš„æ¨¡å—æœ‰å“ªäº›,å¾ˆæ–¹ä¾¿; insmod åˆ™å®Œå…¨ç”±ä½¿ç”¨è€…è‡ªè¡ŒåŠ è½½ä¸€ä¸ªå®Œæ•´æ–‡ä»¶åçš„æ¨¡å— , ä¸ä¼šä¸»åŠ¨åˆ†ææ¨¡å—ç›¸ä¾æ€§</p>
<h3 id="insmod-å‘½ä»¤"><a href="#insmod-å‘½ä»¤" class="headerlink" title="insmod å‘½ä»¤"></a>insmod å‘½ä»¤</h3><p>insmod [/full/path/module_name] [parameters]</p>
<h3 id="modprobe-å‘½ä»¤"><a href="#modprobe-å‘½ä»¤" class="headerlink" title="modprobe å‘½ä»¤"></a>modprobe å‘½ä»¤</h3><p>modprobe [-lcfr] module_name</p>
<p>é€‰é¡¹ä¸å‚æ•° :</p>
<ul>
<li>-c : åˆ—å‡ºç›®å‰ç³»ç»Ÿæ‰€æœ‰çš„æ¨¡å— !( æ›´è¯¦ç»†çš„ä»£å·å¯¹åº”è¡¨ )</li>
<li>-l : åˆ—å‡ºç›®å‰åœ¨ /lib/modules/<code>uname -r</code>/kernel å½“ä¸­çš„æ‰€æœ‰æ¨¡å—å®Œæ•´æ–‡ä»¶ å ;</li>
<li>-f : å¼ºåˆ¶åŠ è½½è¯¥æ¨¡å— ;</li>
<li>-r : ç±»ä¼¼ rmmod , ç§»é™¤æŸä¸ªæ¨¡å—</li>
</ul>
<h3 id="rmmod-å‘½ä»¤"><a href="#rmmod-å‘½ä»¤" class="headerlink" title="rmmod å‘½ä»¤"></a>rmmod å‘½ä»¤</h3><p>rmmod [-fw] module_name</p>
<p>é€‰é¡¹ä¸å‚æ•° :</p>
<ul>
<li>-f : å¼ºåˆ¶å°†è¯¥æ¨¡å—ç§»é™¤æ‰ , ä¸ç®¡æ˜¯å¦æ­£è¢«ä½¿ç”¨ ;</li>
<li>-w : è‹¥è¯¥æ¨¡å—æ­£è¢«ä½¿ç”¨ , åˆ™ç­‰è¯¥æ¨¡å—è¢«ä½¿ç”¨å®Œæ¯•å , å†ç§»é™¤</li>
</ul>
<h3 id="å†…æ ¸æ¨¡å—çš„åŠ è½½ä¸ç§»é™¤å®éªŒ"><a href="#å†…æ ¸æ¨¡å—çš„åŠ è½½ä¸ç§»é™¤å®éªŒ" class="headerlink" title="å†…æ ¸æ¨¡å—çš„åŠ è½½ä¸ç§»é™¤å®éªŒ"></a>å†…æ ¸æ¨¡å—çš„åŠ è½½ä¸ç§»é™¤å®éªŒ</h3><p>åŠ è½½æ¨¡å—;æŸ¥çœ‹è¯¥æ¨¡å—æ˜¯å¦å·²æˆåŠŸåŠ è½½,å¹¶æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯;ç§»é™¤è¯¥æ¨¡å—ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel6 net]# modprobe dnet</span><br><span class="line">[root@rhel6 net]# modinfo dnet</span><br><span class="line">filename:</span><br><span class="line">/lib/modules/2.6.32-431.el6.x86_64/kernel/drivers/net/dnet.ko</span><br><span class="line">author:</span><br><span class="line">Ilya Yanok &lt;yanok@emcraft.com&gt;, Matteo Vit &lt;matteo.vit@dave.eu&gt;</span><br><span class="line">description: Dave DNET Ethernet driver</span><br><span class="line">license:</span><br><span class="line">GPL</span><br><span class="line">srcversion: 9D532980E04E93088A9DFC1</span><br><span class="line">depends:</span><br><span class="line">vermagic:</span><br><span class="line">2.6.32-431.el6.x86_64 SMP mod_unload modversions</span><br><span class="line">[root@rhel6 net]# lsmod | grep dnet</span><br><span class="line">dnet</span><br><span class="line">16103 0</span><br><span class="line">[root@rhel6 net]# rmmod dnet</span><br><span class="line">[root@rhel6 net]# lsmod | grep dnet</span><br></pre></td></tr></table></figure>

<h2 id="å†…æ ¸æ¨¡å—çš„é¢å¤–å‚æ•°è®¾å®š-etc-modprobe-d-conf"><a href="#å†…æ ¸æ¨¡å—çš„é¢å¤–å‚æ•°è®¾å®š-etc-modprobe-d-conf" class="headerlink" title="å†…æ ¸æ¨¡å—çš„é¢å¤–å‚æ•°è®¾å®š:/etc/modprobe.d/*.conf"></a>å†…æ ¸æ¨¡å—çš„é¢å¤–å‚æ•°è®¾å®š:/etc/modprobe.d/*.conf</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel6 ~]# ls /etc/modprobe.d/</span><br><span class="line">anaconda.conf dist-alsa.conf dist-oss.conf</span><br><span class="line">blacklist.conf dist.conf</span><br><span class="line">openfwwf.conf</span><br><span class="line">[root@rhel6 ~]# cat /etc/modprobe.d/dist.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"> default modutils aliases</span></span><br><span class="line">alias binfmt-204 binfmt_aout</span><br><span class="line">alias binfmt-263 binfmt_aout</span><br><span class="line">alias binfmt-264 binfmt_aout</span><br><span class="line">alias binfmt-267 binfmt_aout</span><br><span class="line">alias binfmt-387 binfmt_aout</span><br><span class="line">alias block-major-1-* rd</span><br><span class="line">alias block-major-3-* ide-probe-mod</span><br><span class="line">alias block-major-8-* sd_mod</span><br><span class="line">alias block-major-9-* md</span><br><span class="line">alias block-major-11-* sr_mod</span><br><span class="line">alias block-major-13-* xd</span><br><span class="line">alias block-major-15-* cdu31a</span><br><span class="line">alias block-major-16-* gscd</span><br><span class="line">alias block-major-17-* optcd</span><br><span class="line">alias block-major-18-* sjcd</span><br><span class="line">alias block-major-20-* mcdx</span><br><span class="line">alias block-major-22-* ide-probe-mod</span><br><span class="line">alias block-major-23-* mcd</span><br><span class="line">alias block-major-24-* sonycd535</span><br><span class="line">alias block-major-25-* sbpcd</span><br><span class="line">alias block-major-26-* sbpcd</span><br><span class="line">alias block-major-27-* sbpcd</span><br><span class="line">alias block-major-29-* aztcd</span><br><span class="line">alias block-major-32-* cm206</span><br><span class="line">alias block-major-33-* ide-probe-mod</span><br><span class="line">alias block-major-34-* ide-probe-mod</span><br><span class="line">alias block-major-37-* ide-tape</span><br><span class="line">alias block-major-44-* ftl</span><br><span class="line">alias block-major-46-* pcd</span><br><span class="line">alias block-major-47-* pf</span><br></pre></td></tr></table></figure>

<h2 id="å†…æ ¸å‡çº§"><a href="#å†…æ ¸å‡çº§" class="headerlink" title="å†…æ ¸å‡çº§"></a>å†…æ ¸å‡çº§</h2><h3 id="æºç ç¼–è¯‘"><a href="#æºç ç¼–è¯‘" class="headerlink" title="æºç ç¼–è¯‘"></a>æºç ç¼–è¯‘</h3><p>Linux å†…æ ¸å®˜ç½‘ <a href="https://www.kernel.org/" target="_blank" rel="noopener">https://www.kernel.org/</a> æä¾›çš„æ˜¯æºç ,éœ€è¦ç¼–è¯‘ä½¿ç”¨ã€‚</p>
<p><img src="pic/44.png" alt="44"></p>
<p>Linux å†…æ ¸ç‰ˆæœ¬æœ‰ä¸¤ç§ : ç¨³å®šç‰ˆå’Œå¼€å‘ç‰ˆ ,Linux å†…æ ¸ç‰ˆæœ¬å·ç”± 3 ä¸ªæ•°å­—ç»„æˆ :r.x.y</p>
<ul>
<li>r: ä¸»ç‰ˆæœ¬å·</li>
<li>x: æ¬¡ç‰ˆæœ¬å· , å¶æ•°è¡¨ç¤ºç¨³å®šç‰ˆæœ¬ ; å¥‡æ•°è¡¨ç¤ºå¼€å‘ä¸­ç‰ˆæœ¬ã€‚</li>
<li>y: ä¿®è®¢ç‰ˆæœ¬å· , è¡¨ç¤ºä¿®æ”¹çš„æ¬¡æ•°</li>
</ul>
<p>å» <a href="http://www.kernel.org" target="_blank" rel="noopener">http://www.kernel.org</a> é¦–é¡µ , å¯ä»¥çœ‹åˆ°æœ‰ stable, longterm ç­‰ç‰ˆæœ¬ ,longterm æ˜¯æ¯”stable æ›´ç¨³å®šçš„ç‰ˆæœ¬ , ä¼šé•¿æ—¶é—´æ›´æ–°ã€‚</p>
<p>æºç ç¼–è¯‘ä¸åšè¦æ±‚ã€‚</p>
<h3 id="rpm-åŒ…å®‰è£…"><a href="#rpm-åŒ…å®‰è£…" class="headerlink" title="rpm åŒ…å®‰è£…"></a>rpm åŒ…å®‰è£…</h3><p>åœ¨å·¥ä½œä¸­åº”è¯¥å»æ“ä½œç³»ç»Ÿçš„å‘è¡Œå…¬å¸çš„å®˜ç½‘ä¸‹è½½å·²ç»ç¼–è¯‘å¥½çš„å†…æ ¸ã€‚æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯çº¢å¸½çš„,é‚£ä¹ˆå°±å»çº¢å¸½çš„å®˜ç½‘ <a href="https://www.redhat.com/en/global/china" target="_blank" rel="noopener">https://www.redhat.com/en/global/china</a></p>
<p>è¿™é‡Œä½¿ç”¨ä¸€ä¸ªå…è´¹çš„æº ELRepo æº</p>
<p><img src="pic/45.png" alt="45"></p>
<h4 id="rhel6-5-å†…æ ¸å‡çº§-â€”â€”-yum-æ–¹å¼-æœ‰ç½‘"><a href="#rhel6-5-å†…æ ¸å‡çº§-â€”â€”-yum-æ–¹å¼-æœ‰ç½‘" class="headerlink" title="rhel6.5 å†…æ ¸å‡çº§ â€”â€” yum æ–¹å¼(æœ‰ç½‘)"></a>rhel6.5 å†…æ ¸å‡çº§ â€”â€” yum æ–¹å¼(æœ‰ç½‘)</h4><p>åœ¨ yum çš„ ELRepo æºä¸­ , é€‰æ‹© kernel-lt-3.10.102-1.el6.elrepo.x86_64.rpm è¿™ä¸ªç‰ˆ<br>æœ¬ã€‚</p>
<p><img src="pic/46.png" alt="46"></p>
<p>é‡æ–°å¯åŠ¨åçš„ grub ç•Œé¢</p>
<p><img src="pic/47.png" alt="47"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[#</span><span class="bash">1<span class="comment">#root@rhel6 ~]#uname -r</span></span></span><br><span class="line">3.10.102-1.el6.elrepo.x86_64</span><br></pre></td></tr></table></figure>

<h4 id="rhel7-2-å†…æ ¸å‡çº§-â€”â€”-æœ¬åœ°-rpm-å®‰è£…-æ²¡ç½‘"><a href="#rhel7-2-å†…æ ¸å‡çº§-â€”â€”-æœ¬åœ°-rpm-å®‰è£…-æ²¡ç½‘" class="headerlink" title="rhel7.2 å†…æ ¸å‡çº§ â€”â€” æœ¬åœ° rpm å®‰è£…(æ²¡ç½‘)"></a>rhel7.2 å†…æ ¸å‡çº§ â€”â€” æœ¬åœ° rpm å®‰è£…(æ²¡ç½‘)</h4><p>æ­¤å¤„æ˜¯åœ¨ <a href="http://rpm.pbone.net" target="_blank" rel="noopener">http://rpm.pbone.net</a> ä¸Šä¸‹è½½çš„,å®é™…å·¥ä½œä¸­åº”è¯¥åˆ°çº¢å¸½å®˜ç½‘ä¸‹è½½ã€‚</p>
<p><img src="pic/48.png" alt="48"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# ls</span><br><span class="line">anaconda-ks.cfg Downloads</span><br><span class="line">Music Templates</span><br><span class="line">Desktop</span><br><span class="line">initial-setup-ks.cfg</span><br><span class="line">Pictures Videos</span><br><span class="line">Documents</span><br><span class="line">kernel-lt-3.10.102-1.el6.elrepo.x86_64.rpm Public</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹ä½†å‰ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# uname -r</span><br><span class="line">3.10.0-123.el7.x86_64</span><br></pre></td></tr></table></figure>

<p>å®‰è£…æ–°å†…æ ¸å¹¶ä¿ç•™åŸå†…æ ¸</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# rpm -ivh kernel-lt-3.10.102-1.el6.elrepo.x86_64.rpm</span><br><span class="line">Preparing...</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">################################ [100%]</span></span></span><br><span class="line">Updating / installing...</span><br><span class="line">1:kernel-lt-3.10.102-1.el6.elrepo ################################# [100%]</span><br><span class="line">[root@rhel7 ~]# cd /boot/grub2/</span><br><span class="line">[root@rhel7 grub2]# ll /etc/grub2.cfg</span><br><span class="line">lrwxrwxrwx. 1 root root 22 Jul 2 2015 /etc/grub2.cfg -&gt; ../boot/grub2/grub.cfg</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹å½“å‰é»˜è®¤å¯åŠ¨å†…æ ¸</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 grub2]# grub2-editenv list</span><br><span class="line">saved_entry=Red Hat Enterprise Linux Linux, with Linux 3.10.0-123.el7.x86_64</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹é…ç½®æ–‡ä»¶ä¸­æœ‰å‡ ä¸ªå¯åŠ¨é¡¹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 grub2]# grep "menuentry" /boot/grub2/grub.cfg</span><br><span class="line">if [ x"$&#123;feature_menuentry_id&#125;" = xy ]; then</span><br><span class="line">menuentry_id_option="--id"</span><br><span class="line">menuentry_id_option=""</span><br><span class="line">export menuentry_id_option</span><br><span class="line">menuentry 'Red Hat Enterprise Linux Server (3.10.102-1.el6.elrepo.x86_64) 7.0 (Maipo)' --class red</span><br><span class="line">--class gnu-linux --class gnu --class os --unrestricted $menuentry_id_option 'gnulinux-3.10.0-</span><br><span class="line">123.el7.x86_64-advanced-5220f38d-edd6-45e5-a257-f1e9e6c80b4e' &#123;</span><br><span class="line">menuentry 'Red Hat Enterprise Linux Server, with Linux 3.10.0-123.el7.x86_64' --class red --class</span><br><span class="line">gnu-linux --class gnu --class os --unrestricted $menuentry_id_option 'gnulinux-3.10.0-</span><br><span class="line">123.el7.x86_64-advanced-5220f38d-edd6-45e5-a257-f1e9e6c80b4e' &#123;</span><br><span class="line">menuentry 'Red Hat Enterprise Linux Server, with Linux 0-rescue-14d17f362db9498eaa56aac326570c37' --class red --class gnu-linux --class gnu --class os</span><br><span class="line">--unrestricted $menuentry_id_option 'gnulinux-0-rescue-14d17f362db9498eaa56aac326570c37-</span><br><span class="line">advanced-5220f38d-edd6-45e5-a257-f1e9e6c80b4e' &#123;</span><br></pre></td></tr></table></figure>

<p>è®¾ç½®é»˜è®¤å¯åŠ¨å†…æ ¸</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 grub2]# grub2-set-default 'Red Hat Enterprise Linux Server (3.10.102-</span><br><span class="line">1.el6.elrepo.x86_64) 7.0 (Maipo)'</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹å½“å‰é»˜è®¤å¯åŠ¨å†…æ ¸</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 grub2]# grub2-editenv list</span><br><span class="line">saved_entry=Red Hat Enterprise Linux Server (3.10.102-1.el6.elrepo.x86_64) 7.0 (Maipo)</span><br></pre></td></tr></table></figure>

<p>æ›´æ–°ä¸€ä¸‹é…ç½® , è®©æ–°çš„å†…æ ¸å¯åŠ¨ç”Ÿæ•ˆ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 grub2]# grub2-mkconfig -o /boot/grub2/grub.cfg</span><br><span class="line">Generating grub configuration file ...</span><br><span class="line">Found linux image: /boot/vmlinuz-3.10.102-1.el6.elrepo.x86_64</span><br><span class="line">Found initrd image: /boot/initramfs-3.10.102-1.el6.elrepo.x86_64.img</span><br><span class="line">Found linux image: /boot/vmlinuz-3.10.0-123.el7.x86_64</span><br><span class="line">Found initrd image: /boot/initramfs-3.10.0-123.el7.x86_64.img</span><br><span class="line">Found linux image: /boot/vmlinuz-0-rescue-14d17f362db9498eaa56aac326570c37</span><br><span class="line">Found initrd image: /boot/initramfs-0-rescue-14d17f362db9498eaa56aac326570c37.img</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>é‡æ–°å¯åŠ¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 grub2]# reboot</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹å½“å‰å†…æ ¸ç‰ˆæœ¬</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# uname -r</span><br><span class="line">3.10.102-1.el6.elrepo.x86_64</span><br></pre></td></tr></table></figure>

<h2 id="Linux-å†…æ ¸ä½œä¸š"><a href="#Linux-å†…æ ¸ä½œä¸š" class="headerlink" title="Linux å†…æ ¸ä½œä¸š"></a>Linux å†…æ ¸ä½œä¸š</h2><ol>
<li>åˆ°å…±äº«å½“ä¸­ä¸‹è½½ linux å†…æ ¸ kernel-lt-3.10.102-1.el6.elrepo.x86_64.rpm</li>
<li>rhel6.5 è¿›è¡Œå†…æ ¸å‡çº§,ä¿ç•™åŸå†…æ ¸</li>
<li>rhel7.2 è¿›è¡Œå†…æ ¸å‡çº§,ä¿ç•™åŸå†…æ ¸</li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯åŸ¹è®­</category>
        <category>Linuxç³»ç»ŸåŸºç¡€åŸ¹è®­</category>
      </categories>
      <tags>
        <tag>åŸ¹è®­</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux SELINUX</title>
    <url>/2016/12/22/booboo_linux_base/12-SELINUX/</url>
    <content><![CDATA[<h2 id="SELinux"><a href="#SELinux" class="headerlink" title="SELinux"></a>SELinux</h2><p>Security Enhanced Linux å®‰å…¨å¼ºåŒ–çš„ Linux</p>
<h3 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><p>å¼ºåˆ¶é™åˆ¶æŸäº›æ“ä½œ , å±äºæƒé™çš„ä¸€ç§</p>
<p>æ€è€ƒ : åˆ°ç›®å‰ä¸ºæ­¢å­¦è¿‡çš„ linux ä¸­çš„æƒé™ ?</p>
<p>u\g\o r\w\x ssid\sgid\stid acl attr</p>
<h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p>/etc/selinux/config</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[#</span><span class="bash">15<span class="comment">#root@rhel6 ~]#ll /etc/selinux/config</span></span></span><br><span class="line">-rw-r--r--. 1 root root 458 Jul 2 2015 /etc/selinux/config</span><br><span class="line"><span class="meta">[#</span><span class="bash">16<span class="comment">#root@rhel6 ~]#ll /etc/sysconfig/selinux</span></span></span><br><span class="line">lrwxrwxrwx. 1 root root 17 Jul 2 2015 /etc/sysconfig/selinux -&gt; ../selinux/config</span><br><span class="line"><span class="meta">[#</span><span class="bash">17<span class="comment">#root@rhel6 ~]#cat /etc/selinux/config</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> This file controls the state of SELinux on the system.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> SELINUX= can take one of these three values: ã€ä¸‰ç§çŠ¶æ€ã€‘</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> enforcing - SELinux security policy is enforced. ã€æ‰“å¼€ selinux , å¹¶å¼ºåˆ¶é™åˆ¶ã€‘</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> permissive - SELinux prints warnings instead of enforcing. ã€æ‰“å¼€ selinux , ä¸é™åˆ¶æ“ä½œ , ä½†ä¼šè­¦</span></span><br><span class="line">å‘Šã€‘</span><br><span class="line"><span class="meta">#</span><span class="bash"> disabled - No SELinux policy is loaded. ã€å…³é—­ selinux ã€‘</span></span><br><span class="line">SELINUX=enforcing</span><br><span class="line"><span class="meta">#</span><span class="bash"> SELINUXTYPE= can take one of these two values: ã€ä¸¤ç§ç±»å‹ã€‘</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> targeted - Targeted processes are protected, ã€é’ˆå¯¹ç½‘ç»œæœåŠ¡è¾ƒå¤š , é’ˆå¯¹ä¸»æœºè¾ƒå°‘ã€‘</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mls - Multi Level Security protection. ã€å…¨æ–¹ä½çš„æ§åˆ¶ã€‘</span></span><br><span class="line">SELINUXTYPE=targeted</span><br></pre></td></tr></table></figure>

<p>é‡å¯ç”µè„‘åç”Ÿæ•ˆ , å¹¶æ°¸ä¹…ç”Ÿæ•ˆ</p>
<h3 id="ç›¸å…³æŒ‡ä»¤"><a href="#ç›¸å…³æŒ‡ä»¤" class="headerlink" title="ç›¸å…³æŒ‡ä»¤"></a>ç›¸å…³æŒ‡ä»¤</h3><ul>
<li>æŸ¥çœ‹å½“å‰ selinux çŠ¶æ€çš„å‘½ä»¤ : getenforce/sestatus</li>
<li>è®¾ç½® selinux çŠ¶æ€ ( ä¸´æ—¶ç”Ÿæ•ˆ ): setenforce [ Enforcing | Permissive | 1 | 0 ]</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[#</span><span class="bash">12<span class="comment">#root@rhel6 ~]#getenforce</span></span></span><br><span class="line">Enforcing</span><br><span class="line"><span class="meta">[#</span><span class="bash">13<span class="comment">#root@rhel6 ~]#sestatus</span></span></span><br><span class="line">SELinux status:</span><br><span class="line">enabled</span><br><span class="line">SELinuxfs mount:</span><br><span class="line">/selinux</span><br><span class="line">Current mode:</span><br><span class="line">enforcing</span><br><span class="line">Mode from config file:</span><br><span class="line">enforcing</span><br><span class="line">Policy version:</span><br><span class="line">28</span><br><span class="line">Policy from config file:</span><br><span class="line">targeted</span><br><span class="line">[root@rhel7 ~]# setenforce 0</span><br><span class="line">[root@rhel7 ~]# getenforce</span><br><span class="line">Permissive</span><br><span class="line">[root@rhel7 ~]# sestatus</span><br><span class="line">SELinux status:</span><br><span class="line">enabled</span><br><span class="line">SELinuxfs mount:</span><br><span class="line">/sys/fs/selinux</span><br><span class="line">SELinux root directory:</span><br><span class="line">/etc/selinux</span><br><span class="line">Loaded policy name:</span><br><span class="line">targeted</span><br><span class="line">Current mode:</span><br><span class="line">permissive</span><br><span class="line">Mode from config file:</span><br><span class="line">enforcing</span><br><span class="line">Policy MLS status:</span><br><span class="line">enabled</span><br><span class="line">Policy deny_unknown status: allowed</span><br><span class="line">Max kernel policy version: 28</span><br><span class="line">[root@rhel7 ~]# which getenforce</span><br><span class="line">/usr/sbin/getenforce</span><br><span class="line">[root@rhel7 ~]# rpm -qf /usr/sbin/getenforce</span><br><span class="line">libselinux-utils-2.2.2-6.el7.x86_64</span><br><span class="line">[root@rhel7 ~]# rpm -ql libselinux-utils|head</span><br><span class="line">/usr/sbin/avcstat</span><br><span class="line">/usr/sbin/getenforce</span><br><span class="line">/usr/sbin/getsebool</span><br><span class="line">/usr/sbin/matchpathcon</span><br><span class="line">/usr/sbin/selinuxconlist</span><br><span class="line">/usr/sbin/selinuxdefcon</span><br><span class="line">/usr/sbin/selinuxenabled</span><br><span class="line">/usr/sbin/selinuxexeccon</span><br><span class="line">/usr/sbin/setenforce</span><br><span class="line">/usr/share/man/man5/booleans.5.gz</span><br><span class="line">[root@rhel7 ~]# which sestatus</span><br><span class="line">/usr/sbin/sestatus</span><br><span class="line">[root@rhel7 ~]# rpm -qf /usr/sbin/sestatuspolicycoreutils-2.2.5-11.el7.x86_64</span><br><span class="line">[root@rhel7 ~]# rpm -ql policycoreutils|head</span><br><span class="line">/etc/sestatus.conf</span><br><span class="line">/usr/bin/secon</span><br><span class="line">/usr/sbin/fixfiles</span><br><span class="line">/usr/sbin/genhomedircon</span><br><span class="line">/usr/sbin/load_policy</span><br><span class="line">/usr/sbin/restorecon</span><br><span class="line">/usr/sbin/semodule</span><br><span class="line">/usr/sbin/sestatus</span><br><span class="line">/usr/sbin/setfiles</span><br><span class="line">/usr/sbin/setsebool</span><br></pre></td></tr></table></figure>

<h3 id="æ“ä½œé™åˆ¶çš„å®ç°æ–¹æ³•"><a href="#æ“ä½œé™åˆ¶çš„å®ç°æ–¹æ³•" class="headerlink" title="æ“ä½œé™åˆ¶çš„å®ç°æ–¹æ³•"></a>æ“ä½œé™åˆ¶çš„å®ç°æ–¹æ³•</h3><ol>
<li>é€šè¿‡ bool å€¼æ¥è¿›è¡Œæ“ä½œçš„é™åˆ¶</li>
</ol>
<ul>
<li>1&gt;getsebool -a &lt;== æ˜¾ç¤ºä¸»æœºä¸­æ‰€æœ‰çš„å¸ƒå°”å€¼</li>
<li>2&gt;setsebool [-PV] boolean value | bool1=val1 bool2=val2 â€¦</li>
</ul>
<ol start="2">
<li>é€šè¿‡å®‰å…¨ä¸Šä¸‹æ–‡<br>ä¸»ä½“ï¼ˆè¿›ç¨‹ï¼‰ä¸ç›®æ ‡çš„å®‰å…¨ä¸Šä¸‹æ–‡å¿…é¡»ä¸€è‡´æ‰èƒ½å¤Ÿé¡ºåˆ©è®¿é—®<br>æŸ¥çœ‹å®‰å…¨ä¸Šä¸‹æ–‡<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[#</span><span class="bash">19<span class="comment">#root@rhel6 ~]#ls -Z</span></span></span><br><span class="line">-rw-------. root root system_u:object_r:admin_home_t:s0 anaconda-ks.cfg</span><br><span class="line">drwxr-xr-x. root root unconfined_u:object_r:admin_home_t:s0 Desktop</span><br><span class="line">drwxr-xr-x. root root unconfined_u:object_r:admin_home_t:s0 Documents</span><br><span class="line">drwxr-xr-x. root root unconfined_u:object_r:admin_home_t:s0 Downloads</span><br><span class="line">-rw-r--r--. root root unconfined_u:object_r:admin_home_t:s0 index.php3?stat=26</span><br><span class="line">-rw-r--r--. root root system_u:object_r:admin_home_t:s0 install.log</span><br><span class="line">-rw-r--r--. root root system_u:object_r:admin_home_t:s0 install.log.syslog</span><br><span class="line">drwxr-xr-x. root root unconfined_u:object_r:admin_home_t:s0 Music</span><br><span class="line">drwxr-xr-x. root root unconfined_u:object_r:admin_home_t:s0 Pictures</span><br><span class="line">drwxr-xr-x. root root unconfined_u:object_r:admin_home_t:s0 Public</span><br><span class="line">-rw-r--r--. root root unconfined_u:object_r:admin_home_t:s0 root@172.25.0.10</span><br><span class="line">drwxr-xr-x. root root unconfined_u:object_r:admin_home_t:s0 Templates</span><br><span class="line">drwxr-xr-x. root root unconfined_u:object_r:admin_home_t:s0 Videos</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>å®‰å…¨ä¸Šä¸‹æ–‡ä¸»è¦ç”¨å†’å·åˆ†ä¸ºä¸‰ä¸ªå­—æ®µ :</p>
<p>Identify:role:type</p>
<p>èº«ä»½è¯†åˆ« : è§’è‰² : ç±»å‹1.5 selinux æ‰€éœ€è¦çš„æœåŠ¡</p>
<p>èº«ä»½æ ‡è¯†å’Œè§’è‰²å¹¶ä¸é‡è¦ï¼Œå®‰å…¨ä¸Šä¸‹æ–‡é‡Œé‡è¦çš„å°±æ˜¯è¿™ä¸ªç±»å‹ï¼Œä¸€ä¸ªä¸»ä½“è¿›ç¨‹èƒ½ä¸èƒ½è¯»å–åˆ°è¿™ä¸ªæ–‡ä»¶èµ„æºä¸ç±»å‹å­—æ®µæœ‰å…³ã€‚<br>ä¹‹å‰æˆ‘ä»¬è¯´è¿›ç¨‹å’Œæ–‡ä»¶çš„ä¸Šä¸‹æ–‡çš„ç±»å‹å¿…é¡»è¦åŒ¹é…ã€‚è¿™é‡Œæ¶‰åŠåˆ°ä¸¤ä¸ªä¸“æœ‰åè¯ï¼Œä¸€ä¸ªå«åŸŸï¼Œä¸€ä¸ªå«ç±»å‹ã€‚å…¶ä¸­ä¸»ä½“ç¨‹åºä¸­ç§°ä¸ºåŸŸï¼Œæ–‡ä»¶èµ„æºä¸Šç§°ä¸ºç±»å‹ï¼Œæ˜¯ä¸æ˜¯æœ‰ç§å¬å¤©ä¹¦çš„æ„Ÿè§‰ï¼Ÿå¾ˆæ‹—å£å§ï¼Ÿæˆ‘ä»¬æ¥ä¸¾ä¸ªåˆ—å­ã€‚<br>å…ˆå°†httpdæœåŠ¡å¼€å¯ï¼Œservice httpd start<br>Cd /var/www/html è¿™é‡Œæ˜¯ä¸€ä¸ªç³»åˆ—çš„ç½‘é¡µæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°æ–‡ä»¶ç±»å‹å±äºhttpd_sys_content_t è¿˜æœ‰httpd_sys_script_exec_tã€‚<br>ç„¶åæˆ‘ä»¬å†çœ‹è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ç±»å‹<br>å…ˆæŸ¥çœ‹æœ‰æ²¡æœ‰è¿™ä¸ªè¿›ç¨‹  pstree | grep httpd<br>ç„¶åæŸ¥çœ‹è¿›ç¨‹çš„å®‰å…¨ä¸Šä¸‹æ–‡ ps aux -Z | grep httpã€‚<br>åœ¨è¿™é‡ŒHttpdæ˜¯ä¸€ä¸ªåŸŸï¼Œselinuxçš„ç­–ç•¥é’ˆå¯¹è¿™ä¸ªåŸŸåˆ¶å®šäº†è®¸å¤šçš„è§„åˆ™ï¼Œå…¶ä¸­åŒ…æ‹¬è¿™ä¸ªåŸŸå¯ä»¥è¯»çš„ç›®æ ‡èµ„æºç±»å‹ï¼Œæ¯”å¦‚sys_contentã€‚<br>ä¸»é¢˜è¿›ç¨‹å’Œç›®æ ‡çš„æ–‡ä»¶çš„å®‰å…¨ä¸Šä¸‹æ–‡å¿…é¡»åŒ¹é…ä¸ç„¶ä¼šæœ‰æƒé™æŠ¥é”™çš„æç¤º</p>
<p>ä¿®æ”¹å®‰å…¨ä¸Šä¸‹æ–‡<br>ä½¿ç”¨chconå‘½ä»¤æ¥æ›´æ”¹å®‰å…¨ä¸Šä¸‹æ–‡çš„ç±»å‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@python tmp]# ls --context test.txt</span><br><span class="line">-rw-r--r-- root root root:object_r:staff_tmp_t test.txt</span><br><span class="line">[root@python tmp]# chcon -t etc_t test.txt</span><br><span class="line">[root@python tmp]# ls -lZ test.txt</span><br><span class="line">-rw-r--r-- root root root:object_r:etc_t test.txt</span><br></pre></td></tr></table></figure>

<p>###Selinuxçš„æ—¥å¿—åˆ†æå·¥å…·sealert<br>setroubleshoot</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[#</span><span class="bash">40<span class="comment">#root@rhel6 ~]#yum install -y setroubleshoot     ===&gt;å®‰è£…æ—¥å¿—åˆ†æå·¥å…·</span></span></span><br><span class="line"><span class="meta">[#</span><span class="bash">42<span class="comment">#root@rhel6 ~]#rpm -ql setroubleshoot-server|head</span></span></span><br><span class="line">/etc/audisp/plugins.d/sedispatch.conf</span><br><span class="line">/etc/dbus-1/system.d/org.fedoraproject.SetroubleshootFixit.conf</span><br><span class="line">/etc/dbus-1/system.d/org.fedoraproject.Setroubleshootd.conf</span><br><span class="line">/etc/logrotate.d/setroubleshoot</span><br><span class="line">/etc/setroubleshoot</span><br><span class="line">/etc/setroubleshoot/setroubleshoot.conf</span><br><span class="line">/usr/bin/sealert</span><br><span class="line"><span class="meta">[#</span><span class="bash">40<span class="comment">#root@rhel6 ~]#Sealert -a /var/log/audit/audit.log	===&gt;ä½¿ç”¨æ—¥å¿—åˆ†æå·¥å…·æ¥åˆ†æselinuxçš„æ—¥å¿—</span></span></span><br><span class="line">ç­‰å¾…æ•°æ®å¤„ç†ï¼Œå¤„ç†å®Œæ¯•ä¹‹åæŸ¥çœ‹</span><br></pre></td></tr></table></figure>

<p>setroubleshot å°† selinux ç›¸å…³çš„é”™è¯¯ä¿¡æ¯å’Œè§£å†³æ–¹æ³•è®°å½•åœ¨ /var/log/messages æ—¥å¿—ä¸­ã€‚<code>cat /var/log/messages | grep setroubleshoot</code></p>
<h4 id="auditd"><a href="#auditd" class="headerlink" title="auditd"></a>auditd</h4><ul>
<li>auditd â€“&gt; å°† selinux ç›¸å…³çš„ä¿¡æ¯è®°å½•åœ¨ /var/log/audit/audit.log æ—¥å¿—ä¸­,éå¸¸è¯¦ç»†ã€‚</li>
<li>sealert -a /var/log/audit/audit.log</li>
</ul>
<h3 id="selinux-policy-devel"><a href="#selinux-policy-devel" class="headerlink" title="selinux-policy-devel"></a>selinux-policy-devel</h3><p>el6 ä¸Šæ²¡æœ‰è¯¥è½¯ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# yum list|grep selinux-policy-devel</span><br><span class="line">selinux-policy-devel.noarch 3.12.1-153.el7 server</span><br><span class="line"></span><br><span class="line"><span class="meta">[#</span><span class="bash">64<span class="comment">#root@rhel6 ~]#yum list|grep selinux-policy-devel</span></span></span><br><span class="line">This system is not registered to Red Hat Subscription Management. You can use subscription-manager</span><br><span class="line">to register.</span><br></pre></td></tr></table></figure>
<p><code>man</code> å…³é”®è¯ <code>_selinux</code> æŸ¥æ‰¾å’Œå…³é”®å­—ç›¸å…³çš„ <code>selinux</code> é™åˆ¶å…·ä½“å†…å®¹ , åŒ…æ‹¬ä»€ä¹ˆæ‰“å¼€ä»€ä¹ˆå¸ƒå°”å€¼ , éœ€è¦è®¾ç½®æ€æ ·çš„å®‰å…¨ä¸Šä¸‹æ–‡ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯åŸ¹è®­</category>
        <category>Linuxç³»ç»ŸåŸºç¡€åŸ¹è®­</category>
      </categories>
      <tags>
        <tag>åŸ¹è®­</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux è¿›ç¨‹ç®¡ç†</title>
    <url>/2016/12/22/booboo_linux_base/13-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<h2 id="è¿›ç¨‹"><a href="#è¿›ç¨‹" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h2><ul>
<li><p>è¿›ç¨‹ï¼š è¿è¡Œåœ¨å†…å­˜ä¸­ç¨‹åºå®ä¾‹ , è¿›ç¨‹æ˜¯ç¨‹åºè¿è¡Œçš„ä¸€ç§çŠ¶æ€ , æ˜¯å†…å­˜ä¸­çš„æ¦‚å¿µï¼Œè¿›ç¨‹ä¸è¿›ç¨‹ä¹‹é—´æ— æ³•è®¿é—®å¯¹æ–¹ç§æœ‰çš„å†…å­˜åŒºåŸŸã€‚</p>
</li>
<li><p>çº¿ç¨‹ï¼š ç¨‹åºè¿è¡Œçš„æœ€å°å•å…ƒï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æ´¾ç”Ÿå‡ºå¤šä¸ªçº¿ç¨‹ï¼ŒåŒä¸€ä¸ªè¿›ç¨‹å†…çš„çº¿ç¨‹ä¹‹é—´å¯ä»¥ç›¸äº’è®¿é—®å½¼æ­¤å†…å­˜åŒºåŸŸï¼Œå¹¶ä¸”å¯ä»¥å…±äº«åŒä¸€è¿›ç¨‹çš„å…±äº«å†…å­˜åŒºåŸŸã€‚</p>
</li>
<li><p>è¿›ç¨‹ç¼–å·ï¼špid</p>
</li>
<li><p>çˆ¶è¿›ç¨‹ç¼–å·ï¼šppid</p>
</li>
</ul>
<h3 id="pstree-å‘½ä»¤"><a href="#pstree-å‘½ä»¤" class="headerlink" title="pstree å‘½ä»¤"></a>pstree å‘½ä»¤</h3><p>pstree å‘½ä»¤ç”¨ä»¥æŸ¥çœ‹è¿›ç¨‹çš„ç»“æ„</p>
<table>
<thead>
<tr>
<th>å¸¸ç”¨å‚æ•°</th>
<th>å‚æ•°è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>-a</td>
<td>æ˜¾ç¤ºæ¯ä¸ªç¨‹åºçš„å®Œæ•´æŒ‡ä»¤ï¼ŒåŒ…å«è·¯å¾„ï¼Œå‚æ•°æˆ–æ˜¯å¸¸é©»æœåŠ¡çš„æ ‡ç¤ºã€‚</td>
</tr>
<tr>
<td>-c</td>
<td>ä¸ä½¿ç”¨ç²¾ç®€æ ‡ç¤ºæ³•ã€‚</td>
</tr>
<tr>
<td>-G</td>
<td>ä½¿ç”¨VT100ç»ˆç«¯æœºçš„åˆ—ç»˜å›¾å­—ç¬¦ã€‚</td>
</tr>
<tr>
<td>-h</td>
<td>åˆ—å‡ºæ ‘çŠ¶å›¾æ—¶ï¼Œç‰¹åˆ«æ ‡æ˜æ‰§è¡Œçš„ç¨‹åºã€‚</td>
</tr>
<tr>
<td>-H&lt;ç¨‹åºè¯†åˆ«ç &gt;</td>
<td>æ­¤å‚æ•°çš„æ•ˆæœå’ŒæŒ‡å®šâ€-hâ€å‚æ•°ç±»ä¼¼ï¼Œä½†ç‰¹åˆ«æ ‡æ˜æŒ‡å®šçš„ç¨‹åºã€‚</td>
</tr>
<tr>
<td>-l</td>
<td>é‡‡ç”¨é•¿åˆ—æ ¼å¼æ˜¾ç¤ºæ ‘çŠ¶å›¾ã€‚</td>
</tr>
<tr>
<td>-n</td>
<td>ç”¨ç¨‹åºè¯†åˆ«ç æ’åºã€‚é¢„è®¾æ˜¯ä»¥ç¨‹åºåç§°æ¥æ’åºã€‚</td>
</tr>
<tr>
<td>-p</td>
<td>æ˜¾ç¤ºç¨‹åºè¯†åˆ«ç ã€‚</td>
</tr>
<tr>
<td>-u</td>
<td>æ˜¾ç¤ºç”¨æˆ·åç§°ã€‚</td>
</tr>
<tr>
<td>-U</td>
<td>ä½¿ç”¨UTF-8åˆ—ç»˜å›¾å­—ç¬¦ã€‚</td>
</tr>
<tr>
<td>-V</td>
<td>æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel6 /etc/skel]#pstree</span><br><span class="line">initâ”€â”¬â”€NetworkManagerâ”€â”¬â”€dhclient</span><br><span class="line">â”‚</span><br><span class="line">â””â”€&#123;NetworkManager&#125;</span><br><span class="line">â”œâ”€abrtd</span><br><span class="line">â”œâ”€acpid</span><br><span class="line">â”œâ”€anacron</span><br><span class="line">â”œâ”€atd</span><br><span class="line">â”œâ”€auditdâ”€â”€â”€&#123;auditd&#125;</span><br><span class="line">â”œâ”€automountâ”€â”€â”€4*[&#123;automount&#125;]</span><br><span class="line">â”œâ”€bonobo-activatiâ”€â”€â”€&#123;bonobo-activat&#125;</span><br><span class="line">â”œâ”€certmonger</span><br><span class="line">â”œâ”€console-kit-daeâ”€â”€â”€63*[&#123;console-kit-da&#125;]</span><br><span class="line">â”œâ”€crond</span><br><span class="line">â”œâ”€cupsd</span><br><span class="line">â”œâ”€2*[dbus-daemonâ”€â”€â”€&#123;dbus-daemon&#125;]</span><br><span class="line">â”œâ”€dbus-launch</span><br><span class="line">â”œâ”€devkit-power-da</span><br><span class="line">â”œâ”€gconfd-2</span><br><span class="line">â”œâ”€gdm-binaryâ”€â”¬â”€gdm-simple-slavâ”€â”¬â”€Xorg</span><br><span class="line">â”‚</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€gdm-session-wor</span><br><span class="line">â”‚</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€gnome-sessionâ”€â”¬â”€at-spi-registry</span><br><span class="line">â”‚</span><br><span class="line">â”‚</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€gdm-simple-gree</span><br><span class="line">â”‚</span><br><span class="line">â”‚</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€gnome-power-man</span><br><span class="line">â”‚</span><br><span class="line">â”‚</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€metacity</span><br><span class="line">â”‚</span><br><span class="line">â”‚</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€polkit-gnome-au</span><br><span class="line">â”‚</span><br><span class="line">â”‚</span><br><span class="line">â”‚</span><br><span class="line">â””â”€&#123;gnome-session&#125;</span><br><span class="line">â”‚</span><br><span class="line">â”‚</span><br><span class="line">â””â”€&#123;gdm-simple-sla&#125;</span><br><span class="line">â”‚</span><br><span class="line">â””â”€&#123;gdm-binary&#125;</span><br><span class="line">â”œâ”€gnome-settings-â”€â”€â”€&#123;gnome-settings&#125;</span><br><span class="line">â”œâ”€gvfsd</span><br><span class="line">â”œâ”€haldâ”€â”¬â”€hald-runnerâ”€â”¬â”€hald-addon-acpi</span><br><span class="line">â”‚</span><br><span class="line">â”‚</span><br><span class="line">â””â”€hald-addon-inpu</span><br><span class="line">â”‚</span><br><span class="line">â””â”€&#123;hald&#125;</span><br><span class="line">â”œâ”€masterâ”€â”¬â”€pickupâ”‚</span><br><span class="line">â””â”€qmgr</span><br><span class="line">â”œâ”€5*[mingetty]</span><br><span class="line">â”œâ”€modem-manager</span><br><span class="line">â”œâ”€polkitd</span><br><span class="line">â”œâ”€pulseaudioâ”€â”€â”€&#123;pulseaudio&#125;</span><br><span class="line">â”œâ”€rhsmcertd</span><br><span class="line">â”œâ”€rpc.statd</span><br><span class="line">â”œâ”€rpcbind</span><br><span class="line">â”œâ”€rsyslogdâ”€â”€â”€3*[&#123;rsyslogd&#125;]</span><br><span class="line">â”œâ”€rtkit-daemonâ”€â”€â”€2*[&#123;rtkit-daemon&#125;]</span><br><span class="line">â”œâ”€sshdâ”€â”€â”€sshdâ”€â”€â”€bashâ”€â”€â”€pstree</span><br><span class="line">â”œâ”€udevdâ”€â”€â”€2*[udevd]</span><br><span class="line">â””â”€wpa_supplicant</span><br></pre></td></tr></table></figure>

<h3 id="é™æ€æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯"><a href="#é™æ€æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯" class="headerlink" title="é™æ€æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯"></a>é™æ€æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯</h3><h4 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h4><ul>
<li>ps æŸ¥çœ‹å½“å‰æ ‡ç­¾é¡µä¸Šçš„è¿›ç¨‹ä¿¡æ¯</li>
<li>ps aux ç³»ç»Ÿè¿›ç¨‹å¿«ç…§ </li>
<li>ps -ef e æ‰€æœ‰è¿›ç¨‹ f å…¨æ ¼å¼ç½—åˆ—</li>
</ul>
<p>ä½¿ç”¨ps auxæŸ¥çœ‹<br>ç¬¬ä¸€åˆ—userä»£è¡¨è¿›ç¨‹çš„æ‹¥æœ‰è€…ï¼Œç¬¬äºŒåˆ—PIDï¼Œç¬¬ä¸‰åˆ—å ç”¨CPUçš„ç™¾åˆ†æ¯”ï¼Œç¬¬å››åˆ—å ç”¨å†…å­˜çš„ç™¾åˆ†æ¯”ï¼Œæˆ‘ä»¬è¯´è¿›ç¨‹å ç”¨ç³»ç»Ÿèµ„æºï¼ŒåƒCPUå†…å­˜éƒ½å±äºç³»ç»Ÿèµ„æºçš„ä¸€éƒ¨åˆ†ï¼Œè¿™é‡Œéƒ½å°†å®ƒæ˜¾ç¤ºå‡ºæ¥äº†ã€‚æ¥ä¸‹æ¥ï¼ŒVSZä»£è¡¨è¿™ä¸ªå ç”¨è™šæ‹Ÿå†…å­˜çš„å¤§å°ï¼ŒRSSä»£è¡¨å ç”¨ç‰©ç†å†…å­˜çš„å¤§å°ï¼Œä»¥KBä¸ºå•ä½ã€‚è™šæ‹Ÿç©ºé—´å°±æ˜¯å½“å†…å­˜ä¸è¶³çš„æ—¶å€™ï¼ŒæŠŠä¸€éƒ¨åˆ†ç¡¬ç›˜ç©ºé—´è™šæ‹Ÿæˆå†…å­˜ä½¿ç”¨ï¼Œé‚£ä¹ˆç‰©ç†å†…å­˜å°±æ˜¯çœŸå®å­˜åœ¨çš„çœŸæ­£çš„å†…å­˜å¤§å°ã€‚ç„¶åå°±æ˜¯å¤„äºå“ªä¸ªç»ˆç«¯ï¼Œè¿›ç¨‹ç›®å‰çš„çŠ¶æ€ï¼Œå¼€å§‹æ—¶é—´ï¼Œå’Œå…·ä½“çš„å‘½ä»¤ã€‚é‚£ä¹ˆè¿›ç¨‹çš„çŠ¶æ€æœ‰å“ªäº›å‘¢ã€‚<br>Sï¼šä¼‘çœ çŠ¶æ€ï¼ˆsleepingï¼‰<br>Rï¼šç­‰å¾…è¿è¡Œï¼ˆrunableï¼‰R Running or runnable (on run queue) è¿›ç¨‹å¤„äºè¿è¡Œæˆ–å°±ç»ªçŠ¶æ€<br>Iï¼šç©ºé—²çŠ¶æ€ï¼ˆidleï¼‰<br>&lt;    high-priority (not nice to other users) ä¼˜å…ˆçº§è¾ƒé«˜çš„<br>N    low-priority (nice to other users)     ä¼˜å…ˆçº§è¾ƒä½<br>s    is a session leader                 è¿›ç¨‹çš„é¢†å¯¼è€…<br>l    is multi-threaded (using CLONE_THREAD, like NPTL pthreads do) å¤šçº¿ç¨‹</p>
<ul>
<li>is in the foreground process group   åœ¨å‰å°è¿›ç¨‹ç»„</li>
</ul>
<p>ä½¿ç”¨ps -ef æŸ¥çœ‹<br>UID ç”¨æˆ·ID<br>PID è¿›ç¨‹ID<br>PPID çˆ¶è¿›ç¨‹ID<br>C CPUå ç”¨ç‡<br>STIME å¼€å§‹æ—¶é—´<br>TTY å¼€å§‹æ­¤è¿›ç¨‹çš„TTY<br>TIME æ­¤è¿›ç¨‹è¿è¡Œçš„æ€»æ—¶é—´<br>CMD å‘½ä»¤å</p>
<p>ä½¿ç”¨ps -leå¯ä»¥ç”¨æ¥æŸ¥çœ‹è¿™ä¸ªè¿›ç¨‹çš„ä¼˜å…ˆçº§ï¼Œä¸»è¦å…³æ³¨ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§æ˜¯NIè¿™ä¸€åˆ—ï¼Œå…¶ä»–å…ˆä¸ç”¨å…³æ³¨</p>
<h4 id="pgrep"><a href="#pgrep" class="headerlink" title="pgrep"></a>pgrep</h4><p>ç”¨æ¥è¿‡æ»¤è¿›ç¨‹å·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel6 ~]# pgrep -l ping &lt;== æˆªå–è¿›ç¨‹å· pid</span><br><span class="line">27706 ping</span><br><span class="line">[root@rhel6 ~]# pgrep -lU student &lt;== æŒ‡å®šç”¨æˆ·æˆªå–è¿›ç¨‹å· pid</span><br><span class="line">27736 bash</span><br><span class="line">27762 ping</span><br><span class="line">[root@rhel6 ~]# pgrep -l -t pts/1 &lt;== æŒ‡å®šç™»é™†ç«¯å£æˆªå–è¿›ç¨‹å· pid</span><br><span class="line">2568 bash</span><br><span class="line">27735 su</span><br><span class="line">27736 bash</span><br><span class="line">1.2.3 pidof</span><br><span class="line">[root@rhel6 ~]# pidof Xorg &lt;== åªæ˜¾ç¤ºè¿›ç¨‹çš„è¿›ç¨‹å· pid</span><br><span class="line">15262</span><br></pre></td></tr></table></figure>

<h2 id="åŠ¨æ€æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯"><a href="#åŠ¨æ€æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯" class="headerlink" title="åŠ¨æ€æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯"></a>åŠ¨æ€æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯</h2><h3 id="top-ç»ˆç«¯æç¤ºç¬¦ä¸æ˜¾ç¤º"><a href="#top-ç»ˆç«¯æç¤ºç¬¦ä¸æ˜¾ç¤º" class="headerlink" title="top ç»ˆç«¯æç¤ºç¬¦ä¸æ˜¾ç¤º"></a>top ç»ˆç«¯æç¤ºç¬¦ä¸æ˜¾ç¤º</h3><ul>
<li>ã€ d ã€‘ä¿®æ”¹é»˜è®¤åˆ·æ–°é¢‘ç‡ , é»˜è®¤ 3s</li>
<li>ã€ P ã€‘ä»¥ cup å ç”¨ç™¾åˆ†æ¯”è¿›è¡Œæ’åº</li>
<li>ã€ M ã€‘ä»¥å†…å­˜çš„å ç”¨æƒ…å†µæ’åº</li>
<li>ã€ h ã€‘æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯</li>
<li>ã€ &lt;&gt; ã€‘ç¿»é¡µ</li>
<li>ã€ k ã€‘æ€æ‰è¿›ç¨‹ kill</li>
</ul>
<p>topå‘½ä»¤å›¾è§£</p>
<p> <img src="pic%5Ctop-pic.png" alt="top-pic"></p>
<h3 id="åœæ­¢è¿›ç¨‹"><a href="#åœæ­¢è¿›ç¨‹" class="headerlink" title="åœæ­¢è¿›ç¨‹"></a>åœæ­¢è¿›ç¨‹</h3><p>Linuxä¸­çš„ kill å‘½ä»¤ç”¨æ¥åœæ­¢æŒ‡å®šçš„è¿›ç¨‹( terminate a process )çš„è¿è¡Œï¼Œæ˜¯ Linuxä¸‹è¿›ç¨‹ç®¡ç†çš„å¸¸ç”¨å‘½ä»¤ã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹åœæ­¢ä¸€ä¸ªå‰å°è¿›ç¨‹å¯ä»¥ä½¿ç”¨ Ctrl+C ç»„åˆé”®ï¼Œä½†æ˜¯å¯¹äºä¸€ä¸ªè¿è¡Œåœ¨åå°è¿›ç¨‹éœ€è¦ç”¨ killå‘½ä»¤æ¥ç»ˆæ­¢ï¼Œæˆ‘ä»¬å°±éœ€è¦å…ˆä½¿ç”¨ psã€pidofã€pstreeå’Œtop ç­‰å·¥å…·è·å–è¿›ç¨‹ PID ï¼Œç„¶åä½¿ç”¨ kill å‘½ä»¤æ¥æ€æ‰è¯¥è¿›ç¨‹ã€‚</p>
<p>kill å‘½ä»¤æ˜¯é€šè¿‡å‘è¿›ç¨‹å‘é€æŒ‡å®šçš„ä¿¡å·æ¥ç»“æŸç›¸åº”è¿›ç¨‹çš„ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹,é‡‡ç”¨ç¼–å·ä¸º15 çš„ TERM ä¿¡å·ã€‚ TERM ä¿¡å·å°†ç»ˆæ­¢æ‰€æœ‰ä¸èƒ½æ•è·è¯¥ä¿¡å·çš„è¿›ç¨‹ã€‚</p>
<p>å¯¹äºé‚£äº›å¯ä»¥æ•è·è¯¥ä¿¡å·çš„è¿›ç¨‹å°±è¦ç”¨ç¼–å·ä¸º 9 çš„ kill ä¿¡å·,å¼ºè¡Œ â€œ æ€æ‰ â€ è¯¥è¿›ç¨‹ã€‚</p>
<p>å‘½ä»¤æ ¼å¼</p>
<p>kill [å‚æ•°][è¿›ç¨‹å·]</p>
<p>å‘½ä»¤åŠŸèƒ½ï¼š</p>
<p>å‘é€æŒ‡å®šçš„ä¿¡å·åˆ°ç›¸åº”è¿›ç¨‹ã€‚ä¸æŒ‡å®šå‹å·å°†å‘é€ SIGTERM ( 15 )ç»ˆæ­¢æŒ‡å®šè¿›ç¨‹ã€‚å¦‚æœä»»æ— æ³•ç»ˆæ­¢è¯¥ç¨‹åºå¯ç”¨ â€œ -KILLâ€ å‚æ•°ï¼Œå…¶å‘é€çš„ä¿¡å·ä¸º SIGKILL(9) ï¼Œå°†å¼ºåˆ¶ç»“æŸè¿›ç¨‹,ä½¿ç”¨ ps å‘½ä»¤æˆ–è€… jobs å‘½ä»¤å¯ä»¥æŸ¥çœ‹è¿›ç¨‹å·ã€‚ root ç”¨æˆ·å°†å½±å“ç”¨æˆ·çš„è¿›ç¨‹,é root ç”¨æˆ·åªèƒ½å½±å“è‡ªå·±çš„è¿›ç¨‹ã€‚</p>
<p>å‘½ä»¤å‚æ•°ï¼š</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-l</td>
<td align="left">ä¿¡å·,è‹¥æœä¸åŠ ä¿¡å·çš„ç¼–å·å‚æ•°,åˆ™ä½¿ç”¨ â€œ -lâ€ å‚æ•°ä¼šåˆ—å‡ºå…¨éƒ¨çš„ä¿¡å·åç§°</td>
</tr>
<tr>
<td align="left">-a</td>
<td align="left">å½“å¤„ç†å½“å‰è¿›ç¨‹æ—¶,ä¸é™åˆ¶å‘½ä»¤åå’Œè¿›ç¨‹å·çš„å¯¹åº”å…³ç³»</td>
</tr>
<tr>
<td align="left">-p</td>
<td align="left">æŒ‡å®š kill å‘½ä»¤åªæ‰“å°ç›¸å…³è¿›ç¨‹çš„è¿›ç¨‹å·,è€Œä¸å‘é€ä»»ä½•ä¿¡å·</td>
</tr>
<tr>
<td align="left">-s</td>
<td align="left">æŒ‡å®šå‘é€ä¿¡å·</td>
</tr>
<tr>
<td align="left">-u</td>
<td align="left">æŒ‡å®šç”¨æˆ·</td>
</tr>
</tbody></table>
<h3 id="killall"><a href="#killall" class="headerlink" title="killall"></a>killall</h3><p>ç”¨äºå…³æ‰å¤šä¸ªåŒåçš„è¿›ç¨‹</p>
<p>killall -9 ping        ===&gt;å…³æ‰æ‰€æœ‰çš„pingè¿›ç¨‹</p>
<h3 id="pkill"><a href="#pkill" class="headerlink" title="pkill"></a>pkill</h3><p>ä½¿ç”¨pkillå‘½ä»¤å¯ä»¥æ ¹æ®è¿›ç¨‹çš„åç§°ï¼è¿è¡Œè¯¥è¿›ç¨‹çš„ç”¨æˆ·ï¼è¿›ç¨‹æ‰€åœ¨çš„ç»ˆç«¯ç­‰ç­‰å±æ€§æ¥ç»ˆæ­¢ç‰¹å®šçš„è¿›ç¨‹<br>pkill -9 -t ç»ˆç«¯å     ===&gt;å…³æ‰ç”±è¯¥ç»ˆç«¯å¼€å¯çš„è¿›ç¨‹<br>pkill -9 -U ç”¨æˆ·å  ===&gt;å…³æ‰ç”±è¯¥ç”¨æˆ·å¼€å¯çš„è¿›ç¨‹</p>
<h3 id="xkill"><a href="#xkill" class="headerlink" title="xkill"></a>xkill</h3><p>å“ªé‡Œå…³ä¸æ‰ç‚¹å“ªé‡Œ</p>
<p>ä¸»è¦ç”¨äºåœæ­¢å›¾å½¢åŒ–ï¼ˆGUIï¼‰ç¨‹åº</p>
<h3 id="è¿›ç¨‹ä¼˜å…ˆçº§"><a href="#è¿›ç¨‹ä¼˜å…ˆçº§" class="headerlink" title="è¿›ç¨‹ä¼˜å…ˆçº§"></a>è¿›ç¨‹ä¼˜å…ˆçº§</h3><p>NI nice</p>
<p>æ•°å­—è¡¨ç¤º : -20-19 æ•°å­—è¶Šå° , ç­‰çº§è¶Šé«˜</p>
<p><code>ps -le | grep ping</code> &lt;== æŸ¥çœ‹ ping çš„ä¼˜å…ˆçº§</p>
<h3 id="æŒ‡å®šä¼˜å…ˆçº§"><a href="#æŒ‡å®šä¼˜å…ˆçº§" class="headerlink" title="æŒ‡å®šä¼˜å…ˆçº§"></a>æŒ‡å®šä¼˜å…ˆçº§</h3><p><code>nice -n 3 ping 172.0.0.1</code></p>
<p>æ™®é€šç”¨æˆ·ä¸èƒ½æŒ‡å®šæ¯” 0 å°çš„ä¼˜å…ˆçº§ ï¼Œ root ç”¨æˆ·éšæ„</p>
<p>æ™®é€šç”¨æˆ·åªèƒ½åšè´¡çŒ®ï¼Œä¸Šå¸éšæ„è®¾ç½®ä¼˜å…ˆçº§</p>
<h3 id="è°ƒæ•´ä¼˜å…ˆçº§"><a href="#è°ƒæ•´ä¼˜å…ˆçº§" class="headerlink" title="è°ƒæ•´ä¼˜å…ˆçº§"></a>è°ƒæ•´ä¼˜å…ˆçº§</h3><p><code>renice -n [-20-19] [pid] &lt;== è°ƒæ•´ä¼˜å…ˆçº§</code></p>
<p>root å¯ä»¥å‡é«˜ä¹Ÿå¯é™ä½niceå€¼ï¼Œä»£è¡¨å¯ä»¥è®¾ç½®ä¼˜å…ˆçº§æ›´ä½å¯ä»¥è®¾ç½®ä¼˜å…ˆçº§æ›´é«˜ã€‚</p>
<p>æ™®é€šç”¨æˆ·åªèƒ½å‡é«˜niceå€¼ï¼Œä»£è¡¨åªèƒ½é™ä½ä¼˜å…ˆçº§ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel6 ~]#nice -n 3 ping 172.25.0.10</span><br><span class="line">[root@rhel6 ~]#nice -n 5 ping 172.25.0.10</span><br><span class="line">[root@rhel6 ~]#ps -le|grep ping</span><br><span class="line">4 S     0 26613 26536  0  83   3 - 25812 skb_re pts/1    00:00:00 ping</span><br><span class="line">4 S     0 26614 26567  0  85   5 - 25812 skb_re pts/2    00:00:00 ping</span><br><span class="line">[root@rhel6 ~]#renice -n -1 26613</span><br><span class="line">26613: old priority 3, new priority -1</span><br><span class="line">[root@rhel6 ~]#ps -le|grep ping</span><br><span class="line">4 S     0 26613 26536  0  79  -1 - 25812 skb_re pts/1    00:00:00 ping</span><br><span class="line">4 S     0 26614 26567  0  85   5 - 25812 skb_re pts/2    00:00:00 ping</span><br></pre></td></tr></table></figure>

<h2 id="å‰åå°ä½œä¸š"><a href="#å‰åå°ä½œä¸š" class="headerlink" title="å‰åå°ä½œä¸š"></a>å‰åå°ä½œä¸š</h2><ul>
<li>&amp; åœ¨åˆ›å»ºè¿›ç¨‹çš„è¿‡ç¨‹ä¸­ , å°†å‰å°ä½œä¸šæ”¾ç½®åˆ°åå°çš„æ–¹æ³• ï¼Œåœ¨å‘½ä»¤åé¢åŠ ä¸Š &amp;</li>
<li>jobs æŸ¥çœ‹åå°è¿›ç¨‹</li>
<li>fg å°†åå°ä½œä¸šè°ƒç”¨åˆ°å‰å°</li>
<li>ctrl+z å°†å·²ç»è§¦å‘çš„å‰å°ä½œä¸šè°ƒåˆ°åå° , åå°ä½œä¸šæš‚åœ</li>
<li>bg è®©åå°ä½œä¸šæ‰§è¡Œ</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@rhel6 ~]#ping 172.25.0.11 &gt;/dev/null &amp;</span><br><span class="line">[1] 26712</span><br><span class="line">[root@rhel6 ~]#ping 172.25.0.10 &gt;/dev/null &amp;</span><br><span class="line">[2] 26713</span><br><span class="line"><span class="meta">[#</span><span class="bash">13<span class="comment">#root@rhel6 ~]#jobs</span></span></span><br><span class="line">[1]- Running</span><br><span class="line">ping 172.25.0.11 &gt; /dev/null &amp;</span><br><span class="line">[2]+ Running</span><br><span class="line">ping 172.25.0.10 &gt; /dev/null &amp;</span><br><span class="line">[root@rhel6 ~]#fg 2</span><br><span class="line">ping 172.25.0.10 &gt; /dev/null</span><br><span class="line">^Z</span><br><span class="line">[2]+ Stopped</span><br><span class="line">ping 172.25.0.10 &gt; /dev/null</span><br><span class="line">[root@rhel6 ~]#bg 2</span><br><span class="line">[2]+ ping 172.25.0.10 &gt; /dev/null &amp;</span><br><span class="line">[root@rhel6 ~]#ps -ef|grep ping</span><br><span class="line">root 26712 26567 0 18:16 pts/2 00:00:00 ping 172.25.0.11</span><br><span class="line">root 26713 26567 0 18:16 pts/2 00:00:00 ping 172.25.0.10</span><br><span class="line">root 26717 26567 0 18:17 pts/2 00:00:00 grep ping</span><br><span class="line">[root@rhel6 ~]#kill 26712</span><br><span class="line">[root@rhel6 ~]#jobs</span><br><span class="line">[1]- Terminated</span><br><span class="line">ping 172.25.0.11 &gt; /dev/null</span><br><span class="line">[2]+ Running</span><br><span class="line">ping 172.25.0.10 &gt; /dev/null &amp;</span><br><span class="line">[root@rhel6 ~]#kill 26713</span><br><span class="line">[root@rhel6 ~]#jobs</span><br><span class="line">[2]+ Terminated</span><br><span class="line">ping 172.25.0.10 &gt; /dev/null</span><br><span class="line"><span class="meta">[#</span><span class="bash">21<span class="comment">#root@rhel6 ~]#jobs</span></span></span><br></pre></td></tr></table></figure>

<h2 id="è¿›ç¨‹ç®¡ç†è¯¾åä½œä¸š"><a href="#è¿›ç¨‹ç®¡ç†è¯¾åä½œä¸š" class="headerlink" title="è¿›ç¨‹ç®¡ç†è¯¾åä½œä¸š"></a>è¿›ç¨‹ç®¡ç†è¯¾åä½œä¸š</h2><p>è¿›ç¨‹ç®¡ç†</p>
<ol>
<li><p>å…³äºçˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹çš„å®éªŒ:<br>æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ç™»é™† ssh root@rhel7-fN è¿›å…¥è¾“å…¥å¯†ç çš„çŠ¶æ€,å…ˆä¸è¾“å…¥å¯†ç ,æŸ¥çœ‹è¿›ç¨‹;è¾“å…¥</p>
<p>å¯†ç åå†æŸ¥çœ‹è¿›ç¨‹ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rhel7</span><br><span class="line">[root@rhel7 ~]# ps -ef|grep bash</span><br><span class="line">root       642     1  0 02:46 ?        00:00:00 /bin/bash /usr/sbin/ksmtuned</span><br><span class="line">root      7844  7839  1 06:29 pts/0    00:00:00 -bash</span><br><span class="line">[root@rhel7 ~]# ps -ef|grep ssh</span><br><span class="line">root      1261     1  0 02:46 ?        00:00:00 /usr/sbin/sshd -D</span><br><span class="line">root      7839  1261  0 06:29 ?        00:00:00 sshd: root@pts/0</span><br><span class="line">root      7892  1261  0 06:29 ?        00:00:00 sshd: root [priv]</span><br><span class="line">sshd      7893  7892  0 06:29 ?        00:00:00 sshd: root [net]</span><br><span class="line">root      7906  7844  0 06:30 pts/0    00:00:00 grep --color=auto ssh</span><br><span class="line">[root@rhel7 ~]# ps -ef|grep bash</span><br><span class="line">root       642     1  0 02:46 ?        00:00:00 /bin/bash /usr/sbin/ksmtuned</span><br><span class="line">root      7844  7839  0 06:29 pts/0    00:00:00 -bash</span><br><span class="line">root      7915  7892  0 06:30 pts/1    00:00:00 -bash</span><br><span class="line">root      7957  7844  0 06:30 pts/0    00:00:00 grep --color=auto bash</span><br><span class="line">[root@rhel7 ~]# ps -ef|grep 7892</span><br><span class="line">root      7892  1261  0 06:29 ?        00:00:00 sshd: root@pts/1</span><br><span class="line">root      7915  7892  0 06:30 pts/1    00:00:00 -bash</span><br><span class="line">[root@rhel7 ~]# ps -ef|grep 1261</span><br><span class="line">root      1261     1  0 02:46 ?        00:00:00 /usr/sbin/sshd -D</span><br><span class="line">root      7839  1261  0 06:29 ?        00:00:00 sshd: root@pts/0</span><br><span class="line">root      7892  1261  0 06:29 ?        00:00:00 sshd: root@pts/1</span><br><span class="line">[root@rhel7 ~]# ps -ef|grep 1|head -n 1</span><br><span class="line">root         1     0  0 02:46 ?        00:00:03 /usr/lib/systemd/systemd --switched-root --system --deserialize 20</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">rhel6</span><br><span class="line">[root@rhel6 ~]#ps -ef|grep ssh</span><br><span class="line">root      1421     1  0 15:56 ?        00:00:00 /usr/sbin/sshd</span><br><span class="line">root     26564  1421  0 17:36 ?        00:00:00 sshd: root@pts/2</span><br><span class="line">root     26750  1421  0 18:25 ?        00:00:00 sshd: root@pts/3</span><br><span class="line">root     26829 26803  0 18:29 pts/3    00:00:00 ssh root@172.25.0.10</span><br><span class="line">root     26848 26567  0 18:37 pts/2    00:00:00 grep ssh</span><br><span class="line">[root@rhel6 ~]#ps -ef|grep ssh</span><br><span class="line">root      1421     1  0 15:56 ?        00:00:00 /usr/sbin/sshd</span><br><span class="line">root     26564  1421  0 17:36 ?        00:00:00 sshd: root@pts/2</span><br><span class="line">root     26750  1421  0 18:25 ?        00:00:00 sshd: root@pts/3</span><br><span class="line">root     26829 26803  0 18:29 pts/3    00:00:00 ssh root@172.25.0.10</span><br><span class="line">root     26849  1421  0 18:37 ?        00:00:00 sshd: [accepted]</span><br><span class="line">sshd     26850 26849  0 18:37 ?        00:00:00 sshd: [net]      </span><br><span class="line">root     26852 26567  0 18:37 pts/2    00:00:00 grep ssh</span><br><span class="line">[root@rhel6 ~]#ps -ef|grep ssh</span><br><span class="line">root      1421     1  0 15:56 ?        00:00:00 /usr/sbin/sshd</span><br><span class="line">root     26564  1421  0 17:36 ?        00:00:00 sshd: root@pts/2</span><br><span class="line">root     26750  1421  0 18:25 ?        00:00:00 sshd: root@pts/3</span><br><span class="line">root     26829 26803  0 18:29 pts/3    00:00:00 ssh root@172.25.0.10</span><br><span class="line">root     26849  1421  1 18:37 ?        00:00:00 sshd: root@pts/0</span><br><span class="line">root     26874 26567  0 18:38 pts/2    00:00:00 grep ssh</span><br><span class="line">[root@rhel6 ~]#ps -ef|grep 1421</span><br><span class="line">root      1421     1  0 15:56 ?        00:00:00 /usr/sbin/sshd</span><br><span class="line">root     26564  1421  0 17:36 ?        00:00:00 sshd: root@pts/2</span><br><span class="line">root     26750  1421  0 18:25 ?        00:00:00 sshd: root@pts/3</span><br><span class="line">root     26849  1421  0 18:37 ?        00:00:00 sshd: root@pts/0</span><br><span class="line">root     26877 26567  0 18:38 pts/2    00:00:00 grep 1421</span><br><span class="line">[root@rhel6 ~]#ps -ef|grep 1|head -n 1</span><br><span class="line">root         1     0  0 15:55 ?        00:00:01 /sbin/init</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ›å»ºå¤šä¸ªvi è¿›ç¨‹ï¼Œå¹¶ä½¿å…¶è¿è¡Œåœ¨ç³»ç»Ÿåå°ï¼Œè®¾ç½®vi åå°è¿›ç¨‹çš„ä¼˜å…ˆçº§ï¼ˆniceï¼‰å€¼ï¼Œåˆ†åˆ«ä¸º1ã€5ã€15ã€17ï¼Œå¹¶éšåå°†å…¶ç»Ÿä¸€ä¿®æ”¹ä¸º18ã€‚</p>
</li>
<li><p>è§‚å¯Ÿtopå‘½ä»¤çš„æ˜¾ç¤ºä¿¡æ¯ï¼Œæ‰¾å‡ºå½“å‰å ç”¨cpuã€å†…å­˜ã€I/Oèµ„æºæœ€å¤šçš„è¿›ç¨‹å·å’Œè¿›ç¨‹åã€‚</p>
</li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯åŸ¹è®­</category>
        <category>Linuxç³»ç»ŸåŸºç¡€åŸ¹è®­</category>
      </categories>
      <tags>
        <tag>åŸ¹è®­</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
</search>
