<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>MySQL 管理课程 第五课 备份与恢复 - Amy and Booboo</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">




<meta name="description" content="君不见黄河之水天上来，奔流到海不复回。">





    <meta name="description" content="&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x8981;&amp;#x5907;&amp;#x4EFD;&amp;#x670D;&amp;#x52A1;&amp;#x5668;&amp;#x7EF4;&amp;#x62A4;&amp;#x7684;&amp;#x5DE5;&amp;#x4F5C;&amp;#x6C38;&amp;#x8FDC;&amp;#x90FD;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;&amp;#x4E0D;&amp;#x53D8;&amp;#x7684;&amp;#x4E3B;&amp;#x9898;">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL 管理课程 第五课 备份与恢复">
<meta property="og:url" content="http://www.toberoot.com/2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/index.html">
<meta property="og:site_name" content="Amy and Booboo">
<meta property="og:description" content="&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x8981;&amp;#x5907;&amp;#x4EFD;&amp;#x670D;&amp;#x52A1;&amp;#x5668;&amp;#x7EF4;&amp;#x62A4;&amp;#x7684;&amp;#x5DE5;&amp;#x4F5C;&amp;#x6C38;&amp;#x8FDC;&amp;#x90FD;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;&amp;#x4E0D;&amp;#x53D8;&amp;#x7684;&amp;#x4E3B;&amp;#x9898;">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.toberoot.com/2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/59.jpg">
<meta property="og:image" content="http://www.toberoot.com/2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/60.png">
<meta property="og:image" content="http://www.toberoot.com/2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/61.jpg">
<meta property="og:image" content="http://www.toberoot.com/2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/08-percona1.jpg">
<meta property="og:image" content="http://www.toberoot.com/2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/09-percona2.jpg">
<meta property="og:image" content="http://www.toberoot.com/2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/10-percona3.jpg">
<meta property="og:image" content="http://www.toberoot.com/2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/18-mysqlbinlog1.emf.png">
<meta property="og:image" content="http://www.toberoot.com/2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/19-mysqlbinlog2.emf.png">
<meta property="article:published_time" content="2016-12-28T21:06:27.000Z">
<meta property="article:modified_time" content="2020-03-24T05:29:49.089Z">
<meta property="article:author" content="BoobooWei">
<meta property="article:tag" content="培训">
<meta property="article:tag" content="MySQL基础管理">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.toberoot.com/2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/59.jpg">





<link rel="icon" href="/favicon.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">


<link rel="stylesheet" href="/css/style.css">


<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
    
    
    
    
    
    
    
    
    

    


<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Amy and Booboo" type="application/atom+xml">
</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                    
                    <img src="/images/influx.svg" alt="" height="28">
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/archives">Archives</a>
            
            <a class="navbar-item "
               href="/categories">Categories</a>
            
            <a class="navbar-item "
               href="/tools">Tools</a>
            
            <a class="navbar-item "
               href="/about">About</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="搜索" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            <div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc">
                <a class="navbar-item" title="目录">
                    <i class="fa fa-list"></i>
                </a>
                <div class="navbar-dropdown is-right">
                    
                    
                    
                    
                    <a class="navbar-item" href="#&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x8981;&amp;#x5907;&amp;#x4EFD;">1.1&nbsp;&nbsp;&amp;amp;#x4E3A;&amp;amp;#x4EC0;&amp;amp;#x4E48;&amp;amp;#x8981;&amp;amp;#x5907;&amp;amp;#x4EFD;</a>
                    
                    
                    
                    <a class="navbar-item" href="#&amp;#x4EC0;&amp;#x4E48;&amp;#x662F;&amp;#x5907;&amp;#x4EFD;">1.2&nbsp;&nbsp;&amp;amp;#x4EC0;&amp;amp;#x4E48;&amp;amp;#x662F;&amp;amp;#x5907;&amp;amp;#x4EFD;</a>
                    
                    
                    
                    <a class="navbar-item" href="#&amp;#x5907;&amp;#x4EFD;&amp;#x7684;&amp;#x4E24;&amp;#x5927;&amp;#x8981;&amp;#x7D20;">1.3&nbsp;&nbsp;&amp;amp;#x5907;&amp;amp;#x4EFD;&amp;amp;#x7684;&amp;amp;#x4E24;&amp;amp;#x5927;&amp;amp;#x8981;&amp;amp;#x7D20;</a>
                    
                    
                    
                    <a class="navbar-item" href="#&amp;#x5907;&amp;#x4EFD;&amp;#x7684;&amp;#x5206;&amp;#x7C7B;">1.4&nbsp;&nbsp;&amp;amp;#x5907;&amp;amp;#x4EFD;&amp;amp;#x7684;&amp;amp;#x5206;&amp;amp;#x7C7B;</a>
                    
                    
                    
                    <a class="navbar-item" href="#&amp;#x7269;&amp;#x7406;&amp;#x5907;&amp;#x4EFD;&amp;#x548C;&amp;#x903B;&amp;#x8F91;&amp;#x5907;&amp;#x4EFD;">1.4.1&nbsp;&nbsp;&amp;amp;#x7269;&amp;amp;#x7406;&amp;amp;#x5907;&amp;amp;#x4EFD;&amp;amp;#x548C;&amp;amp;#x903B;&amp;amp;#x8F91;&amp;amp;#x5907;&amp;amp;#x4EFD;</a>
                    
                    
                    
                    <a class="navbar-item" href="#&amp;#x589E;&amp;#x91CF;&amp;#x5907;&amp;#x4EFD;&amp;#x548C;&amp;#x5DEE;&amp;#x5F02;&amp;#x5907;&amp;#x4EFD;">1.4.2&nbsp;&nbsp;&amp;amp;#x589E;&amp;amp;#x91CF;&amp;amp;#x5907;&amp;amp;#x4EFD;&amp;amp;#x548C;&amp;amp;#x5DEE;&amp;amp;#x5F02;&amp;amp;#x5907;&amp;amp;#x4EFD;</a>
                    
                    
                    
                    <a class="navbar-item" href="#&amp;#x5728;&amp;#x7EBF;&amp;#xFF08;&amp;#x70ED;&amp;#xFF09;&amp;#x5907;&amp;#x4EFD;&amp;#x3001;&amp;#x6E29;&amp;#x5907;&amp;#x4EFD;&amp;#x3001;&amp;#x79BB;&amp;#x7EBF;&amp;#xFF08;&amp;#x51B7;&amp;#xFF09;&amp;#x5907;&amp;#x4EFD;">1.4.3&nbsp;&nbsp;&amp;amp;#x5728;&amp;amp;#x7EBF;&amp;amp;#xFF08;&amp;amp;#x70ED;&amp;amp;#xFF09;&amp;amp;#x5907;&amp;amp;#x4EFD;&amp;amp;#x3001;&amp;amp;#x6E29;&amp;amp;#x5907;&amp;amp;#x4EFD;&amp;amp;#x3001;&amp;amp;#x79BB;&amp;amp;#x7EBF;&amp;amp;#xFF08;&amp;amp;#x51B7;&amp;amp;#xFF09;&amp;amp;#x5907;&amp;amp;#x4EFD;</a>
                    
                    
                    
                    <a class="navbar-item" href="#&amp;#x5907;&amp;#x4EFD;&amp;#x548C;&amp;#x6062;&amp;#x590D;&amp;#x5DE5;&amp;#x5177;">1.5&nbsp;&nbsp;&amp;amp;#x5907;&amp;amp;#x4EFD;&amp;amp;#x548C;&amp;amp;#x6062;&amp;amp;#x590D;&amp;amp;#x5DE5;&amp;amp;#x5177;</a>
                    
                    
                    
                    <a class="navbar-item" href="#tar">1.5.1&nbsp;&nbsp;tar</a>
                    
                    
                    
                    <a class="navbar-item" href="#LVM-SnapShot">1.5.2&nbsp;&nbsp;LVM SnapShot</a>
                    
                    
                    
                    <a class="navbar-item" href="#mysqldump">1.5.3&nbsp;&nbsp;mysqldump</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#585">2&nbsp;&nbsp;<b>123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990[root@mastera0 ~]# mysqldump -uroot -puplooking -A --single-transaction &amp;amp;gt; /tmp/mysql.all.1.sql[root@mastera0 ~]# ll /tmptotal 89820drwxr-xr-x. 2 root root        6 Aug 30 11:31 a-rw-r--r--. 1 root root 30484480 Aug 30 14:01 mysql.1.tar-rw-r--r--. 1 root root 30484480 Aug 30 14:58 mysql.2.tar-rw-r--r--. 1 root root   515980 Aug 30 16:02 mysql.all.1.sql-rw-r--r--. 1 root root 30484480 Aug 30 11:28 mysql.all.tar[root@mastera0 ~]# systemctl stop mariadb[root@mastera0 ~]# rm -rf /var/lib/mysql/*[root@mastera0 ~]# ll /var/lib/mysqltotal 0[root@mastera0 ~]# systemctl start mariadb[root@mastera0 ~]# ll /var/lib/mysqltotal 28704-rw-rw----. 1 mysql mysql    16384 Aug 30 16:10 aria_log.00000001-rw-rw----. 1 mysql mysql       52 Aug 30 16:10 aria_log_control-rw-rw----. 1 mysql mysql 18874368 Aug 30 16:10 ibdata1-rw-rw----. 1 mysql mysql  5242880 Aug 30 16:10 ib_logfile0-rw-rw----. 1 mysql mysql  5242880 Aug 30 16:10 ib_logfile1drwx------. 2 mysql mysql     4096 Aug 30 16:10 mysqlsrwxrwxrwx. 1 mysql mysql        0 Aug 30 16:10 mysql.sockdrwx------. 2 mysql mysql     4096 Aug 30 16:10 performance_schemadrwx------. 2 mysql mysql     4096 Aug 30 16:10 test[root@mastera0 ~]# mysqlWelcome to the MariaDB monitor.  Commands end with ; or \g.Your MariaDB connection id is 2Server version: 5.5.44-MariaDB MariaDB ServerCopyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.Type &amp;amp;apos;help;&amp;amp;apos; or &amp;amp;apos;\h&amp;amp;apos; for help. Type &amp;amp;apos;\c&amp;amp;apos; to clear the current input statement.MariaDB [(none)]&amp;amp;gt; \qBye[root@mastera0 ~]#[root@mastera0 ~]# mysql &amp;amp;lt; /tmp/mysql.all.1.sql[root@mastera0 ~]# mysqlWelcome to the MariaDB monitor.  Commands end with ; or \g.Your MariaDB connection id is 4Server version: 5.5.44-MariaDB MariaDB ServerCopyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.Type &amp;amp;apos;help;&amp;amp;apos; or &amp;amp;apos;\h&amp;amp;apos; for help. Type &amp;amp;apos;\c&amp;amp;apos; to clear the current input statement.MariaDB [(none)]&amp;amp;gt; flush privileges;Query OK, 0 rows affected (0.00 sec)MariaDB [(none)]&amp;amp;gt; \qBye[root@mastera0 ~]# mysqlERROR 1045 (28000): Access denied for user \&amp;amp;apos;root\&amp;amp;apos;@\&amp;amp;apos;localhost\&amp;amp;apos; (using password: NO)[root@mastera0 ~]# mysql -uroot -puplookingWelcome to the MariaDB monitor.  Commands end with ; or \g.Your MariaDB connection id is 6Server version: 5.5.44-MariaDB MariaDB ServerCopyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.Type \&amp;amp;apos;help;\&amp;amp;apos; or \&amp;amp;apos;\h\&amp;amp;apos; for help. Type \&amp;amp;apos;\c\&amp;amp;apos; to clear the current input statement.MariaDB [(none)]&amp;amp;gt; select * from db1.t1;+----+| id |+----+|  1 ||  2 ||  3 |+----+3 rows in set (0.00 sec)MariaDB [(none)]&amp;amp;gt; show databases;+---------------------+| Database            |+---------------------+| information_schema  || db1                 || db2                 || #mysql50#lost+found || mysql               || performance_schema  || test                |+---------------------+7 rows in set (0.00 sec)MariaDB [(none)]&amp;amp;gt; exit</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#Percona-Xtrabackup">2.1.1&nbsp;&nbsp;Percona Xtrabackup</a>
                    
                    
                    
                    <a class="navbar-item" href="#MySQL-&amp;#x65E5;&amp;#x5FD7;&amp;#x7684;&amp;#x5206;&amp;#x7C7B;">2.1.2&nbsp;&nbsp;MySQL &amp;amp;#x65E5;&amp;amp;#x5FD7;&amp;amp;#x7684;&amp;amp;#x5206;&amp;amp;#x7C7B;</a>
                    
                    
                    
                    <a class="navbar-item" href="#&amp;#x4E8C;&amp;#x8FDB;&amp;#x5236;&amp;#x65E5;&amp;#x5FD7;&amp;#x7684;&amp;#x7BA1;&amp;#x7406;&amp;#x548C;&amp;#x5907;&amp;#x4EFD;">2.1.3&nbsp;&nbsp;&amp;amp;#x4E8C;&amp;amp;#x8FDB;&amp;amp;#x5236;&amp;amp;#x65E5;&amp;amp;#x5FD7;&amp;amp;#x7684;&amp;amp;#x7BA1;&amp;amp;#x7406;&amp;amp;#x548C;&amp;amp;#x5907;&amp;amp;#x4EFD;</a>
                    
                    
                    
                    <a class="navbar-item" href="#&amp;#x57FA;&amp;#x4E8E;&amp;#x4E8C;&amp;#x8FDB;&amp;#x5236;&amp;#x65E5;&amp;#x5FD7;&amp;#x7684;&amp;#x5B9E;&amp;#x65F6;&amp;#x589E;&amp;#x91CF;&amp;#x8FD8;&amp;#x539F;">2.1.4&nbsp;&nbsp;&amp;amp;#x57FA;&amp;amp;#x4E8E;&amp;amp;#x4E8C;&amp;amp;#x8FDB;&amp;amp;#x5236;&amp;amp;#x65E5;&amp;amp;#x5FD7;&amp;amp;#x7684;&amp;amp;#x5B9E;&amp;amp;#x65F6;&amp;amp;#x589E;&amp;amp;#x91CF;&amp;amp;#x8FD8;&amp;amp;#x539F;</a>
                    
                    
                    
                    <a class="navbar-item" href="#&amp;#x8BBE;&amp;#x8BA1;-MySQL-&amp;#x5907;&amp;#x4EFD;&amp;#x8BA1;&amp;#x5212;">2.2&nbsp;&nbsp;&amp;amp;#x8BBE;&amp;amp;#x8BA1; MySQL &amp;amp;#x5907;&amp;amp;#x4EFD;&amp;amp;#x8BA1;&amp;amp;#x5212;</a>
                    
                    
                    
                    <a class="navbar-item" href="#&amp;#x5B9E;&amp;#x6218;&amp;#x9879;&amp;#x76EE;">2.3&nbsp;&nbsp;&amp;amp;#x5B9E;&amp;amp;#x6218;&amp;amp;#x9879;&amp;amp;#x76EE;</a>
                    
                    
                    
                    <a class="navbar-item" href="#&amp;#x603B;&amp;#x7ED3;">2.4&nbsp;&nbsp;&amp;amp;#x603B;&amp;amp;#x7ED3;</a>
                    
                </div>
            </div>
            
            
            <a class="navbar-item" title="GitHub" href="https://github.com/booboowei" target="_blank" rel="noopener">
                
                <i class="fab fa-github"></i>
                
            </a>
               
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            MySQL 管理课程 第五课 备份与恢复
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2016-12-28T21:06:27.000Z" itemprop="datePublished">12月 29 2016</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%9F%B9%E8%AE%AD/">技术培训</a><span>></span><a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%9F%B9%E8%AE%AD/MySQL%E5%9F%BA%E7%A1%80%E7%AE%A1%E7%90%86%E6%95%99%E7%A8%8B/">MySQL基础管理教程</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            2 小时 读完 (约 19299 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h3 id="&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5907;&#x4EFD;"><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5907;&#x4EFD;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5907;&#x4EFD;"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5907;&#x4EFD;</h3><p>&#x670D;&#x52A1;&#x5668;&#x7EF4;&#x62A4;&#x7684;&#x5DE5;&#x4F5C;&#x6C38;&#x8FDC;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x4E0D;&#x53D8;&#x7684;&#x4E3B;&#x9898;,&#x90A3;&#x5C31;&#x662F;&#x5907;&#x4EFD;&#x3002;&#x6B63;&#x6240;&#x8C13;,&#x624B;&#x91CC;&#x6709;&#x7CAE;,&#x5FC3;&#x91CC;&#x4E0D;&#x614C;&#x3002;&#x4ECE;&#x4E8B;&#x6570;&#x636E;&#x5E93;&#x76F8;&#x5173;&#x5DE5;&#x4F5C;&#x4E00;&#x6837;&#x6C38;&#x8FDC;&#x90FD;&#x4E0D;&#x8981;&#x5FD8;&#x8BB0;&#x4E00;&#x4E2A;&#x91CD;&#x70B9;:&#x5907;&#x4EFD;&#x3002;&#x56E0;&#x4E3A;,&#x6709;&#x4E86;&#x5907;&#x4EFD;,&#x6211;&#x4EEC;&#x5C31;&#x4EC0;&#x4E48;&#x90FD;&#x4E0D;&#x6015;&#x3002;&#x51FA;&#x4E86;&#x4EFB;&#x4F55;&#x95EE;&#x9898;(&#x5F53;&#x7136;,&#x6211;&#x4EEC;&#x5584;&#x610F;&#x7684;&#x5E0C;&#x671B;&#x6C38;&#x8FDC;&#x4E0D;&#x8981;&#x51FA;&#x4EC0;&#x4E48;&#x95EE;&#x9898;),&#x53EA;&#x8981;&#x6211;&#x4EEC;&#x624B;&#x4E0A;&#x6709;&#x5B8C;&#x6574;&#x7684;&#x5907;&#x4EFD;,&#x90A3;&#x5C31;&#x6709;&#x673A;&#x4F1A;&#x6062;&#x590D;&#x56DE;&#x6765;&#x3002;</p>
<p><img src="/2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/59.jpg" alt></p>
<p>2017&#x5E74; 1 &#x6708; 31 &#x65E5;&#x665A;&#x4E0A;&#x6050;&#x6015;&#x662F;&#x77E5;&#x540D;&#x7A0B;&#x5E8F;&#x6E90;&#x7801;&#x4EE3;&#x7BA1;&#x670D;&#x52A1;&#x7F51;&#x7AD9; GitLab &#x6700;&#x957F;&#x7684;&#x4E00;&#x591C;&#xFF0C;&#x56E0;&#x4E3A;&#x4E00;&#x4F4D;&#x5DE5;&#x7A0B;&#x5E08;&#x7684;&#x758F;&#x5FFD;&#x9020;&#x6210;&#x5927;&#x91CF;&#x8D44;&#x6599;&#x6D41;&#x5931;&#xFF0C;&#x800C;&#x53C8;&#x53D1;&#x73B0;&#x6240;&#x6709;&#x5907;&#x4EFD;&#x65B9;&#x6848;&#x90FD;&#x65E0;&#x6548;&#x800C;&#x5D29;&#x6E83;&#x3002;</p>
<p><img src="/2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/60.png" alt></p>
<p>300GB &#x7684;&#x8D44;&#x6599;&#x88AB;&#x5220;&#x5230;&#x53EA;&#x5269;&#x4E0B; 4.5GB&#x3002;&#x800C;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x6F5C;&#x5728;&#x53EF;&#x7528;&#x7684;&#x5907;&#x4EFD;&#x662F; 6 &#x5C0F;&#x65F6;&#x524D;&#x624B;&#x52A8;&#x64CD;&#x4F5C;&#x7684;&#xFF0C;&#x4E00;&#x65F6;&#x4E4B;&#x95F4;&#x8FDE;&#x7F51;&#x7AD9;&#x90FD;&#x8FDE;&#x4E0D;&#x8FDB;&#x53BB;&#x4E86;&#x3002;&#x6839;&#x636E;&#x8BE5;&#x516C;&#x53F8; Google docs &#x7684;&#x7EF4;&#x62A4;&#x7EAA;&#x5F55;&#x5728;&#x6700;&#x65B0;&#x7684;&#x8BAF;&#x606F;&#x63D0;&#x5230;&#xFF1A;&#x201C;&#x8FD9;&#x4E2A;&#x4E8B;&#x4EF6;&#x5F71;&#x54CD;&#x4E86;&#x7F51;&#x7AD9;&#x6570;&#x636E;&#x5E93;&#xFF08;&#x5305;&#x62EC; issue &#x95EE;&#x9898;&#x548C; merge requests &#x5408;&#x5E76;&#x8BF7;&#x6C42;&#xFF09;&#xFF0C;&#x4F46;&#x4E0D;&#x5F71;&#x54CD; git repos&#xFF08;git &#x7248;&#x672C;&#x7BA1;&#x63A7;&#x6863;&#x6848;&#x5E93;&#x548C; wiki &#x670D;&#x52A1;&#xFF09;&#x3002;&#x201D;</p>
<p>&#x7531;&#x4E8E;&#x4E0D;&#x662F;&#x6240;&#x6709;&#x8D44;&#x6599;&#x90FD;&#x9057;&#x5931;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x5BF9;&#x7528;&#x6237;&#x6765;&#x8BF4;&#x8FD8;&#x662F;&#x7A0D;&#x611F;&#x5B89;&#x6170;&#xFF0C;&#x4F46;&#x662F;&#x8BE5;&#x6587;&#x4EF6;&#x5728;&#x201C;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x201D;&#xFF08;Problems Encountered&#xFF09;&#x5C0F;&#x8282;&#x91CC;&#xFF0C;&#x6700;&#x540E;&#x603B;&#x7ED3;&#xFF1A;</p>
<p>&#x201C;&#x56E0;&#x6B64;&#xFF0C;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x90E8;&#x7F72;&#x7684; 5 &#x4E2A;&#x4E0D;&#x540C;&#x5907;&#x4EFD;&#xFF0F;&#x8FD8;&#x539F;&#x6280;&#x672F;&#x4E2D;&#xFF0C;&#x6CA1;&#x6709;&#x4E00;&#x4E2A;&#x80FD;&#x53EF;&#x9760;&#x5730;&#x5DE5;&#x4F5C;&#x6216;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x8FD8;&#x539F;&#x56DE;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x80FD;&#x4ECE; 6 &#x5C0F;&#x65F6;&#x524D;&#x6709;&#x6548;&#x7684;&#x5907;&#x4EFD;&#x8FD8;&#x539F;&#x3002;&#x201D;</p>
<p>&#x4EA1;&#x7F8A;&#x8865;&#x7262;&#x4E3A;&#x65F6;&#x4E0D;&#x665A;&#xFF0C;GitLab &#x5C55;&#x73B0;&#x8BDA;&#x610F;&#x4EE5; YouTube &#x76F4;&#x64AD;&#x4E0E; Twitter &#x5C06;&#x8BAF;&#x606F;&#x516C;&#x8BF8;&#x4E8E;&#x7F51;&#x7EDC;&#xFF0C;&#x4F46;&#x662F;&#x770B;&#x6765; GitLab &#x5FC5;&#x987B;&#x975E;&#x5E38;&#x52AA;&#x529B;&#xFF0C;&#x624D;&#x80FD;&#x633D;&#x56DE;&#x5BA2;&#x6237;&#x4E0E;&#x6295;&#x8D44;&#x8005;&#x5BF9;&#x8BE5;&#x516C;&#x53F8;&#x7684;&#x4FE1;&#x5FC3;&#x3002;&#x5BF9;&#x5176;&#x4ED6;&#x4F9D;&#x8D56;&#x8D44;&#x8BAF;&#x79D1;&#x6280;&#x7684;&#x516C;&#x53F8;&#x800C;&#x8A00;&#xFF0C;&#x76F8;&#x4FE1;&#x8FD9;&#x4E5F;&#x662F;&#x5F88;&#x597D;&#x7684;&#x501F;&#x955C;&#x3002;</p>
<p><img src="/2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/61.jpg" alt></p>
<h3 id="&#x4EC0;&#x4E48;&#x662F;&#x5907;&#x4EFD;"><a href="#&#x4EC0;&#x4E48;&#x662F;&#x5907;&#x4EFD;" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F;&#x5907;&#x4EFD;"></a>&#x4EC0;&#x4E48;&#x662F;&#x5907;&#x4EFD;</h3><p>&#x5907;&#x4EFD;&#x5DF2;&#x7ECF;&#x6210;&#x4E3A;&#x6240;&#x6709;DBA&#x7684;&#x5FC5;&#x4FEE;&#x79D1;&#x76EE;&#xFF0C;&#x5230;&#x5E95;&#x4EC0;&#x4E48;&#x662F;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x5462;&#xFF1F;&#x7B80;&#x5355;&#x7684;&#x8BB2;&#xFF1A;&#x5907;&#x4EFD;&#xFF0C;&#x5C31;&#x662F;&#x628A;&#x6570;&#x636E;&#x4FDD;&#x5B58;&#x4E00;&#x4EFD;&#x5907;&#x7528;&#xFF1B;&#x6062;&#x590D;&#xFF0C;&#x5C31;&#x662F;&#x628A;&#x4FDD;&#x5B58;&#x7684;&#x6570;&#x636E;&#x8FD8;&#x539F;&#x56DE;&#x53BB;&#x3002;</p>
<p>&#x5F53;&#x670D;&#x52A1;&#x5668;&#x51FA;&#x73B0;&#x6545;&#x969C;&#x9700;&#x8981;&#x4FEE;&#x590D;&#xFF0C;&#x6216;&#x8005;&#x6570;&#x636E;&#x7834;&#x574F;&#x9700;&#x8981;&#x6062;&#x590D;&#xFF0C;&#x53C8;&#x6BD4;&#x5982;&#x7CFB;&#x7EDF;&#x5B95;&#x673A;&#x3001;&#x786C;&#x4EF6;&#x635F;&#x574F;&#x3001;&#x7528;&#x6237;&#x9519;&#x8BEF;&#x5220;&#x9664;&#x6570;&#x636E;&#x7B49;&#x573A;&#x666F;&#xFF0C;&#x90FD;&#x662F;&#x9700;&#x8981;&#x501F;&#x7528;&#x5907;&#x4EFD;&#x624D;&#x80FD;&#x6267;&#x884C;&#x6062;&#x590D;&#x3002;</p>
<p>&#x5907;&#x4EFD;&#x662F;&#x5907;&#x4EFD;&#xFF0C;&#x5197;&#x4F59;&#x662F;&#x5197;&#x4F59;&#x3002;&#x6982;&#x5FF5;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x5907;&#x4EFD;&#x662F;&#x5C06;&#x6570;&#x636E;&#x4EE5;&#x9694;&#x79BB;&#x7684;&#x65B9;&#x5F0F;&#x4FDD;&#x5B58;&#xFF0C;&#x5C06;&#x5907;&#x4EFD;&#x7684;&#x6570;&#x636E;&#x653E;&#x5728;&#x5176;&#x4ED6;&#x5730;&#x65B9;&#xFF0C;&#x539F;&#x6765;&#x7684;&#x6570;&#x636E;&#x88AB;&#x4E0A;&#x4FEE;&#x6539;&#xFF0C;&#x5907;&#x4EFD;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x4F1A;&#x53D8;&#x66F4;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5907;&#x4EFD;&#x51FA;&#x6765;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x4F1A;&#x56E0;&#x4E3A;&#x539F;&#x6570;&#x636E;&#x7684;&#x6539;&#x53D8;&#x800C;&#x6539;&#x53D8;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x6BD4;&#x8F83;&#x5B89;&#x5168;&#x3002;&#x4F46;&#x662F;&#x5907;&#x4EFD;&#x7684;&#x7F3A;&#x70B9;&#x662F;&#xFF0C;&#x4ED6;&#x4E0D;&#x662F;&#x77AC;&#x95F4;&#x8FD8;&#x539F;&#xFF0C;&#x5907;&#x4EFD;&#x5728;&#x8FD8;&#x539F;&#x8FC7;&#x7A0B;&#x4E2D;&#x662F;&#x6709;&#x8017;&#x65F6;&#x7684;&#xFF0C;&#x4ED6;&#x4E0D;&#x662F;&#x77AC;&#x95F4;&#x8FD8;&#x539F;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x51E0;&#x767E;&#x4E2A;G&#x7684;&#x6587;&#x4EF6;&#x8981;&#x8FD8;&#x539F;&#x56DE;&#x53BB;&#xFF0C;&#x6162;&#x6162;&#x62F7;&#x5427;&#xFF0C;&#x51E0;&#x4E2A;&#x5C0F;&#x65F6;&#x3002;&#x5197;&#x4F59;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x4ED6;&#x662F;&#x70ED;&#x5907;&#xFF0C;&#x80FD;&#x591F;&#x77AC;&#x95F4;&#x6062;&#x590D;&#x3002;&#x4E3B;&#x670D;&#x52A1;&#x5668;/&#x4ECE;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x574F;&#x6389;&#xFF0C;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x5C31;&#x9876;&#x4E0A;&#x5DE5;&#x4F5C;&#xFF0C;&#x6240;&#x4EE5;&#x5197;&#x4F59;&#x5728;&#x53EF;&#x7528;&#x6027;&#x4E0A;&#x6765;&#x8BB2;&#xFF0C;&#x6062;&#x590D;&#x7684;&#x901F;&#x5EA6;&#x4E0A;&#x6765;&#x8BB2;&#xFF0C;&#x6BD4;&#x5907;&#x4EFD;&#x6765;&#x7684;&#x5FEB;&#xFF0C;&#x4F46;&#x662F;&#x5197;&#x4F59;&#x6709;&#x4ED6;&#x7684;&#x7F3A;&#x70B9;&#xFF0C;&#x5907;&#x4EFD;&#x6709;&#x4ED6;&#x7684;&#x4F18;&#x70B9;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x4F5C;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#xFF0C;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x548C;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x6570;&#x636E;&#x90FD;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x6709;&#x4EBA;&#x9519;&#x5220;&#x4E86;&#x4E00;&#x4E2A;&#x8868;&#xFF0C;&#x6211;&#x4EEC;&#x628A;&#x8FD9;&#x79CD;&#x64CD;&#x4F5C;&#x79F0;&#x4E3A;&#x8BEF;&#x64CD;&#x4F5C;&#xFF0C;&#x90A3;&#x4E48;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x4E5F;&#x4F1A;&#x53D1;&#x751F;&#x8BEF;&#x64CD;&#x4F5C;&#xFF0C;&#x6240;&#x4EE5;&#x5462;&#xFF0C;&#x5197;&#x4F59;&#x4E0D;&#x80FD;&#x89E3;&#x51B3;&#x4EBA;&#x4E3A;&#x7684;&#x8BEF;&#x64CD;&#x4F5C;&#xFF0C;&#x800C;&#x5907;&#x4EFD;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x3002;&#x5197;&#x4F59;&#x4ED6;&#x80FD;&#x89E3;&#x51B3;&#x786C;&#x4EF6;&#x6545;&#x969C;&#xFF0C;&#x4F46;&#x662F;&#x8BEF;&#x64CD;&#x4F5C;&#x65E0;&#x6CD5;&#x89E3;&#x51B3;&#xFF0C;&#x5907;&#x4EFD;&#x4E0D;&#x662F;&#x77AC;&#x95F4;&#x8FD8;&#x539F;&#xFF0C;&#x4F46;&#x662F;&#x65E2;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x786C;&#x4EF6;&#x6545;&#x969C;&#x53C8;&#x80FD;&#x89E3;&#x51B3;&#x8BEF;&#x64CD;&#x4F5C;&#xFF0C;&#x4ED6;&#x4EEC;&#x5404;&#x6709;&#x4F18;&#x52A3;&#x70B9;&#xFF0C;&#x800C;&#x771F;&#x5B9E;&#x7684;&#x7EBF;&#x4E0A;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x662F;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF0C;&#x65E2;&#x6709;&#x5197;&#x4F59;&#x73AF;&#x5883;&#xFF0C;&#x53C8;&#x6709;&#x5468;&#x671F;&#x6027;&#x5907;&#x4EFD;&#xFF0C;&#x7BA1;&#x7406;&#x5458;&#x8981;&#x5468;&#x671F;&#x6027;&#x5730;&#x8FDB;&#x884C;&#x5907;&#x4EFD;&#xFF0C;&#x540C;&#x65F6;&#x6709;&#x591A;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4F5C;&#x5197;&#x4F59;&#x3002;</p>
<table>
<thead>
<tr>
<th align="left">&#x5907;&#x4EFD;</th>
<th align="left">&#x5B9A;&#x4E49;</th>
<th align="left">&#x4F18;&#x70B9;</th>
<th align="left">&#x7F3A;&#x70B9;</th>
</tr>
</thead>
<tbody><tr>
<td align="left">&#x5907;&#x4EFD;</td>
<td align="left">&#x5C06;&#x6570;&#x636E;&#x4EE5;&#x9694;&#x79BB;&#x7684;&#x65B9;&#x5F0F;&#x4FDD;&#x5B58;</td>
<td align="left">&#x89E3;&#x51B3;&#x786C;&#x4EF6;&#x6545;&#x969C;&#xFF0C;&#x8BEF;&#x64CD;&#x4F5C;</td>
<td align="left">&#x4E0D;&#x662F;&#x77AC;&#x95F4;&#x8FD8;&#x539F;</td>
</tr>
<tr>
<td align="left">&#x5197;&#x4F59;</td>
<td align="left">&#x4EBA;&#x4E3A;&#x5730;&#x589E;&#x52A0;&#x91CD;&#x590D;&#x90E8;&#x5206;&#xFF0C;&#x5176;&#x76EE;&#x7684;&#x662F;&#x7528;&#x6765;&#x5BF9;&#x539F;&#x672C;&#x7684;&#x5355;&#x4E00;&#x90E8;&#x5206;&#x8FDB;&#x884C;&#x5907;&#x4EFD;&#xFF0C;&#x4EE5;&#x8FBE;&#x5230;&#x589E;&#x5F3A;&#x5176;&#x5B89;&#x5168;&#x6027;&#x7684;&#x76EE;&#x7684;,&#x6784;&#x5EFA;&#x5197;&#x4F59;&#xFF08;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#xFF09;&#x7684;&#x73AF;&#x5883;</td>
<td align="left">&#x6062;&#x590D;&#x901F;&#x5EA6;&#x5FEB;</td>
<td align="left">&#x89E3;&#x51B3;&#x786C;&#x4EF6;&#x6545;&#x969C;&#xFF0C;&#x8BEF;&#x64CD;&#x4F5C;&#x65E0;&#x6CD5;&#x89E3;&#x51B3;</td>
</tr>
</tbody></table>
<h3 id="&#x5907;&#x4EFD;&#x7684;&#x4E24;&#x5927;&#x8981;&#x7D20;"><a href="#&#x5907;&#x4EFD;&#x7684;&#x4E24;&#x5927;&#x8981;&#x7D20;" class="headerlink" title="&#x5907;&#x4EFD;&#x7684;&#x4E24;&#x5927;&#x8981;&#x7D20;"></a>&#x5907;&#x4EFD;&#x7684;&#x4E24;&#x5927;&#x8981;&#x7D20;</h3><blockquote>
<p>MySQL&#x5BF9;&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x7684;&#x9009;&#x62E9;&#x4F1A;&#x5BFC;&#x81F4;&#x5907;&#x4EFD;&#x660E;&#x663E;&#x66F4;&#x590D;&#x6742;&#x3002;&#x95EE;&#x9898;&#x662F;&#xFF0C;&#x5BF9;&#x4E8E;&#x7ED9;&#x5B9A;&#x7684;&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#xFF0C;&#x5982;&#x4F55;&#x5F97;&#x5230;&#x4E00;&#x81F4;&#x7684;&#x5907;&#x4EFD;&#x3002;</p>
</blockquote>
<p>&#x5B9E;&#x9645;&#x4E0A;&#x6709;&#x4E24;&#x7C7B;&#x4E00;&#x81F4;&#x6027;&#x9700;&#x8981;&#x8003;&#x8651;&#xFF1A;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x548C;&#x6587;&#x4EF6;&#x4E00;&#x81F4;&#x6027;&#x3002;</p>
<ul>
<li>&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#xFF1A;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x5728;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#x70B9;&#x4E00;&#x81F4;</li>
<li>&#x6587;&#x4EF6;&#x4E00;&#x81F4;&#x6027;&#xFF1A;&#x786E;&#x4FDD;&#x6587;&#x4EF6;&#x5728;&#x78C1;&#x76D8;&#x4E0A;&#x4E00;&#x81F4;</li>
<li>&#x670D;&#x52A1;&#x53EF;&#x7528;&#x6027;&#xFF1A;&#x6570;&#x636E;&#x5E93;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x8BFB;&#x5199;&#xFF0C;&#x65E2;&#x80FD;&#x8BFB;&#x4E5F;&#x80FD;&#x5199;&#x624D;&#x662F;&#x670D;&#x52A1;&#x53EF;&#x7528;&#x3002;</li>
</ul>
<p>&#x5F53;&#x6211;&#x4EEC;&#x5728;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x4EBA;&#x5728;&#x4FEE;&#x6539;&#x8868;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5907;&#x4EFD;&#x51FA;&#x6765;&#x7684;&#x6570;&#x636E;&#x53EF;&#x80FD;&#x5C31;&#x4F1A;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x5907;&#x4EFD;&#x51FA;&#x6765;&#x7684;&#x6570;&#x636E;&#x53EF;&#x80FD;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x8981;&#x7684;&#x65F6;&#x95F4;&#x70B9;&#x3002;&#x6BD4;&#x5982;&#x6211;&#x9700;&#x8981;&#x5C06;4&#x70B9;&#x8FD9;&#x4E2A;&#x72B6;&#x6001;&#x7684;&#x6570;&#x636E;&#x5907;&#x4EFD;&#xFF0C;&#x4ECE;4&#x70B9;&#x5F00;&#x59CB;&#x5907;&#x4EFD;&#x4E00;&#x76F4;&#x5230;5&#x70B9;&#x7ED3;&#x675F;&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6709;&#x4EBA;&#x5728;4.30&#x4FEE;&#x6539;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#xFF0C;&#x5047;&#x8BBE;&#x662F;&#x5C06;A&#x5458;&#x5DE5;&#x7684;&#x5DE5;&#x8D44;&#x4ECE;4000&#x6539;&#x4E3A;5000&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x6700;&#x540E;&#x5907;&#x4EFD;&#x51FA;&#x6765;&#x7684;&#x6570;&#x636E;&#x5230;&#x5E95;&#x662F;&#x51E0;&#x70B9;&#x7684;&#x72B6;&#x6001;&#x5C31;&#x672A;&#x77E5;&#x4E86;&#x3002;&#x5982;&#x679C;4.30&#x7684;&#x65F6;&#x5019;&#x5DF2;&#x7ECF;&#x5907;&#x4EFD;&#x8FC7;A&#x5458;&#x5DE5;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5907;&#x4EFD;&#x51FA;&#x6765;&#x7684;A&#x5458;&#x5DE5;&#x7684;&#x5DE5;&#x8D44;&#x5C31;&#x8FD8;&#x662F;4000&#xFF1B;&#x5982;&#x679C;4.30&#x7684;&#x65F6;&#x5019;&#x8FD8;&#x6CA1;&#x6709;&#x5907;&#x4EFD;&#x5230;A&#x5458;&#x5DE5;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x6700;&#x540E;&#x5907;&#x4EFD;&#x51FA;&#x6765;&#x7684;A&#x5458;&#x5DE5;&#x7684;&#x5DE5;&#x8D44;&#x5C31;&#x53D8;&#x6210;5000&#x4E86;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x6570;&#x636E;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5982;&#x4F55;&#x6765;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x5462;&#xFF1F;</p>
<h3 id="&#x5907;&#x4EFD;&#x7684;&#x5206;&#x7C7B;"><a href="#&#x5907;&#x4EFD;&#x7684;&#x5206;&#x7C7B;" class="headerlink" title="&#x5907;&#x4EFD;&#x7684;&#x5206;&#x7C7B;"></a>&#x5907;&#x4EFD;&#x7684;&#x5206;&#x7C7B;</h3><ol>
<li>&#x5206;&#x7C7B;&#xFF1A;&#x51B7;&#x5907;&#x3001;&#x70ED;&#x5907;&#x3001;&#x5F02;&#x5730;&#x707E;&#x5907;</li>
<li>&#x51B7;&#x5907;&#x7684;&#x5206;&#x7C7B;&#xFF1A;<ul>
<li>&#x7269;&#x7406;&#x5907;&#x4EFD;&#x3001;&#x903B;&#x8F91;&#x5907;&#x4EFD;</li>
<li>&#x5B8C;&#x5168;&#x5907;&#x4EFD;&#x3001;&#x589E;&#x91CF;&#x5907;&#x4EFD;</li>
<li>&#x5728;&#x7EBF;&#xFF08;&#x70ED;&#xFF09;&#x5907;&#x4EFD;&#x3001;&#x6E29;&#x5907;&#x4EFD;&#x3001;&#x79BB;&#x7EBF;&#xFF08;&#x51B7;&#xFF09;&#x5907;&#x4EFD;</li>
</ul>
</li>
</ol>
<h4 id="&#x7269;&#x7406;&#x5907;&#x4EFD;&#x548C;&#x903B;&#x8F91;&#x5907;&#x4EFD;"><a href="#&#x7269;&#x7406;&#x5907;&#x4EFD;&#x548C;&#x903B;&#x8F91;&#x5907;&#x4EFD;" class="headerlink" title="&#x7269;&#x7406;&#x5907;&#x4EFD;&#x548C;&#x903B;&#x8F91;&#x5907;&#x4EFD;"></a>&#x7269;&#x7406;&#x5907;&#x4EFD;&#x548C;&#x903B;&#x8F91;&#x5907;&#x4EFD;</h4><p>&#x6709;&#x4E24;&#x79CD;&#x4E3B;&#x8981;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x5907;&#x4EFD;MySQL&#x6570;&#x636E;&#xFF1A;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#xFF08;&#x4E5F;&#x53EB;&#x201C;&#x5BFC;&#x51FA;&#x201D;&#xFF09;&#x548C;&#x76F4;&#x63A5;&#x590D;&#x5236;&#x539F;&#x59CB;&#x6587;&#x4EF6;&#x7684;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x3002;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x5C06;&#x6570;&#x636E;&#x5305;&#x542B;&#x5728;&#x4E00;&#x79CD;MySQL&#x80FD;&#x591F;&#x89E3;&#x6790;&#x7684;&#x683C;&#x5F0F;&#x4E2D;&#xFF0C;&#x8981;&#x4E48;&#x662F;SQL&#xFF0C;&#x8981;&#x4E48;&#x662F;&#x4EE5;&#x67D0;&#x4E2A;&#x7B26;&#x53F7;&#x5206;&#x9694;&#x7684;&#x6587;&#x672C;&#x3002;&#x539F;&#x59CB;&#x6587;&#x4EF6;&#x662F;&#x6307;&#x5B58;&#x5728;&#x4E0E;&#x786C;&#x76D8;&#x4E0A;&#x7684;&#x6587;&#x4EF6;&#x3002;</p>
<p>&#x4EFB;&#x4F55;&#x4E00;&#x79CD;&#x5907;&#x4EFD;&#x90FD;&#x6709;&#x5176;&#x6709;&#x70B9;&#x548C;&#x7F3A;&#x70B9;&#x3002;</p>
<h5 id="&#x903B;&#x8F91;&#x5907;&#x4EFD;"><a href="#&#x903B;&#x8F91;&#x5907;&#x4EFD;" class="headerlink" title="&#x903B;&#x8F91;&#x5907;&#x4EFD;"></a>&#x903B;&#x8F91;&#x5907;&#x4EFD;</h5><p>&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x6709;&#x5982;&#x4E0B;&#x4F18;&#x70B9;&#xFF1A;</p>
<ul>
<li>&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x662F;&#x53EF;&#x4EE5;&#x7528;&#x7F16;&#x8F91;&#x5668;&#x6216;&#x8005;&#x50CF;<code>grep</code>&#x548C;<code>sed</code>&#x4E4B;&#x7C7B;&#x7684;&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x548C;&#x64CD;&#x4F5C;&#x7684;&#x666E;&#x901A;&#x6587;&#x4EF6;&#x3002;&#x5F53;&#x9700;&#x8981;&#x6062;&#x590D;&#x6570;&#x636E;&#x6216;&#x53EA;&#x60F3;&#x67E5;&#x770B;&#x6570;&#x636E;&#x4F46;&#x4E0D;&#x6062;&#x590D;&#x65F6;&#xFF0C;&#x8FD9;&#x90FD;&#x662F;&#x975E;&#x5E38;&#x6709;&#x5E2E;&#x52A9;&#x7684;&#x3002;</li>
<li>&#x6062;&#x590D;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x7BA1;&#x9053;&#x628A;&#x5B83;&#x4EEC;&#x8F93;&#x5165;&#x5230;<code>mysql</code>&#xFF0C;&#x6216;&#x8005;&#x4F7F;&#x7528;<code>mysqlimport</code>&#x3002;</li>
<li>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x6765;&#x5907;&#x4EFD;&#x548C;&#x6062;&#x590D;&#x2014;&#x2014;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0E;Mysql&#x4E3B;&#x673A;&#x4E0D;&#x540C;&#x7684;&#x53E6;&#x5916;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#x64CD;&#x4F5C;&#x3002;</li>
<li>&#x53EF;&#x4EE5;&#x5728;&#x7C7B;&#x4F3C;Amazon RDS&#x8FD9;&#x6837;&#x4E0D;&#x80FD;&#x8BBF;&#x95EE;&#x5E95;&#x5C42;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x7684;&#x7CFB;&#x7EDF;&#x4E2D;&#x4F7F;&#x7528;&#x3002;</li>
<li>&#x975E;&#x5E38;&#x7075;&#x6D3B;&#xFF0C;&#x56E0;&#x4E3A;<code>mysqldump</code>&#x2014;&#x2014;&#x2014;&#x5927;&#x90E8;&#x5206;&#x4EBA;&#x559C;&#x6B22;&#x7684;&#x5DE5;&#x5177;&#x2014;&#x2014;&#x53EF;&#x4EE5;&#x63A5;&#x53D7;&#x8BB8;&#x591A;&#x9009;&#x9879;&#xFF0C;&#x4F8B;&#x5982;&#x53EF;&#x4EE5;&#x7528;where&#x5B50;&#x53E5;&#x6765;&#x9650;&#x5236;&#x9700;&#x8981;&#x5907;&#x4EFD;&#x90A3;&#x4E9B;&#x884C;&#x3002;</li>
<li>&#x4E0E;&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x65E0;&#x5173;&#x3002;&#x56E0;&#x4E3A;&#x662F;&#x4ECE;MySQL&#x670D;&#x52A1;&#x5668;&#x4E2D;&#x63D0;&#x53D6;&#x6570;&#x636E;&#x800C;&#x751F;&#x6210;&#xFF0C;&#x6240;&#x4EE5;&#x6D88;&#x9664;&#x4E86;&#x5E95;&#x5C42;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x548C;&#x4E0D;&#x540C;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x53EF;&#x4EE5;&#x4ECE;InnoDB&#x8868;&#x4E2D;&#x5907;&#x4EFD;&#xFF0C;&#x7136;&#x540E;&#x53EA;&#x9700;&#x6781;&#x5C0F;&#x7684;&#x5DE5;&#x4F5C;&#x91CF;&#x5C31;&#x53EF;&#x4EE5;&#x8FD8;&#x539F;&#x5230;MyISAM&#x8868;&#x4E2D;&#x3002;&#x800C;&#x5BF9;&#x4E8E;&#x539F;&#x59CB;&#x6570;&#x636E;&#x5374;&#x4E0D;&#x80FD;&#x8FD9;&#x4E48;&#x505A;&#x3002;</li>
<li>&#x6709;&#x52A9;&#x4E8E;&#x907F;&#x514D;&#x6570;&#x636E;&#x635F;&#x574F;&#x3002;&#x5982;&#x679C;&#x78C1;&#x76D8;&#x9A71;&#x52A8;&#x5668;&#x6709;&#x6545;&#x969C;&#x800C;&#x8981;&#x6062;&#x590D;&#x539F;&#x59CB;&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x4F60;&#x5C06;&#x4F1A;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x5E76;&#x4E14;/&#x6216;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x90E8;&#x5206;&#x6216;&#x635F;&#x574F;&#x7684;&#x5907;&#x4EFD;&#x3002;&#x5982;&#x679C;MySQL&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x8FD8;&#x6CA1;&#x6709;&#x635F;&#x574F;&#xFF0C;&#x5F53;&#x4E0D;&#x80FD;&#x591F;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x6B63;&#x5E38;&#x7684;&#x539F;&#x59CB;&#x6587;&#x4EF6;&#x590D;&#x5236;&#x65F6;&#xFF0C;&#x6709;&#x65F6;&#x8FD8;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x4FE1;&#x8D56;&#x7684;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x3002;</li>
</ul>
<p>&#x5C3D;&#x7BA1;&#x5982;&#x6B64;&#xFF0C;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x4E5F;&#x6709;&#x5B83;&#x7684;&#x7F3A;&#x70B9;&#xFF1A;</p>
<ul>
<li>&#x5FC5;&#x987B;&#x7531;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#x5B8C;&#x6210;&#x751F;&#x6210;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x56E0;&#x6B64;&#x8981;&#x4F7F;&#x7528;&#x66F4;&#x591A;&#x7684;cpu&#x5468;&#x671F;&#x3002;</li>
<li>&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x5728;&#x67D0;&#x4E9B;&#x573A;&#x666F;&#x4E0B;&#x6BD4;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#x672C;&#x8EAB;&#x8FD8;&#x8981;&#x66F4;&#x5927;&#x3002;ASCII&#x5F62;&#x5F0F;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x603B;&#x662F;&#x548C;&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x4E00;&#x6837;&#x9AD8;&#x6548;&#x3002;</li>
<li>&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x5BFC;&#x51FA;&#x540E;&#x518D;&#x8FD8;&#x539F;&#x51FA;&#x6765;&#x7684;&#x4E00;&#x5B9A;&#x662F;&#x540C;&#x6837;&#x7684;&#x6570;&#x636E;&#x3002;&#x6D6E;&#x70B9;&#x8868;&#x793A;&#x7684;&#x95EE;&#x9898;&#x3001;&#x8F6F;&#x4EF6;Bug&#x7B49;&#x90FD;&#x4F1A;&#x5BFC;&#x81F4;&#x95EE;&#x9898;&#xFF0C;&#x5C3D;&#x7BA1;&#x975E;&#x5E38;&#x5C11;&#x89C1;&#x3002;</li>
<li>&#x4ECE;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x4E2D;&#x8FD8;&#x539F;&#x9700;&#x8981;MySQL&#x52A0;&#x8F7D;&#x548C;&#x89E3;&#x91CA;&#x8BED;&#x53E5;&#xFF0C;&#x8F6C;&#x5316;&#x4E3A;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#xFF0C;&#x5E76;&#x91CD;&#x5EFA;&#x7D22;&#x5F15;&#xFF0C;&#x6240;&#x6709;&#x8FD9;&#x4E00;&#x5207;&#x4F1A;&#x5F88;&#x6162;&#x3002;</li>
</ul>
<p>&#x6700;&#x5927;&#x7684;&#x7F3A;&#x70B9;&#x662F;&#x4ECE;MySQL&#x4E2D;&#x5BFC;&#x51FA;&#x6570;&#x636E;&#x548C;&#x901A;&#x8FC7;SQL&#x8BED;&#x53E5;&#x5C06;&#x5176;&#x52A0;&#x8F7D;&#x56DE;&#x53BB;&#x7684;&#x5F00;&#x6D88;&#x3002;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#xFF0C;&#x6D4B;&#x8BD5;&#x6062;&#x590D;&#x9700;&#x8981;&#x7684;&#x65F6;&#x95F4;&#x5C06;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x3002;</p>
<h5 id="&#x7269;&#x7406;&#x5907;&#x4EFD;"><a href="#&#x7269;&#x7406;&#x5907;&#x4EFD;" class="headerlink" title="&#x7269;&#x7406;&#x5907;&#x4EFD;"></a>&#x7269;&#x7406;&#x5907;&#x4EFD;</h5><p>&#x7269;&#x7406;&#x5907;&#x4EFD;&#x6709;&#x5982;&#x4E0B;&#x597D;&#x5904;&#xFF1A;</p>
<ul>
<li>&#x57FA;&#x4E8E;&#x6587;&#x4EF6;&#x7684;&#x7269;&#x7406;&#x5907;&#x4EFD;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5C06;&#x9700;&#x8981;&#x7684;&#x6587;&#x4EF6;&#x590D;&#x5236;&#x5230;&#x5176;&#x4ED6;&#x5730;&#x65B9;&#x5373;&#x53EF;&#x5B8C;&#x6210;&#x5907;&#x4EFD;&#x3002;&#x4E0D;&#x9700;&#x8981;&#x989D;&#x5916;&#x7684;&#x5DE5;&#x4F5C;&#x6765;&#x751F;&#x6210;&#x539F;&#x59CB;&#x6587;&#x4EF6;&#x3002;</li>
<li>&#x7269;&#x7406;&#x5907;&#x4EFD;&#x7684;&#x6062;&#x590D;&#x5C31;&#x66F4;&#x7B80;&#x5355;&#x4E86;&#xFF0C;&#x8FD9;&#x53D6;&#x51B3;&#x4E8E;&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x3002;&#x5BF9;&#x4E8E;MyISAM&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x7B80;&#x5355;&#x5730;&#x590D;&#x5236;&#x6587;&#x4EF6;&#x5230;&#x76EE;&#x7684;&#x5730;&#x5373;&#x53EF;&#x3002;&#x5BF9;&#x4E8E;InnoDB&#x5219;&#x9700;&#x8981;&#x505C;&#x6B62;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#xFF0C;&#x53EF;&#x80FD;&#x8FD8;&#x8981;&#x91C7;&#x53D6;&#x5176;&#x4ED6;&#x4E00;&#x4E9B;&#x6B65;&#x9AA4;&#x3002;</li>
<li>InnoDB&#x548C;MyISAM&#x7684;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x975E;&#x5E38;&#x5BB9;&#x6613;&#x8DE8;&#x5E73;&#x53F0;&#x3001;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x548C;MySQL&#x7248;&#x672C;&#x3002;&#xFF08;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x5BFC;&#x51FA;&#x4EA6;&#x662F;&#x5982;&#x6B64;&#x3002;&#x8FD9;&#x91CC;&#x7279;&#x522B;&#x6307;&#x51FA;&#x8FD9;&#x4E00;&#x70B9;&#x662F;&#x4E3A;&#x4E86;&#x6D88;&#x9664;&#x5927;&#x5BB6;&#x7684;&#x62C5;&#x5FC3;&#x3002;&#xFF09;</li>
<li>&#x4ECE;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x4E2D;&#x6062;&#x590D;&#x4F1A;&#x66F4;&#x5F00;&#xFF0C;&#x65E0;&#x6CD5;&#x5B8C;&#x5168;&#x7F13;&#x51B2;&#x5230;&#x5185;&#x5BB9;&#x4E2D;&#xFF0C;&#x5219;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x7684;&#x6062;&#x590D;&#x8981;&#x5FEB;&#x975E;&#x5E38;&#x591A;&#x2014;&#x2014;&#x81F3;&#x5C11;&#x8981;&#x5FEB;&#x4E00;&#x4E2A;&#x6570;&#x91CF;&#x7EA7;&#x3002;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x6700;&#x53EF;&#x6015;&#x7684;&#x5730;&#x65B9;&#x5C31;&#x662F;&#x4E0D;&#x786E;&#x5B9A;&#x7684;&#x8FD8;&#x539F;&#x65F6;&#x95F4;&#x3002;</li>
</ul>
<p>&#x7269;&#x7406;&#x5907;&#x4EFD;&#x4E5F;&#x6709;&#x5176;&#x7F3A;&#x70B9;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;</p>
<ul>
<li>InnoDB&#x7684;&#x539F;&#x59CB;&#x6587;&#x4EF6;&#x901A;&#x5E38;&#x6BD4;&#x76F8;&#x5E94;&#x7684;&#x903B;&#x8F91;&#x522B;&#x5206;&#x8981;&#x5927;&#x7684;&#x591A;&#x3002;InnoDB&#x7684;&#x8868;&#x7A7A;&#x95F4;&#x5F80;&#x5F80;&#x5305;&#x542B;&#x5F88;&#x591A;&#x672A;&#x4F7F;&#x7528;&#x7684;&#x7A7A;&#x95F4;&#x3002;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x7A7A;&#x95F4;&#x7528;&#x6765;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x4EE5;&#x5916;&#x7684;&#x7528;&#x9014;&#xFF08;&#x63D2;&#x5165;&#x7F13;&#x51B2;&#x3001;&#x56DE;&#x6EDA;&#x6BB5;&#x7B49;&#xFF09;&#x3002;</li>
<li>&#x7269;&#x7406;&#x5907;&#x4EFD;&#x4E0D;&#x603B;&#x662F;&#x8DE8;&#x5E73;&#x53F0;&#x3001;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x53CA;MySQL&#x7248;&#x672C;&#x3002;&#x6587;&#x4EF6;&#x540D;&#x5927;&#x5C0F;&#x5199;&#x654F;&#x611F;&#x548C;&#x6D6E;&#x70B9;&#x683C;&#x5F0F;&#x53EF;&#x80FD;&#x4F1A;&#x9047;&#x5230;&#x9EBB;&#x70E6;&#x3002;&#x5F88;&#x53EF;&#x80FD;&#x56E0;&#x6D6E;&#x70B9;&#x683C;&#x5F0F;&#x4E0D;&#x540C;&#x800C;&#x4E0D;&#x80FD;&#x79FB;&#x52A8;&#x6587;&#x4EF6;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#xFF08;&#x867D;&#x7136;&#x4E3B;&#x6D41;&#x5904;&#x7406;&#x5668;&#x90FD;&#x4F7F;&#x7528;IEEE&#x6D6E;&#x70B9;&#x683C;&#x5F0F;&#x3002;&#xFF09;</li>
</ul>
<p>&#x7269;&#x7406;&#x5907;&#x4EFD;&#x901A;&#x5E38;&#x66F4;&#x52A0;&#x7B80;&#x5355;&#x9AD8;&#x6548;&#x3002;&#x5C3D;&#x7BA1;&#x5982;&#x6B64;&#xFF0C;&#x5BF9;&#x4E8E;&#x9700;&#x8981;&#x957F;&#x671F;&#x4FDD;&#x7559;&#x7684;&#x5907;&#x4EFD;&#xFF0C;&#x6216;&#x8005;&#x662F;&#x6EE1;&#x8DB3;&#x6CD5;&#x5F8B;<br>&#x5408;&#x89C4;&#x8981;&#x6C42;&#x7684;&#x5907;&#x4EFD;&#xFF0C;&#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x5B8C;&#x5168;&#x4F9D;&#x8D56;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x3002;&#x81F3;&#x5C11;&#x6BCF;&#x9694;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x8FD8;&#x662F;&#x9700;&#x8981;&#x505A;&#x4E00;&#x6B21;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x3002;</p>
<p>&#x9664;&#x975E;&#x7ECF;&#x8FC7;&#x6D4B;&#x8BD5;&#xFF0C;&#x4E0D;&#x8981;&#x5047;&#x5B9A;&#x5907;&#x4EFD;&#xFF08;&#x7279;&#x522B;&#x662F;&#x7269;&#x7406;&#x5907;&#x4EFD;&#xFF09;&#x662F;&#x6B63;&#x5E38;&#x7684;&#x3002;&#x5BF9;InnoDB&#x6765;&#x8BF4;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x9700;&#x8981;&#x542F;&#x52A8;&#x4E00;&#x4E2A;MySQL&#x5B9E;&#x4F8B;&#xFF0C;&#x6267;&#x884C;InnoDB&#x6062;&#x590D;&#x64CD;&#x4F5C;&#xFF0C;&#x7136;&#x540E;&#x8FD0;&#x884C;<code>CHECK TABLES</code>&#x3002;&#x4E5F;&#x53EF;&#x4EE5;&#x8DF3;&#x8FC7;&#x8FD9;&#x4E00;&#x64CD;&#x4F5C;&#xFF0C;&#x4EC5;&#x5BF9;&#x6587;&#x4EF6;&#x8FD0;&#x884C;innochecksum&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x4E0D;&#x5EFA;&#x8BAE;&#x8FD9;&#x6837;&#x505A;&#x3002;&#x5BF9;&#x4E8E;MyISAM&#xFF0C;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;<code>CHECK TABLES</code>&#xFF0C;&#x6216;&#x8005;&#x4F7F;&#x7528;mysqlcheck&#x3002;&#x4F7F;&#x7528;<code>mysqlcheck</code>&#x53EF;&#x4EE5;&#x5BF9;&#x6240;&#x6709;&#x8868;&#x6267;&#x884C;<code>CHECK TABLES</code>&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x5EFA;&#x8BAE;&#x6DF7;&#x5408;&#x4F7F;&#x7528;&#x7269;&#x7406;&#x548C;&#x903B;&#x8F91;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#x6765;&#x505A;&#x5907;&#x4EFD;&#xFF1A;&#x5148;&#x4F7F;&#x7528;&#x7269;&#x7406;&#x590D;&#x5236;&#xFF0C;&#x4EE5;&#x6B64;&#x6570;&#x636E;&#x542F;&#x52A8;MySQL&#x670D;&#x52A1;&#x5668;&#x5B9E;&#x4F8B;&#x5E76;&#x8FD0;&#x884C;<code>mysqlcheck</code>&#x3002;&#x7136;&#x540E;&#xFF0C;&#x5468;&#x671F;&#x6027;&#x5730;&#x4F7F;&#x7528;mysqldump&#x6267;&#x884C;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x3002;&#x8FD9;&#x6837;&#x505A;&#x53EF;&#x4EE5;&#x83B7;&#x5F97;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#x7684;&#x4F18;&#x70B9;&#xFF0C;&#x4E0D;&#x4F1A;&#x4F7F;&#x751F;&#x4EA7;&#x670D;&#x52A1;&#x5668;&#x5728;&#x5BFC;&#x51FA;&#x65F6;&#x6709;&#x8FC7;&#x6E21;&#x8D1F;&#x62C5;&#x3002;&#x5982;&#x679C;&#x80FD;&#x591F;&#x65B9;&#x4FBF;&#x5730;&#x5229;&#x7528;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x5FEB;&#x7167;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x5FEB;&#x7167;&#xFF0C;&#x5C06;&#x8BE5;&#x5FEB;&#x7167;&#x590D;&#x5236;&#x5230;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5E76;&#x91CA;&#x653E;&#xFF0C;&#x7136;&#x540E;&#x6D4B;&#x8BD5;&#x539F;&#x59CB;&#x6587;&#x4EF6;&#xFF0C;&#x518D;&#x6267;&#x884C;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x503C;&#x5F97;&#x4E00;&#x63D0;&#x7684;&#x662F;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x4F1A;&#x66F4;&#x5BB9;&#x6613;&#x51FA;&#x9519;&#xFF1B;&#x5F88;&#x96BE;&#x50CF;<code>mysqldump</code>&#x4E00;&#x6837;&#x7B80;&#x5355;&#x3002;</p>
<h4 id="&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x548C;&#x5DEE;&#x5F02;&#x5907;&#x4EFD;"><a href="#&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x548C;&#x5DEE;&#x5F02;&#x5907;&#x4EFD;" class="headerlink" title="&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x548C;&#x5DEE;&#x5F02;&#x5907;&#x4EFD;"></a>&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x548C;&#x5DEE;&#x5F02;&#x5907;&#x4EFD;</h4><p>&#x5F53;&#x6570;&#x636E;&#x91CF;&#x5F88;&#x5E9E;&#x5927;&#x65F6;&#xFF0C;&#x4E00;&#x4E2A;&#x5E38;&#x89C1;&#x7684;&#x7B56;&#x7565;&#x662F;&#x505A;&#x5B9A;&#x671F;&#x7684;&#x589E;&#x91CF;&#x6216;&#x5DEE;&#x5F02;&#x5907;&#x4EFD;&#x3002;&#x4ED6;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;&#x6709;&#x70B9;&#x5BB9;&#x6613;&#x8BA9;&#x4EBA;&#x6DF7;&#x6DC6;&#xFF0C;&#x6240;&#x4EE5;&#x5148;&#x6765;&#x6F84;&#x6E05;&#x8FD9;&#x4E24;&#x4E2A;&#x672F;&#x8BED;&#xFF1A;</p>
<p>&#x5DEE;&#x5F02;&#x5907;&#x4EFD;&#xFF0C;&#x662F;&#x5BF9;&#x81EA;&#x4E0A;&#x6B21;&#x5168;&#x5907;&#x4EFD;&#x540E;&#x6240;&#x6709;&#x6539;&#x53D8;&#x7684;&#x90E8;&#x5206;&#x800C;&#x505A;&#x7684;&#x5907;&#x4EFD;&#xFF1B;<br>&#x589E;&#x91CF;&#x5907;&#x4EFD;&#xFF0C;&#x662F;&#x4ECE;&#x4EFB;&#x610F;&#x7C7B;&#x578B;&#x7684;&#x4E0A;&#x6B21;&#x5907;&#x4EFD;&#x540E;&#x6240;&#x6709;&#x4FEE;&#x6539;&#x505A;&#x7684;&#x5907;&#x4EFD;&#xFF1B;</p>
<p>&#x4F8B;&#x5982;&#xFF0C;&#x5047;&#x8BBE;&#x6BCF;&#x5468;&#x65E5;&#x505A;&#x4E00;&#x4E2A;&#x5168;&#x5907;&#x4EFD;&#x3002;&#x5728;&#x5468;&#x4E00;&#xFF0C;&#x5BF9;&#x81EA;&#x5468;&#x65E5;&#x4EE5;&#x6765;&#x6240;&#x6709;&#x7684;&#x6539;&#x53D8;&#x505A;&#x4E00;&#x4E2A;&#x5DEE;&#x5F02;&#x5907;&#x4EFD;&#x3002;&#x5728;&#x5468;&#x4E8C;&#xFF0C;&#x5C31;&#x6709;&#x4E24;&#x4E2A;&#x9009;&#x62E9;&#xFF1A;&#x5907;&#x4EFD;&#x81EA;&#x5468;&#x65E5;&#x4EE5;&#x6765;&#x6240;&#x6709;&#x7684;&#x6539;&#x53D8;&#xFF08;&#x5DEE;&#x5F02;&#xFF09;&#xFF0C;&#x6216;&#x53EA;&#x522B;&#x5206;&#x81EA;&#x5468;&#x4E00;&#x540E;&#x6240;&#x6709;&#x7684;&#x6539;&#x53D8;&#xFF08;&#x589E;&#x91CF;&#xFF09;&#x3002;</p>
<p>&#x589E;&#x91CF;&#x548C;&#x5DEE;&#x5F02;&#x5907;&#x4EFD;&#x90FD;&#x662F;&#x90E8;&#x5206;&#x5907;&#x4EFD;&#xFF1A;&#x5B83;&#x4EEC;&#x4E00;&#x822C;&#x4E0D;&#x5305;&#x542B;&#x5B8C;&#x6574;&#x7684;&#x6570;&#x636E;&#x96C6;&#xFF0C;&#x56E0;&#x4E3A;&#x67D0;&#x4E9B;&#x6570;&#x636E;&#x51E0;&#x4E4E;&#x80AF;&#x5B9A;&#x6CA1;&#x6709;&#x6539;&#x53D8;&#x3002;&#x90E8;&#x5206;&#x5907;&#x4EFD;&#x5BF9;&#x51CF;&#x5C11;&#x670D;&#x52A1;&#x5668;&#x5F00;&#x9500;&#x3001;&#x5907;&#x4EFD;&#x65F6;&#x95F4;&#x53CA;&#x5907;&#x4EFD;&#x7A7A;&#x95F4;&#x800C;&#x8A00;&#x90FD;&#x5F88;&#x5408;&#x9002;&#x3002;&#x5C3D;&#x7BA1;&#x67D0;&#x4E9B;&#x90E8;&#x5206;&#x5907;&#x4EFD;&#x5E76;&#x4E0D;&#x4F1A;&#x771F;&#x6B63;&#x51CF;&#x5C11;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5F00;&#x9500;&#x3002;&#x4F8B;&#x5982;Percona XtraBackup&#x548C;MySQL Enterprise Backup&#xFF0C;&#x4ECD;&#x7136;&#x4F1A;&#x626B;&#x63CF;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x5757;&#xFF0C;&#x56E0;&#x800C;&#x5E76;&#x4E0D;&#x4F1A;&#x8282;&#x7EA6;&#x592A;&#x591A;&#x7684;&#x5F00;&#x9500;&#xFF0C;&#x4F46;&#x5B83;&#x4EEC;&#x786E;&#x5B9E;&#x4F1A;&#x51CF;&#x5C11;&#x4E00;&#x5B9A;&#x91CF;&#x7684;&#x5907;&#x4EFD;&#x65F6;&#x95F4;&#x548C;&#x5927;&#x91CF;&#x7528;&#x4E8E;&#x538B;&#x7F29;&#x7684;CPU&#x65F6;&#x95F4;&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x4F1A;&#x51CF;&#x5C11;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x4E0D;&#x8981;&#x56E0;&#x4E3A;&#x4F1A;&#x7528;&#x9AD8;&#x7EA7;&#x5907;&#x4EFD;&#x6280;&#x672F;&#x800C;&#x81EA;&#x8D1F;&#xFF0C;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x8D8A;&#x590D;&#x6742;&#xFF0C;&#x9762;&#x4E34;&#x7684;&#x98CE;&#x9669;&#x4E5F;&#x8D8A;&#x5927;&#x3002;&#x8981;&#x6CE8;&#x610F;&#x5206;&#x6790;&#x9690;&#x85CF;&#x7684;&#x5371;&#x9669;&#xFF0C;&#x5982;&#x679C;&#x591A;&#x6B21;&#x8FED;&#x4EE3;&#x5907;&#x4EFD;&#x7D27;&#x5BC6;&#x5730;&#x8026;&#x5408;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x5219;&#x53EA;&#x8981;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x6B21;&#x8FED;&#x4EE3;&#x5907;&#x4EFD;&#x6709;&#x635F;&#x574F;&#xFF0C;&#x5C31;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x6240;&#x6709;&#x7684;&#x5907;&#x4EFD;&#x90FD;&#x65E0;&#x6548;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x6709;&#x4E00;&#x4E9B;&#x5EFA;&#x8BAE;&#xFF1A;</p>
<ul>
<li>&#x4F7F;&#x7528;Percona XtraBackup&#x548C;MySQL Enterprise Backup&#x4E2D;&#x7684;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x7279;&#x6027;&#x3002;</li>
<li>&#x5907;&#x4EFD;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x3002;&#x53EF;&#x4EE5;&#x5728;&#x6BCF;&#x6B21;&#x5907;&#x4EFD;&#x540E;&#x4F7F;&#x7528;flush logs&#x6765;&#x5F00;&#x59CB;&#x4E00;&#x4E2A;&#x65B0;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EA;&#x9700;&#x8981;&#x5907;&#x4EFD;&#x65B0;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x3002;</li>
<li>&#x4E0D;&#x8981;&#x5907;&#x4EFD;&#x6CA1;&#x6709;&#x53D8;&#x5316;&#x7684;&#x8868;&#x3002;&#x6709;&#x4E9B;&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;MyISAM&#xFF0C;&#x4F1A;&#x8BB0;&#x5F55;&#x6BCF;&#x4E2A;&#x8868;&#x6700;&#x540E;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x67E5;&#x770B;&#x78C1;&#x76D8;&#x4E0A;&#x7684;&#x6587;&#x4EF6;&#x6216;&#x8FD0;&#x884C;show table status &#x6765;&#x67E5;&#x770B;&#x8FD9;&#x4E2A;&#x65F6;&#x95F4;&#x3002;&#x5982;&#x679C;&#x4F7F;&#x7528;InnoDB&#xFF0C;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x89E6;&#x53D1;&#x5668;&#x8BB0;&#x5F55;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x5230;&#x4E00;&#x4E2A;&#x5C0F;&#x7684;&#x201C;&#x6700;&#x540E;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x201D;&#x8868;&#x4E2D;&#xFF0C;&#x5E2E;&#x52A9;&#x8DDF;&#x8E2A;&#x6700;&#x65B0;&#x7684;&#x4FEE;&#x6539;&#x64CD;&#x4F5C;&#x3002;&#x9700;&#x8981;&#x786E;&#x4FDD;&#x53EA;&#x5BF9;&#x53D8;&#x66F4;&#x4E0D;&#x9891;&#x7E41;&#x7684;&#x8868;&#x8FDB;&#x884C;&#x8DDF;&#x8E2A;&#xFF0C;&#x8FD9;&#x6837;&#x624D;&#x80FD;&#x964D;&#x4F4E;&#x5F00;&#x9500;&#x3002;&#x901A;&#x8FC7;&#x5B9A;&#x5236;&#x7684;&#x5907;&#x4EFD;&#x811A;&#x672C;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x83B7;&#x53D6;&#x5230;&#x54EA;&#x4E9B;&#x8868;&#x6709;&#x53D8;&#x66F4;&#x3002;<br>&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x5305;&#x542B;&#x4E0D;&#x540C;&#x8BED;&#x79CD;&#x5404;&#x4E2A;&#x6708;&#x7684;&#x540D;&#x79F0;&#x5217;&#x8868;&#xFF0C;&#x6216;&#x8005;&#x5DDE;&#x6216;&#x533A;&#x57DF;&#x7684;&#x7B80;&#x5199;&#x4E4B;&#x7C7B;&#x7684;&#x201C;&#x67E5;&#x627E;&#x201D;&#x8868;&#xFF0C;&#x5C06;&#x5B83;&#x4EEC;&#x653E;&#x5728;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x6570;&#x636E;&#x5E93;&#x662F;&#x4E00;&#x4E2A;&#x597D;&#x4E3B;&#x610F;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x6BCF;&#x6B21;&#x90FD;&#x5907;&#x4EFD;&#x8FD9;&#x4E9B;&#x8868;&#x3002;</li>
<li>&#x4E0D;&#x8981;&#x5907;&#x4EFD;&#x6CA1;&#x6709;&#x6539;&#x53D8;&#x7684;&#x884C;&#x3002;&#x6709;&#x65F6;&#x5019;&#x8FD9;&#x6837;&#x505A;&#x5F71;&#x54CD;&#x4F1A;&#x5F88;&#x5927;&#x2014;&#x2014;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x4E00;&#x4E2A;&#x4ECE;&#x5176;&#x4ED6;&#x6570;&#x636E;&#x6784;&#x5EFA;&#x7684;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#xFF0C;&#x4ECE;&#x6280;&#x672F;&#x8BB2;&#x5B8C;&#x5168;&#x662F;&#x5197;&#x4F59;&#x7684;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x4EC5;&#x5907;&#x4EFD;&#x6784;&#x5EFA;&#x4ED3;&#x5E93;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x672C;&#x8EAB;&#x3002;&#x5373;&#x4F7F;&#x4ECE;&#x6E90;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x91CD;&#x5EFA;&#x4ED3;&#x5E93;&#x7684;&#x201C;&#x6062;&#x590D;&#x201D;&#x65F6;&#x95F4;&#x8F83;&#x957F;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x4E2A;&#x597D;&#x60F3;&#x6CD5;&#x3002;&#x76F8;&#x5BF9;&#x4E8E;&#x4ECE;&#x5168;&#x5907;&#x4EFD;&#x4E2D;&#x53EF;&#x80FD;&#x83B7;&#x5F97;&#x7684;&#x5FEB;&#x901F;&#x6062;&#x590D;&#x65F6;&#x95F4;&#xFF0C;&#x907F;&#x514D;&#x5907;&#x4EFD;&#x53EF;&#x4EE5;&#x8282;&#x7EA6;&#x66F4;&#x591A;&#x7684;&#x5B97;&#x7684;&#x65F6;&#x95F4;&#x5F00;&#x9500;&#x3002;&#x4E34;&#x65F6;&#x6570;&#x636E;&#x4E5F;&#x53EF;&#x4EE5;&#x4E0D;&#x7528;&#x5907;&#x4EFD;&#xFF0C;&#x4F8B;&#x5982;&#x4FDD;&#x7559;&#x7F51;&#x7AD9;&#x4F1A;&#x8BDD;&#x6570;&#x636E;&#x7684;&#x8868;&#x3002;</li>
<li>&#x5907;&#x4EFD;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x53D1;&#x9001;&#x5230;&#x4E00;&#x4E2A;&#x6709;&#x53BB;&#x91CD;&#x7279;&#x6027;&#x7684;&#x76EE;&#x7684;&#x5730;&#xFF0C;&#x4F8B;&#x5982;ZFS&#x6587;&#x4EF6;&#x7BA1;&#x7406;&#x7A0B;&#x5E8F;&#x3002;</li>
</ul>
<p>&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x7684;&#x7F3A;&#x70B9;&#x5305;&#x62EC;&#x589E;&#x52A0;&#x6062;&#x590D;&#x590D;&#x6742;&#x6027;&#xFF0C;&#x989D;&#x5916;&#x7684;&#x98CE;&#x9669;&#xFF0C;&#x4EE5;&#x53CA;&#x66F4;&#x957F;&#x7684;&#x6062;&#x590D;&#x65F6;&#x95F4;&#x3002;&#x5982;&#x679C;&#x53EF;&#x4EE5;&#x505A;&#x5168;&#x5907;&#xFF0C;&#x8003;&#x8651;&#x5230;&#x7B80;&#x4FBF;&#x6027;&#xFF0C;&#x6211;&#x4EEC;&#x5EFA;&#x8BAE;&#x5C3D;&#x91CF;&#x505A;&#x5168;&#x5907;&#x3002;</p>
<p>&#x4E0D;&#x7BA1;&#x5982;&#x4F55;&#xFF0C;&#x8FD8;&#x662F;&#x9700;&#x8981;&#x7ECF;&#x5E38;&#x505A;&#x5168;&#x5907;&#x4EFD;&#x2014;&#x2014;&#x5EFA;&#x8BAE;&#x81F3;&#x5C11;&#x4E00;&#x5468;&#x4E00;&#x6B21;&#x3002;&#x4F60;&#x80AF;&#x5B9A;&#x4E0D;&#x5E0C;&#x671B;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x6708;&#x7684;&#x6240;&#x6709;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x6765;&#x8FDB;&#x884C;&#x6062;&#x590D;&#x3002;&#x5373;&#x4F7F;&#x4E00;&#x5468;&#x4E5F;&#x8FD8;&#x662F;&#x6709;&#x5F88;&#x591A;&#x7684;&#x5DE5;&#x4F5C;&#x548C;&#x98CE;&#x9669;&#x7684;&#x3002;</p>
<h4 id="&#x5728;&#x7EBF;&#xFF08;&#x70ED;&#xFF09;&#x5907;&#x4EFD;&#x3001;&#x6E29;&#x5907;&#x4EFD;&#x3001;&#x79BB;&#x7EBF;&#xFF08;&#x51B7;&#xFF09;&#x5907;&#x4EFD;"><a href="#&#x5728;&#x7EBF;&#xFF08;&#x70ED;&#xFF09;&#x5907;&#x4EFD;&#x3001;&#x6E29;&#x5907;&#x4EFD;&#x3001;&#x79BB;&#x7EBF;&#xFF08;&#x51B7;&#xFF09;&#x5907;&#x4EFD;" class="headerlink" title="&#x5728;&#x7EBF;&#xFF08;&#x70ED;&#xFF09;&#x5907;&#x4EFD;&#x3001;&#x6E29;&#x5907;&#x4EFD;&#x3001;&#x79BB;&#x7EBF;&#xFF08;&#x51B7;&#xFF09;&#x5907;&#x4EFD;"></a>&#x5728;&#x7EBF;&#xFF08;&#x70ED;&#xFF09;&#x5907;&#x4EFD;&#x3001;&#x6E29;&#x5907;&#x4EFD;&#x3001;&#x79BB;&#x7EBF;&#xFF08;&#x51B7;&#xFF09;&#x5907;&#x4EFD;</h4><p>&#x5982;&#x679C;&#x53EF;&#x80FD;&#xFF0C;&#x5173;&#x95ED;MySQL&#x505A;&#x5907;&#x4EFD;&#x662F;&#x6700;&#x7B80;&#x5355;&#x6700;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x4E5F;&#x662F;&#x6240;&#x6709;&#x83B7;&#x53D6;&#x4E00;&#x81F4;&#x6027;&#x526F;&#x672C;&#x7684;&#x65B9;&#x6CD5;&#x4E2D;&#x6700;&#x597D;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x635F;&#x574F;&#x6216;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x98CE;&#x9669;&#x6700;&#x5C0F;&#x3002;&#x5982;&#x679C;&#x5173;&#x95ED;&#x4E86;MySQL&#xFF0C;&#x5C31;&#x6839;&#x672C;&#x4E0D;&#x7528;&#x5173;&#x5FC3;InnoDB&#x7F13;&#x51B2;&#x6C60;&#x4E2D;&#x7684;&#x810F;&#x9875;&#x6216;&#x8FD9;&#x5176;&#x4ED6;&#x7F13;&#x5B58;&#x3002;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x62C5;&#x5FC3;&#x6570;&#x636E;&#x5728;&#x5C1D;&#x8BD5;&#x5907;&#x4EFD;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x88AB;&#x4FEE;&#x6539;&#xFF0C;&#x5E76;&#x4E14;&#x56E0;&#x4E3A;&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x5BF9;&#x5E94;&#x7528;&#x63D0;&#x4F9B;&#x8BBF;&#x95EE;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x66F4;&#x5FEB;&#x5730;&#x5B8C;&#x6210;&#x5907;&#x4EFD;&#x3002;</p>
<p>&#x5C3D;&#x7BA1;&#x5982;&#x6B64;&#xFF0C;&#x8BA9;&#x670D;&#x52A1;&#x5668;&#x505C;&#x673A;&#x7684;&#x4EE3;&#x4EF7;&#x53EF;&#x80FD;&#x6BD4;&#x770B;&#x8D77;&#x6765;&#x8981;&#x66F4;&#x6602;&#x8D35;&#x3002;&#x5373;&#x4F7F;&#x80FD;&#x6700;&#x5C0F;&#x5316;&#x505C;&#x673A;&#x65F6;&#x95F4;&#xFF0C;&#x5728;&#x9AD8;&#x8D1F;&#x8F7D;&#x548C;&#x9AD8;&#x6570;&#x636E;&#x91CF;&#x4E0B;&#x5173;&#x95ED;&#x548C;&#x91CD;&#x542F;MySQL&#x4E5F;&#x53EF;&#x80FD;&#x8981;&#x82B1;&#x5F88;&#x957F;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5FC5;&#x987B;&#x8981;&#x8BBE;&#x8BA1;&#x4E0D;&#x9700;&#x8981;&#x751F;&#x4EA7;&#x670D;&#x52A1;&#x5668;&#x505C;&#x673A;&#x7684;&#x5907;&#x4EFD;&#x3002;&#x5373;&#x4FBF;&#x5982;&#x6B64;&#xFF0C;&#x7531;&#x4E8E;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x9700;&#x8981;&#xFF0C;&#x5BF9;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x5728;&#x7EBF;&#x5907;&#x4EFD;&#x4ECD;&#x7136;&#x4F1A;&#x6709;&#x660E;&#x663E;&#x7684;&#x670D;&#x52A1;&#x4E2D;&#x65AD;&#x3002;</p>
<ul>
<li>&#x79BB;&#x7EBF;&#xFF08;&#x51B7;&#xFF09;&#x5907;&#x4EFD;:&#x5907;&#x4EFD;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x670D;&#x52A1;&#x4E2D;&#x65AD;</li>
<li>&#x6E29;&#x5907;&#x4EFD;&#xFF1A;&#x5907;&#x4EFD;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x53EA;&#x80FD;&#x8BFB;&#x4E0D;&#x80FD;&#x5199;</li>
<li>&#x5728;&#x7EBF;&#xFF08;&#x70ED;&#xFF09;&#x5907;&#x4EFD;&#xFF1A;&#x5907;&#x4EFD;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x670D;&#x52A1;&#x6B63;&#x5E38;&#x4F7F;&#x7528;</li>
</ul>
<p>&#x5728;&#x89C4;&#x5212;&#x5907;&#x4EFD;&#x65F6;&#xFF0C;&#x6709;&#x4E00;&#x4E9B;&#x4E0E;&#x6027;&#x80FD;&#x76F8;&#x5173;&#x7684;&#x56E0;&#x7D20;&#x9700;&#x8981;&#x8003;&#x8651;&#x3002;</p>
<ul>
<li>&#x9501;&#x65F6;&#x95F4;&#xFF1A;&#x9700;&#x8981;&#x6301;&#x6709;&#x9501;&#x591A;&#x957F;&#x65F6;&#x95F4;&#xFF0C;&#x4F8B;&#x5982;&#x5728;&#x5907;&#x4EFD;&#x671F;&#x95F4;&#x6301;&#x6709;&#x7684;&#x5168;&#x5C40; <code>flush tables with read lock</code>?</li>
<li>&#x5907;&#x4EFD;&#x65F6;&#x95F4;&#xFF1A;&#x590D;&#x5236;&#x5907;&#x4EFD;&#x5230;&#x76EE;&#x7684;&#x5730;&#x9700;&#x8981;&#x591A;&#x4E45;&#xFF1F;</li>
<li>&#x5907;&#x4EFD;&#x8D1F;&#x8F7D;&#xFF1A;&#x5728;&#x590D;&#x5236;&#x5907;&#x4EFD;&#x5230;&#x76EE;&#x7684;&#x5730;&#x65F6;&#x5BF9;&#x670D;&#x52A1;&#x5668;&#x6027;&#x80FD;&#x7684;&#x5F71;&#x54CD;&#x6709;&#x591A;&#x5C11;&#xFF1F;</li>
<li>&#x6062;&#x590D;&#x65F6;&#x95F4;&#xFF1A;&#x628A;&#x5907;&#x4EFD;&#x955C;&#x50CF;&#x4ECE;&#x5B58;&#x50A8;&#x4F4D;&#x7F6E;&#x590D;&#x5236;&#x5230;MySQL&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x91CD;&#x653E;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x7B49;&#xFF0C;&#x9700;&#x8981;&#x591A;&#x4E45;&#xFF1F;</li>
</ul>
<p>&#x6700;&#x5927;&#x7684;&#x6743;&#x8861;&#x65F6;&#x5907;&#x4EFD;&#x65F6;&#x95F4;&#x4E0E;&#x5907;&#x4EFD;&#x8D1F;&#x8F7D;&#x3002;&#x53EF;&#x4EE5;&#x727A;&#x7272;&#x5176;&#x4E00;&#x4EE5;&#x589E;&#x52A0;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x5907;&#x4EFD;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x4EE3;&#x4EF7;&#x662F;&#x964D;&#x4F4E;&#x670D;&#x52A1;&#x5668;&#x6027;&#x80FD;&#x3002;&#x540C;&#x6837;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x8D1F;&#x8F7D;&#x7684;&#x7279;&#x6027;&#x6765;&#x8BBE;&#x8BA1;&#x5907;&#x4EFD;&#x3002;</p>
<h3 id="&#x5907;&#x4EFD;&#x548C;&#x6062;&#x590D;&#x5DE5;&#x5177;"><a href="#&#x5907;&#x4EFD;&#x548C;&#x6062;&#x590D;&#x5DE5;&#x5177;" class="headerlink" title="&#x5907;&#x4EFD;&#x548C;&#x6062;&#x590D;&#x5DE5;&#x5177;"></a>&#x5907;&#x4EFD;&#x548C;&#x6062;&#x590D;&#x5DE5;&#x5177;</h3><p>1) &#x7269;&#x7406;&#x5907;&#x4EFD;&#xFF1A;cp tar lvm&#x5FEB;&#x7167;&#x65B9;&#x5F0F;</p>
<p>2) &#x903B;&#x8F91;&#x5907;&#x4EFD;&#xFF1A;mysqldump</p>
<h4 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h4><h5 id="tar&#x5907;&#x4EFD;&#x6B65;&#x9AA4;"><a href="#tar&#x5907;&#x4EFD;&#x6B65;&#x9AA4;" class="headerlink" title="tar&#x5907;&#x4EFD;&#x6B65;&#x9AA4;"></a>tar&#x5907;&#x4EFD;&#x6B65;&#x9AA4;</h5><ul>
<li>1&#xFF09;&#x505C;&#x6B62;&#x670D;&#x52A1; systemctl stop mariadb</li>
<li>2&#xFF09;&#x5907;&#x4EFD;&#x6570;&#x636E; tar -cf /tmp/mysql.all.tar /var/lib/mysql</li>
<li>3&#xFF09;&#x542F;&#x52A8;&#x670D;&#x52A1; systemctl start mariadb</li>
</ul>
<h5 id="tar&#x8FD8;&#x539F;&#x6B65;&#x9AA4;"><a href="#tar&#x8FD8;&#x539F;&#x6B65;&#x9AA4;" class="headerlink" title="tar&#x8FD8;&#x539F;&#x6B65;&#x9AA4;"></a>tar&#x8FD8;&#x539F;&#x6B65;&#x9AA4;</h5><ul>
<li>1&#xFF09;&#x505C;&#x6B62;&#x670D;&#x52A1; systemctl stop mariadb</li>
<li>2&#xFF09;&#x6E05;&#x73AF;&#x5883;   rm -rf /var/lib/mysql/*</li>
<li>3&#xFF09;&#x5BFC;&#x5165;&#x6570;&#x636E; tar -xf /tmp/mysql.all.tar -C /</li>
<li>4&#xFF09;&#x542F;&#x52A8;&#x670D;&#x52A1; systemctl start mariadb</li>
<li>5&#xFF09;&#x6D4B;&#x8BD5;      &gt; select * from db1.t1;</li>
</ul>
<h5 id="&#x8BFE;&#x5802;&#x5B9E;&#x6218;1-&#x5229;&#x7528;tar&#x5B9E;&#x73B0;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x5E76;&#x8FD8;&#x539F;"><a href="#&#x8BFE;&#x5802;&#x5B9E;&#x6218;1-&#x5229;&#x7528;tar&#x5B9E;&#x73B0;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x5E76;&#x8FD8;&#x539F;" class="headerlink" title="&#x8BFE;&#x5802;&#x5B9E;&#x6218;1: &#x5229;&#x7528;tar&#x5B9E;&#x73B0;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x5E76;&#x8FD8;&#x539F;"></a>&#x8BFE;&#x5802;&#x5B9E;&#x6218;1: &#x5229;&#x7528;tar&#x5B9E;&#x73B0;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x5E76;&#x8FD8;&#x539F;</h5><p><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> &#x5907;&#x4EFD;</span></span><br><span class="line">[root@mastera0 ~]# systemctl stop mariadb</span><br><span class="line">[root@mastera0 ~]# tar -cf /tmp/mysql.all.tar /var/lib/mysql/</span><br><span class="line">tar: Removing leading \`/\&apos; from member names</span><br><span class="line">[root@mastera0 ~]# systemctl start mariadb</span><br><span class="line">[root@mastera0 ~]# ll /tmp</span><br><span class="line">total 29772</span><br><span class="line">-rw-r--r--. 1 root root 30484480 Aug 30 11:28 mysql.all.tar</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> &#x8FD8;&#x539F;</span></span><br><span class="line">[root@mastera0 ~]# systemctl stop mariadb</span><br><span class="line">ot@mastera0 ~]# rm -rf /var/lib/mysql/*</span><br><span class="line">[root@mastera0 ~]# ll /var/lib/mysql</span><br><span class="line">total 0</span><br><span class="line">[root@mastera0 ~]# tar -xf /tmp/mysql.all.tar -C /</span><br><span class="line">[root@mastera0 ~]# ll /var/lib/mysql</span><br><span class="line">total 28700</span><br><span class="line">-rw-rw----. 1 mysql mysql    16384 Aug 30 11:27 aria_log.00000001</span><br><span class="line">-rw-rw----. 1 mysql mysql       52 Aug 30 11:27 aria_log_control</span><br><span class="line">drwx------. 2 mysql mysql       32 Aug 30 11:24 db1</span><br><span class="line">-rw-rw----. 1 mysql mysql 18874368 Aug 30 11:27 ibdata1</span><br><span class="line">-rw-rw----. 1 mysql mysql  5242880 Aug 30 11:27 ib_logfile0</span><br><span class="line">-rw-rw----. 1 mysql mysql  5242880 Aug 30 11:23 ib_logfile1</span><br><span class="line">drwx------. 2 mysql mysql     4096 Aug 30 11:23 mysql</span><br><span class="line">drwx------. 2 mysql mysql     4096 Aug 30 11:23 performance_schema</span><br><span class="line">drwx------. 2 mysql mysql        6 Aug 30 11:23 test</span><br><span class="line">[root@mastera0 ~]# systemctl start mariadb</span><br><span class="line">[root@mastera0 ~]# echo \&quot;select * from db1.t1\&quot;|mysql -uroot -puplooking</span><br><span class="line">id</span><br><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></table></figure></p>
<h4 id="LVM-SnapShot"><a href="#LVM-SnapShot" class="headerlink" title="LVM SnapShot"></a>LVM SnapShot</h4><h5 id="lvm&#x5FEB;&#x7167;&#x7684;&#x4F18;&#x70B9;&#x548C;&#x7F3A;&#x70B9;"><a href="#lvm&#x5FEB;&#x7167;&#x7684;&#x4F18;&#x70B9;&#x548C;&#x7F3A;&#x70B9;" class="headerlink" title="lvm&#x5FEB;&#x7167;&#x7684;&#x4F18;&#x70B9;&#x548C;&#x7F3A;&#x70B9;"></a>lvm&#x5FEB;&#x7167;&#x7684;&#x4F18;&#x70B9;&#x548C;&#x7F3A;&#x70B9;</h5><p>&#x4E8B;&#x5B9E;&#x4E0A;,MySQL &#x6570;&#x636E;&#x5E93;&#x7684;&#x5907;&#x4EFD;&#x662F;&#x4E00;&#x4E2A;&#x8BA9;&#x7BA1;&#x7406;&#x5458;&#x4E00;&#x76F4;&#x5F88;&#x5934;&#x75BC;&#x7684;&#x95EE;&#x9898;&#x3002;&#x5404;&#x79CD;&#x5DE5;&#x4F5C;<br>&#x867D; &#x7136; &#x4E0D; &#x5C11; ,&#x4F46;&#x662F; &#x5404; &#x6709;&#x4F18; &#x52A3; , &#x60F3;&#x627E; &#x5230;&#x4E00;&#x4E2A; &#x6BD4;&#x8F83; &#x5B8C; &#x7F8E; &#x7684;&#x65B9; &#x6CD5; &#x5374; &#x975E;&#x5E38; &#x56F0; &#x96BE; &#x3002;<br>Mysqldump &#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x7684;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x5DE5;&#x5177;,&#x5F31;&#x70B9;&#x5728;&#x4E8E;&#x65E0;&#x6CD5;&#x8FDB;&#x884C;&#x5728;&#x7EBF;&#x70ED;&#x5907;,&#x540C;&#x65F6;&#x5728;&#x6570;<br>&#x636E;&#x5E93;&#x6BD4;&#x8F83;&#x5927;&#x7684;&#x65F6;&#x5019;,&#x5907;&#x4EFD;&#x548C;&#x6062;&#x590D;&#x7684;&#x65F6;&#x95F4;&#x662F;&#x5728;&#x957F;&#x5F97;&#x8BA9;&#x4EBA;&#x65E0;&#x6CD5;&#x63A5;&#x53D7;&#x3002;Mysqlhotcopy<br>&#x867D;&#x7136;&#x514B;&#x670D;&#x4E86;&#x666E;&#x901A;&#x7CFB;&#x7EDF;&#x547D;&#x4EE4;&#x5907;&#x4EFD;&#x5FC5;&#x987B;&#x5173;&#x95ED; mysql &#x670D;&#x52A1;&#x7684;&#x5C34;&#x5C2C;,&#x4F46;&#x662F;&#x8FD9;&#x4E1C;&#x897F;&#x53EA;&#x80FD;&#x7528;<br>&#x4E8E;&#x5907;&#x4EFD;&#x4F7F;&#x7528; MYISAM &#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x7684;&#x6570;&#x636E;&#x8868;,&#x5E76;&#x4E14;&#x53EA;&#x80FD;&#x5728;&#x7C7B; UNIX &#x73AF;&#x5883;&#x4E2D;&#x4F7F;&#x7528;&#x3002;&#x5982;&#x679C;<br>&#x4F7F;&#x7528; mysql replication &#x7684;&#x8BDD;,&#x5012;&#x662F;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x70ED;&#x5907;&#x95EE;&#x9898;&#x3002;&#x4F46;&#x662F;&#x4F60;&#x9700;&#x8981;&#x627F;&#x62C5;&#x589E;&#x52A0;<br>&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x7684;&#x6210;&#x672C;&#x3002;&#x540C;&#x65F6;,&#x5982;&#x679C;&#x6570;&#x636E;&#x88AB;&#x65E0;&#x610F;&#x6216;&#x6076;&#x610F;&#x7684;&#x7BE1;&#x6539;&#x3001;&#x5220;&#x9664;,&#x90A3;&#x4E48; slave<br>&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x6570;&#x636E;&#x540C;&#x6837;&#x4E0D;&#x80FD;&#x5E78;&#x514D;&#x3002;<br>&#x76F8;&#x5BF9;&#x4E8E;&#x4EE5;&#x4E0A;&#x65B9;&#x6CD5;,&#x5728;&#x4E2D;&#x3001;&#x5927;&#x89C4;&#x6A21;&#x7684; MySQL &#x5E94;&#x7528;&#x73AF;&#x5883;&#x4E2D;,&#x6211;&#x63A8;&#x8350;&#x4F7F;&#x7528; LVM &#x5FEB;<br>&#x7167;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5236;&#x4F5C;&#x5907;&#x4EFD;&#x3002;&#x4E3A;&#x4EC0;&#x4E48;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x6BD4;&#x8F83;&#x597D;&#x5462;?</p>
<p>&#x539F;&#x56E0;&#x5982;&#x4E0B;:</p>
<p>1&#x3001; &#x5728;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;,&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x51E0;&#x4E4E;&#x7B97;&#x5F97;&#x4E0A;&#x662F;&#x70ED;&#x5907;&#x3002;&#x5B83;&#x65E0;&#x9700;&#x5173;&#x95ED;&#x670D;&#x52A1;,<br>&#x53EA;&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x53EA;&#x8BFB;&#x6216;&#x8005;&#x7C7B;&#x4F3C;&#x8FD9;&#x6837;&#x7684;&#x9650;&#x5236;&#x3002;<br>2&#x3001; &#x652F;&#x6301;&#x6240;&#x6709;&#x57FA;&#x4E8E;&#x672C;&#x5730;&#x78C1;&#x76D8;&#x7684;&#x5B58;&#x50A8;&#x5F15;&#x64CE;,&#x6BD4;&#x5982; MYISAM&#x3001;InnoDB &#x548C; BDB,<br>&#x8FD8;&#x652F;&#x6301; Solid&#x3001;PrimeXT &#x548C; Faction&#x3002;<br>3&#x3001; &#x5907;&#x4EFD;&#x901F;&#x5EA6;&#x6700;&#x5FEB;,&#x56E0;&#x4E3A;&#x4F60;&#x53EA;&#x9700;&#x8981;&#x62F7;&#x8D1D;&#x76F8;&#x5173;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x5373;&#x53EF;&#x3002;<br>4&#x3001; &#x7531;&#x4E8E;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x62F7;&#x8D1D;&#x6587;&#x4EF6;,&#x56E0;&#x6B64;&#x5BF9;&#x670D;&#x52A1;&#x5668;&#x5F00;&#x9500;&#x975E;&#x5E38;&#x4F4E;&#x3002;<br>5&#x3001; &#x4FDD;&#x5B58;&#x65B9;&#x5F0F;&#x591A;&#x79CD;&#x591A;&#x6837;,&#x4F60;&#x53EF;&#x4EE5;&#x5907;&#x4EFD;&#x5230;&#x78C1;&#x5E26;&#x4E0A;&#x3001;FTP &#x670D;&#x52A1;&#x5668;&#x4E0A;&#x3001;NFS &#x670D;&#x52A1;<br>&#x5668;&#x4E0A;&#x6216;&#x8005;&#x5176;&#x4ED6;&#x4EC0;&#x4E48;&#x7F51;&#x7EDC;&#x670D;&#x52A1;&#x5668;,&#x4EE5;&#x53CA;&#x4F7F;&#x7528;&#x5404;&#x79CD;&#x7F51;&#x7EDC;&#x5907;&#x4EFD;&#x8F6F;&#x4EF6;&#x6765;&#x5907;&#x4EFD;&#x3002;<br>&#x505A;&#x5230;&#x8FD9;&#x4E9B;&#x5F88;&#x7B80;&#x5355;,&#x8BF4;&#x5230;&#x5E95;&#x5C31;&#x662F;&#x62F7;&#x8D1D;&#x6587;&#x4EF6;&#x800C;&#x5DF2;&#x3002;<br>6&#x3001; &#x6062;&#x590D;&#x901F;&#x5EA6;&#x5F88;&#x5FEB;&#x3002;&#x6062;&#x590D;&#x6240;&#x9700;&#x8981;&#x7684;&#x65F6;&#x95F4;&#x7B49;&#x4E8E;&#x4F60;&#x628A;&#x6570;&#x636E;&#x62F7;&#x8D1D;&#x56DE;&#x6765;&#x7684;&#x65F6;&#x95F4;&#x3002;<br>&#x4F60;&#x53EF;&#x4EE5;&#x60F3;&#x51FA;&#x66F4;&#x591A;&#x7684;&#x65B9;&#x6CD5;&#x8BA9;&#x8FD9;&#x4E2A;&#x65F6;&#x95F4;&#x53D8;&#x5F97;&#x66F4;&#x77ED;&#x3002;<br>7&#x3001;<br>&#x65E0;&#x9700;&#x4F7F;&#x7528;&#x6602;&#x8D35;&#x7684;&#x5546;&#x4E1A;&#x8F6F;&#x4EF6;&#x3002;</p>
<p>&#x5F53;&#x7136;,&#x6BCF;&#x4E2A;&#x4E8B;&#x7269;&#x90FD;&#x6709;&#x5176;&#x4E24;&#x9762;&#x6027;,&#x5B83;&#x4E5F;&#x5B58;&#x5728;&#x4E00;&#x4E9B;&#x7F3A;&#x70B9;:<br>1&#x3001; &#x5F88;&#x660E;&#x663E;,&#x4F60;&#x7684;&#x7CFB;&#x7EDF;&#x9700;&#x8981;&#x652F;&#x6301;&#x5FEB;&#x7167;&#x3002;<br>2&#x3001; &#x5728;&#x4E00;&#x4E9B;&#x516C;&#x53F8;&#x91CC;,&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x5458;&#x548C; DBA &#x5C5E;&#x4E8E;&#x4E0D;&#x540C;&#x7684;&#x56E2;&#x961F;&#x3002;&#x800C;&#x4F7F;&#x7528;&#x5FEB;&#x7167;&#x9700;&#x8981;<br>&#x7CFB;&#x7EDF; root &#x6743;&#x9650;&#x3002;&#x56E0;&#x6B64;,&#x4F60;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x505A;&#x4E00;&#x4E9B;&#x56E2;&#x961F;&#x534F;&#x8C03;&#x5DE5;&#x4F5C;&#x6216;&#x8005;&#x5E72;&#x8106;&#x5728;<br>DBA Team &#x91CC;&#x5B89;&#x63D2;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x5458;&#x3002;&#x8FD9;&#x79CD;&#x4E8B;&#x5728;&#x67D0;&#x4E9B;&#x516C;&#x53F8;&#x5F88;&#x5BB9;&#x6613;,&#x4F46;&#x4E5F;<br>&#x53EF;&#x80FD;&#x5F88;&#x9EBB;&#x70E6;&#x3002;<br>3&#x3001; &#x65E0;&#x6CD5;&#x786E;&#x5207;&#x7684;&#x9884;&#x8BA1;&#x670D;&#x52A1;&#x505C;&#x6B62;&#x65F6;&#x95F4;&#x3002;&#x56E0;&#x4E3A;,&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x5230;&#x5E95;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x7B97;&#x70ED;&#x5907;<br>&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x4E0D;&#x7B97;,&#x5B8C;&#x5168;&#x53D6;&#x51B3;&#x4E8E; FLUSH TABLE WITH READ LOCK &#x547D;&#x4EE4;&#x6267;&#x884C;<br>&#x65F6;&#x95F4;&#x7684;&#x957F;&#x77ED;&#x3002;&#x56E0;&#x6B64;,&#x6211;&#x8FD8;&#x662F;&#x5EFA;&#x8BAE;&#x4F60;&#x5728;&#x51CC;&#x6668;&#x5E72;&#x8FD9;&#x4EF6;&#x4E8B;&#x60C5;&#x3002;&#x6216;&#x8005;&#x5E72;&#x8106;&#x5B9A;&#x4E0B;<br>&#x4E00;&#x4E2A;&#x7EF4;&#x62A4;&#x65F6;&#x95F4;&#x6BB5;(&#x6BD4;&#x5982;&#x67D0;&#x4E9B;&#x7F51;&#x7EDC;&#x6E38;&#x620F;&#x8FD0;&#x8425;&#x5546;&#x7684;&#x505A;&#x6CD5;)&#x3002;<br>4&#x3001; &#x5982;&#x679C;&#x4F60;&#x628A;&#x65E5;&#x5FD7;&#x653E;&#x5728;&#x72EC;&#x7ACB;&#x7684;&#x8BBE;&#x5907;&#x4E0A;&#x6216;&#x8005;&#x4F60;&#x7684;&#x6570;&#x636E;&#x5206;&#x5E03;&#x5728;&#x591A;&#x4E2A;&#x5377;&#x4E0A;,&#x90A3;&#x4E48;<br>&#x5C31;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#x4E86;&#x3002;&#x56E0;&#x4E3A;&#x8FD9;&#x6837;&#x4E00;&#x6765;&#x4F60;&#x5C31;&#x65E0;&#x6CD5;&#x5F97;&#x5230;&#x5168;&#x90E8;&#x6570;&#x636E;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x5FEB;&#x7167;,<br>&#x8FD9;&#x5C31;&#x662F;&#x6240;&#x8C13;&#x7684;&#x591A;&#x5377;&#x4E0A;&#x7684;&#x6570;&#x636E;&#x95EE;&#x9898;&#x3002;&#x4E0D;&#x8FC7;,&#x6709;&#x4E9B;&#x7CFB;&#x7EDF;&#x53EF;&#x80FD;&#x81EA;&#x52A8;&#x505A;&#x5230;&#x591A;&#x5377;<br>&#x5FEB;&#x7167;&#x3002;</p>
<p>&#x73B0;&#x5728;,&#x6211;&#x4EEC;&#x6765;&#x770B;&#x770B;&#x5982;&#x679C;&#x4F7F;&#x7528; LVM &#x7684;&#x5FEB;&#x7167;&#x529F;&#x80FD;&#x6765;&#x5236;&#x4F5C; MySQL &#x5907;&#x4EFD;&#x3002;<br>&#x5F53;&#x7136;,&#x9996;&#x5148;&#x6211;&#x4EEC;&#x51C6;&#x5907;&#x597D;&#x76F8;&#x5E94;&#x7684;&#x73AF;&#x5883;&#x3002;&#x914D;&#x7F6E;&#x4E00;&#x4E2A; LVM,&#x5E76;&#x4E14;&#x5212;&#x5206;&#x5408;&#x9002;&#x5927;&#x5C0F;&#x7684;<br>LV,&#x5E76;&#x4E14;&#x5C06;&#x5176;&#x6302;&#x8F7D;&#x5230; MySQL &#x7684;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x4E0A;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;,&#x4F60;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6211;<br>&#x5DF2;&#x7ECF;&#x5EFA;&#x7ACB;&#x597D;&#x4E86;&#x4E00;&#x4E2A;&#x540D;&#x53EB; db1 &#x7684;&#x6570;&#x636E;&#x5E93;,&#x5E76;&#x4E14;&#x91CC;&#x9762;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x53EB;&#x505A; t1 &#x7684;&#x8868;,<br>&#x5E76;&#x4E14;&#x5DF2;&#x7ECF;&#x5199;&#x5165;&#x4E86;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#x3002;</p>
<p>/var/lib/mysql/&#x2014;&gt;lv &#x2014;-&gt;snapshot</p>
<p>/dev/vdb&#x2014;fdisk&#x2014;/dev/vdb1 1G&#x2014;-&gt;mkfs.ext4&#x2014;&gt;&#x76EE;&#x5F55;&#x6811;</p>
<p>/dev/vdb&#x2014;fdisk&#x2014;/dev/vdb1 1G&#x2013;pv&#x2013;vg&#x2013;lv&#x2014;&gt;mkfs.ext4&#x2014;&gt;&#x76EE;&#x5F55;&#x6811;</p>
<h5 id="os&#x652F;&#x6301;lvm&#x65B9;&#x5F0F;-lv1&#x2014;-var-lib-mysql"><a href="#os&#x652F;&#x6301;lvm&#x65B9;&#x5F0F;-lv1&#x2014;-var-lib-mysql" class="headerlink" title="os&#x652F;&#x6301;lvm&#x65B9;&#x5F0F; lv1&#x2014;/var/lib/mysql"></a>os&#x652F;&#x6301;lvm&#x65B9;&#x5F0F; lv1&#x2014;/var/lib/mysql</h5><p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1)fdisk</span><br><span class="line">2)pv</span><br><span class="line">3)vg</span><br><span class="line">4)lv</span><br><span class="line">5)mkfs ext4 (xfs)</span><br><span class="line">6)&#x505C;&#x6B62;&#x670D;&#x52A1;</span><br><span class="line">7)&#x5168;&#x5907;&#x4EFD;tar</span><br><span class="line">8)&#x6302;&#x63A5;/var/lib/mysql/</span><br><span class="line">9)&#x5BFC;&#x5165;&#x6570;&#x636E;(&#x6CE8;&#x610F;&#x6743;&#x9650;&#xFF0C;ugo&#xFF0C;selinux)</span><br><span class="line">10)&#x542F;&#x52A8;&#x670D;&#x52A1;</span><br></pre></td></tr></table></figure></p>
<h5 id="lvm&#x5FEB;&#x7167;&#x5907;&#x4EFD;&#x6570;&#x636E;"><a href="#lvm&#x5FEB;&#x7167;&#x5907;&#x4EFD;&#x6570;&#x636E;" class="headerlink" title="lvm&#x5FEB;&#x7167;&#x5907;&#x4EFD;&#x6570;&#x636E;"></a>lvm&#x5FEB;&#x7167;&#x5907;&#x4EFD;&#x6570;&#x636E;</h5><p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># &#x4E0E;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x76F8;&#x5173;&#x7684;&#x64CD;&#x4F5C;</span><br><span class="line">	1)&#x6DFB;&#x52A0;&#x5168;&#x5C40;&#x7684;&#x8BFB;&#x9501;&#xFF08;&#x53EA;&#x80FD;&#x8BFB;&#x4E0D;&#x80FD;&#x5199;---&#x300B;&#x6570;&#x636E;&#x4E0D;&#x4F1A;&#x53D8;&#xFF09;&gt; flush tables with read lock;</span><br><span class="line">	2)&#x521B;&#x5EFA;&#x5FEB;&#x7167;	lvcreate -s -L 1G -n snap1 /dev/vgmysql/lv1 ---&gt;/dev/vgmysql/snap1</span><br><span class="line">	3)&#x89E3;&#x9501;		&gt; unlock tables;</span><br><span class="line"></span><br><span class="line"># &#x4E0E;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x65E0;&#x5173;&#x7684;&#x64CD;&#x4F5C;</span><br><span class="line">	4)&#x6302;&#x63A5;&#x5FEB;&#x7167;	mount /dev/vgmysql/snap1 /mnt (&#x5982;&#x679C;&#x662F;xfs&#xFF0C;mount -o nouuid /dev/vgmysql/snap1 /mnt )</span><br><span class="line">	5)tar&#x6253;&#x5305;	cd /mnt;tar -cf /tmp/mysql.2.tar ./*</span><br><span class="line">	6)umount	umount /mnt</span><br><span class="line">	7)&#x5220;&#x9664;&#x5FEB;&#x7167;	lvremove /dev/vgmysql/snap1</span><br></pre></td></tr></table></figure></p>
<h5 id="lvm&#x5FEB;&#x7167;&#x8FD8;&#x539F;&#x6570;&#x636E;"><a href="#lvm&#x5FEB;&#x7167;&#x8FD8;&#x539F;&#x6570;&#x636E;" class="headerlink" title="lvm&#x5FEB;&#x7167;&#x8FD8;&#x539F;&#x6570;&#x636E;"></a>lvm&#x5FEB;&#x7167;&#x8FD8;&#x539F;&#x6570;&#x636E;</h5><p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1&#xFF09;&#x505C;&#x6B62;&#x670D;&#x52A1; systemctl stop mariadb</span><br><span class="line">2&#xFF09;&#x6E05;&#x73AF;&#x5883;   rm -rf /var/lib/mysql/*</span><br><span class="line">3&#xFF09;&#x5BFC;&#x5165;&#x6570;&#x636E; tar -xf /tmp/mysql.2.tar -C /var/lib/mysql</span><br><span class="line">4&#xFF09;&#x542F;&#x52A8;&#x670D;&#x52A1; systemctl start mariadb</span><br><span class="line">5&#xFF09;&#x6D4B;&#x8BD5;	  &gt; select * from db1.t1;</span><br></pre></td></tr></table></figure></p>
<h5 id="&#x8BFE;&#x5802;&#x5B9E;&#x6218;2-&#x5229;&#x7528;LVM&#x5FEB;&#x7167;&#x5B9E;&#x73B0;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x5E76;&#x8FD8;&#x539F;"><a href="#&#x8BFE;&#x5802;&#x5B9E;&#x6218;2-&#x5229;&#x7528;LVM&#x5FEB;&#x7167;&#x5B9E;&#x73B0;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x5E76;&#x8FD8;&#x539F;" class="headerlink" title="&#x8BFE;&#x5802;&#x5B9E;&#x6218;2: &#x5229;&#x7528;LVM&#x5FEB;&#x7167;&#x5B9E;&#x73B0;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x5E76;&#x8FD8;&#x539F;"></a>&#x8BFE;&#x5802;&#x5B9E;&#x6218;2: &#x5229;&#x7528;LVM&#x5FEB;&#x7167;&#x5B9E;&#x73B0;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x5E76;&#x8FD8;&#x539F;</h5><p><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> lv1--&gt;/var/lib/mysql</span></span><br><span class="line">[root@mastera0 mysql]# fdisk -l</span><br><span class="line"></span><br><span class="line">Disk /dev/vda: 10.7 GB, 10737418240 bytes, 20971520 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x000deb17</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/vda1   *        2048      411647      204800   83  Linux</span><br><span class="line">/dev/vda2          411648    20971519    10279936   8e  Linux LVM</span><br><span class="line"></span><br><span class="line">Disk /dev/vdb: 21.5 GB, 21474836480 bytes, 41943040 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/mapper/rhel-root: 9458 MB, 9458155520 bytes, 18472960 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/mapper/rhel-swap: 536 MB, 536870912 bytes, 1048576 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/mapper/rhel-home: 524 MB, 524288000 bytes, 1024000 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line"></span><br><span class="line">[root@mastera0 mysql]#</span><br><span class="line">[root@mastera0 mysql]# fdisk /dev/vdb</span><br><span class="line">Welcome to fdisk (util-linux 2.23.2).</span><br><span class="line"></span><br><span class="line">Changes will remain in memory only, until you decide to write them.</span><br><span class="line">Be careful before using the write command.</span><br><span class="line"></span><br><span class="line">Device does not contain a recognized partition table</span><br><span class="line">Building a new DOS disklabel with disk identifier 0xb9ec589f.</span><br><span class="line"></span><br><span class="line">Command (m for help): n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): p</span><br><span class="line">Partition number (1-4, default 1): 1</span><br><span class="line">First sector (2048-41943039, default 2048):</span><br><span class="line">Using default value 2048</span><br><span class="line">Last sector, +sectors or +size{K,M,G} (2048-41943039, default 41943039): +1G</span><br><span class="line">Partition 1 of type Linux and of size 1 GiB is set</span><br><span class="line"></span><br><span class="line">Command (m for help): n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (1 primary, 0 extended, 3 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): p</span><br><span class="line">Partition number (2-4, default 2): 2</span><br><span class="line">First sector (2099200-41943039, default 2099200):</span><br><span class="line">Using default value 2099200</span><br><span class="line">Last sector, +sectors or +size{K,M,G} (2099200-41943039, default 41943039): +1G</span><br><span class="line">Partition 2 of type Linux and of size 1 GiB is set</span><br><span class="line"></span><br><span class="line">Command (m for help): p</span><br><span class="line"></span><br><span class="line">Disk /dev/vdb: 21.5 GB, 21474836480 bytes, 41943040 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0xb9ec589f</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/vdb1            2048     2099199     1048576   83  Linux</span><br><span class="line">/dev/vdb2         2099200     4196351     1048576   83  Linux</span><br><span class="line"></span><br><span class="line">Command (m for help): w</span><br><span class="line">The partition table has been altered!</span><br><span class="line"></span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">Syncing disks.</span><br><span class="line">[root@mastera0 mysql]# ls /dev/vdb*</span><br><span class="line">/dev/vdb  /dev/vdb1  /dev/vdb2</span><br><span class="line">[root@mastera0 mysql]# pvcreate /dev/vdb{1,2}</span><br><span class="line">  Physical volume \&quot;/dev/vdb1\&quot; successfully created</span><br><span class="line">  Physical volume \&quot;/dev/vdb2\&quot; successfully created</span><br><span class="line">[root@mastera0 mysql]# vgcreate vgmysql /dev/vdb{1,2}</span><br><span class="line">  Volume group \&quot;vgmysql\&quot; successfully created</span><br><span class="line">[root@mastera0 mysql]# lvcreate -L 1G -n lv1 vgmysql</span><br><span class="line">  Logical volume \&quot;lv1\&quot; created.</span><br><span class="line">[root@mastera0 mysql]# lvs</span><br><span class="line">  LV   VG      Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  home rhel    -wi-ao---- 500.00m                                                    </span><br><span class="line">  root rhel    -wi-ao----   8.81g                                                    </span><br><span class="line">  swap rhel    -wi-ao---- 512.00m                                                    </span><br><span class="line">  lv1  vgmysql -wi-a-----   1.00g                                                    </span><br><span class="line">[root@mastera0 mysql]# mkfs.ext4 /dev/vgmysql/lv1</span><br><span class="line">mke2fs 1.42.9 (28-Dec-2013)</span><br><span class="line">Filesystem label=</span><br><span class="line">OS type: Linux</span><br><span class="line">Block size=4096 (log=2)</span><br><span class="line">Fragment size=4096 (log=2)</span><br><span class="line">Stride=0 blocks, Stripe width=0 blocks</span><br><span class="line">65536 inodes, 262144 blocks</span><br><span class="line">13107 blocks (5.00%) reserved for the super user</span><br><span class="line">First data block=0</span><br><span class="line">Maximum filesystem blocks=268435456</span><br><span class="line">8 block groups</span><br><span class="line">32768 blocks per group, 32768 fragments per group</span><br><span class="line">8192 inodes per group</span><br><span class="line">Superblock backups stored on blocks:</span><br><span class="line">	32768, 98304, 163840, 229376</span><br><span class="line"></span><br><span class="line">Allocating group tables: done                            </span><br><span class="line">Writing inode tables: done                            </span><br><span class="line">Creating journal (8192 blocks): done</span><br><span class="line">Writing superblocks and filesystem accounting information: done</span><br><span class="line"></span><br><span class="line">[root@mastera0 mysql]#</span><br><span class="line">[root@mastera0 mysql]# systemctl stop mariadb</span><br><span class="line">[root@mastera0 mysql]# tar -cf /tmp/mysql.1.tar /var/lib/mysql/</span><br><span class="line">tar: Removing leading \`/\&apos; from member names</span><br><span class="line">[root@mastera0 mysql]# mount /dev/vgmysql/lv1 /var/lib/mysql^C</span><br><span class="line">[root@mastera0 mysql]# ll -dZ /var/lib/mysql</span><br><span class="line">drwxr-xr-x. mysql mysql system_u:object_r:mysqld_db_t:s0 /var/lib/mysql</span><br><span class="line">[root@mastera0 mysql]# mount /dev/vgmysql/lv1 /var/lib/mysql</span><br><span class="line">[root@mastera0 mysql]# ll -dZ /var/lib/mysql</span><br><span class="line">drwxr-xr-x. root root system_u:object_r:unlabeled_t:s0 /var/lib/mysql</span><br><span class="line">[root@mastera0 mysql]# ll  /var/lib/mysql</span><br><span class="line">total 16</span><br><span class="line">drwx------. 2 root root 16384 Aug 30 13:57 lost+found</span><br><span class="line">[root@mastera0 ~]# ll -d /var/lib/mysql</span><br><span class="line">drwxr-xr-x. 3 root root 4096 Aug 30 13:57 /var/lib/mysql</span><br><span class="line">[root@mastera0 ~]# tar -xf /tmp/mysql.1.tar -C /</span><br><span class="line">[root@mastera0 ~]# ll -d /var/lib/mysql</span><br><span class="line">drwxr-xr-x. 7 mysql mysql 4096 Aug 30 14:01 /var/lib/mysql</span><br><span class="line">[root@mastera0 ~]# ll  /var/lib/mysql</span><br><span class="line">total 28724</span><br><span class="line">-rw-rw----. 1 mysql mysql    16384 Aug 30 14:01 aria_log.00000001</span><br><span class="line">-rw-rw----. 1 mysql mysql       52 Aug 30 14:01 aria_log_control</span><br><span class="line">drwx------. 2 mysql mysql     4096 Aug 30 11:24 db1</span><br><span class="line">-rw-rw----. 1 mysql mysql 18874368 Aug 30 14:01 ibdata1</span><br><span class="line">-rw-rw----. 1 mysql mysql  5242880 Aug 30 14:01 ib_logfile0</span><br><span class="line">-rw-rw----. 1 mysql mysql  5242880 Aug 30 11:23 ib_logfile1</span><br><span class="line">drwx------. 2 root  root     16384 Aug 30 13:57 lost+found</span><br><span class="line">drwx------. 2 mysql mysql     4096 Aug 30 11:23 mysql</span><br><span class="line">drwx------. 2 mysql mysql     4096 Aug 30 11:23 performance_schema</span><br><span class="line">drwx------. 2 mysql mysql     4096 Aug 30 11:23 test</span><br><span class="line">[root@mastera0 ~]# systemctl start mariadb</span><br><span class="line">Job for mariadb.service failed because the control process exited with error code. See &quot;systemctl status mariadb.service&quot; and &quot;journalctl -xe&quot; for details.</span><br><span class="line">[root@mastera0 ~]# setenforce 0</span><br><span class="line">[root@mastera0 ~]# systemctl start mariadb</span><br><span class="line">[root@mastera0 ~]# ll  /var/lib/mysql -Z</span><br><span class="line">-rw-rw----. mysql mysql unconfined_u:object_r:unlabeled_t:s0 aria_log.00000001</span><br><span class="line">-rw-rw----. mysql mysql unconfined_u:object_r:unlabeled_t:s0 aria_log_control</span><br><span class="line">drwx------. mysql mysql unconfined_u:object_r:unlabeled_t:s0 db1</span><br><span class="line">-rw-rw----. mysql mysql unconfined_u:object_r:unlabeled_t:s0 ibdata1</span><br><span class="line">-rw-rw----. mysql mysql unconfined_u:object_r:unlabeled_t:s0 ib_logfile0</span><br><span class="line">-rw-rw----. mysql mysql unconfined_u:object_r:unlabeled_t:s0 ib_logfile1</span><br><span class="line">drwx------. root  root  system_u:object_r:unlabeled_t:s0 lost+found</span><br><span class="line">drwx------. mysql mysql unconfined_u:object_r:unlabeled_t:s0 mysql</span><br><span class="line">srwxrwxrwx. mysql mysql system_u:object_r:unlabeled_t:s0 mysql.sock</span><br><span class="line">drwx------. mysql mysql unconfined_u:object_r:unlabeled_t:s0 performance_schema</span><br><span class="line">drwx------. mysql mysql unconfined_u:object_r:unlabeled_t:s0 test</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> lvm&#x5FEB;&#x7167;&#x5907;&#x4EFD;</span></span><br><span class="line">MariaDB [(none)]&gt; flush tables with read lock;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># &#x6570;&#x636E;&#x5E93;&#x52A0;&#x4E0A;&#x5168;&#x5C40;&#x8BFB;&#x9501;&#x540E;&#xFF0C;&#x7ACB;&#x523B;&#x5728;&#x65B0;&#x7EC8;&#x7AEF;&#x4E2D;&#x521B;&#x5EFA;&#x5FEB;&#x7167;</span></span></span><br><span class="line">[root@mastera0 ~]# lvcreate -s -L 500M -n snap1 /dev/vgmysql/lv1</span><br><span class="line">  Logical volume &quot;snap1&quot; created.</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># &#x5FEB;&#x7167;&#x521B;&#x5EFA;&#x4E4B;&#x540E;&#xFF0C;&#x89E3;&#x9501;&#xFF0C;&#x670D;&#x52A1;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x9002;&#x7528;&#x4E86;</span></span></span><br><span class="line">MariaDB [(none)]&gt; unlock tables;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># &#x6302;&#x63A5;&#x5FEB;&#x7167;&#x4F7F;&#x7528;</span></span></span><br><span class="line">[root@mastera0 ~]# mount /dev/vgmysql/snap1 /mnt</span><br><span class="line">[root@mastera0 ~]# ls /mnt</span><br><span class="line">aria_log.00000001  db1      ib_logfile0  lost+found  mysql.sock          test</span><br><span class="line">aria_log_control   ibdata1  ib_logfile1  mysql       performance_schema</span><br><span class="line">[root@mastera0 ~]# cd /mnt</span><br><span class="line">[root@mastera0 mnt]# tar -cf /tmp/mysql.2.tar ./*</span><br><span class="line">tar: ./mysql.sock: socket ignored</span><br><span class="line">[root@mastera0 mnt]# ll /tmp</span><br><span class="line">total 89316</span><br><span class="line">drwxr-xr-x. 2 root root        6 Aug 30 11:31 a</span><br><span class="line">-rw-r--r--. 1 root root 30484480 Aug 30 14:01 mysql.1.tar</span><br><span class="line">-rw-r--r--. 1 root root 30484480 Aug 30 14:58 mysql.2.tar</span><br><span class="line">-rw-r--r--. 1 root root 30484480 Aug 30 11:28 mysql.all.tar</span><br><span class="line">[root@mastera0 mnt]# cd</span><br><span class="line">[root@mastera0 ~]# umount /mnt</span><br><span class="line">[root@mastera0 ~]# lv</span><br><span class="line">lvchange     lvdisplay    lvmchange    lvmdiskscan  lvmpolld     lvreduce     lvresize</span><br><span class="line">lvconvert    lvextend     lvmconf      lvmdump      lvmsadc      lvremove     lvs</span><br><span class="line">lvcreate     lvm          lvmconfig    lvmetad      lvmsar       lvrename     lvscan</span><br><span class="line">[root@mastera0 ~]# lvremove /dev/vgmysql/snap1</span><br><span class="line">Do you really want to remove active logical volume snap1? [y/n]: y</span><br><span class="line">  Logical volume &quot;snap1&quot; successfully removed</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> &#x8FD8;&#x539F;&#x6570;&#x636E;</span></span><br><span class="line">[root@mastera0 ~]# systemctl stop mariadb</span><br><span class="line">[root@mastera0 ~]# rm -rf /var/lib/mysql/*</span><br><span class="line">[root@mastera0 ~]# tar -xf /tmp/mysql.2.tar -C /var/lib/mysql</span><br><span class="line">[root@mastera0 ~]# ll /var/lib/mysql</span><br><span class="line">total 28712</span><br><span class="line">-rw-rw----. 1 mysql mysql    16384 Aug 30 14:01 aria_log.00000001</span><br><span class="line">-rw-rw----. 1 mysql mysql       52 Aug 30 14:01 aria_log_control</span><br><span class="line">drwx------. 2 mysql mysql     4096 Aug 30 11:24 db1</span><br><span class="line">-rw-rw----. 1 mysql mysql 18874368 Aug 30 14:42 ibdata1</span><br><span class="line">-rw-rw----. 1 mysql mysql  5242880 Aug 30 14:42 ib_logfile0</span><br><span class="line">-rw-rw----. 1 mysql mysql  5242880 Aug 30 11:23 ib_logfile1</span><br><span class="line">drwx------. 2 root  root      4096 Aug 30 13:57 lost+found</span><br><span class="line">drwx------. 2 mysql mysql     4096 Aug 30 11:23 mysql</span><br><span class="line">drwx------. 2 mysql mysql     4096 Aug 30 11:23 performance_schema</span><br><span class="line">drwx------. 2 mysql mysql     4096 Aug 30 11:23 test</span><br><span class="line">[root@mastera0 ~]# systemctl start mariadb</span><br><span class="line">[root@mastera0 ~]# echo &quot;select * from db1.t1&quot; | mysql -uroot -puplooking</span><br><span class="line">id</span><br><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></table></figure></p>
<h4 id="mysqldump"><a href="#mysqldump" class="headerlink" title="mysqldump"></a>mysqldump</h4><p>&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x548C;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x5404;&#x6709;&#x4F18;&#x7F3A;&#x70B9;,&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x4FDD;&#x5B58;&#x7684;&#x662F; SQL &#x6587;&#x672C;,&#x53EF;&#x4EE5;&#x5728;&#x5404;&#x79CD;&#x6761;&#x4EF6;&#x4E0B;&#x6062;<br>&#x590D;,&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x5927;&#x6570;&#x636E;&#x91CF;&#x7684;&#x7CFB;&#x7EDF;,&#x5907;&#x4EFD;&#x548C;&#x6062;&#x590D;&#x7684;&#x65F6;&#x95F4;&#x90FD;&#x6BD4;&#x8F83;&#x957F;;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x6070;&#x6070;&#x76F8;&#x53CD;,&#x7531;&#x4E8E;&#x662F;&#x6587;<br>&#x4EF6;&#x7684;&#x7269;&#x7406; cp,&#x5907;&#x4EFD;&#x548C;&#x6062;&#x590D;&#x65F6;&#x95F4;&#x90FD;&#x6BD4;&#x8F83;&#x77ED;,&#x4F46;&#x662F;&#x5907;&#x4EFD;&#x7684;&#x6587;&#x4EF6;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x5E73;&#x53F0;&#x4E0A;&#x4E0D;&#x4E00;&#x5B9A;&#x517C;&#x5BB9;&#x3002;<br>&#x5176;&#x4E2D;,mysqldump &#x662F;&#x6700;&#x5E38;&#x7528;&#x7684;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x5DE5;&#x5177;,&#x9002;&#x5408;&#x5404;&#x79CD;&#x5B58;&#x50A8;&#x5F15;&#x64CE;,&#x5E0C;&#x671B;&#x5927;&#x5BB6;&#x91CD;&#x70B9;&#x638C;&#x63E1;&#x3002;</p>
<h5 id="MyISAM&#x548C;INNODB&#x8868;&#x7684;&#x5907;&#x4EFD;"><a href="#MyISAM&#x548C;INNODB&#x8868;&#x7684;&#x5907;&#x4EFD;" class="headerlink" title="MyISAM&#x548C;INNODB&#x8868;&#x7684;&#x5907;&#x4EFD;"></a>MyISAM&#x548C;INNODB&#x8868;&#x7684;&#x5907;&#x4EFD;</h5><table>
<thead>
<tr>
<th align="left">&#x5B58;&#x50A8;&#x5F15;&#x64CE;</th>
<th align="left">&#x6570;&#x636E;&#x4E00;&#x81F4;</th>
<th align="left">&#x670D;&#x52A1;&#x53EF;&#x7528;</th>
<th align="left">&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;</th>
</tr>
</thead>
<tbody><tr>
<td align="left">MYISAM</td>
<td align="left">ok</td>
<td align="left">no</td>
<td align="left">&#x9501;&#x8868;</td>
</tr>
<tr>
<td align="left">INNODB</td>
<td align="left">ok</td>
<td align="left">ok</td>
<td align="left">MVCC</td>
</tr>
</tbody></table>
<h5 id="mysqldump&#x547D;&#x4EE4;&#x7684;&#x7528;&#x6CD5;"><a href="#mysqldump&#x547D;&#x4EE4;&#x7684;&#x7528;&#x6CD5;" class="headerlink" title="mysqldump&#x547D;&#x4EE4;&#x7684;&#x7528;&#x6CD5;"></a>mysqldump&#x547D;&#x4EE4;&#x7684;&#x7528;&#x6CD5;</h5><p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysqldump &#x5907;&#x4EFD;&#x6570;&#x636E;---&#x903B;&#x8F91;&#x5907;&#x4EFD;sql&#x8BED;&#x53E5;</span><br><span class="line">	-u &#x7528;&#x6237;&#x540D;</span><br><span class="line">	-p &#x5BC6;&#x7801;</span><br><span class="line">	-A &#x6240;&#x6709;&#x7684;&#x5E93;</span><br><span class="line">	--single-transaction INNODB&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x7684;&#x8868;&#x5907;&#x4EFD;&#x65F6;&#x80FD;&#x591F;&#x505A;&#x5230;&#x6570;&#x636E;&#x4E00;&#x81F4;&#xFF0C;&#x670D;&#x52A1;&#x53EF;&#x7528;</span><br><span class="line">mysqldump -uroot -puplooking -A --single-transaction &gt; /tmp/mysql.201608301600.sql</span><br><span class="line">	--lock-all-tables    MYISAM&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x7684;&#x8868;&#x5907;&#x4EFD;&#x65F6;&#x80FD;&#x591F;&#x505A;&#x5230;&#x6570;&#x636E;&#x4E00;&#x81F4;&#xFF0C;&#x670D;&#x52A1;&#x4E0D;&#x53EF;&#x7528;</span><br><span class="line">mysqldump -uroot -puplooking -A --lock-all-tables &gt; /tmp/mysql.xxx.sql</span><br></pre></td></tr></table></figure></p>
<h5 id="mysqldump&#x5907;&#x4EFD;&#x6B65;&#x9AA4;"><a href="#mysqldump&#x5907;&#x4EFD;&#x6B65;&#x9AA4;" class="headerlink" title="mysqldump&#x5907;&#x4EFD;&#x6B65;&#x9AA4;"></a>mysqldump&#x5907;&#x4EFD;&#x6B65;&#x9AA4;</h5><pre><code>INNODB    mysqldump -uroot -puplooking -A --single-transaction &gt; /tmp/mysql.201608301600.sql
MYISAM    mysqldump -uroot -puplooking -A --lock-all-tables &gt; /tmp/mysql.xxx.sql</code></pre><h5 id="mysqldump&#x8FD8;&#x539F;&#x6B65;&#x9AA4;"><a href="#mysqldump&#x8FD8;&#x539F;&#x6B65;&#x9AA4;" class="headerlink" title="mysqldump&#x8FD8;&#x539F;&#x6B65;&#x9AA4;"></a>mysqldump&#x8FD8;&#x539F;&#x6B65;&#x9AA4;</h5><p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1&#xFF09;&#x505C;&#x6B62;&#x670D;&#x52A1;</span><br><span class="line">2&#xFF09;&#x6E05;&#x7A7A;&#x73AF;&#x5883;</span><br><span class="line">3&#xFF09;&#x542F;&#x52A8;&#x670D;&#x52A1;</span><br><span class="line">4&#xFF09;&#x5BFC;&#x5165;&#x6570;&#x636E;</span><br><span class="line">5&#xFF09;&#x5237;&#x65B0;&#x6388;&#x6743;</span><br><span class="line">6&#xFF09;&#x6D4B;&#x8BD5;</span><br></pre></td></tr></table></figure></p>
<h5 id="&#x8BFE;&#x5802;&#x5B9E;&#x6218;3-&#x5229;&#x7528;mysqldump&#x5B9E;&#x73B0;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x5E76;&#x8FD8;&#x539F;"><a href="#&#x8BFE;&#x5802;&#x5B9E;&#x6218;3-&#x5229;&#x7528;mysqldump&#x5B9E;&#x73B0;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x5E76;&#x8FD8;&#x539F;" class="headerlink" title="&#x8BFE;&#x5802;&#x5B9E;&#x6218;3: &#x5229;&#x7528;mysqldump&#x5B9E;&#x73B0;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x5E76;&#x8FD8;&#x539F;"></a>&#x8BFE;&#x5802;&#x5B9E;&#x6218;3: &#x5229;&#x7528;mysqldump&#x5B9E;&#x73B0;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x5E76;&#x8FD8;&#x539F;</h5><h2 id="585"><a href="#585" class="headerlink" title="585"></a><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">[root@mastera0 ~]# mysqldump -uroot -puplooking -A --single-transaction &gt; /tmp/mysql.all.1.sql</span><br><span class="line">[root@mastera0 ~]# ll /tmp</span><br><span class="line">total 89820</span><br><span class="line">drwxr-xr-x. 2 root root        6 Aug 30 11:31 a</span><br><span class="line">-rw-r--r--. 1 root root 30484480 Aug 30 14:01 mysql.1.tar</span><br><span class="line">-rw-r--r--. 1 root root 30484480 Aug 30 14:58 mysql.2.tar</span><br><span class="line">-rw-r--r--. 1 root root   515980 Aug 30 16:02 mysql.all.1.sql</span><br><span class="line">-rw-r--r--. 1 root root 30484480 Aug 30 11:28 mysql.all.tar</span><br><span class="line">[root@mastera0 ~]# systemctl stop mariadb</span><br><span class="line">[root@mastera0 ~]# rm -rf /var/lib/mysql/*</span><br><span class="line">[root@mastera0 ~]# ll /var/lib/mysql</span><br><span class="line">total 0</span><br><span class="line">[root@mastera0 ~]# systemctl start mariadb</span><br><span class="line">[root@mastera0 ~]# ll /var/lib/mysql</span><br><span class="line">total 28704</span><br><span class="line">-rw-rw----. 1 mysql mysql    16384 Aug 30 16:10 aria_log.00000001</span><br><span class="line">-rw-rw----. 1 mysql mysql       52 Aug 30 16:10 aria_log_control</span><br><span class="line">-rw-rw----. 1 mysql mysql 18874368 Aug 30 16:10 ibdata1</span><br><span class="line">-rw-rw----. 1 mysql mysql  5242880 Aug 30 16:10 ib_logfile0</span><br><span class="line">-rw-rw----. 1 mysql mysql  5242880 Aug 30 16:10 ib_logfile1</span><br><span class="line">drwx------. 2 mysql mysql     4096 Aug 30 16:10 mysql</span><br><span class="line">srwxrwxrwx. 1 mysql mysql        0 Aug 30 16:10 mysql.sock</span><br><span class="line">drwx------. 2 mysql mysql     4096 Aug 30 16:10 performance_schema</span><br><span class="line">drwx------. 2 mysql mysql     4096 Aug 30 16:10 test</span><br><span class="line">[root@mastera0 ~]# mysql</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 2</span><br><span class="line">Server version: 5.5.44-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; \q</span><br><span class="line">Bye</span><br><span class="line">[root@mastera0 ~]#</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@mastera0 ~]# mysql &lt; /tmp/mysql.all.1.sql</span><br><span class="line">[root@mastera0 ~]# mysql</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 4</span><br><span class="line">Server version: 5.5.44-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; \q</span><br><span class="line">Bye</span><br><span class="line">[root@mastera0 ~]# mysql</span><br><span class="line">ERROR 1045 (28000): Access denied for user \&apos;root\&apos;@\&apos;localhost\&apos; (using password: NO)</span><br><span class="line">[root@mastera0 ~]# mysql -uroot -puplooking</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 6</span><br><span class="line">Server version: 5.5.44-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type \&apos;help;\&apos; or \&apos;\h\&apos; for help. Type \&apos;\c\&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db1.t1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  1 |</span><br><span class="line">|  2 |</span><br><span class="line">|  3 |</span><br><span class="line">+----+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+---------------------+</span><br><span class="line">| Database            |</span><br><span class="line">+---------------------+</span><br><span class="line">| information_schema  |</span><br><span class="line">| db1                 |</span><br><span class="line">| db2                 |</span><br><span class="line">| #mysql50#lost+found |</span><br><span class="line">| mysql               |</span><br><span class="line">| performance_schema  |</span><br><span class="line">| test                |</span><br><span class="line">+---------------------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; exit</span><br></pre></td></tr></table></figure></h2><h4 id="Percona-Xtrabackup"><a href="#Percona-Xtrabackup" class="headerlink" title="Percona Xtrabackup"></a>Percona Xtrabackup</h4><p><img src="/2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/08-percona1.jpg" alt="percona1"><br><img src="/2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/09-percona2.jpg" alt="percona1"><br><img src="/2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/10-percona3.jpg" alt="percona1"></p>
<blockquote>
<p>&#x5982;&#x4F55;&#x83B7;&#x53D6;&#x8F6F;&#x4EF6;&#xFF1F;</p>
</blockquote>
<pre><code>[Percona&#x5B98;&#x7F51;](www.percona.com)</code></pre><blockquote>
<p>&#x6559;&#x5BA4;&#x73AF;&#x5883;&#x5DF2;&#x7ECF;&#x4E0B;&#x8F7D;&#x597D;&#x8F6F;&#x4EF6;&#xFF0C;&#x5B58;&#x653E;&#x8DEF;&#x5F84;&#x4E3A;&#xFF1A;</p>
</blockquote>
<pre><code>http://classroom.example.com/content/MYSQL/04-others/soft/Percona-XtraBackup-2.3.4-re80c779-el7-x86_64-bundle.tar</code></pre><blockquote>
<p>&#x7F3A;&#x5C11;libev.so.4()(64bit)</p>
</blockquote>
<pre><code>http://classroom.example.com/content/MYSQL/04-others/soft/libev-4.15-6.el7.x86_64.rpm</code></pre><blockquote>
<p>install libev-4.15-6.el7.x86_64.rpm</p>
</blockquote>
<pre><code># install percona-xtrabackup-2.3.4-1.el7.x86_64.rpm
# install percona-xtrabackup-2.3.4-1.el7.x86_64.rpm</code></pre><blockquote>
<p>&#x67E5;&#x770B;&#x8F6F;&#x4EF6;&#x67B6;&#x6784;</p>
</blockquote>
<ul>
<li><p>&#x8F6F;&#x4EF6;&#x540D;    percona-xtrabackup</p>
</li>
<li><p>&#x547D;&#x4EE4;        innobackupex</p>
</li>
<li><p>&#x9009;&#x9879;<br>  &#x2013;user=name        &#x7528;&#x6237;&#x540D;</p>
<p>  &#x2014;-password=name    &#x5BC6;&#x7801;</p>
<p>  &#x2013;apply-log        &#x91CD;&#x6F14;&#x56DE;&#x6EDA;</p>
<p>  &#x2013;copy-back        &#x8FD8;&#x539F;&#x6570;&#x636E;</p>
<p>  &#x2013;redo-only        &#x53EA;&#x91CD;&#x6F14;&#x4E0D;&#x56DE;&#x6EDA;&#xFF0C;&#x4E0E;apply-log&#x540C;&#x65F6;&#x4F7F;&#x7528;</p>
</li>
</ul>
<blockquote>
<p>&#x793A;&#x4F8B;1-&#x5168;&#x5907;&#x4EFD;&#x5E76;&#x8FD8;&#x539F;</p>
</blockquote>
<ul>
<li><p>&#x5168;&#x5907;&#x4EFD;        </p>
<p>  innobackupex &#x2013;user=root &#x2013;password=uplooking /tmp/backup</p>
</li>
<li><p>&#x8FD8;&#x539F;&#x5168;&#x5907;&#x4EFD;</p>
<p>  innobackupex &#x2013;apply-log /tmp/backup/2016&#x2014;&#x2013;</p>
</li>
</ul>
<pre><code>innobackupex --copy-back /tmp/backup/2016-----</code></pre><p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1&#xFF09;&#x505C;&#x6B62;&#x670D;&#x52A1;</span><br><span class="line">2&#xFF09;&#x8BF7;&#x73AF;&#x5883;</span><br><span class="line">3&#xFF09;&#x5BFC;&#x5165;&#x6570;&#x636E;</span><br><span class="line">	1&gt; apply-log</span><br><span class="line">	2&gt; copy-back</span><br><span class="line">4&#xFF09;&#x4FEE;&#x6539;&#x6743;&#x9650;</span><br><span class="line">5&#xFF09;&#x542F;&#x52A8;&#x670D;&#x52A1;</span><br><span class="line">6&#xFF09;&#x6D4B;&#x8BD5;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>&#x793A;&#x4F8B;2-&#x5168;&#x5907;&#x589E;&#x5907;&#x5E76;&#x8FD8;&#x539F;</p>
</blockquote>
<p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x5168;&#x5907;&#x4EFD;		innobackupex --user=root --password=uplooking /tmp/backup</span><br><span class="line">&#x589E;&#x91CF;&#x5907;&#x4EFD;1	innobackupex --user=root --password=uplooking --incremental-basedir=/tmp/backup/2016-09-01_11-32-43 --incremental /tmp/backup</span><br><span class="line">&#x589E;&#x91CF;&#x5907;&#x4EFD;2	innobackupex --user=root --password=uplooking --incremental-basedir= --incremental</span><br><span class="line">&#x589E;&#x91CF;&#x5907;&#x4EFD;3	innobackupex --user=root --password=uplooking --incremental-basedir= --incremental</span><br><span class="line"></span><br><span class="line">&#x5168;&#x5907;&#x4EFD;&#x8FD8;&#x539F;	innobackupex --apply-log  --redo-only /tmp/backup/&#x5168;&#x5907;&#x4EFD;</span><br><span class="line">		innobackupex --apply-log  --redo-only /tmp/backup/&#x5168;&#x5907;&#x4EFD; --incremental-dir=&#x589E;&#x91CF;1</span><br><span class="line">		innobackupex --apply-log  --redo-only /tmp/backup/&#x5168;&#x5907;&#x4EFD; --incremental-dir=&#x589E;&#x91CF;2</span><br><span class="line">		innobackupex --apply-log  --redo-only /tmp/backup/&#x5168;&#x5907;&#x4EFD; --incremental-dir=&#x589E;&#x91CF;3</span><br><span class="line">		innobackupex --apply-log  /tmp/backup/&#x5168;&#x5907;&#x4EFD;</span><br><span class="line">		innobackupex --copy-back  /tmp/backup/&#x5168;&#x5907;&#x4EFD;</span><br></pre></td></tr></table></figure></p>
<h5 id="&#x8BFE;&#x5802;&#x5B9E;&#x6218;4&#xFF1A;innobackupex&#x5B9E;&#x65F6;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x548C;&#x8FD8;&#x539F;"><a href="#&#x8BFE;&#x5802;&#x5B9E;&#x6218;4&#xFF1A;innobackupex&#x5B9E;&#x65F6;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x548C;&#x8FD8;&#x539F;" class="headerlink" title="&#x8BFE;&#x5802;&#x5B9E;&#x6218;4&#xFF1A;innobackupex&#x5B9E;&#x65F6;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x548C;&#x8FD8;&#x539F;"></a>&#x8BFE;&#x5802;&#x5B9E;&#x6218;4&#xFF1A;innobackupex&#x5B9E;&#x65F6;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x548C;&#x8FD8;&#x539F;</h5><p><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># install</span></span></span><br><span class="line">[root@mastera0 ~]# setenforce 0</span><br><span class="line">[root@mastera0 ~]# systemctl stop firewalld</span><br><span class="line">[root@mastera0 ~]# wget http://classroom.example.com/content/MYSQL/04-others/soft/Percona-XtraBackup-2.3.4-re80c779-el7-x86_64-bundle.tar</span><br><span class="line">--2016-09-01 10:41:05--  http://classroom.example.com/content/MYSQL/04-others/soft/Percona-XtraBackup-2.3.4-re80c779-el7-x86_64-bundle.tar</span><br><span class="line">Reusing existing connection to classroom.example.com:80.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 25548800 (24M) [application/x-tar]</span><br><span class="line">Saving to: &#x2018;Percona-XtraBackup-2.3.4-re80c779-el7-x86_64-bundle.tar&#x2019;</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">100%</span><span class="hljs-bash">[===========================================&gt;] 25,548,800   122MB/s   <span class="hljs-keyword">in</span> 0.2s   </span></span><br><span class="line"></span><br><span class="line">2016-09-01 10:41:05 (122 MB/s) - &#x2018;Percona-XtraBackup-2.3.4-re80c779-el7-x86_64-bundle.tar&#x2019; saved [25548800/25548800]</span><br><span class="line"></span><br><span class="line">FINISHED --2016-09-01 10:41:05--</span><br><span class="line">Total wall clock time: 0.3s</span><br><span class="line">Downloaded: 1 files, 24M in 0.2s (122 MB/s)</span><br><span class="line">[root@mastera0 ~]# ls</span><br><span class="line">anaconda-ks.cfg  Percona-XtraBackup-2.3.4-re80c779-el7-x86_64-bundle.tar</span><br><span class="line">[root@mastera0 ~]# tar -xf Percona-XtraBackup-2.3.4-re80c779-el7-x86_64-bundle.tar</span><br><span class="line">[root@mastera0 ~]# ls</span><br><span class="line">anaconda-ks.cfg</span><br><span class="line">percona-xtrabackup-2.3.4-1.el7.x86_64.rpm</span><br><span class="line">Percona-XtraBackup-2.3.4-re80c779-el7-x86_64-bundle.tar</span><br><span class="line">percona-xtrabackup-debuginfo-2.3.4-1.el7.x86_64.rpm</span><br><span class="line">percona-xtrabackup-test-2.3.4-1.el7.x86_64.rpm</span><br><span class="line">[root@mastera0 ~]# yum localinstall -y percona-xtrabackup</span><br><span class="line">Loaded plugins: product-id, search-disabled-repos, subscription-manager</span><br><span class="line">This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.</span><br><span class="line">Skipping: percona-xtrabackup, filename does not end in .rpm.</span><br><span class="line">Nothing to do</span><br><span class="line">[root@mastera0 ~]# yum localinstall -y percona-xtrabackup-2.3.4-1.el7.x86_64.rpm</span><br><span class="line">Loaded plugins: product-id, search-disabled-repos, subscription-manager</span><br><span class="line">This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.</span><br><span class="line">Examining percona-xtrabackup-2.3.4-1.el7.x86_64.rpm: percona-xtrabackup-2.3.4-1.el7.x86_64</span><br><span class="line">Marking percona-xtrabackup-2.3.4-1.el7.x86_64.rpm to be installed</span><br><span class="line">Resolving Dependencies</span><br><span class="line"><span class="hljs-meta">--&gt;</span><span class="hljs-bash"> Running transaction check</span></span><br><span class="line"><span class="hljs-meta">---&gt;</span><span class="hljs-bash"> Package percona-xtrabackup.x86_64 0:2.3.4-1.el7 will be installed</span></span><br><span class="line"><span class="hljs-meta">--&gt;</span><span class="hljs-bash"> Processing Dependency: rsync <span class="hljs-keyword">for</span> package: percona-xtrabackup-2.3.4-1.el7.x86_64</span></span><br><span class="line">rhel_dvd                                                      | 4.1 kB  00:00:00     </span><br><span class="line"><span class="hljs-meta">--&gt;</span><span class="hljs-bash"> Processing Dependency: libev.so.4()(64bit) <span class="hljs-keyword">for</span> package: percona-xtrabackup-2.3.4-1.el7.x86_64</span></span><br><span class="line"><span class="hljs-meta">--&gt;</span><span class="hljs-bash"> Running transaction check</span></span><br><span class="line"><span class="hljs-meta">---&gt;</span><span class="hljs-bash"> Package percona-xtrabackup.x86_64 0:2.3.4-1.el7 will be installed</span></span><br><span class="line"><span class="hljs-meta">--&gt;</span><span class="hljs-bash"> Processing Dependency: libev.so.4()(64bit) <span class="hljs-keyword">for</span> package: percona-xtrabackup-2.3.4-1.el7.x86_64</span></span><br><span class="line"><span class="hljs-meta">---&gt;</span><span class="hljs-bash"> Package rsync.x86_64 0:3.0.9-17.el7 will be installed</span></span><br><span class="line"><span class="hljs-meta">--&gt;</span><span class="hljs-bash"> Finished Dependency Resolution</span></span><br><span class="line">Error: Package: percona-xtrabackup-2.3.4-1.el7.x86_64 (/percona-xtrabackup-2.3.4-1.el7.x86_64)</span><br><span class="line">           Requires: libev.so.4()(64bit)</span><br><span class="line"> You could try using --skip-broken to work around the problem</span><br><span class="line"> You could try running: rpm -Va --nofiles --nodigest</span><br><span class="line">[root@mastera0 ~]# wget http://classroom.example.com/content/MYSQL/04-others/soft/libev-4.15-6.el7.x86_64.rpm</span><br><span class="line">--2016-09-01 10:43:37--  http://classroom.example.com/content/MYSQL/04-others/soft/libev-4.15-6.el7.x86_64.rpm</span><br><span class="line">Resolving classroom.example.com (classroom.example.com)... 172.25.254.254</span><br><span class="line">Connecting to classroom.example.com (classroom.example.com)|172.25.254.254|:80... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 44964 (44K) [application/x-rpm]</span><br><span class="line">Saving to: &#x2018;libev-4.15-6.el7.x86_64.rpm&#x2019;</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">100%</span><span class="hljs-bash">[===========================================&gt;] 44,964      --.-K/s   <span class="hljs-keyword">in</span> 0s      </span></span><br><span class="line"></span><br><span class="line">2016-09-01 10:43:37 (360 MB/s) - &#x2018;libev-4.15-6.el7.x86_64.rpm&#x2019; saved [44964/44964]</span><br><span class="line"></span><br><span class="line">[root@mastera0 ~]# ls</span><br><span class="line">anaconda-ks.cfg</span><br><span class="line">libev-4.15-6.el7.x86_64.rpm</span><br><span class="line">percona-xtrabackup-2.3.4-1.el7.x86_64.rpm</span><br><span class="line">Percona-XtraBackup-2.3.4-re80c779-el7-x86_64-bundle.tar</span><br><span class="line">percona-xtrabackup-debuginfo-2.3.4-1.el7.x86_64.rpm</span><br><span class="line">percona-xtrabackup-test-2.3.4-1.el7.x86_64.rpm</span><br><span class="line">[root@mastera0 ~]# yum localinstall -y libev-4.15-6.el7.x86_64.rpm</span><br><span class="line">Loaded plugins: product-id, search-disabled-repos, subscription-manager</span><br><span class="line">This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.</span><br><span class="line">Examining libev-4.15-6.el7.x86_64.rpm: libev-4.15-6.el7.x86_64</span><br><span class="line">Marking libev-4.15-6.el7.x86_64.rpm to be installed</span><br><span class="line">Resolving Dependencies</span><br><span class="line"><span class="hljs-meta">--&gt;</span><span class="hljs-bash"> Running transaction check</span></span><br><span class="line"><span class="hljs-meta">---&gt;</span><span class="hljs-bash"> Package libev.x86_64 0:4.15-6.el7 will be installed</span></span><br><span class="line"><span class="hljs-meta">--&gt;</span><span class="hljs-bash"> Finished Dependency Resolution</span></span><br><span class="line"></span><br><span class="line">Dependencies Resolved</span><br><span class="line"></span><br><span class="line">=====================================================================================</span><br><span class="line"> Package      Arch          Version            Repository                       Size</span><br><span class="line">=====================================================================================</span><br><span class="line">Installing:</span><br><span class="line"> libev        x86_64        4.15-6.el7         /libev-4.15-6.el7.x86_64         86 k</span><br><span class="line"></span><br><span class="line">Transaction Summary</span><br><span class="line">=====================================================================================</span><br><span class="line">Install  1 Package</span><br><span class="line"></span><br><span class="line">Total size: 86 k</span><br><span class="line">Installed size: 86 k</span><br><span class="line">Downloading packages:</span><br><span class="line">Running transaction check</span><br><span class="line">Running transaction test</span><br><span class="line">Transaction test succeeded</span><br><span class="line">Running transaction</span><br><span class="line">  Installing : libev-4.15-6.el7.x86_64                                           1/1</span><br><span class="line">  Verifying  : libev-4.15-6.el7.x86_64                                           1/1</span><br><span class="line"></span><br><span class="line">Installed:</span><br><span class="line">  libev.x86_64 0:4.15-6.el7                                                          </span><br><span class="line"></span><br><span class="line">Complete!</span><br><span class="line">[root@mastera0 ~]# yum localinstall -y percona-xtrabackup-2.3.4-1.el7.x86_64.rpm Loaded plugins: product-id, search-disabled-repos, subscription-manager</span><br><span class="line">This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.</span><br><span class="line">Examining percona-xtrabackup-2.3.4-1.el7.x86_64.rpm: percona-xtrabackup-2.3.4-1.el7.x86_64</span><br><span class="line">Marking percona-xtrabackup-2.3.4-1.el7.x86_64.rpm to be installed</span><br><span class="line">Resolving Dependencies</span><br><span class="line"><span class="hljs-meta">--&gt;</span><span class="hljs-bash"> Running transaction check</span></span><br><span class="line"><span class="hljs-meta">---&gt;</span><span class="hljs-bash"> Package percona-xtrabackup.x86_64 0:2.3.4-1.el7 will be installed</span></span><br><span class="line"><span class="hljs-meta">--&gt;</span><span class="hljs-bash"> Processing Dependency: rsync <span class="hljs-keyword">for</span> package: percona-xtrabackup-2.3.4-1.el7.x86_64</span></span><br><span class="line"><span class="hljs-meta">--&gt;</span><span class="hljs-bash"> Running transaction check</span></span><br><span class="line"><span class="hljs-meta">---&gt;</span><span class="hljs-bash"> Package rsync.x86_64 0:3.0.9-17.el7 will be installed</span></span><br><span class="line"><span class="hljs-meta">--&gt;</span><span class="hljs-bash"> Finished Dependency Resolution</span></span><br><span class="line"></span><br><span class="line">Dependencies Resolved</span><br><span class="line"></span><br><span class="line">=====================================================================================</span><br><span class="line"> Package            Arch   Version      Repository                              Size</span><br><span class="line">=====================================================================================</span><br><span class="line">Installing:</span><br><span class="line"> percona-xtrabackup x86_64 2.3.4-1.el7  /percona-xtrabackup-2.3.4-1.el7.x86_64  21 M</span><br><span class="line">Installing for dependencies:</span><br><span class="line"> rsync              x86_64 3.0.9-17.el7 rhel_dvd                               359 k</span><br><span class="line"></span><br><span class="line">Transaction Summary</span><br><span class="line">=====================================================================================</span><br><span class="line">Install  1 Package (+1 Dependent package)</span><br><span class="line"></span><br><span class="line">Total size: 22 M</span><br><span class="line">Total download size: 359 k</span><br><span class="line">Installed size: 22 M</span><br><span class="line">Downloading packages:</span><br><span class="line">rsync-3.0.9-17.el7.x86_64.rpm                                 | 359 kB  00:00:00     </span><br><span class="line">Running transaction check</span><br><span class="line">Running transaction test</span><br><span class="line">Transaction test succeeded</span><br><span class="line">Running transaction</span><br><span class="line">  Installing : rsync-3.0.9-17.el7.x86_64                                         1/2</span><br><span class="line">  Installing : percona-xtrabackup-2.3.4-1.el7.x86_64                             2/2</span><br><span class="line">  Verifying  : rsync-3.0.9-17.el7.x86_64                                         1/2</span><br><span class="line">  Verifying  : percona-xtrabackup-2.3.4-1.el7.x86_64                             2/2</span><br><span class="line"></span><br><span class="line">Installed:</span><br><span class="line">  percona-xtrabackup.x86_64 0:2.3.4-1.el7                                            </span><br><span class="line"></span><br><span class="line">Dependency Installed:</span><br><span class="line">  rsync.x86_64 0:3.0.9-17.el7                                                        </span><br><span class="line"></span><br><span class="line">Complete!</span><br><span class="line">[root@mastera0 ~]# ls</span><br><span class="line">anaconda-ks.cfg</span><br><span class="line">libev-4.15-6.el7.x86_64.rpm</span><br><span class="line">percona-xtrabackup-2.3.4-1.el7.x86_64.rpm</span><br><span class="line">Percona-XtraBackup-2.3.4-re80c779-el7-x86_64-bundle.tar</span><br><span class="line">percona-xtrabackup-debuginfo-2.3.4-1.el7.x86_64.rpm</span><br><span class="line">percona-xtrabackup-test-2.3.4-1.el7.x86_64.rpm</span><br><span class="line">[root@mastera0 ~]# rpm -ql percona-xtrabackup</span><br><span class="line">/usr/bin/innobackupex</span><br><span class="line">/usr/bin/xbcloud</span><br><span class="line">/usr/bin/xbcloud_osenv</span><br><span class="line">/usr/bin/xbcrypt</span><br><span class="line">/usr/bin/xbstream</span><br><span class="line">/usr/bin/xtrabackup</span><br><span class="line">/usr/share/doc/percona-xtrabackup-2.3.4</span><br><span class="line">/usr/share/doc/percona-xtrabackup-2.3.4/COPYING</span><br><span class="line">/usr/share/man/man1/innobackupex.1.gz</span><br><span class="line">/usr/share/man/man1/xbcrypt.1.gz</span><br><span class="line">/usr/share/man/man1/xbstream.1.gz</span><br><span class="line">/usr/share/man/man1/xtrabackup.1.gz</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># backup</span></span></span><br><span class="line">[root@mastera0 mysql-log]# innobackupex --user=root --password=uplooking /tmp/backup</span><br><span class="line">160901 11:32:43 innobackupex: Starting the backup operation</span><br><span class="line"></span><br><span class="line">IMPORTANT: Please check that the backup run completes successfully.</span><br><span class="line">           At the end of a successful backup run innobackupex</span><br><span class="line">           prints \&quot;completed OK!\&quot;.</span><br><span class="line"></span><br><span class="line">Can\&apos;t locate Digest/MD5.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at - line 693.</span><br><span class="line">BEGIN failed--compilation aborted at - line 693.</span><br><span class="line">160901 11:32:43 Connecting to MySQL server host: localhost, user: root, password: set, port: 0, socket: /var/lib/mysql/mysql.sock</span><br><span class="line">Using server version 5.5.44-MariaDB-log</span><br><span class="line">innobackupex version 2.3.4 based on MySQL server 5.6.24 Linux (x86_64) (revision id: e80c779)</span><br><span class="line">xtrabackup: uses posix_fadvise().</span><br><span class="line">xtrabackup: cd to /var/lib/mysql</span><br><span class="line">xtrabackup: open files limit requested 0, set to 1024</span><br><span class="line">xtrabackup: using the following InnoDB configuration:</span><br><span class="line">xtrabackup:   innodb_data_home_dir = ./</span><br><span class="line">xtrabackup:   innodb_data_file_path = ibdata1:10M:autoextend</span><br><span class="line">xtrabackup:   innodb_log_group_home_dir = ./</span><br><span class="line">xtrabackup:   innodb_log_files_in_group = 2</span><br><span class="line">xtrabackup:   innodb_log_file_size = 5242880</span><br><span class="line">160901 11:32:43 &gt;&gt; log scanned up to (1607773)</span><br><span class="line">xtrabackup: Generating a list of tablespaces</span><br><span class="line">160901 11:32:43 [01] Copying ./ibdata1 to /tmp/backup/2016-09-01_11-32-43/ibdata1</span><br><span class="line">160901 11:32:43 [01]        ...done</span><br><span class="line">160901 11:32:44 &gt;&gt; log scanned up to (1607773)</span><br><span class="line">160901 11:32:44 Executing FLUSH NO_WRITE_TO_BINLOG TABLES...</span><br><span class="line">160901 11:32:44 Executing FLUSH TABLES WITH READ LOCK...</span><br><span class="line">160901 11:32:44 Starting to backup non-InnoDB tables and files</span><br><span class="line">160901 11:32:44 [01] Copying ./mysql/tables_priv.frm to /tmp/backup/2016-09-01_11-32-43/mysql/tables_priv.frm</span><br><span class="line">160901 11:32:44 [01]        ...done</span><br><span class="line">160901 11:32:44 [01] Copying ./mysql/tables_priv.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/tables_priv.MYI</span><br><span class="line">160901 11:32:44 [01]        ...done</span><br><span class="line">160901 11:32:44 [01] Copying ./mysql/time_zone.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/time_zone.MYD</span><br><span class="line">160901 11:32:44 [01]        ...done</span><br><span class="line">160901 11:32:44 [01] Copying ./mysql/ndb_binlog_index.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/ndb_binlog_index.MYD</span><br><span class="line">160901 11:32:44 [01]        ...done</span><br><span class="line">160901 11:32:44 [01] Copying ./mysql/plugin.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/plugin.MYD</span><br><span class="line">160901 11:32:44 [01]        ...done</span><br><span class="line">160901 11:32:44 [01] Copying ./mysql/proc.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/proc.MYI</span><br><span class="line">160901 11:32:44 [01]        ...done</span><br><span class="line">160901 11:32:44 [01] Copying ./mysql/procs_priv.frm to /tmp/backup/2016-09-01_11-32-43/mysql/procs_priv.frm</span><br><span class="line">160901 11:32:44 [01]        ...done</span><br><span class="line">160901 11:32:44 [01] Copying ./mysql/procs_priv.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/procs_priv.MYD</span><br><span class="line">160901 11:32:44 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/proxies_priv.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/proxies_priv.MYI</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/servers.frm to /tmp/backup/2016-09-01_11-32-43/mysql/servers.frm</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/servers.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/servers.MYD</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/time_zone.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/time_zone.MYI</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/time_zone_name.frm to /tmp/backup/2016-09-01_11-32-43/mysql/time_zone_name.frm</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/time_zone_name.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/time_zone_name.MYI</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/time_zone_name.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/time_zone_name.MYD</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/time_zone_transition.frm to /tmp/backup/2016-09-01_11-32-43/mysql/time_zone_transition.frm</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/time_zone_transition.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/time_zone_transition.MYI</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 &gt;&gt; log scanned up to (1607773)</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/time_zone_transition.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/time_zone_transition.MYD</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/time_zone_transition_type.frm to /tmp/backup/2016-09-01_11-32-43/mysql/time_zone_transition_type.frm</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/time_zone_transition_type.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/time_zone_transition_type.MYI</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/time_zone_transition_type.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/time_zone_transition_type.MYD</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/user.frm to /tmp/backup/2016-09-01_11-32-43/mysql/user.frm</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/user.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/user.MYI</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/user.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/user.MYD</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/time_zone_leap_second.frm to /tmp/backup/2016-09-01_11-32-43/mysql/time_zone_leap_second.frm</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/time_zone_leap_second.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/time_zone_leap_second.MYI</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/general_log.frm to /tmp/backup/2016-09-01_11-32-43/mysql/general_log.frm</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:45 [01] Copying ./mysql/general_log.CSM to /tmp/backup/2016-09-01_11-32-43/mysql/general_log.CSM</span><br><span class="line">160901 11:32:45 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/general_log.CSV to /tmp/backup/2016-09-01_11-32-43/mysql/general_log.CSV</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/slow_log.frm to /tmp/backup/2016-09-01_11-32-43/mysql/slow_log.frm</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/slow_log.CSM to /tmp/backup/2016-09-01_11-32-43/mysql/slow_log.CSM</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/slow_log.CSV to /tmp/backup/2016-09-01_11-32-43/mysql/slow_log.CSV</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/tables_priv.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/tables_priv.MYD</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/columns_priv.frm to /tmp/backup/2016-09-01_11-32-43/mysql/columns_priv.frm</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/columns_priv.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/columns_priv.MYI</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/columns_priv.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/columns_priv.MYD</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/db.frm to /tmp/backup/2016-09-01_11-32-43/mysql/db.frm</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/db.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/db.MYI</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/db.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/db.MYD</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 &gt;&gt; log scanned up to (1607773)</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/event.frm to /tmp/backup/2016-09-01_11-32-43/mysql/event.frm</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/event.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/event.MYI</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/event.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/event.MYD</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/func.frm to /tmp/backup/2016-09-01_11-32-43/mysql/func.frm</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/func.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/func.MYI</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/func.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/func.MYD</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/help_category.frm to /tmp/backup/2016-09-01_11-32-43/mysql/help_category.frm</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/help_category.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/help_category.MYI</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/help_category.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/help_category.MYD</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:46 [01] Copying ./mysql/help_keyword.frm to /tmp/backup/2016-09-01_11-32-43/mysql/help_keyword.frm</span><br><span class="line">160901 11:32:46 [01]        ...done</span><br><span class="line">160901 11:32:47 [01] Copying ./mysql/help_keyword.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/help_keyword.MYI</span><br><span class="line">160901 11:32:47 [01]        ...done</span><br><span class="line">160901 11:32:47 [01] Copying ./mysql/help_keyword.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/help_keyword.MYD</span><br><span class="line">160901 11:32:47 [01]        ...done</span><br><span class="line">160901 11:32:47 [01] Copying ./mysql/help_relation.frm to /tmp/backup/2016-09-01_11-32-43/mysql/help_relation.frm</span><br><span class="line">160901 11:32:47 [01]        ...done</span><br><span class="line">160901 11:32:47 [01] Copying ./mysql/help_relation.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/help_relation.MYI</span><br><span class="line">160901 11:32:47 [01]        ...done</span><br><span class="line">160901 11:32:47 [01] Copying ./mysql/help_relation.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/help_relation.MYD</span><br><span class="line">160901 11:32:47 [01]        ...done</span><br><span class="line">160901 11:32:47 [01] Copying ./mysql/help_topic.frm to /tmp/backup/2016-09-01_11-32-43/mysql/help_topic.frm</span><br><span class="line">160901 11:32:47 [01]        ...done</span><br><span class="line">160901 11:32:47 [01] Copying ./mysql/help_topic.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/help_topic.MYI</span><br><span class="line">160901 11:32:47 [01]        ...done</span><br><span class="line">160901 11:32:47 &gt;&gt; log scanned up to (1607773)</span><br><span class="line">160901 11:32:47 [01] Copying ./mysql/help_topic.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/help_topic.MYD</span><br><span class="line">160901 11:32:47 [01]        ...done</span><br><span class="line">160901 11:32:47 [01] Copying ./mysql/host.frm to /tmp/backup/2016-09-01_11-32-43/mysql/host.frm</span><br><span class="line">160901 11:32:47 [01]        ...done</span><br><span class="line">160901 11:32:47 [01] Copying ./mysql/host.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/host.MYI</span><br><span class="line">160901 11:32:47 [01]        ...done</span><br><span class="line">160901 11:32:47 [01] Copying ./mysql/host.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/host.MYD</span><br><span class="line">160901 11:32:47 [01]        ...done</span><br><span class="line">160901 11:32:47 [01] Copying ./mysql/ndb_binlog_index.frm to /tmp/backup/2016-09-01_11-32-43/mysql/ndb_binlog_index.frm</span><br><span class="line">160901 11:32:47 [01]        ...done</span><br><span class="line">160901 11:32:47 [01] Copying ./mysql/ndb_binlog_index.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/ndb_binlog_index.MYI</span><br><span class="line">160901 11:32:47 [01]        ...done</span><br><span class="line">160901 11:32:47 [01] Copying ./mysql/plugin.frm to /tmp/backup/2016-09-01_11-32-43/mysql/plugin.frm</span><br><span class="line">160901 11:32:47 [01]        ...done</span><br><span class="line">160901 11:32:48 [01] Copying ./mysql/plugin.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/plugin.MYI</span><br><span class="line">160901 11:32:48 [01]        ...done</span><br><span class="line">160901 11:32:48 [01] Copying ./mysql/proc.frm to /tmp/backup/2016-09-01_11-32-43/mysql/proc.frm</span><br><span class="line">160901 11:32:48 [01]        ...done</span><br><span class="line">160901 11:32:48 [01] Copying ./mysql/proc.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/proc.MYD</span><br><span class="line">160901 11:32:48 [01]        ...done</span><br><span class="line">160901 11:32:48 [01] Copying ./mysql/procs_priv.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/procs_priv.MYI</span><br><span class="line">160901 11:32:48 [01]        ...done</span><br><span class="line">160901 11:32:48 [01] Copying ./mysql/proxies_priv.frm to /tmp/backup/2016-09-01_11-32-43/mysql/proxies_priv.frm</span><br><span class="line">160901 11:32:48 [01]        ...done</span><br><span class="line">160901 11:32:48 [01] Copying ./mysql/proxies_priv.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/proxies_priv.MYD</span><br><span class="line">160901 11:32:48 [01]        ...done</span><br><span class="line">160901 11:32:48 [01] Copying ./mysql/servers.MYI to /tmp/backup/2016-09-01_11-32-43/mysql/servers.MYI</span><br><span class="line">160901 11:32:48 [01]        ...done</span><br><span class="line">160901 11:32:48 [01] Copying ./mysql/time_zone.frm to /tmp/backup/2016-09-01_11-32-43/mysql/time_zone.frm</span><br><span class="line">160901 11:32:48 [01]        ...done</span><br><span class="line">160901 11:32:48 [01] Copying ./mysql/time_zone_leap_second.MYD to /tmp/backup/2016-09-01_11-32-43/mysql/time_zone_leap_second.MYD</span><br><span class="line">160901 11:32:48 [01]        ...done</span><br><span class="line">160901 11:32:48 &gt;&gt; log scanned up to (1607773)</span><br><span class="line">160901 11:32:48 [00] Writing test/db.opt</span><br><span class="line">160901 11:32:48 [00]        ...done</span><br><span class="line">160901 11:32:48 [01] Copying ./performance_schema/db.opt to /tmp/backup/2016-09-01_11-32-43/performance_schema/db.opt</span><br><span class="line">160901 11:32:48 [01]        ...done</span><br><span class="line">160901 11:32:48 [01] Copying ./performance_schema/cond_instances.frm to /tmp/backup/2016-09-01_11-32-43/performance_schema/cond_instances.frm</span><br><span class="line">160901 11:32:48 [01]        ...done</span><br><span class="line">160901 11:32:48 [01] Copying ./performance_schema/events_waits_current.frm to /tmp/backup/2016-09-01_11-32-43/performance_schema/events_waits_current.frm</span><br><span class="line">160901 11:32:48 [01]        ...done</span><br><span class="line">160901 11:32:48 [01] Copying ./performance_schema/events_waits_history.frm to /tmp/backup/2016-09-01_11-32-43/performance_schema/events_waits_history.frm</span><br><span class="line">160901 11:32:48 [01]        ...done</span><br><span class="line">160901 11:32:48 [01] Copying ./performance_schema/events_waits_history_long.frm to /tmp/backup/2016-09-01_11-32-43/performance_schema/events_waits_history_long.frm</span><br><span class="line">160901 11:32:48 [01]        ...done</span><br><span class="line">160901 11:32:48 [01] Copying ./performance_schema/events_waits_summary_by_instance.frm to /tmp/backup/2016-09-01_11-32-43/performance_schema/events_waits_summary_by_instance.frm</span><br><span class="line">160901 11:32:48 [01]        ...done</span><br><span class="line">160901 11:32:48 [01] Copying ./performance_schema/events_waits_summary_by_thread_by_event_name.frm to /tmp/backup/2016-09-01_11-32-43/performance_schema/events_waits_summary_by_thread_by_event_name.frm</span><br><span class="line">160901 11:32:48 [01]        ...done</span><br><span class="line">160901 11:32:48 [01] Copying ./performance_schema/events_waits_summary_global_by_event_name.frm to /tmp/backup/2016-09-01_11-32-43/performance_schema/events_waits_summary_global_by_event_name.frm</span><br><span class="line">160901 11:32:48 [01]        ...done</span><br><span class="line">160901 11:32:48 [01] Copying ./performance_schema/file_instances.frm to /tmp/backup/2016-09-01_11-32-43/performance_schema/file_instances.frm</span><br><span class="line">160901 11:32:48 [01]        ...done</span><br><span class="line">160901 11:32:49 [01] Copying ./performance_schema/file_summary_by_event_name.frm to /tmp/backup/2016-09-01_11-32-43/performance_schema/file_summary_by_event_name.frm</span><br><span class="line">160901 11:32:49 [01]        ...done</span><br><span class="line">160901 11:32:49 [01] Copying ./performance_schema/file_summary_by_instance.frm to /tmp/backup/2016-09-01_11-32-43/performance_schema/file_summary_by_instance.frm</span><br><span class="line">160901 11:32:49 [01]        ...done</span><br><span class="line">160901 11:32:49 [01] Copying ./performance_schema/mutex_instances.frm to /tmp/backup/2016-09-01_11-32-43/performance_schema/mutex_instances.frm</span><br><span class="line">160901 11:32:49 [01]        ...done</span><br><span class="line">160901 11:32:49 [01] Copying ./performance_schema/performance_timers.frm to /tmp/backup/2016-09-01_11-32-43/performance_schema/performance_timers.frm</span><br><span class="line">160901 11:32:49 [01]        ...done</span><br><span class="line">160901 11:32:49 [01] Copying ./performance_schema/rwlock_instances.frm to /tmp/backup/2016-09-01_11-32-43/performance_schema/rwlock_instances.frm</span><br><span class="line">160901 11:32:49 [01]        ...done</span><br><span class="line">160901 11:32:49 [01] Copying ./performance_schema/setup_consumers.frm to /tmp/backup/2016-09-01_11-32-43/performance_schema/setup_consumers.frm</span><br><span class="line">160901 11:32:49 [01]        ...done</span><br><span class="line">160901 11:32:49 [01] Copying ./performance_schema/setup_instruments.frm to /tmp/backup/2016-09-01_11-32-43/performance_schema/setup_instruments.frm</span><br><span class="line">160901 11:32:49 [01]        ...done</span><br><span class="line">160901 11:32:49 [01] Copying ./performance_schema/setup_timers.frm to /tmp/backup/2016-09-01_11-32-43/performance_schema/setup_timers.frm</span><br><span class="line">160901 11:32:49 [01]        ...done</span><br><span class="line">160901 11:32:49 [01] Copying ./performance_schema/threads.frm to /tmp/backup/2016-09-01_11-32-43/performance_schema/threads.frm</span><br><span class="line">160901 11:32:49 [01]        ...done</span><br><span class="line">160901 11:32:49 &gt;&gt; log scanned up to (1607773)</span><br><span class="line">160901 11:32:49 [01] Copying ./db1/db.opt to /tmp/backup/2016-09-01_11-32-43/db1/db.opt</span><br><span class="line">160901 11:32:49 [01]        ...done</span><br><span class="line">160901 11:32:49 [01] Copying ./db1/t1.frm to /tmp/backup/2016-09-01_11-32-43/db1/t1.frm</span><br><span class="line">160901 11:32:49 [01]        ...done</span><br><span class="line">160901 11:32:49 [01] Copying ./db2/db.opt to /tmp/backup/2016-09-01_11-32-43/db2/db.opt</span><br><span class="line">160901 11:32:49 [01]        ...done</span><br><span class="line">160901 11:32:49 [01] Copying ./db2/t1.frm to /tmp/backup/2016-09-01_11-32-43/db2/t1.frm</span><br><span class="line">160901 11:32:49 [01]        ...done</span><br><span class="line">160901 11:32:49 Finished backing up non-InnoDB tables and files</span><br><span class="line">160901 11:32:49 [00] Writing xtrabackup_binlog_info</span><br><span class="line">160901 11:32:49 [00]        ...done</span><br><span class="line">160901 11:32:49 Executing FLUSH NO_WRITE_TO_BINLOG ENGINE LOGS...</span><br><span class="line">xtrabackup: The latest check point (for incremental): &apos;1607773&apos;</span><br><span class="line">xtrabackup: Stopping log copying thread.</span><br><span class="line">.160901 11:32:49 &gt;&gt; log scanned up to (1607773)</span><br><span class="line"></span><br><span class="line">160901 11:32:50 Executing UNLOCK TABLES</span><br><span class="line">160901 11:32:50 All tables unlocked</span><br><span class="line">160901 11:32:50 Backup created in directory &apos;/tmp/backup/2016-09-01_11-32-43&apos;</span><br><span class="line">MySQL binlog position: filename &apos;mastera.000021&apos;, position &apos;426&apos;</span><br><span class="line">160901 11:32:50 [00] Writing backup-my.cnf</span><br><span class="line">160901 11:32:50 [00]        ...done</span><br><span class="line">160901 11:32:50 [00] Writing xtrabackup_info</span><br><span class="line">160901 11:32:50 [00]        ...done</span><br><span class="line">xtrabackup: Transaction log of lsn (1607773) to (1607773) was copied.</span><br><span class="line">160901 11:32:50 completed OK!</span><br><span class="line">[root@mastera0 mysql-log]# cd /tmp/backup/</span><br><span class="line">[root@mastera0 backup]# ll</span><br><span class="line">total 4</span><br><span class="line">drwx------. 7 root root 4096 Sep  1 11:32 2016-09-01_11-32-43</span><br><span class="line">[root@mastera0 backup]# cd 2016-09-01_11-32-43/</span><br><span class="line">[root@mastera0 2016-09-01_11-32-43]# ll</span><br><span class="line">total 18460</span><br><span class="line">-rw-r-----. 1 root root      386 Sep  1 11:32 backup-my.cnf</span><br><span class="line">drwx------. 2 root root       32 Sep  1 11:32 db1</span><br><span class="line">drwx------. 2 root root       32 Sep  1 11:32 db2</span><br><span class="line">-rw-r-----. 1 root root 18874368 Sep  1 11:32 ibdata1</span><br><span class="line">drwx------. 2 root root     4096 Sep  1 11:32 mysql</span><br><span class="line">drwx------. 2 root root     4096 Sep  1 11:32 performance_schema</span><br><span class="line">drwx------. 2 root root       19 Sep  1 11:32 test</span><br><span class="line">-rw-r-----. 1 root root       19 Sep  1 11:32 xtrabackup_binlog_info</span><br><span class="line">-rw-r-----. 1 root root      113 Sep  1 11:32 xtrabackup_checkpoints</span><br><span class="line">-rw-r-----. 1 root root      473 Sep  1 11:32 xtrabackup_info</span><br><span class="line">-rw-r-----. 1 root root     2560 Sep  1 11:32 xtrabackup_logfile</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># copyback</span></span></span><br><span class="line"></span><br><span class="line">[root@mastera0 mysql]# systemctl stop mariadb</span><br><span class="line">[root@mastera0 mysql]# rm -rf /var/lib/mysql/*</span><br><span class="line">[root@mastera0 mysql]# innobackupex --apply-log /tmp/backup/2016-09-01_11-32-43/</span><br><span class="line">160901 11:36:33 innobackupex: Starting the apply-log operation</span><br><span class="line"></span><br><span class="line">IMPORTANT: Please check that the apply-log run completes successfully.</span><br><span class="line">           At the end of a successful apply-log run innobackupex</span><br><span class="line">           prints &quot;completed OK!&quot;.</span><br><span class="line"></span><br><span class="line">innobackupex version 2.3.4 based on MySQL server 5.6.24 Linux (x86_64) (revision id: e80c779)</span><br><span class="line">xtrabackup: cd to /tmp/backup/2016-09-01_11-32-43/</span><br><span class="line">xtrabackup: This target seems to be not prepared yet.</span><br><span class="line">xtrabackup: xtrabackup_logfile detected: size=2097152, start_lsn=(1607773)</span><br><span class="line">xtrabackup: using the following InnoDB configuration for recovery:</span><br><span class="line">xtrabackup:   innodb_data_home_dir = ./</span><br><span class="line">xtrabackup:   innodb_data_file_path = ibdata1:10M:autoextend</span><br><span class="line">xtrabackup:   innodb_log_group_home_dir = ./</span><br><span class="line">xtrabackup:   innodb_log_files_in_group = 1</span><br><span class="line">xtrabackup:   innodb_log_file_size = 2097152</span><br><span class="line">xtrabackup: using the following InnoDB configuration for recovery:</span><br><span class="line">xtrabackup:   innodb_data_home_dir = ./</span><br><span class="line">xtrabackup:   innodb_data_file_path = ibdata1:10M:autoextend</span><br><span class="line">xtrabackup:   innodb_log_group_home_dir = ./</span><br><span class="line">xtrabackup:   innodb_log_files_in_group = 1</span><br><span class="line">xtrabackup:   innodb_log_file_size = 2097152</span><br><span class="line">xtrabackup: Starting InnoDB instance for recovery.</span><br><span class="line">xtrabackup: Using 104857600 bytes for buffer pool (set by --use-memory parameter)</span><br><span class="line">InnoDB: Using atomics to ref count buffer pool pages</span><br><span class="line">InnoDB: The InnoDB memory heap is disabled</span><br><span class="line">InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class="line">InnoDB: Memory barrier is not used</span><br><span class="line">InnoDB: Compressed tables use zlib 1.2.7</span><br><span class="line">InnoDB: Using CPU crc32 instructions</span><br><span class="line">InnoDB: Initializing buffer pool, size = 100.0M</span><br><span class="line">InnoDB: Completed initialization of buffer pool</span><br><span class="line">InnoDB: Highest supported file format is Barracuda.</span><br><span class="line">InnoDB: The log sequence numbers 0 and 0 in ibdata files do not match the log sequence number 1607773 in the ib_logfiles!</span><br><span class="line">InnoDB: Database was not shutdown normally!</span><br><span class="line">InnoDB: Starting crash recovery.</span><br><span class="line">InnoDB: Reading tablespace information from the .ibd files...</span><br><span class="line">InnoDB: Restoring possible half-written data pages</span><br><span class="line">InnoDB: from the doublewrite buffer...</span><br><span class="line">InnoDB: 128 rollback segment(s) are active.</span><br><span class="line">InnoDB: Waiting for purge to start</span><br><span class="line">InnoDB: 5.6.24 started; log sequence number 1607773</span><br><span class="line">xtrabackup: Last MySQL binlog file position 426, file name /var/lib/mysql-log/mastera.000021</span><br><span class="line"></span><br><span class="line">xtrabackup: starting shutdown with innodb_fast_shutdown = 1</span><br><span class="line">InnoDB: FTS optimize thread exiting.</span><br><span class="line">InnoDB: Starting shutdown...</span><br><span class="line">InnoDB: Shutdown completed; log sequence number 1607783</span><br><span class="line">xtrabackup: using the following InnoDB configuration for recovery:</span><br><span class="line">xtrabackup:   innodb_data_home_dir = ./</span><br><span class="line">xtrabackup:   innodb_data_file_path = ibdata1:10M:autoextend</span><br><span class="line">xtrabackup:   innodb_log_group_home_dir = ./</span><br><span class="line">xtrabackup:   innodb_log_files_in_group = 2</span><br><span class="line">xtrabackup:   innodb_log_file_size = 5242880</span><br><span class="line">InnoDB: Using atomics to ref count buffer pool pages</span><br><span class="line">InnoDB: The InnoDB memory heap is disabled</span><br><span class="line">InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class="line">InnoDB: Memory barrier is not used</span><br><span class="line">InnoDB: Compressed tables use zlib 1.2.7</span><br><span class="line">InnoDB: Using CPU crc32 instructions</span><br><span class="line">InnoDB: Initializing buffer pool, size = 100.0M</span><br><span class="line">InnoDB: Completed initialization of buffer pool</span><br><span class="line">InnoDB: Setting log file ./ib_logfile101 size to 5 MB</span><br><span class="line">InnoDB: Setting log file ./ib_logfile1 size to 5 MB</span><br><span class="line">InnoDB: Renaming log file ./ib_logfile101 to ./ib_logfile0</span><br><span class="line">InnoDB: New log files created, LSN=1607783</span><br><span class="line">InnoDB: Highest supported file format is Barracuda.</span><br><span class="line">InnoDB: 128 rollback segment(s) are active.</span><br><span class="line">InnoDB: Waiting for purge to start</span><br><span class="line">InnoDB: 5.6.24 started; log sequence number 1608204</span><br><span class="line">xtrabackup: starting shutdown with innodb_fast_shutdown = 1</span><br><span class="line">InnoDB: FTS optimize thread exiting.</span><br><span class="line">InnoDB: Starting shutdown...</span><br><span class="line">InnoDB: Shutdown completed; log sequence number 1608214</span><br><span class="line">160901 11:36:37 completed OK!</span><br><span class="line">[root@mastera0 mysql]# innobackupex --copy-back /tmp/backup/2016-09-01_11-32-43/</span><br><span class="line">160901 11:36:56 innobackupex: Starting the copy-back operation</span><br><span class="line"></span><br><span class="line">IMPORTANT: Please check that the copy-back run completes successfully.</span><br><span class="line">           At the end of a successful copy-back run innobackupex</span><br><span class="line">           prints &quot;completed OK!&quot;.</span><br><span class="line"></span><br><span class="line">innobackupex version 2.3.4 based on MySQL server 5.6.24 Linux (x86_64) (revision id: e80c779)</span><br><span class="line">160901 11:36:56 [01] Copying ib_logfile0 to /var/lib/mysql/ib_logfile0</span><br><span class="line">160901 11:36:56 [01]        ...done</span><br><span class="line">160901 11:36:56 [01] Copying ib_logfile1 to /var/lib/mysql/ib_logfile1</span><br><span class="line">160901 11:36:56 [01]        ...done</span><br><span class="line">160901 11:36:56 [01] Copying ibdata1 to /var/lib/mysql/ibdata1</span><br><span class="line">160901 11:36:56 [01]        ...done</span><br><span class="line">160901 11:36:57 [01] Copying ./mysql/tables_priv.frm to /var/lib/mysql/mysql/tables_priv.frm</span><br><span class="line">160901 11:36:57 [01]        ...done</span><br><span class="line">160901 11:36:57 [01] Copying ./mysql/tables_priv.MYI to /var/lib/mysql/mysql/tables_priv.MYI</span><br><span class="line">160901 11:36:57 [01]        ...done</span><br><span class="line">160901 11:36:57 [01] Copying ./mysql/time_zone.MYD to /var/lib/mysql/mysql/time_zone.MYD</span><br><span class="line">160901 11:36:57 [01]        ...done</span><br><span class="line">160901 11:36:57 [01] Copying ./mysql/ndb_binlog_index.MYD to /var/lib/mysql/mysql/ndb_binlog_index.MYD</span><br><span class="line">160901 11:36:57 [01]        ...done</span><br><span class="line">160901 11:36:57 [01] Copying ./mysql/plugin.MYD to /var/lib/mysql/mysql/plugin.MYD</span><br><span class="line">160901 11:36:57 [01]        ...done</span><br><span class="line">160901 11:36:57 [01] Copying ./mysql/proc.MYI to /var/lib/mysql/mysql/proc.MYI</span><br><span class="line">160901 11:36:57 [01]        ...done</span><br><span class="line">160901 11:36:57 [01] Copying ./mysql/procs_priv.frm to /var/lib/mysql/mysql/procs_priv.frm</span><br><span class="line">160901 11:36:57 [01]        ...done</span><br><span class="line">160901 11:36:57 [01] Copying ./mysql/procs_priv.MYD to /var/lib/mysql/mysql/procs_priv.MYD</span><br><span class="line">160901 11:36:57 [01]        ...done</span><br><span class="line">160901 11:36:57 [01] Copying ./mysql/proxies_priv.MYI to /var/lib/mysql/mysql/proxies_priv.MYI</span><br><span class="line">160901 11:36:57 [01]        ...done</span><br><span class="line">160901 11:36:57 [01] Copying ./mysql/servers.frm to /var/lib/mysql/mysql/servers.frm</span><br><span class="line">160901 11:36:57 [01]        ...done</span><br><span class="line">160901 11:36:57 [01] Copying ./mysql/servers.MYD to /var/lib/mysql/mysql/servers.MYD</span><br><span class="line">160901 11:36:57 [01]        ...done</span><br><span class="line">160901 11:36:57 [01] Copying ./mysql/time_zone.MYI to /var/lib/mysql/mysql/time_zone.MYI</span><br><span class="line">160901 11:36:57 [01]        ...done</span><br><span class="line">160901 11:36:57 [01] Copying ./mysql/time_zone_name.frm to /var/lib/mysql/mysql/time_zone_name.frm</span><br><span class="line">160901 11:36:57 [01]        ...done</span><br><span class="line">160901 11:36:57 [01] Copying ./mysql/time_zone_name.MYI to /var/lib/mysql/mysql/time_zone_name.MYI</span><br><span class="line">160901 11:36:57 [01]        ...done</span><br><span class="line">160901 11:36:57 [01] Copying ./mysql/time_zone_name.MYD to /var/lib/mysql/mysql/time_zone_name.MYD</span><br><span class="line">160901 11:36:57 [01]        ...done</span><br><span class="line">160901 11:36:57 [01] Copying ./mysql/time_zone_transition.frm to /var/lib/mysql/mysql/time_zone_transition.frm</span><br><span class="line">160901 11:36:57 [01]        ...done</span><br><span class="line">160901 11:36:57 [01] Copying ./mysql/time_zone_transition.MYI to /var/lib/mysql/mysql/time_zone_transition.MYI</span><br><span class="line">160901 11:36:57 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/time_zone_transition.MYD to /var/lib/mysql/mysql/time_zone_transition.MYD</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/time_zone_transition_type.frm to /var/lib/mysql/mysql/time_zone_transition_type.frm</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/time_zone_transition_type.MYI to /var/lib/mysql/mysql/time_zone_transition_type.MYI</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/time_zone_transition_type.MYD to /var/lib/mysql/mysql/time_zone_transition_type.MYD</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/user.frm to /var/lib/mysql/mysql/user.frm</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/user.MYI to /var/lib/mysql/mysql/user.MYI</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/user.MYD to /var/lib/mysql/mysql/user.MYD</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/time_zone_leap_second.frm to /var/lib/mysql/mysql/time_zone_leap_second.frm</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/time_zone_leap_second.MYI to /var/lib/mysql/mysql/time_zone_leap_second.MYI</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/general_log.frm to /var/lib/mysql/mysql/general_log.frm</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/general_log.CSM to /var/lib/mysql/mysql/general_log.CSM</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/general_log.CSV to /var/lib/mysql/mysql/general_log.CSV</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/slow_log.frm to /var/lib/mysql/mysql/slow_log.frm</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/slow_log.CSM to /var/lib/mysql/mysql/slow_log.CSM</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/slow_log.CSV to /var/lib/mysql/mysql/slow_log.CSV</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/tables_priv.MYD to /var/lib/mysql/mysql/tables_priv.MYD</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/columns_priv.frm to /var/lib/mysql/mysql/columns_priv.frm</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/columns_priv.MYI to /var/lib/mysql/mysql/columns_priv.MYI</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/columns_priv.MYD to /var/lib/mysql/mysql/columns_priv.MYD</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/db.frm to /var/lib/mysql/mysql/db.frm</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:58 [01] Copying ./mysql/db.MYI to /var/lib/mysql/mysql/db.MYI</span><br><span class="line">160901 11:36:58 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/db.MYD to /var/lib/mysql/mysql/db.MYD</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/event.frm to /var/lib/mysql/mysql/event.frm</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/event.MYI to /var/lib/mysql/mysql/event.MYI</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/event.MYD to /var/lib/mysql/mysql/event.MYD</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/func.frm to /var/lib/mysql/mysql/func.frm</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/func.MYI to /var/lib/mysql/mysql/func.MYI</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/func.MYD to /var/lib/mysql/mysql/func.MYD</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/help_category.frm to /var/lib/mysql/mysql/help_category.frm</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/help_category.MYI to /var/lib/mysql/mysql/help_category.MYI</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/help_category.MYD to /var/lib/mysql/mysql/help_category.MYD</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/help_keyword.frm to /var/lib/mysql/mysql/help_keyword.frm</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/help_keyword.MYI to /var/lib/mysql/mysql/help_keyword.MYI</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/help_keyword.MYD to /var/lib/mysql/mysql/help_keyword.MYD</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/help_relation.frm to /var/lib/mysql/mysql/help_relation.frm</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/help_relation.MYI to /var/lib/mysql/mysql/help_relation.MYI</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/help_relation.MYD to /var/lib/mysql/mysql/help_relation.MYD</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/help_topic.frm to /var/lib/mysql/mysql/help_topic.frm</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/help_topic.MYI to /var/lib/mysql/mysql/help_topic.MYI</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:36:59 [01] Copying ./mysql/help_topic.MYD to /var/lib/mysql/mysql/help_topic.MYD</span><br><span class="line">160901 11:36:59 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./mysql/host.frm to /var/lib/mysql/mysql/host.frm</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./mysql/host.MYI to /var/lib/mysql/mysql/host.MYI</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./mysql/host.MYD to /var/lib/mysql/mysql/host.MYD</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./mysql/ndb_binlog_index.frm to /var/lib/mysql/mysql/ndb_binlog_index.frm</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./mysql/ndb_binlog_index.MYI to /var/lib/mysql/mysql/ndb_binlog_index.MYI</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./mysql/plugin.frm to /var/lib/mysql/mysql/plugin.frm</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./mysql/plugin.MYI to /var/lib/mysql/mysql/plugin.MYI</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./mysql/proc.frm to /var/lib/mysql/mysql/proc.frm</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./mysql/proc.MYD to /var/lib/mysql/mysql/proc.MYD</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./mysql/procs_priv.MYI to /var/lib/mysql/mysql/procs_priv.MYI</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./mysql/proxies_priv.frm to /var/lib/mysql/mysql/proxies_priv.frm</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./mysql/proxies_priv.MYD to /var/lib/mysql/mysql/proxies_priv.MYD</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./mysql/servers.MYI to /var/lib/mysql/mysql/servers.MYI</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./mysql/time_zone.frm to /var/lib/mysql/mysql/time_zone.frm</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./mysql/time_zone_leap_second.MYD to /var/lib/mysql/mysql/time_zone_leap_second.MYD</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./test/db.opt to /var/lib/mysql/test/db.opt</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./performance_schema/db.opt to /var/lib/mysql/performance_schema/db.opt</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./performance_schema/cond_instances.frm to /var/lib/mysql/performance_schema/cond_instances.frm</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./performance_schema/events_waits_current.frm to /var/lib/mysql/performance_schema/events_waits_current.frm</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:00 [01] Copying ./performance_schema/events_waits_history.frm to /var/lib/mysql/performance_schema/events_waits_history.frm</span><br><span class="line">160901 11:37:00 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./performance_schema/events_waits_history_long.frm to /var/lib/mysql/performance_schema/events_waits_history_long.frm</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./performance_schema/events_waits_summary_by_instance.frm to /var/lib/mysql/performance_schema/events_waits_summary_by_instance.frm</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./performance_schema/events_waits_summary_by_thread_by_event_name.frm to /var/lib/mysql/performance_schema/events_waits_summary_by_thread_by_event_name.frm</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./performance_schema/events_waits_summary_global_by_event_name.frm to /var/lib/mysql/performance_schema/events_waits_summary_global_by_event_name.frm</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./performance_schema/file_instances.frm to /var/lib/mysql/performance_schema/file_instances.frm</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./performance_schema/file_summary_by_event_name.frm to /var/lib/mysql/performance_schema/file_summary_by_event_name.frm</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./performance_schema/file_summary_by_instance.frm to /var/lib/mysql/performance_schema/file_summary_by_instance.frm</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./performance_schema/mutex_instances.frm to /var/lib/mysql/performance_schema/mutex_instances.frm</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./performance_schema/performance_timers.frm to /var/lib/mysql/performance_schema/performance_timers.frm</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./performance_schema/rwlock_instances.frm to /var/lib/mysql/performance_schema/rwlock_instances.frm</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./performance_schema/setup_consumers.frm to /var/lib/mysql/performance_schema/setup_consumers.frm</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./performance_schema/setup_instruments.frm to /var/lib/mysql/performance_schema/setup_instruments.frm</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./performance_schema/setup_timers.frm to /var/lib/mysql/performance_schema/setup_timers.frm</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./performance_schema/threads.frm to /var/lib/mysql/performance_schema/threads.frm</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./db1/db.opt to /var/lib/mysql/db1/db.opt</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./db1/t1.frm to /var/lib/mysql/db1/t1.frm</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./db2/db.opt to /var/lib/mysql/db2/db.opt</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./db2/t1.frm to /var/lib/mysql/db2/t1.frm</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:01 [01] Copying ./xtrabackup_info to /var/lib/mysql/xtrabackup_info</span><br><span class="line">160901 11:37:01 [01]        ...done</span><br><span class="line">160901 11:37:02 [01] Copying ./xtrabackup_binlog_pos_innodb to /var/lib/mysql/xtrabackup_binlog_pos_innodb</span><br><span class="line">160901 11:37:02 [01]        ...done</span><br><span class="line">160901 11:37:02 completed OK!</span><br><span class="line">[root@mastera0 mysql]#</span><br><span class="line">[root@mastera0 mysql]# ll /var/lib/mysql</span><br><span class="line">total 28688</span><br><span class="line">drwx------. 2 root root       32 Sep  1 11:37 db1</span><br><span class="line">drwx------. 2 root root       32 Sep  1 11:37 db2</span><br><span class="line">-rw-r-----. 1 root root 18874368 Sep  1 11:36 ibdata1</span><br><span class="line">-rw-r-----. 1 root root  5242880 Sep  1 11:36 ib_logfile0</span><br><span class="line">-rw-r-----. 1 root root  5242880 Sep  1 11:36 ib_logfile1</span><br><span class="line">drwx------. 2 root root     4096 Sep  1 11:37 mysql</span><br><span class="line">drwx------. 2 root root     4096 Sep  1 11:37 performance_schema</span><br><span class="line">drwx------. 2 root root       19 Sep  1 11:37 test</span><br><span class="line">-rw-r-----. 1 root root       38 Sep  1 11:37 xtrabackup_binlog_pos_innodb</span><br><span class="line">-rw-r-----. 1 root root      473 Sep  1 11:37 xtrabackup_info</span><br><span class="line">[root@mastera0 mysql]# ll /var/lib/mysql -d</span><br><span class="line">drwxr-xr-x. 7 mysql mysql 4096 Sep  1 11:37 /var/lib/mysql</span><br><span class="line">[root@mastera0 mysql]# chown mysql. /var/lib/mysql/ -R</span><br><span class="line">[root@mastera0 mysql]# ll /var/lib/mysql</span><br><span class="line">total 28688</span><br><span class="line">drwx------. 2 mysql mysql       32 Sep  1 11:37 db1</span><br><span class="line">drwx------. 2 mysql mysql       32 Sep  1 11:37 db2</span><br><span class="line">-rw-r-----. 1 mysql mysql 18874368 Sep  1 11:36 ibdata1</span><br><span class="line">-rw-r-----. 1 mysql mysql  5242880 Sep  1 11:36 ib_logfile0</span><br><span class="line">-rw-r-----. 1 mysql mysql  5242880 Sep  1 11:36 ib_logfile1</span><br><span class="line">drwx------. 2 mysql mysql     4096 Sep  1 11:37 mysql</span><br><span class="line">drwx------. 2 mysql mysql     4096 Sep  1 11:37 performance_schema</span><br><span class="line">drwx------. 2 mysql mysql       19 Sep  1 11:37 test</span><br><span class="line">-rw-r-----. 1 mysql mysql       38 Sep  1 11:37 xtrabackup_binlog_pos_innodb</span><br><span class="line">-rw-r-----. 1 mysql mysql      473 Sep  1 11:37 xtrabackup_info</span><br><span class="line">[root@mastera0 mysql]# getenforce</span><br><span class="line">Permissive</span><br><span class="line">[root@mastera0 mysql]#</span><br><span class="line"></span><br><span class="line">[root@mastera0 mysql]# systemctl start maraidb</span><br><span class="line">Failed to start maraidb.service: Unit maraidb.service failed to load: No such file or directory.</span><br><span class="line">[root@mastera0 mysql]# systemctl start mariadb</span><br><span class="line">[root@mastera0 mysql]# mysql -uroot -puplooking</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 2</span><br><span class="line">Server version: 5.5.44-MariaDB-log MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db1.t1 ;</span><br><span class="line">+-----+</span><br><span class="line">| id  |</span><br><span class="line">+-----+</span><br><span class="line">|   3 |</span><br><span class="line">|   4 |</span><br><span class="line">|   5 |</span><br><span class="line">|   6 |</span><br><span class="line">|   7 |</span><br><span class="line">|   8 |</span><br><span class="line">|   9 |</span><br><span class="line">|  10 |</span><br><span class="line">|  11 |</span><br><span class="line">|  12 |</span><br><span class="line">|  13 |</span><br><span class="line">|  14 |</span><br><span class="line">| 100 |</span><br><span class="line">+-----+</span><br><span class="line">13 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; \q</span><br><span class="line">Bye</span><br><span class="line">===========================================</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> &#x589E;&#x91CF;&#x5907;&#x4EFD;&#x5E76;&#x8FD8;&#x539F;</span></span><br><span class="line">[root@mastera0 mysql]# mysql -uroot -puplooking</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 4</span><br><span class="line">Server version: 5.5.44-MariaDB-log MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db1.t1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  3 |</span><br><span class="line">|  4 |</span><br><span class="line">|  5 |</span><br><span class="line">|  6 |</span><br><span class="line">|  7 |</span><br><span class="line">|  8 |</span><br><span class="line">|  9 |</span><br><span class="line">| 10 |</span><br><span class="line">| 11 |</span><br><span class="line">| 12 |</span><br><span class="line">| 13 |</span><br><span class="line">| 14 |</span><br><span class="line">+----+</span><br><span class="line">12 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; insert into db1.t1 values (100);</span><br><span class="line">Query OK, 1 row affected (0.13 sec)</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># &#x5168;&#x5907;&#x4EFD;</span></span></span><br><span class="line">[root@mastera0 ~]# rm -rf /tmp/backup/*</span><br><span class="line">[root@mastera0 ~]# innobackupex --user=root --password=uplooking /tmp/backup</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db1.t1;</span><br><span class="line">+-----+</span><br><span class="line">| id  |</span><br><span class="line">+-----+</span><br><span class="line">|   3 |</span><br><span class="line">|   4 |</span><br><span class="line">|   5 |</span><br><span class="line">|   6 |</span><br><span class="line">|   7 |</span><br><span class="line">|   8 |</span><br><span class="line">|   9 |</span><br><span class="line">|  10 |</span><br><span class="line">|  11 |</span><br><span class="line">|  12 |</span><br><span class="line">|  13 |</span><br><span class="line">|  14 |</span><br><span class="line">| 100 |</span><br><span class="line">+-----+</span><br><span class="line">13 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; insert into db1.t1 values (101);</span><br><span class="line">Query OK, 1 row affected (0.22 sec)</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> &#x589E;&#x91CF;1</span></span><br><span class="line">[root@mastera0 ~]# innobackupex --user=root --password=uplooking --incremental-basedir=/tmp/backup/2016-09-01_14-07-43/ --incremental /tmp/backup</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; insert into db1.t1 values (102);</span><br><span class="line">Query OK, 1 row affected (0.06 sec)</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> &#x589E;&#x91CF;2</span></span><br><span class="line">[root@mastera0 ~]# innobackupex --user=root --password=uplooking --incremental-basedir=/tmp/backup/2016-09-01_14-08-35 --incremental /tmp/backup</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; insert into db1.t1 values (103);</span><br><span class="line">Query OK, 1 row affected (0.04 sec)</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> &#x589E;&#x91CF;3</span></span><br><span class="line">[root@mastera0 ~]# innobackupex --user=root --password=uplooking --incremental-basedir=/tmp/backup/2016-09-01_14-09-39 --incremental /tmp/backup</span><br><span class="line"></span><br><span class="line">==============</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> &#x8FD8;&#x539F;</span></span><br><span class="line">[root@mastera0 mysql]# systemctl stop mariadb</span><br><span class="line">[root@mastera0 mysql]# rm -rf /var/lib/mysql/*</span><br><span class="line"></span><br><span class="line">[root@mastera0 mysql]# innobackupex --apply-log  --redo-only /tmp/backup/2016-09-01_14-07-43</span><br><span class="line">[root@mastera0 mysql]# innobackupex --apply-log  --redo-only /tmp/backup/2016-09-01_14-07-43 --incremental-dir=/tmp/backup/2016-09-01_14-08-35/</span><br><span class="line">[root@mastera0 mysql]# innobackupex --apply-log  --redo-only /tmp/backup/2016-09-01_14-07-43 --incremental-dir=/tmp/backup/2016-09-01_14-09-39</span><br><span class="line">[root@mastera0 mysql]# innobackupex --apply-log  --redo-only /tmp/backup/2016-09-01_14-07-43 --incremental-dir=/tmp/backup/2016-09-01_14-10-09</span><br><span class="line">[root@mastera0 mysql]# innobackupex --apply-log  /tmp/backup/2016-09-01_14-07-43</span><br><span class="line">[root@mastera0 mysql]# innobackupex --copy-back  /tmp/backup/2016-09-01_14-07-43</span><br><span class="line">[root@mastera0 mysql]# ll /var/lib/mysql</span><br><span class="line">total 28688</span><br><span class="line">drwx------. 2 root root       32 Sep  1 14:14 db1</span><br><span class="line">drwx------. 2 root root       32 Sep  1 14:14 db2</span><br><span class="line">-rw-r-----. 1 root root 18874368 Sep  1 14:14 ibdata1</span><br><span class="line">-rw-r-----. 1 root root  5242880 Sep  1 14:14 ib_logfile0</span><br><span class="line">-rw-r-----. 1 root root  5242880 Sep  1 14:14 ib_logfile1</span><br><span class="line">drwx------. 2 root root     4096 Sep  1 14:14 mysql</span><br><span class="line">drwx------. 2 root root     4096 Sep  1 14:14 performance_schema</span><br><span class="line">drwx------. 2 root root       19 Sep  1 14:14 test</span><br><span class="line">-rw-r-----. 1 root root       41 Sep  1 14:14 xtrabackup_binlog_pos_innodb</span><br><span class="line">-rw-r-----. 1 root root      550 Sep  1 14:14 xtrabackup_info</span><br><span class="line">[root@mastera0 mysql]# chown mysql. /var/lib/mysql -R</span><br><span class="line">[root@mastera0 mysql]# ll /var/lib/mysql</span><br><span class="line">total 28688</span><br><span class="line">drwx------. 2 mysql mysql       32 Sep  1 14:14 db1</span><br><span class="line">drwx------. 2 mysql mysql       32 Sep  1 14:14 db2</span><br><span class="line">-rw-r-----. 1 mysql mysql 18874368 Sep  1 14:14 ibdata1</span><br><span class="line">-rw-r-----. 1 mysql mysql  5242880 Sep  1 14:14 ib_logfile0</span><br><span class="line">-rw-r-----. 1 mysql mysql  5242880 Sep  1 14:14 ib_logfile1</span><br><span class="line">drwx------. 2 mysql mysql     4096 Sep  1 14:14 mysql</span><br><span class="line">drwx------. 2 mysql mysql     4096 Sep  1 14:14 performance_schema</span><br><span class="line">drwx------. 2 mysql mysql       19 Sep  1 14:14 test</span><br><span class="line">-rw-r-----. 1 mysql mysql       41 Sep  1 14:14 xtrabackup_binlog_pos_innodb</span><br><span class="line">-rw-r-----. 1 mysql mysql      550 Sep  1 14:14 xtrabackup_info</span><br><span class="line">[root@mastera0 mysql]# systemctl start mariadb</span><br><span class="line">[root@mastera0 mysql]# mysql -uroot -puplooking</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 2</span><br><span class="line">Server version: 5.5.44-MariaDB-log MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db1.t1;</span><br><span class="line">+-----+</span><br><span class="line">| id  |</span><br><span class="line">+-----+</span><br><span class="line">|   3 |</span><br><span class="line">|   4 |</span><br><span class="line">|   5 |</span><br><span class="line">|   6 |</span><br><span class="line">|   7 |</span><br><span class="line">|   8 |</span><br><span class="line">|   9 |</span><br><span class="line">|  10 |</span><br><span class="line">|  11 |</span><br><span class="line">|  12 |</span><br><span class="line">|  13 |</span><br><span class="line">|  14 |</span><br><span class="line">| 100 |</span><br><span class="line">| 101 |</span><br><span class="line">| 102 |</span><br><span class="line">| 103 |</span><br><span class="line">+-----+</span><br><span class="line">16 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; \q</span><br><span class="line">Bye</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="MySQL-&#x65E5;&#x5FD7;&#x7684;&#x5206;&#x7C7B;"><a href="#MySQL-&#x65E5;&#x5FD7;&#x7684;&#x5206;&#x7C7B;" class="headerlink" title="MySQL &#x65E5;&#x5FD7;&#x7684;&#x5206;&#x7C7B;"></a>MySQL &#x65E5;&#x5FD7;&#x7684;&#x5206;&#x7C7B;</h4><table>
<thead>
<tr>
<th align="left">&#x65E5;&#x5FD7;&#x5206;&#x7C7B;</th>
<th align="left">&#x89E3;&#x91CA;</th>
<th align="left">&#x914D;&#x7F6E;&#x5B57;&#x6BB5;</th>
</tr>
</thead>
<tbody><tr>
<td align="left">&#x542F;&#x52A8;&#x65E5;&#x5FD7;</td>
<td align="left">&#x6392;&#x9519;&#x65E5;&#x5FD7;</td>
<td align="left">/var/log/mariadb/mariadb.log    &#x6392;&#x9519;&#x7684;</td>
</tr>
<tr>
<td align="left">&#x5199;&#x65E5;&#x5FD7;</td>
<td align="left">&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;</td>
<td align="left">&#x9ED8;&#x8BA4;&#x4E0D;&#x6253;&#x5F00;&#xFF0C;&#x8BB0;&#x5F55;&#x5199;&#x64CD;&#x4F5C;ddl dcl dml    &#x5907;&#x4EFD;</td>
</tr>
<tr>
<td align="left">&#x8BFB;&#x65E5;&#x5FD7;</td>
<td align="left">&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;    &#x9ED8;&#x8BA4;&#x4E0D;&#x6253;&#x5F00;&#xFF0C;&#x8BB0;&#x5F55;&#x8BFB;&#x64CD;&#x4F5C;dql</td>
<td align="left">&#x6027;&#x80FD;&#x8C03;&#x4F18;</td>
</tr>
</tbody></table>
<h4 id="&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x7684;&#x7BA1;&#x7406;&#x548C;&#x5907;&#x4EFD;"><a href="#&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x7684;&#x7BA1;&#x7406;&#x548C;&#x5907;&#x4EFD;" class="headerlink" title="&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x7684;&#x7BA1;&#x7406;&#x548C;&#x5907;&#x4EFD;"></a>&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x7684;&#x7BA1;&#x7406;&#x548C;&#x5907;&#x4EFD;</h4><p>&#x670D;&#x52A1;&#x5668;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x662F;&#x5907;&#x4EFD;&#x7684;&#x6700;&#x91CD;&#x8981;&#x56E0;&#x7D20;&#x4E4B;&#x4E00;&#x3002;&#x5B83;&#x4EEC;&#x5BF9;&#x4E8E;&#x57FA;&#x4E8E;&#x65F6;&#x95F4;&#x70B9;&#x7684;&#x6062;&#x590D;&#x662F;&#x5FC5;&#x9700;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x901A;&#x5E38;&#x6BD4;&#x6570;&#x636E;&#x8981;&#x5C0F;&#xFF0C;&#x6240;&#x4EE5;&#x66F4;&#x5BB9;&#x6613;&#x8FDB;&#x884C;&#x9891;&#x7E41;&#x7684;&#x5907;&#x4EFD;&#x3002;&#x5982;&#x679C;&#x6709;&#x67D0;&#x4E2A;&#x65F6;&#x95F4;&#x70B9;&#x7684;&#x6570;&#x636E;&#x5907;&#x4EFD;&#x548C;&#x6240;&#x6709;&#x4ECE;&#x90A3;&#x65F6;&#x4EE5;&#x540E;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x91CD;&#x653E;&#x81EA;&#x4ECE;&#x4E0A;&#x6B21;&#x5168;&#x5907;&#x4EE5;&#x6765;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x5E76;&#x201C;&#x524D;&#x6EDA;&#x201D;&#x6240;&#x6709;&#x7684;&#x53D8;&#x66F4;&#x3002;</p>
<p>MySQL&#x590D;&#x5236;&#x4E5F;&#x4F7F;&#x7528;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x3002;&#x56E0;&#x6B64;&#x5907;&#x4EFD;&#x548C;&#x6062;&#x590D;&#x7684;&#x7B56;&#x7565;&#x7ECF;&#x5E38;&#x548C;&#x590D;&#x5236;&#x914D;&#x7F6E;&#x76F8;&#x4E92;&#x5F71;&#x54CD;&#x3002;</p>
<p>&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x5F88;&#x201C;&#x7279;&#x522B;&#x201D;&#x3002;&#x5982;&#x679C;&#x4E22;&#x5931;&#x4E86;&#x6570;&#x636E;&#xFF0C;&#x4F60;&#x4E00;&#x5B9A;&#x4E0D;&#x5E0C;&#x671B;&#x540C;&#x65F6;&#x4E22;&#x5931;&#x4E86;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x3002;&#x4E3A;&#x4E86;&#x8BA9;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x53D1;&#x751F;&#x7684;&#x51E0;&#x7387;&#x51CF;&#x5C11;&#x5230;&#x6700;&#x5C0F;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x5377;&#x4E0A;&#x4FDD;&#x5B58;&#x6570;&#x636E;&#x548C;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x3002;&#x5373;&#x4F7F;&#x5728;LVM&#x4E0B;&#x751F;&#x6210;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x7684;&#x5FEB;&#x7167;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#x3002;&#x4E3A;&#x4E86;&#x989D;&#x5916;&#x7684;&#x5B89;&#x5168;&#x8D77;&#x89C1;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x5B83;&#x4EEC;&#x4FDD;&#x5B58;&#x5728;SAN&#x4E0A;&#xFF0C;&#x6216;&#x7528;DRBD&#x590D;&#x5236;&#x5230;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x8BBE;&#x5907;&#x4E0A;&#x3002;</p>
<p>&#x7ECF;&#x5E38;&#x5907;&#x4EFD;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x662F;&#x4E2A;&#x597D;&#x6CE8;&#x610F;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x80FD;&#x627F;&#x53D7;&#x4E22;&#x5931;&#x8D85;&#x8FC7;30&#x5206;&#x949F;&#x6570;&#x636E;&#x7684;&#x4EF7;&#x503C;&#xFF0C;&#x81F3;&#x5C11;&#x8981;&#x6BCF;30&#x5206;&#x949F;&#x5C31;&#x5907;&#x4EFD;&#x4E00;&#x6B21;&#x3002;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;<code>--log_slave_update</code>&#x7684;&#x53EA;&#x8BFB;&#x5907;&#x5E93;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x83B7;&#x5F97;&#x989D;&#x5916;&#x7684;&#x5B89;&#x5168;&#x6027;&#x3002;&#x5907;&#x5E93;&#x4E0A;&#x65E5;&#x5FD7;&#x4F4D;&#x7F6E;&#x4E0E;&#x4E3B;&#x5E93;&#x4E0D;&#x5339;&#x914D;&#xFF0C;&#x4F46;&#x627E;&#x5230;&#x6062;&#x590D;&#x65F6;&#x6B63;&#x786E;&#x7684;&#x4F4D;&#x7F6E;&#x5E76;&#x4E0D;&#x96BE;&#x3002;&#x6700;&#x540E;&#xFF0C;&#x4ECE;mysql5.6&#x7248;&#x672C;&#x5F00;&#x59CB;<code>mysqlbinlog</code>&#x6709;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x53EF;&#x8FDE;&#x63A5;&#x5230;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x6765;&#x5B9E;&#x73B0;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x505A;&#x955C;&#x50CF;&#xFF0C;&#x6BD4;&#x8D77;&#x8FD0;&#x884C;<code>mysqld</code>&#x5B9E;&#x4F8B;&#x8981;&#x7B80;&#x5355;&#x548C;&#x8F7B;&#x4FBF;&#x3002;&#x5B83;&#x4E0E;&#x8001;&#x7248;&#x672C;&#x65F6;&#x5411;&#x540E;&#x517C;&#x5BB9;&#x7684;&#x3002;</p>
<h5 id="&#x5982;&#x4F55;&#x6253;&#x5F00;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;"><a href="#&#x5982;&#x4F55;&#x6253;&#x5F00;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;" class="headerlink" title="&#x5982;&#x4F55;&#x6253;&#x5F00;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;"></a>&#x5982;&#x4F55;&#x6253;&#x5F00;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;</h5><p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1)configure	&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/my.cnf</span><br><span class="line">2)log-bin=	&#x6DFB;&#x52A0;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x5B58;&#x653E;&#x7684;&#x8DEF;&#x5F84;&#xFF0C;&#x4EE5;&#x53CA;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x7684;&#x540D;&#x5B57;log-bin=/var/lib/mysql-log/mastera</span><br><span class="line">3)mkdir 	&#x521B;&#x5EFA;&#x76EE;&#x5F55;</span><br><span class="line">4)UGO,selinux	&#x4FEE;&#x6539;&#x6743;&#x9650;mysql:mysql;selinux &#x5141;&#x8BB8;</span><br><span class="line">5)restart mariadb &#x91CD;&#x542F;&#x670D;&#x52A1;</span><br></pre></td></tr></table></figure></p>
<h5 id="&#x5982;&#x4F55;&#x67E5;&#x770B;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;"><a href="#&#x5982;&#x4F55;&#x67E5;&#x770B;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;" class="headerlink" title="&#x5982;&#x4F55;&#x67E5;&#x770B;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;"></a>&#x5982;&#x4F55;&#x67E5;&#x770B;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;</h5><pre><code>index    &#x65E5;&#x5FD7;&#x7684;&#x7D22;&#x5F15;
000001    &#x65E5;&#x5FD7;</code></pre><p>&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x5305;&#x542B;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x4E8B;&#x4EF6;&#x3002;&#x6BCF;&#x4E2A;&#x4E8B;&#x4EF6;&#x6709;&#x4E00;&#x4E2A;&#x56FA;&#x5B9A;&#x957F;&#x5EA6;&#x7684;&#x5934;&#xFF0C;&#x5176;&#x4E2D;&#x6709;&#x5404;&#x79CD;&#x4FE1;&#x606F;&#xFF0C;&#x4F8B;&#x5982;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x6233;&#x548C;&#x9ED8;&#x8BA4;&#x7684;&#x6570;&#x636E;&#x5E93;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;mysqlbinlog&#x5DE5;&#x5177;&#x6765;&#x67E5;&#x770B;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6253;&#x5370;&#x51FA;&#x4E00;&#x4E9B;&#x5934;&#x4FE1;&#x606F;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x8F93;&#x51FA;&#x7684;&#x4F8B;&#x5B50;&#x3002;</p>
<p><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 1017</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 15:09:29 server id 1  end_log_pos 1109 	Query	thread_id=11	exec_time=0	error_code=0</span></span><br><span class="line">SET TIMESTAMP=1472627369/*!*/;</span><br><span class="line">insert into db2.t1 values (4),(5)</span><br><span class="line">/*!*/;</span><br></pre></td></tr></table></figure></p>
<p><em>&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x7684;&#x683C;&#x5F0F;</em></p>
<p>&#x7B2C;&#x4E00;&#x884C;&#x5305;&#x542B;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x5185;&#x7684;&#x504F;&#x79FB;&#x5B57;&#x8282;&#x503C;&#xFF08;&#x4F4D;&#x7F6E;&#x7F16;&#x53F7;position&#xFF09;&#xFF0C;&#x672C;&#x4F8B;&#x4E2D;&#x4E3A;1017</p>
<p>&#x7B2C;&#x4E8C;&#x884C;&#x5305;&#x542B;&#x5982;&#x4E0B;&#x51E0;&#x9879;&#xFF1A;</p>
<ul>
<li>&#x4E8B;&#x4EF6;&#x7684;&#x65E5;&#x671F;&#x548C;&#x65F6;&#x95F4;&#xFF0C;MySQL&#x4F1A;&#x7528;&#x5B83;&#x4EEC;&#x6765;&#x4EA7;&#x751F;SET TIMESTAMP&#x8BED;&#x53E5;&#x3002;</li>
<li>&#x539F;&#x670D;&#x52A1;&#x5668;&#x7684;&#x670D;&#x52A1;&#x5668;ID&#xFF0C;&#x5BF9;&#x4E8E;&#x9632;&#x6B62;&#x590D;&#x5236;&#x4E4B;&#x95F4;&#x65E0;&#x9650;&#x5FAA;&#x73AF;&#x548C;&#x5176;&#x4ED6;&#x95EE;&#x9898;&#x662F;&#x975E;&#x5E38;&#x6709;&#x5FC5;&#x8981;&#x7684;&#x3002;</li>
<li>end_log_pos&#xFF0C;&#x4E0B;&#x4E00;&#x4E2A;&#x4E8B;&#x4EF6;&#x7684;&#x504F;&#x79FB;&#x5B57;&#x8282;&#x503C;&#x3002;&#x8BE5;&#x503C;&#x5BF9;&#x4E00;&#x4E2A;&#x591A;&#x8BED;&#x53E5;&#x4E8B;&#x52A1;&#x4E2D;&#x7684;&#x5927;&#x90E8;&#x5206;&#x4E8B;&#x4EF6;&#x662F;&#x4E0D;&#x6B63;&#x786E;&#x7684;&#x3002;&#x5728;&#x6B64;&#x7C7B;&#x4E8B;&#x52A1;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;MySQL&#x7684;&#x4E3B;&#x5E93;&#x4F1A;&#x590D;&#x5236;&#x4E8B;&#x4EF6;&#x5230;&#x4E00;&#x4E2A;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x4F46;&#x8FD9;&#x6837;&#x505A;&#x7684;&#x65F6;&#x5019;&#x5B83;&#x5E76;&#x4E0D;&#x77E5;&#x9053;&#x4E0B;&#x4E2A;&#x65E5;&#x5FD7;&#x4E8B;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</li>
<li>&#x4E8B;&#x4EF6;&#x7C7B;&#x578B;&#xFF0C;&#x672C;&#x4F8B;&#x4E2D;&#x7684;&#x7C7B;&#x578B;&#x4E3A;Query&#xFF0C;&#x4F46;&#x8FD8;&#x6709;&#x8BB8;&#x591A;&#x4E0D;&#x540C;&#x7684;&#x7C7B;&#x578B;&#x3002;</li>
<li>&#x539F;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x6267;&#x884C;&#x4E8B;&#x4EF6;&#x7684;&#x7EBF;&#x7A0B;ID&#xFF0C;&#x5BF9;&#x4E8E;&#x5BA1;&#x8BA1;&#x548C;&#x6267;&#x884C;CONNECTION_ID&#xFF08;&#xFF09;&#x51FD;&#x6570;&#x5F88;&#x91CD;&#x8981;&#x3002;</li>
<li>exec_time&#xFF0C;&#x8FD9;&#x662F;&#x8BED;&#x53E5;&#x7684;&#x65F6;&#x95F4;&#x6233;&#x548C;&#x5199;&#x5165;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x7684;&#x4E8B;&#x4EF6;&#x53EA;&#x5DEE;&#x3002;&#x4E0D;&#x8981;&#x4F9D;&#x8D56;&#x8FD9;&#x4E2A;&#x503C;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x53EF;&#x80FD;&#x5728;&#x590D;&#x5236;&#x843D;&#x540E;&#x7684;&#x5907;&#x5E93;&#x4E0A;&#x4F1A;&#x6709;&#x5F88;&#x5927;&#x7684;&#x504F;&#x5DEE;&#x3002;</li>
<li>&#x5728;&#x539F;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x4E8B;&#x4EF6;&#x4EA7;&#x751F;&#x7684;&#x9519;&#x8BEF;&#x4EE3;&#x7801;&#x3002;&#x5982;&#x679C;&#x4E8B;&#x4EF6;&#x5728;&#x5907;&#x5E93;&#x4E0A;&#x91CD;&#x653E;&#x65F6;&#x5BFC;&#x81F4;&#x4E0D;&#x540C;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x90A3;&#x4E48;&#x590D;&#x5236;&#x5C06;&#x56E0;&#x5B89;&#x5168;&#x9884;&#x8B66;&#x800C;&#x5931;&#x8D25;&#x3002;</li>
</ul>
<p><em>&#x5B89;&#x5168;&#x6E05;&#x9664;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;</em></p>
<p>&#x9700;&#x8981;&#x51B3;&#x5B9A;&#x65E5;&#x5FD7;&#x7684;&#x8FC7;&#x671F;&#x7B56;&#x7565;&#x4EE5;&#x9632;&#x6B62;&#x78C1;&#x76D8;&#x88AB;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x5199;&#x6EE1;&#x3002;&#x65E5;&#x5FD7;&#x589E;&#x957F;&#x591A;&#x5927;&#x53D6;&#x51B3;&#x4E8E;&#x8D1F;&#x8F7D;&#x548C;&#x65E5;&#x5FD7;&#x683C;&#x5F0F;&#x3002;&#x6211;&#x4EEC;&#x5EFA;&#x8BAE;&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x80FD;&#xFF0C;&#x53EA;&#x8981;&#x65E5;&#x5FD7;&#x6709;&#x7528;&#x5C31;&#x5C3D;&#x53EF;&#x80FD;&#x4FDD;&#x7559;&#x3002;&#x4FDD;&#x7559;&#x65E5;&#x5FD7;&#x5BF9;&#x4E8E;&#x8BBE;&#x7F6E;&#x590D;&#x5236;&#x3001;&#x5206;&#x6790;&#x670D;&#x52A1;&#x5668;&#x8D1F;&#x8F7D;&#x3001;&#x5BA1;&#x8BA1;&#x548C;&#x4ECE;&#x4E0A;&#x6B21;&#x5168;&#x5907;&#x6309;&#x65F6;&#x95F4;&#x70B9;&#x8FDB;&#x884C;&#x6062;&#x590D;&#xFF0C;&#x90FD;&#x5F88;&#x6709;&#x5E2E;&#x52A9;&#x3002;&#x5F53;&#x51B3;&#x5B9A;&#x60F3;&#x8981;&#x4FDD;&#x7559;&#x65E5;&#x5FD7;&#x591A;&#x4E45;&#x65F6;&#xFF0C;&#x5E94;&#x8BE5;&#x8003;&#x8651;&#x8FD9;&#x4E9B;&#x9700;&#x6C42;&#x3002;</p>
<p>&#x4E00;&#x4E2A;&#x5E38;&#x89C1;&#x7684;&#x8BBE;&#x7F6E;&#x65F6;&#x4F7F;&#x7528;<code>expire_logs_days</code>&#x53D8;&#x91CF;&#x6765;&#x544A;&#x8BC9;MySQL&#x5B9A;&#x671F;&#x6E05;&#x7406;&#x65E5;&#x5FD7;&#x3002;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x76F4;&#x5230;MySQL4.1&#x624D;&#x5F15;&#x5165;&#xFF0C;&#x5728;&#x6B64;&#x4E4B;&#x524D;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x5FC5;&#x987B;&#x624B;&#x52A8;&#x6E05;&#x7406;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x3002;&#x5728;&#x65B0;&#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x7528;<code>rm</code>&#x5220;&#x9664;&#x65E5;&#x5FD7;&#x4F1A;&#x5BFC;&#x81F4;<code>mysqlbin.index</code>&#x72B6;&#x6001;&#x6587;&#x4EF6;&#x4E0E;&#x78C1;&#x76D8;&#x4E0A;&#x7684;&#x6587;&#x4EF6;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x6709;&#x4E9B;&#x8BED;&#x53E5;&#xFF0C;&#x4F8B;&#x5982;s<code>how master logs</code>&#x53EF;&#x80FD;&#x4F1A;&#x53D7;&#x5230;&#x5F71;&#x54CD;&#x800C;&#x5931;&#x8D25;&#x3002;&#x624B;&#x52A8;&#x4FEE;&#x6539;<code>mysqlbin.index</code>&#x6587;&#x4EF6;&#x4E5F;&#x4E0D;&#x80FD;&#x4FEE;&#x590D;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;&#x5E94;&#x8BE5;&#x7528;&#x7C7B;&#x6B21;&#x4E0B;&#x9762;&#x7684;<code>cron</code>&#x547D;&#x4EE4;&#x3002;</p>
<p><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 0 * * * /usr/bin/mysql -e &quot;purge master logs before current_date - interval n day&quot;</span><br></pre></td></tr></table></figure></p>
<p><code>expire_logs_days</code>&#x8BBE;&#x7F6E;&#x5728;&#x670D;&#x52A1;&#x5668;&#x542F;&#x52A8;&#x6216;MySQL&#x5207;&#x6362;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x65F6;&#x751F;&#x6548;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x4ECE;&#x6CA1;&#x6709;&#x589E;&#x957F;&#x548C;&#x5207;&#x6362;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x4F1A;&#x6E05;&#x9664;&#x8001;&#x6761;&#x76EE;&#x3002;&#x6B64;&#x8BBE;&#x7F6E;&#x65F6;&#x901A;&#x8FC7;&#x67E5;&#x770B;&#x65E5;&#x5FD7;&#x7684;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x800C;&#x4E0D;&#x662F;&#x5185;&#x5BB9;&#x6765;&#x51B3;&#x5B9A;&#x54EA;&#x4E2A;&#x6587;&#x4EF6;&#x9700;&#x8981;&#x88AB;&#x6E05;&#x9664;&#x3002;</p>
<p><em>MYSQLBINLOG&#x547D;&#x4EE4;</em></p>
<p>mysqlbinlog /var/lib/mysql-log/mariadb.000001</p>
<ul>
<li>&#x2013;start-datetime=name &#x8D77;&#x59CB;&#x65F6;&#x95F4;&#x70B9;</li>
<li>&#x2013;stop-datetime=name  &#x7ED3;&#x675F;&#x65F6;&#x95F4;&#x70B9;</li>
</ul>
<p>mysqlbinlog &#x2013;stop-datetime=&#x201D;2016-08-31 11:19:12&#x201D;</p>
<ul>
<li>&#x2013;start-position=pos  &#x4F4D;&#x7F6E;&#x7F16;&#x53F7; &#x552F;&#x4E00;&#xFF0C;&#x589E;&#x5927; at</li>
<li>&#x2013;stop-position=pos</li>
</ul>
<h4 id="&#x57FA;&#x4E8E;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x7684;&#x5B9E;&#x65F6;&#x589E;&#x91CF;&#x8FD8;&#x539F;"><a href="#&#x57FA;&#x4E8E;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x7684;&#x5B9E;&#x65F6;&#x589E;&#x91CF;&#x8FD8;&#x539F;" class="headerlink" title="&#x57FA;&#x4E8E;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x7684;&#x5B9E;&#x65F6;&#x589E;&#x91CF;&#x8FD8;&#x539F;"></a>&#x57FA;&#x4E8E;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x7684;&#x5B9E;&#x65F6;&#x589E;&#x91CF;&#x8FD8;&#x539F;</h4><p><img src="/2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/18-mysqlbinlog1.emf.png" alt="mysqlbinlog"></p>
<h5 id="&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6A21;&#x62DF;&#x4E00;"><a href="#&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6A21;&#x62DF;&#x4E00;" class="headerlink" title="&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6A21;&#x62DF;&#x4E00;"></a>&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6A21;&#x62DF;&#x4E00;</h5><p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">	1)11:00 mysqldump db1.t1 1 2 3 4 5 6</span><br><span class="line">	2)11:00-12:00 insert 7 8 9 update 1--&#x300B;10 delete 2</span><br><span class="line">	3)12:00 &#x4EBA;&#x4E3A;&#x8BEF;&#x64CD;&#x4F5C; delete db1.t1</span><br><span class="line">--------------------------</span><br><span class="line">	&#x6062;&#x590D;&#x6570;&#x636E;&#xFF0C;&#x8FD8;&#x539F;&#x7684;&#x6807;&#x51C6;&#x6B65;&#x9AA4;&#xFF1A;</span><br><span class="line">	1)&#x505C;&#x6B62;&#x670D;&#x52A1;	systemctl stop mariadb</span><br><span class="line">	2)&#x6E05;&#x7A7A;&#x73AF;&#x5883;	rm -rf /var/lib/mysql/*</span><br><span class="line">	3)&#x542F;&#x52A8;&#x670D;&#x52A1;	systemctl start mariadb</span><br><span class="line">	4)&#x5BFC;&#x5165;&#x5168;&#x5907;&#x4EFD;&#x6570;&#x636E;	mysql &lt; /tmp/mysql.11.sql</span><br><span class="line">	5)&#x5237;&#x65B0;&#x6388;&#x6743;	&gt; flush privileges;</span><br><span class="line">	6)&#x6D4B;&#x8BD5;&#xFF0C;&#x5168;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x662F;&#x5426;&#x6B63;&#x786E;	&gt; select * from db1.t1;</span><br><span class="line">	7)&#x67E5;&#x770B;&#x5206;&#x6790;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;---&#x300B;&#x5F97;&#x5230;&#x6B63;&#x786E;&#x7684;&#x64CD;&#x4F5C;&#x547D;&#x4EE4;&#xFF0C;&#x8DF3;&#x8FC7;&#x9519;&#x8BEF;&#x7684;	mysqlbinlog /var/lib/mysql-log/master.00000X</span><br><span class="line">			* &#x81EA;&#x5DF1;&#x8BB0;&#x4E0B;&#x6765;&#xFF0C;&#x505A;&#x5168;&#x5907;&#x4EFD;&#x7684;&#x65F6;&#x5019;</span><br><span class="line">			* &#x8BF7;&#x522B;&#x4EBA;&#x8BB0;&#xFF0C;&#x5168;&#x5907;&#x4EFD;&#x6587;&#x4EF6; --master-data=2 &#x6587;&#x4EF6;&#x7684;&#x7B2C;22&#x884C;</span><br><span class="line">			&#x5206;&#x6790;&#xFF1A;</span><br><span class="line">				* &#x81EA;&#x5DF1;&#x770B;&#xFF0C;&#x7528;&#x773C;&#x775B;&#x627E;</span><br><span class="line">				* grep &#x622A;&#x53D6;&#x5173;&#x952E;&#x5B57; &#xFF0C;delete drop -B &#x663E;&#x793A;&#x524D;&#x9762;&#x7684;&#x51E0;&#x884C;</span><br><span class="line">	8)&#x5BFC;&#x5165;&#x589E;&#x91CF;&#x5907;&#x4EFD;	&#x901A;&#x8FC7;&#x7BA1;&#x9053;&#x5BFC;&#x5165;&#x6570;&#x636E;&#x5E93;</span><br><span class="line">			mysqlbinlog --stop-datetime=&apos;2016-08-31 11:19:12&apos; /var/lib/mysql-log/mastera.000002 | mysql -uroot -puplooking</span><br><span class="line">	9)&#x6D4B;&#x8BD5;&#xFF0C;&#x67E5;&#x770B;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x662F;&#x5426;&#x6B63;&#x786E;</span><br><span class="line">	10)&#x5168;&#x5907;&#x4EFD;	mysqldump -uroot -puplooking -A --single-transaction --master-data=2 --flush-logs &gt; /tmp/mysql.12.mysql</span><br></pre></td></tr></table></figure></p>
<h5 id="&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6A21;&#x62DF;&#x4E8C;"><a href="#&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6A21;&#x62DF;&#x4E8C;" class="headerlink" title="&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6A21;&#x62DF;&#x4E8C;"></a>&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6A21;&#x62DF;&#x4E8C;</h5><p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1)12:00 mysqldump db1.t1 3 4 5 6 7 8 9 10</span><br><span class="line">2)12:00-14:00 	&#x6B63;&#x5E38;&#x7684;&#x5199;&#xFF1A;insert db1.t1  11 12</span><br><span class="line">		&#x4EBA;&#x4E3A;&#x8BEF;&#x64CD;&#x4F5C; delete from db1.t1;</span><br><span class="line">		&#x6B63;&#x5E38;&#x7684;&#x5199;&#xFF1A;</span><br><span class="line">			Create database db2;</span><br><span class="line">			Create table db2.t1 (id int);</span><br><span class="line">		&#x4EBA;&#x4E3A;&#x8BEF;&#x64CD;&#x4F5C;</span><br><span class="line">			Drop table  db2.t1;</span><br><span class="line">3)14:00 &#x6062;&#x590D;</span><br><span class="line"></span><br><span class="line">start	&#x5F00;&#x5934;</span><br><span class="line">stop	2016-08-31 13:45:02</span><br><span class="line"></span><br><span class="line">start	2016-08-31 13:45:10</span><br><span class="line">stop	2016-08-31 13:45:42</span><br></pre></td></tr></table></figure><br><img src="/2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/19-mysqlbinlog2.emf.png" alt="mysqlbinlog3"></p>
<h5 id="&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6A21;&#x62DF;&#x4E09;"><a href="#&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6A21;&#x62DF;&#x4E09;" class="headerlink" title="&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6A21;&#x62DF;&#x4E09;"></a>&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6A21;&#x62DF;&#x4E09;</h5><p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1)14:00 	mysqldump db1.t1 3 4 5 6 7 8 9 10 11 12 db2.t1</span><br><span class="line">2)14:00-16:00 	</span><br><span class="line">		insert into db1.t1 values (13),(14);</span><br><span class="line">		delete from db1.t1;</span><br><span class="line">		insert into db2.t1 values (1),(2),(3);</span><br><span class="line">		delete from db2.t1;</span><br><span class="line">		insert into db2.t1 values (4),(5);</span><br><span class="line">3)16:00 &#x6062;&#x590D;</span><br><span class="line">		start at 245	at 598  at 953</span><br><span class="line">		stop  at 430	at 785	at 1136</span><br></pre></td></tr></table></figure></p>
<h5 id="&#x8BFE;&#x5802;&#x5B9E;&#x6218;5&#xFF1A;&#x57FA;&#x4E8E;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x65F6;&#x95F4;&#x70B9;&#x548C;&#x4F4D;&#x7F6E;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6A21;&#x62DF;"><a href="#&#x8BFE;&#x5802;&#x5B9E;&#x6218;5&#xFF1A;&#x57FA;&#x4E8E;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x65F6;&#x95F4;&#x70B9;&#x548C;&#x4F4D;&#x7F6E;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6A21;&#x62DF;" class="headerlink" title="&#x8BFE;&#x5802;&#x5B9E;&#x6218;5&#xFF1A;&#x57FA;&#x4E8E;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x65F6;&#x95F4;&#x70B9;&#x548C;&#x4F4D;&#x7F6E;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6A21;&#x62DF;"></a>&#x8BFE;&#x5802;&#x5B9E;&#x6218;5&#xFF1A;&#x57FA;&#x4E8E;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x65F6;&#x95F4;&#x70B9;&#x548C;&#x4F4D;&#x7F6E;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6A21;&#x62DF;</h5><p><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> &#x6253;&#x5F00;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7; open binlog</span></span><br><span class="line">[root@mastera0 ~]# setenforce 0</span><br><span class="line">[root@mastera0 ~]# getenforce</span><br><span class="line">Permissive</span><br><span class="line">[root@mastera0 ~]# vim /etc/my.cnf</span><br><span class="line">[root@mastera0 ~]# mkdir /var/lib/mysql-log</span><br><span class="line">[root@mastera0 ~]# chown mysql. /var/lib/mysql-log</span><br><span class="line">[root@mastera0 ~]# ll -d /var/lib/mysql-log</span><br><span class="line">drwxr-xr-x. 2 mysql mysql 6 Aug 31 10:33 /var/lib/mysql-log</span><br><span class="line">[root@mastera0 ~]# systemctl start mariadb</span><br><span class="line">[root@mastera0 ~]# cd /var/lib/mysql-log</span><br><span class="line">[root@mastera0 mysql-log]# ll</span><br><span class="line">total 8</span><br><span class="line">-rw-rw----. 1 mysql mysql 245 Aug 31 10:35 mastera.000001</span><br><span class="line">-rw-rw----. 1 mysql mysql  34 Aug 31 10:35 mastera.index</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> &#x6267;&#x884C;&#x5199;&#x64CD;&#x4F5C;	ddl dcl dml</span></span><br><span class="line">[root@mastera0 ~]# mysql -uroot -puplooking</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 2</span><br><span class="line">Server version: 5.5.44-MariaDB-log MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db1.t1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  1 |</span><br><span class="line">|  2 |</span><br><span class="line">+----+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; insert into db1.t1 values (3),(4);</span><br><span class="line">Query OK, 2 rows affected (0.04 sec)</span><br><span class="line">Records: 2  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db1.t1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  1 |</span><br><span class="line">|  2 |</span><br><span class="line">|  3 |</span><br><span class="line">|  4 |</span><br><span class="line">+----+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; insert into db1.t1 values (5),(6);</span><br><span class="line">Query OK, 2 rows affected (0.03 sec)</span><br><span class="line">Records: 2  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db1.t1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  1 |</span><br><span class="line">|  2 |</span><br><span class="line">|  3 |</span><br><span class="line">|  4 |</span><br><span class="line">|  5 |</span><br><span class="line">|  6 |</span><br><span class="line">+----+</span><br><span class="line">6 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> &#x67E5;&#x770B;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;	mysqlbinlog</span></span><br><span class="line">[root@mastera0 mysql-log]# mysqlbinlog /var/lib/mysql-log/mastera.000001 |sed &apos;s@\/\*.*\*\/@@&apos;|sed -n &apos;/BEGIN/,$p&apos;</span><br><span class="line">BEGIN</span><br><span class="line">;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 309</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 10:44:02 server id 1  end_log_pos 401 	Query	thread_id=2	exec_time=0	error_code=0</span></span><br><span class="line">SET TIMESTAMP=1472611442;</span><br><span class="line">insert into db1.t1 values (3),(4)</span><br><span class="line">;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 401</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 10:44:02 server id 1  end_log_pos 428 	Xid = 5</span></span><br><span class="line">COMMIT;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 428</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 10:44:29 server id 1  end_log_pos 492 	Query	thread_id=2	exec_time=0	error_code=0</span></span><br><span class="line">SET TIMESTAMP=1472611469;</span><br><span class="line">BEGIN</span><br><span class="line">;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 492</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 10:44:29 server id 1  end_log_pos 584 	Query	thread_id=2	exec_time=0	error_code=0</span></span><br><span class="line">SET TIMESTAMP=1472611469;</span><br><span class="line">insert into db1.t1 values (5),(6)</span><br><span class="line">;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 584</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 10:44:29 server id 1  end_log_pos 611 	Xid = 7</span></span><br><span class="line">COMMIT;</span><br><span class="line">DELIMITER ;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> End of <span class="hljs-built_in">log</span> file</span></span><br><span class="line">ROLLBACK ;</span><br><span class="line">;</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@mastera0 mysql-log]# mysqlbinlog /var/lib/mysql-log/mastera.000001 |sed &apos;s@\/\*.*\*\/@@&apos;|sed -n &apos;/BEGIN/,$p&apos;|sed -n &apos;/^[^#]/p&apos;</span><br><span class="line">BEGIN</span><br><span class="line">;</span><br><span class="line">SET TIMESTAMP=1472611442;</span><br><span class="line">insert into db1.t1 values (3),(4)</span><br><span class="line">;</span><br><span class="line">COMMIT;</span><br><span class="line">SET TIMESTAMP=1472611469;</span><br><span class="line">BEGIN</span><br><span class="line">;</span><br><span class="line">SET TIMESTAMP=1472611469;</span><br><span class="line">insert into db1.t1 values (5),(6)</span><br><span class="line">;</span><br><span class="line">COMMIT;</span><br><span class="line">DELIMITER ;</span><br><span class="line">ROLLBACK ;</span><br><span class="line">;</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">---------------------------------------</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> &#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6F14;&#x4E60;1</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># &#x6A21;&#x62DF;&#x573A;&#x666F;</span></span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment">## &#x5168;&#x5907;&#x4EFD;</span></span></span><br><span class="line">[root@mastera0 ~]# mysqldump -uroot -puplooking -A --single-transaction --master-data=2 --flush-logs &gt; /tmp/mysql.11.mysql</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment">## &#x6A21;&#x62DF;&#x6B63;&#x786E;&#x64CD;&#x4F5C;&#x548C;&#x9519;&#x8BEF;&#x64CD;&#x4F5C;</span></span></span><br><span class="line">MariaDB [(none)]&gt; insert into db1.t1 values (7),(8),(9);</span><br><span class="line">Query OK, 3 rows affected (0.04 sec)</span><br><span class="line">Records: 3  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; update db1.t1 set id=10 where id=1;</span><br><span class="line">Query OK, 1 row affected (0.04 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; delete from db1.t1 where id=2;</span><br><span class="line">Query OK, 1 row affected (0.04 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db1.t1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  3 |</span><br><span class="line">|  4 |</span><br><span class="line">|  5 |</span><br><span class="line">|  6 |</span><br><span class="line">|  7 |</span><br><span class="line">|  8 |</span><br><span class="line">|  9 |</span><br><span class="line">| 10 |</span><br><span class="line">+----+</span><br><span class="line">8 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; delete from db1.t1;</span><br><span class="line">Query OK, 8 rows affected (0.04 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db1.t1;</span><br><span class="line">Empty set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; \q</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># &#x5F00;&#x59CB;&#x6062;&#x590D;&#x6570;&#x636E;</span></span></span><br><span class="line"></span><br><span class="line">[root@mastera0 ~]# mysql -uroot -puplooking</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 9</span><br><span class="line">Server version: 5.5.44-MariaDB-log MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db1.t1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  3 |</span><br><span class="line">|  4 |</span><br><span class="line">|  5 |</span><br><span class="line">|  6 |</span><br><span class="line">|  7 |</span><br><span class="line">|  8 |</span><br><span class="line">|  9 |</span><br><span class="line">| 10 |</span><br><span class="line">| 11 |</span><br><span class="line">| 12 |</span><br><span class="line">+----+</span><br><span class="line">10 rows in set (0.01 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; desc db2.t1;</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| Field | Type    | Null | Key | Default | Extra |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| id    | int(11) | NO   | PRI | NULL    |       |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db2.t1;</span><br><span class="line">Empty set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; \q</span><br><span class="line">Bye</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># &#x5168;&#x5907;&#x4EFD;</span></span></span><br><span class="line">[root@mastera0 ~]# mysqldump -uroot -puplooking -A --single-transaction --master-data=2 --flush-logs &gt; /tmp/mysql.12.mysql</span><br><span class="line"></span><br><span class="line">---------------------------------------</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> &#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6F14;&#x4E60;2</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># &#x6A21;&#x62DF;&#x573A;&#x666F;</span></span></span><br><span class="line">[root@mastera0 ~]# mysql -uroot -puplooking</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 9</span><br><span class="line">Server version: 5.5.44-MariaDB-log MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; insert into db1.t1 values (11),(12);</span><br><span class="line">Query OK, 2 rows affected (0.04 sec)</span><br><span class="line">Records: 2  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; delete from db1.t1;</span><br><span class="line">Query OK, 10 rows affected (0.03 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; create database db2;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; create table db2.t1 (id int primary key);</span><br><span class="line">Query OK, 0 rows affected (0.05 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; drop table db2.t1;</span><br><span class="line">Query OK, 0 rows affected (0.03 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| db1                |</span><br><span class="line">| db2                |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| test               |</span><br><span class="line">+--------------------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db1.t1;</span><br><span class="line">Empty set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db2.t1;</span><br><span class="line">ERROR 1146 (42S02): Table \&apos;db2.t1\&apos; doesn\&apos;t exist</span><br><span class="line">MariaDB [(none)]&gt; \q</span><br><span class="line">Bye</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># &#x6570;&#x636E;&#x8FD8;&#x539F;</span></span></span><br><span class="line">[root@mastera0 ~]# systemctl stop mariadb</span><br><span class="line">[root@mastera0 ~]# rm -rf /var/lib/mysql/*</span><br><span class="line">[root@mastera0 ~]# systemctl start mariadb</span><br><span class="line">[root@mastera0 ~]# mysql &lt; /tmp/mysql.12.mysql</span><br><span class="line">[root@mastera0 ~]# mysql</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 3</span><br><span class="line">Server version: 5.5.44-MariaDB-log MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; \q</span><br><span class="line">Bye</span><br><span class="line">[root@mastera0 ~]# mysql -uroot -puplooking</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 4</span><br><span class="line">Server version: 5.5.44-MariaDB-log MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from t1;</span><br><span class="line">ERROR 1046 (3D000): No database selected</span><br><span class="line">MariaDB [(none)]&gt; select * from db1.t1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  3 |</span><br><span class="line">|  4 |</span><br><span class="line">|  5 |</span><br><span class="line">|  6 |</span><br><span class="line">|  7 |</span><br><span class="line">|  8 |</span><br><span class="line">|  9 |</span><br><span class="line">| 10 |</span><br><span class="line">+----+</span><br><span class="line">8 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; \q</span><br><span class="line">Bye</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment">## &#x589E;&#x91CF;&#x5907;&#x4EFD;&#x8FD8;&#x539F;</span></span></span><br><span class="line">[root@mastera0 mysql-log]# mysqlbinlog --stop-datetime=&apos;2016-08-31 13:45:02&apos; /var/lib/mysql-log/mastera.000006|mysql -uroot -puplooking</span><br><span class="line"></span><br><span class="line">[root@mastera0 mysql-log]# mysqlbinlog --start-datetime=&apos;2016-08-31 13:45:10&apos; --stop-datetime=&apos;2016-08-31 13:45:42&apos; /var/lib/mysql-log/mastera.000006|mysql -uroot -puplooking</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment">## &#x68C0;&#x6D4B;</span></span></span><br><span class="line">[root@mastera0 mysql-log]# mysql -uroot -puplookingWelcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 8</span><br><span class="line">Server version: 5.5.44-MariaDB-log MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| db1                |</span><br><span class="line">| db2                |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| test               |</span><br><span class="line">+--------------------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db1.t1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  3 |</span><br><span class="line">|  4 |</span><br><span class="line">|  5 |</span><br><span class="line">|  6 |</span><br><span class="line">|  7 |</span><br><span class="line">|  8 |</span><br><span class="line">|  9 |</span><br><span class="line">| 10 |</span><br><span class="line">| 11 |</span><br><span class="line">| 12 |</span><br><span class="line">+----+</span><br><span class="line">10 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; use db2;</span><br><span class="line">Reading table information for completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line">MariaDB [db2]&gt; show tables;</span><br><span class="line">+---------------+</span><br><span class="line">| Tables_in_db2 |</span><br><span class="line">+---------------+</span><br><span class="line">| t1            |</span><br><span class="line">+---------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [db2]&gt; desc t1;</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| Field | Type    | Null | Key | Default | Extra |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| id    | int(11) | NO   | PRI | NULL    |       |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">1 row in set (0.01 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [db2]&gt; show table status\G;</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">           Name: t1</span><br><span class="line">         Engine: InnoDB</span><br><span class="line">        Version: 10</span><br><span class="line">     Row_format: Compact</span><br><span class="line">           Rows: 0</span><br><span class="line"> Avg_row_length: 0</span><br><span class="line">    Data_length: 16384</span><br><span class="line">Max_data_length: 0</span><br><span class="line">   Index_length: 0</span><br><span class="line">      Data_free: 10485760</span><br><span class="line"> Auto_increment: NULL</span><br><span class="line">    Create_time: 2016-08-31 14:56:22</span><br><span class="line">    Update_time: NULL</span><br><span class="line">     Check_time: NULL</span><br><span class="line">      Collation: latin1_swedish_ci</span><br><span class="line">       Checksum: NULL</span><br><span class="line"> Create_options:</span><br><span class="line">        Comment:</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">ERROR: No query specified</span><br><span class="line"></span><br><span class="line">MariaDB [db2]&gt; exit</span><br><span class="line">Bye</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@mastera0 mysql-log]# mysqldump -uroot -puplooking -A --master-data=2 --flush-logs &gt; /tmp/mysql.14.mysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">----------------------------------</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> &#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6F14;&#x4E60;3</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># &#x6A21;&#x62DF;&#x573A;&#x666F;</span></span></span><br><span class="line">[root@mastera0 mysql-log]# vim /tmp/mysql.test.sql</span><br><span class="line">[root@mastera0 mysql-log]# cat /tmp/mysql.test.sql</span><br><span class="line">insert into db1.t1 values (13),(14);</span><br><span class="line">delete from db1.t1;</span><br><span class="line">insert into db2.t1 values (1),(2),(3);</span><br><span class="line">delete from db2.t1;</span><br><span class="line">insert into db2.t1 values (4),(5);</span><br><span class="line">[root@mastera0 mysql-log]# mysql -uroot -puplooking &lt; /tmp/mysql.test.sql</span><br><span class="line">[root@mastera0 mysql-log]# mysql -uroot -puplooking</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 12</span><br><span class="line">Server version: 5.5.44-MariaDB-log MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db1.t1;</span><br><span class="line">Empty set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db2.t1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  4 |</span><br><span class="line">|  5 |</span><br><span class="line">+----+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; \q</span><br><span class="line">Bye</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># &#x6570;&#x636E;&#x8FD8;&#x539F;</span></span></span><br><span class="line">[root@mastera0 ~]# systemctl stop mariadb</span><br><span class="line">[root@mastera0 ~]# rm -rf /var/lib/mysql/*</span><br><span class="line">[root@mastera0 ~]# systemctl start mariadb</span><br><span class="line">[root@mastera0 ~]# mysql &lt; /tmp/mysql.14.mysql</span><br><span class="line">[root@mastera0 ~]# mysql</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 3</span><br><span class="line">Server version: 5.5.44-MariaDB-log MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; \q</span><br><span class="line">Bye</span><br><span class="line">[root@mastera0 ~]# mysql -uroot -puplooking</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 4</span><br><span class="line">Server version: 5.5.44-MariaDB-log MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db1.t1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  3 |</span><br><span class="line">|  4 |</span><br><span class="line">|  5 |</span><br><span class="line">|  6 |</span><br><span class="line">|  7 |</span><br><span class="line">|  8 |</span><br><span class="line">|  9 |</span><br><span class="line">| 10 |</span><br><span class="line">| 11 |</span><br><span class="line">| 12 |</span><br><span class="line">+----+</span><br><span class="line">10 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db2.t1;</span><br><span class="line">Empty set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; \q</span><br><span class="line">Bye</span><br><span class="line">[root@mastera0 ~]# sed -n &apos;22p&apos; /tmp/mysql.14.mysql</span><br><span class="line">-- CHANGE MASTER TO MASTER_LOG_FILE=&apos;mastera.000015&apos;, MASTER_LOG_POS=245;</span><br><span class="line">[root@mastera0 ~]# mysqlbinlog /var/lib/mysql-log/mastera.000015</span><br><span class="line">/*!50530 SET @@SESSION.PSEUDO_SLAVE_MODE=1*/;</span><br><span class="line">/*!40019 SET @@session.max_insert_delayed_threads=0*/;</span><br><span class="line">/*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/;</span><br><span class="line">DELIMITER /*!*/;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 4</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 15:06:16 server id 1  end_log_pos 245 	Start: binlog v 4, server v 5.5.44-MariaDB-log created 160831 15:06:16</span></span><br><span class="line">BINLOG \&apos;</span><br><span class="line">6IHGVw8BAAAA8QAAAPUAAAAAAAQANS41LjQ0LU1hcmlhREItbG9nAAAAAAAAAAAAAAAAAAAAAAAA</span><br><span class="line">AAAAAAAAAAAAAAAAAAAAAAAAEzgNAAgAEgAEBAQEEgAA2QAEGggAAAAICAgCAAAAAAAAAAAAAAAA</span><br><span class="line">AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</span><br><span class="line">AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</span><br><span class="line">AAAAAAAAAAAAAKeZqQ==</span><br><span class="line">\&apos;/*!*/;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 245</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 15:09:29 server id 1  end_log_pos 309 	Query	thread_id=11	exec_time=0	error_code=0</span></span><br><span class="line">SET TIMESTAMP=1472627369/*!*/;</span><br><span class="line">SET @@session.pseudo_thread_id=11/*!*/;</span><br><span class="line">SET @@session.foreign_key_checks=1, @@session.sql_auto_is_null=0, @@session.unique_checks=1, @@session.autocommit=1/*!*/;</span><br><span class="line">SET @@session.sql_mode=0/*!*/;</span><br><span class="line">SET @@session.auto_increment_increment=1, @@session.auto_increment_offset=1/*!*/;</span><br><span class="line">/*!\C utf8 *//*!*/;</span><br><span class="line">SET @@session.character_set_client=33,@@session.collation_connection=33,@@session.collation_server=8/*!*/;</span><br><span class="line">SET @@session.lc_time_names=0/*!*/;</span><br><span class="line">SET @@session.collation_database=DEFAULT/*!*/;</span><br><span class="line">BEGIN</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 309</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 15:09:29 server id 1  end_log_pos 403 	Query	thread_id=11	exec_time=0	error_code=0</span></span><br><span class="line">SET TIMESTAMP=1472627369/*!*/;</span><br><span class="line">insert into db1.t1 values (13),(14)</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 403</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 15:09:29 server id 1  end_log_pos 430 	Xid = 646</span></span><br><span class="line">COMMIT/*!*/;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 430</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 15:09:29 server id 1  end_log_pos 494 	Query	thread_id=11	exec_time=0	error_code=0</span></span><br><span class="line">SET TIMESTAMP=1472627369/*!*/;</span><br><span class="line">BEGIN</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 494</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 15:09:29 server id 1  end_log_pos 571 	Query	thread_id=11	exec_time=0	error_code=0</span></span><br><span class="line">SET TIMESTAMP=1472627369/*!*/;</span><br><span class="line">delete from db1.t1</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 571</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 15:09:29 server id 1  end_log_pos 598 	Xid = 647</span></span><br><span class="line">COMMIT/*!*/;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 598</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 15:09:29 server id 1  end_log_pos 662 	Query	thread_id=11	exec_time=0	error_code=0</span></span><br><span class="line">SET TIMESTAMP=1472627369/*!*/;</span><br><span class="line">BEGIN</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 662</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 15:09:29 server id 1  end_log_pos 758 	Query	thread_id=11	exec_time=0	error_code=0</span></span><br><span class="line">SET TIMESTAMP=1472627369/*!*/;</span><br><span class="line">insert into db2.t1 values (1),(2),(3)</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 758</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 15:09:29 server id 1  end_log_pos 785 	Xid = 648</span></span><br><span class="line">COMMIT/*!*/;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 785</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 15:09:29 server id 1  end_log_pos 849 	Query	thread_id=11	exec_time=0	error_code=0</span></span><br><span class="line">SET TIMESTAMP=1472627369/*!*/;</span><br><span class="line">BEGIN</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 849</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 15:09:29 server id 1  end_log_pos 926 	Query	thread_id=11	exec_time=0	error_code=0</span></span><br><span class="line">SET TIMESTAMP=1472627369/*!*/;</span><br><span class="line">delete from db2.t1</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 926</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 15:09:29 server id 1  end_log_pos 953 	Xid = 649</span></span><br><span class="line">COMMIT/*!*/;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 953</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 15:09:29 server id 1  end_log_pos 1017 	Query	thread_id=11	exec_time=0	error_code=0</span></span><br><span class="line">SET TIMESTAMP=1472627369/*!*/;</span><br><span class="line">BEGIN</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 1017</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 15:09:29 server id 1  end_log_pos 1109 	Query	thread_id=11	exec_time=0	error_code=0</span></span><br><span class="line">SET TIMESTAMP=1472627369/*!*/;</span><br><span class="line">insert into db2.t1 values (4),(5)</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 1109</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 15:09:29 server id 1  end_log_pos 1136 	Xid = 650</span></span><br><span class="line">COMMIT/*!*/;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> at 1136</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">160831 15:10:32 server id 1  end_log_pos 1155 	Stop</span></span><br><span class="line">DELIMITER ;</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> End of <span class="hljs-built_in">log</span> file</span></span><br><span class="line">ROLLBACK /* added by mysqlbinlog */;</span><br><span class="line">/*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/;</span><br><span class="line">/*!50530 SET @@SESSION.PSEUDO_SLAVE_MODE=0*/;</span><br><span class="line">[root@mastera0 ~]#</span><br><span class="line">[root@mastera0 ~]# mysqlbinlog --start-position=245 --stop-position=430 /var/lib/mysql-log/mastera.000015|mysql -uroot -puplooking</span><br><span class="line">[root@mastera0 ~]# mysqlbinlog --start-position=598 --stop-position=785 /var/lib/mysql-log/mastera.000015|mysql -uroot -puplooking</span><br><span class="line">[root@mastera0 ~]# mysqlbinlog --start-position=953 --stop-position=1136 /var/lib/mysql-log/mastera.000015|mysql -uroot -puplooking</span><br><span class="line">[root@mastera0 ~]# mysql -uroot -puplooking</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 8</span><br><span class="line">Server version: 5.5.44-MariaDB-log MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db1.t1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  3 |</span><br><span class="line">|  4 |</span><br><span class="line">|  5 |</span><br><span class="line">|  6 |</span><br><span class="line">|  7 |</span><br><span class="line">|  8 |</span><br><span class="line">|  9 |</span><br><span class="line">| 10 |</span><br><span class="line">| 11 |</span><br><span class="line">| 12 |</span><br><span class="line">| 13 |</span><br><span class="line">| 14 |</span><br><span class="line">+----+</span><br><span class="line">12 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db2.t1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  1 |</span><br><span class="line">|  2 |</span><br><span class="line">|  3 |</span><br><span class="line">|  4 |</span><br><span class="line">|  5 |</span><br><span class="line">+----+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; \q</span><br><span class="line"></span><br><span class="line">[root@mastera0 mysql-log]# vim /tmp/mysql.test.sql</span><br><span class="line">[root@mastera0 mysql-log]# cat /tmp/mysql.test.sql</span><br><span class="line">insert into db1.t1 values (13),(14);</span><br><span class="line">delete from db1.t1;</span><br><span class="line">insert into db2.t1 values (1),(2),(3);</span><br><span class="line">delete from db2.t1;</span><br><span class="line">insert into db2.t1 values (4),(5);</span><br><span class="line">[root@mastera0 mysql-log]# mysql -uroot -puplooking &lt; /tmp/mysql.test.sql</span><br><span class="line">[root@mastera0 mysql-log]# mysql -uroot -puplooking</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 12</span><br><span class="line">Server version: 5.5.44-MariaDB-log MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2015, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db1.t1;</span><br><span class="line">Empty set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select * from db2.t1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  4 |</span><br><span class="line">|  5 |</span><br><span class="line">+----+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; \q</span><br><span class="line">Bye</span><br><span class="line">[root@mastera0 mysql-log]# mysqldump -uroot -puplooking -A --master-data=2 --flush-logs &gt; /tmp/mysql.16.mysql</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="&#x8BBE;&#x8BA1;-MySQL-&#x5907;&#x4EFD;&#x8BA1;&#x5212;"><a href="#&#x8BBE;&#x8BA1;-MySQL-&#x5907;&#x4EFD;&#x8BA1;&#x5212;" class="headerlink" title="&#x8BBE;&#x8BA1; MySQL &#x5907;&#x4EFD;&#x8BA1;&#x5212;"></a>&#x8BBE;&#x8BA1; MySQL &#x5907;&#x4EFD;&#x8BA1;&#x5212;</h3><p>&#x5907;&#x4EFD;MySQL&#x6BD4;&#x770B;&#x8D77;&#x6765;&#x96BE;&#x3002;&#x6700;&#x57FA;&#x672C;&#x7684;&#xFF0C;&#x5907;&#x4EFD;&#x4EC5;&#x662F;&#x6570;&#x636E;&#x7684;&#x4E00;&#x4E2A;&#x526F;&#x672C;&#xFF0C;&#x4F46;&#x662F;&#x53D7;&#x9650;&#x4E8E;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x8981;&#x6C42;&#x3001;MySQL&#x7684;&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x67B6;&#x6784;&#xFF0C;&#x4EE5;&#x53CA;&#x7CFB;&#x7EDF;&#x914D;&#x7F6E;&#x7B49;&#x56E0;&#x7D20;&#xFF0C;&#x4F1A;&#x8BA9;&#x590D;&#x5236;&#x4E00;&#x4EFD;&#x6570;&#x636E;&#x53D8;&#x5F97;&#x56F0;&#x96BE;&#x3002;</p>
<ul>
<li>&#x5728;&#x751F;&#x4EA7;&#x5B9E;&#x8DF5;&#x4E2D;&#xFF0C;&#x5BF9;&#x4E8E;&#x5927;&#x6570;&#x636E;&#x5E93;&#x6765;&#x8BF4;&#xFF0C;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x662F;&#x5FC5;&#x987B;&#x7684;&#xFF1A;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x592A;&#x6162;&#x5E76;&#x53D7;&#x5230;&#x8D44;&#x6E90;&#x9650;&#x5236;&#xFF0C;&#x4ECE;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x4E2D;&#x6062;&#x590D;&#x9700;&#x8981;&#x5F88;&#x957F;&#x65F6;&#x95F4;&#x3002;&#x57FA;&#x4E8E;&#x5FEB;&#x7167;&#x5907;&#x4EFD;&#xFF0C;&#x4F8B;&#x5982;Percona XtraBackup&#x548C;MySQL Enterprise Backup&#x662F;&#x6700;&#x597D;&#x7684;&#x9009;&#x62E9;&#x3002;&#x5BF9;&#x4E8E;&#x8F83;&#x5C0F;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x53EF;&#x4EE5;&#x5F88;&#x597D;&#x7684;&#x80DC;&#x4EFB;&#x3002;</li>
<li>&#x4FDD;&#x7559;&#x591A;&#x4E2A;&#x5907;&#x4EFD;&#x96C6;&#x3002;</li>
<li>&#x5B9A;&#x671F;&#x4ECE;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x6216;&#x8005;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x4E2D;&#x62BD;&#x53D6;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x6062;&#x590D;&#x6D4B;&#x8BD5;&#x3002;  </li>
<li>&#x4FDD;&#x5B58;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x81F3;&#x7528;&#x4E8E;&#x57FA;&#x4E8E;&#x6545;&#x969C;&#x65F6;&#x95F4;&#x70B9;&#x7684;&#x6062;&#x590D;&#x3002;<code>expire_logs_days</code>&#x53C2;&#x6570;&#x5E94;&#x8BE5;&#x8BBE;&#x7F6E;&#x5F97;&#x8DB3;&#x591F;&#x957F;&#xFF0C;&#x81F3;&#x5C11;&#x53EF;&#x4EE5;&#x4ECE;&#x6700;&#x8FD1;&#x4E24;&#x6B21;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x4E2D;&#x4F5C;&#x57FA;&#x4E8E;&#x65F6;&#x95F4;&#x70B9;&#x7684;&#x6062;&#x590D;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x4FDD;&#x6301;&#x4E3B;&#x5E93;&#x8FD0;&#x884C;&#x4E14;&#x4E0D;&#x5E94;&#x7528;&#x4EFB;&#x4F55;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5907;&#x5E93;&#x3002;&#x5907;&#x4EFD;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x81F3;&#x4E0E;&#x56FD;&#x65D7;&#x8BBE;&#x7F6E;&#x65E0;&#x5173;&#xFF0C;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x5907;&#x4EFD;&#x9700;&#x8981;&#x4FDD;&#x5B58;&#x8DB3;&#x591F;&#x957F;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x4EE5;&#x4FBF;&#x80FD;&#x591F;&#x4ECE;&#x6700;&#x8FD1;&#x7684;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x8FDB;&#x884C;&#x6062;&#x590D;&#x3002;</li>
<li>&#x5B8C;&#x5168;&#x4E0D;&#x501F;&#x52A9;&#x5907;&#x4EFD;&#x5DE5;&#x5177;&#x672C;&#x8EAB;&#x6765;&#x76D1;&#x63A7;&#x5907;&#x4EFD;&#x548C;&#x5907;&#x4EFD;&#x7684;&#x8FC7;&#x7A0B;&#x3002;&#x9700;&#x8981;&#x53E6;&#x5916;&#x9A8C;&#x8BC1;&#x5907;&#x4EFD;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x3002;</li>
<li>&#x901A;&#x8FC7;&#x6F14;&#x7EC3;&#x6574;&#x4E2A;&#x6062;&#x590D;&#x8FC7;&#x7A0B;&#x6765;&#x6D4B;&#x8BD5;&#x5907;&#x4EFD;&#x548C;&#x6062;&#x590D;&#x3002;&#x6D4B;&#x7B97;&#x6062;&#x590D;&#x6240;&#x9700;&#x8981;&#x7684;&#x8D44;&#x6E90;&#xFF08;CPU&#x3001;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x3001;&#x5B9E;&#x9645;&#x65F6;&#x95F4;&#xFF0C;&#x4EE5;&#x53CA;&#x7F51;&#x7EDC;&#x5E26;&#x5BBD;&#x7B49;&#xFF09;&#x3002;</li>
<li>&#x5BF9;&#x5B89;&#x5168;&#x6027;&#x8981;&#x4ED4;&#x7EC6;&#x8003;&#x8651;&#x3002;&#x5982;&#x679C;&#x6709;&#x4EBA;&#x80FD;&#x591F;&#x63A5;&#x89E6;&#x751F;&#x4EA7;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4ED6;&#x662F;&#x5426;&#x4E5F;&#x80FD;&#x8BBF;&#x95EE;&#x5907;&#x4EFD;&#x670D;&#x52A1;&#x5668;&#xFF1F;&#x53CD;&#x8FC7;&#x6765;&#x5462;&#xFF1F;</li>
</ul>
<p>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x80FD;&#x627F;&#x53D7;&#x7684;&#x6570;&#x636E;&#x4E22;&#x5931;&#x8D8A;&#x591A;&#xFF0C;&#x5907;&#x4EFD;&#x8D8A;&#x7B80;&#x5355;&#x3002;&#x5982;&#x679C;&#x6709;&#x975E;&#x5E38;&#x4E25;&#x82DB;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x8981;&#x786E;&#x4FDD;&#x80FD;&#x6062;&#x590D;&#x6240;&#x6709;&#x6570;&#x636E;&#xFF0C;&#x5907;&#x4EFD;&#x5C31;&#x5F88;&#x56F0;&#x96BE;&#x3002;&#x57FA;&#x4E8E;&#x6545;&#x969C;&#x65F6;&#x95F4;&#x70B9;&#x7684;&#x6062;&#x590D;&#x4E5F;&#x6709;&#x51E0;&#x7C7B;&#x3002;&#x4E00;&#x4E2A;&#x201C;&#x5BBD;&#x677E;&#x201D;&#x7684;&#x6545;&#x969C;&#x65F6;&#x95F4;&#x70B9;&#x6062;&#x590D;&#x9700;&#x6C42;&#x610F;&#x5473;&#x7740;&#x9700;&#x8981;&#x91CD;&#x5EFA;&#x6570;&#x636E;&#xFF0C;&#x77E5;&#x9053;&#x201C;&#x8DB3;&#x591F;&#x63A5;&#x8FD1;&#x201D;&#x95EE;&#x9898;&#x53D1;&#x751F;&#x7684;&#x65F6;&#x523B;&#x3002;&#x4E00;&#x4E2A;&#x201C;&#x786C;&#x6027;&#x201D;&#x7684;&#x9700;&#x6C42;&#x610F;&#x5473;&#x7740;&#x4E0D;&#x80FD;&#x5BB9;&#x5FCD;&#x4E22;&#x5931;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x5DF2;&#x63D0;&#x4EA4;&#x7684;&#x4E8B;&#x52A1;&#xFF0C;&#x5373;&#x4F7F;&#x67D0;&#x4E9B;&#x53EF;&#x6015;&#x7684;&#x4E8B;&#x60C5;&#x53D1;&#x751F;&#xFF08;&#x4F8B;&#x5982;&#x670D;&#x52A1;&#x5668;&#x7740;&#x706B;&#x4E86;&#xFF09;&#x3002;&#x8FD9;&#x9700;&#x8981;&#x7279;&#x522B;&#x7684;&#x6280;&#x672F;&#xFF0C;&#x4F8B;&#x5982;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x81F3;&#x4FDD;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x7684;SAN&#x5377;&#x6216;&#x4F7F;&#x7528;DRBD&#x78C1;&#x76D8;&#x590D;&#x5236;&#x3002;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x4F60;&#x8FD8;&#x8981;&#x8003;&#x8651;</p>
<ul>
<li>&#x5728;&#x7EBF;&#xFF08;&#x70ED;&#xFF09;&#x5907;&#x4EFD;&#x8FD8;&#x662F;&#x79BB;&#x7EBF;&#xFF08;&#x51B7;&#xFF09;&#x5907;&#x4EFD;&#xFF0C;&#x53C8;&#x6216;&#x8005;&#x6E29;&#x5907;&#x4EFD;&#xFF1F;</li>
<li>&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x8FD8;&#x662F;&#x7269;&#x7406;&#x5907;&#x4EFD;&#xFF1F;</li>
<li>&#x5907;&#x4EFD;&#x4EC0;&#x4E48;&#xFF1F;</li>
<li>&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x548C;&#x4E00;&#x81F4;&#x6027;&#xFF1F;</li>
</ul>
<p>&#x5728;&#x89C4;&#x5212;&#x5907;&#x4EFD;&#x65F6;&#xFF0C;&#x6709;&#x4E00;&#x4E9B;&#x4E0E;&#x6027;&#x80FD;&#x76F8;&#x5173;&#x7684;&#x56E0;&#x7D20;&#x9700;&#x8981;&#x8003;&#x8651;&#x3002;</p>
<ul>
<li>&#x9501;&#x65F6;&#x95F4;&#xFF1A;&#x9700;&#x8981;&#x6301;&#x6709;&#x9501;&#x591A;&#x957F;&#x65F6;&#x95F4;&#xFF0C;&#x4F8B;&#x5982;&#x5728;&#x5907;&#x4EFD;&#x671F;&#x95F4;&#x6301;&#x6709;&#x7684;&#x5168;&#x5C40; <code>flush tables with read lock</code>?</li>
<li>&#x5907;&#x4EFD;&#x65F6;&#x95F4;&#xFF1A;&#x590D;&#x5236;&#x5907;&#x4EFD;&#x5230;&#x76EE;&#x7684;&#x5730;&#x9700;&#x8981;&#x591A;&#x4E45;&#xFF1F;</li>
<li>&#x5907;&#x4EFD;&#x8D1F;&#x8F7D;&#xFF1A;&#x5728;&#x590D;&#x5236;&#x5907;&#x4EFD;&#x5230;&#x76EE;&#x7684;&#x5730;&#x65F6;&#x5BF9;&#x670D;&#x52A1;&#x5668;&#x6027;&#x80FD;&#x7684;&#x5F71;&#x54CD;&#x6709;&#x591A;&#x5C11;&#xFF1F;</li>
<li>&#x6062;&#x590D;&#x65F6;&#x95F4;&#xFF1A;&#x628A;&#x5907;&#x4EFD;&#x955C;&#x50CF;&#x4ECE;&#x5B58;&#x50A8;&#x4F4D;&#x7F6E;&#x590D;&#x5236;&#x5230;MySQL&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x91CD;&#x653E;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x7B49;&#xFF0C;&#x9700;&#x8981;&#x591A;&#x4E45;&#xFF1F;</li>
</ul>
<p>&#x6700;&#x5927;&#x7684;&#x6743;&#x8861;&#x65F6;&#x5907;&#x4EFD;&#x65F6;&#x95F4;&#x4E0E;&#x5907;&#x4EFD;&#x8D1F;&#x8F7D;&#x3002;&#x53EF;&#x4EE5;&#x727A;&#x7272;&#x5176;&#x4E00;&#x4EE5;&#x589E;&#x52A0;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x5907;&#x4EFD;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x4EE3;&#x4EF7;&#x662F;&#x964D;&#x4F4E;&#x670D;&#x52A1;&#x5668;&#x6027;&#x80FD;&#x3002;&#x540C;&#x6837;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x8D1F;&#x8F7D;&#x7684;&#x7279;&#x6027;&#x6765;&#x8BBE;&#x8BA1;&#x5907;&#x4EFD;&#x3002;</p>
<hr>
<h3 id="&#x5B9E;&#x6218;&#x9879;&#x76EE;"><a href="#&#x5B9E;&#x6218;&#x9879;&#x76EE;" class="headerlink" title="&#x5B9E;&#x6218;&#x9879;&#x76EE;"></a>&#x5B9E;&#x6218;&#x9879;&#x76EE;</h3><blockquote>
<p>&#x5B9E;&#x6218;&#x9879;&#x76EE;1: &#x811A;&#x672C;&#x5229;&#x7528;LVM&#x5FEB;&#x7167;&#x5B9E;&#x73B0;&#x7269;&#x7406;&#x5907;&#x4EFD;</p>
</blockquote>
<blockquote>
<p>&#x5B9E;&#x6218;&#x9879;&#x76EE;2: &#x7F16;&#x5199;MySQL&#x5907;&#x4EFD;&#x811A;&#x672C;&#xFF08;&#x903B;&#x8F91;/&#x7269;&#x7406;/&#x5B8C;&#x5168;/&#x589E;&#x91CF;&#xFF09;</p>
</blockquote>
<blockquote>
<p>&#x5B9E;&#x6218;&#x9879;&#x76EE;3: &#x603B;&#x7ED3;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x548C;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x7684;&#x533A;&#x522B;</p>
</blockquote>
<blockquote>
<p>&#x5B9E;&#x6218;&#x9879;&#x76EE;4: &#x5C06; MySQL &#x4E2D;&#x7684;&#x6570;&#x636E;&#x8FC1;&#x79FB;&#x5230; MariaDB</p>
</blockquote>
<hr>
<h3 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h3><p>&#x91CD;&#x70B9;&#x638C;&#x63E1;</p>
<ol>
<li>&#x5907;&#x4EFD;&#x6982;&#x5FF5;</li>
<li>&#x5907;&#x4EFD;&#x7684;&#x8FC7;&#x7A0B;</li>
<li>Mysqldump&#x547D;&#x4EE4;</li>
<li>&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;</li>
<li>&#x4E0D;&#x540C;&#x7684;&#x5907;&#x4EFD;&#x65B9;&#x6CD5;&#x7684;&#x539F;&#x7406;&#x4EE5;&#x53CA;&#x5907;&#x4EFD;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F1A;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;</li>
<li>&#x6E05;&#x695A;&#x6BCF;&#x4E00;&#x79CD;&#x5907;&#x4EFD;&#x65B9;&#x6CD5;&#x7684;&#x4F18;&#x7F3A;&#x70B9;</li>
<li>&#x638C;&#x63E1;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x7684;&#x8FD8;&#x539F;</li>
</ol>
<p>&#x96BE;&#x70B9;</p>
<ol>
<li>&#x5907;&#x4EFD;&#x4E0E;&#x5197;&#x4F59;&#x7684;&#x533A;&#x522B;</li>
<li>&#x5907;&#x4EFD;&#x4E2D;&#x670D;&#x52A1;&#x53EF;&#x7528;&#x6027;&#x4E0E;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;</li>
<li>MVCC&#x7248;&#x672C;&#x63A7;&#x5236;&#x673A;&#x5236;</li>
<li>&#x5907;&#x4EFD;&#x4E2D;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x548C;&#x670D;&#x52A1;&#x53EF;&#x7528;&#x6027;&#x7684;&#x7406;&#x89E3;</li>
<li>Percona XtraBackup&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x548C;&#x8FD8;&#x539F;&#x7684;&#x539F;&#x7406;</li>
</ol>

    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/%E5%9F%B9%E8%AE%AD/">#培训</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/MySQL%E5%9F%BA%E7%A1%80%E7%AE%A1%E7%90%86/">#MySQL基础管理</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/2016/12/30/booboo_mysql/03-MySQL-logical-architecture-and-InnoDB-storage-engine/">MySQL 管理课程 第六课 MySQL逻辑架构和Innodb存储引擎</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/2016/12/28/booboo_mysql/02-SQL02/">MySQL 管理课程 第四课 结构化查询语言SQL介绍和基本操作2</a>
            
        </span>
    </div>
    
</article>


<div class="sharebox">
    
<div class="sharethis-inline-share-buttons"></div>
<script type='text/javascript' src='//platform-api.sharethis.com/js/sharethis.js#property=5e7f26910c743700190536a1&amp;product=inline-share-buttons&amp;cms=sop&#39; async=&#39;async&#39;' async='async'></script>

</div>



<div class="comments">
    <h3 class="title is-4">评论</h3>
    
<div id="comment-container"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
	var gitment = new Gitment({
		id: '2016/12/29/booboo_mysql/03-MySQL-backup-and-recovery/',
		owner: 'booboowei',
		repo: 'booboowei.github.io',
		oauth: {
			client_id: 'af999a0c30ad557db57d',
			client_secret: 'e8187ce46941faf83cd26f8d53e40f2cd63900a9',
		},
	})
	gitment.render('comment-container')
</script>

</div>

    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2020 BoobooWei&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            <div class="column is-narrow">
                <div class="columns is-mobile is-multiline is-centered">
                
                    
                <a class="column is-narrow has-text-black" title="GitHub" href="https://github.com/booboowei" target="_blank" rel="noopener">
                    
                    GitHub
                    
                </a>
                
                </div>
            </div>
            
            
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/" target="_blank" rel="noopener">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("zh-CN");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
</script>

    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
            cursor: pointer;
        }

        .hljs .clipboard-btn:hover {
          color: #8a8a8a;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    



<script src="/js/script.js"></script>


    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="站内搜索" />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>

<script src="/js/insight.js"></script>

    
</body>
</html>